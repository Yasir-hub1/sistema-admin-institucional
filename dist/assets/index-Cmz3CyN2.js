function W0(s,r){for(var a=0;a<r.length;a++){const t=r[a];if(typeof t!="string"&&!Array.isArray(t)){for(const n in t)if(n!=="default"&&!(n in s)){const o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(s,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();function vx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jx={exports:{}},ml={},Nx={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=Symbol.for("react.element"),K0=Symbol.for("react.portal"),Z0=Symbol.for("react.fragment"),J0=Symbol.for("react.strict_mode"),Y0=Symbol.for("react.profiler"),X0=Symbol.for("react.provider"),ep=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),rp=Symbol.for("react.suspense"),ap=Symbol.for("react.memo"),tp=Symbol.for("react.lazy"),lm=Symbol.iterator;function np(s){return s===null||typeof s!="object"?null:(s=lm&&s[lm]||s["@@iterator"],typeof s=="function"?s:null)}var wx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ex=Object.assign,kx={};function wn(s,r,a){this.props=s,this.context=r,this.refs=kx,this.updater=a||wx}wn.prototype.isReactComponent={};wn.prototype.setState=function(s,r){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,r,"setState")};wn.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function _x(){}_x.prototype=wn.prototype;function Kd(s,r,a){this.props=s,this.context=r,this.refs=kx,this.updater=a||wx}var Zd=Kd.prototype=new _x;Zd.constructor=Kd;Ex(Zd,wn.prototype);Zd.isPureReactComponent=!0;var cm=Array.isArray,Sx=Object.prototype.hasOwnProperty,Jd={current:null},Cx={key:!0,ref:!0,__self:!0,__source:!0};function Rx(s,r,a){var t,n={},o=null,i=null;if(r!=null)for(t in r.ref!==void 0&&(i=r.ref),r.key!==void 0&&(o=""+r.key),r)Sx.call(r,t)&&!Cx.hasOwnProperty(t)&&(n[t]=r[t]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(s&&s.defaultProps)for(t in l=s.defaultProps,l)n[t]===void 0&&(n[t]=l[t]);return{$$typeof:Po,type:s,key:o,ref:i,props:n,_owner:Jd.current}}function op(s,r){return{$$typeof:Po,type:s.type,key:r,ref:s.ref,props:s.props,_owner:s._owner}}function Yd(s){return typeof s=="object"&&s!==null&&s.$$typeof===Po}function ip(s){var r={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(a){return r[a]})}var dm=/\/+/g;function Bl(s,r){return typeof s=="object"&&s!==null&&s.key!=null?ip(""+s.key):r.toString(36)}function gi(s,r,a,t,n){var o=typeof s;(o==="undefined"||o==="boolean")&&(s=null);var i=!1;if(s===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(s.$$typeof){case Po:case K0:i=!0}}if(i)return i=s,n=n(i),s=t===""?"."+Bl(i,0):t,cm(n)?(a="",s!=null&&(a=s.replace(dm,"$&/")+"/"),gi(n,r,a,"",function(d){return d})):n!=null&&(Yd(n)&&(n=op(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(dm,"$&/")+"/")+s)),r.push(n)),1;if(i=0,t=t===""?".":t+":",cm(s))for(var l=0;l<s.length;l++){o=s[l];var c=t+Bl(o,l);i+=gi(o,r,a,c,n)}else if(c=np(s),typeof c=="function")for(s=c.call(s),l=0;!(o=s.next()).done;)o=o.value,c=t+Bl(o,l++),i+=gi(o,r,a,c,n);else if(o==="object")throw r=String(s),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return i}function qo(s,r,a){if(s==null)return s;var t=[],n=0;return gi(s,t,"","",function(o){return r.call(a,o,n++)}),t}function lp(s){if(s._status===-1){var r=s._result;r=r(),r.then(function(a){(s._status===0||s._status===-1)&&(s._status=1,s._result=a)},function(a){(s._status===0||s._status===-1)&&(s._status=2,s._result=a)}),s._status===-1&&(s._status=0,s._result=r)}if(s._status===1)return s._result.default;throw s._result}var or={current:null},xi={transition:null},cp={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:xi,ReactCurrentOwner:Jd};function Ax(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:qo,forEach:function(s,r,a){qo(s,function(){r.apply(this,arguments)},a)},count:function(s){var r=0;return qo(s,function(){r++}),r},toArray:function(s){return qo(s,function(r){return r})||[]},only:function(s){if(!Yd(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Qe.Component=wn;Qe.Fragment=Z0;Qe.Profiler=Y0;Qe.PureComponent=Kd;Qe.StrictMode=J0;Qe.Suspense=rp;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cp;Qe.act=Ax;Qe.cloneElement=function(s,r,a){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var t=Ex({},s.props),n=s.key,o=s.ref,i=s._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,i=Jd.current),r.key!==void 0&&(n=""+r.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(c in r)Sx.call(r,c)&&!Cx.hasOwnProperty(c)&&(t[c]=r[c]===void 0&&l!==void 0?l[c]:r[c])}var c=arguments.length-2;if(c===1)t.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];t.children=l}return{$$typeof:Po,type:s.type,key:n,ref:o,props:t,_owner:i}};Qe.createContext=function(s){return s={$$typeof:ep,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:X0,_context:s},s.Consumer=s};Qe.createElement=Rx;Qe.createFactory=function(s){var r=Rx.bind(null,s);return r.type=s,r};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(s){return{$$typeof:sp,render:s}};Qe.isValidElement=Yd;Qe.lazy=function(s){return{$$typeof:tp,_payload:{_status:-1,_result:s},_init:lp}};Qe.memo=function(s,r){return{$$typeof:ap,type:s,compare:r===void 0?null:r}};Qe.startTransition=function(s){var r=xi.transition;xi.transition={};try{s()}finally{xi.transition=r}};Qe.unstable_act=Ax;Qe.useCallback=function(s,r){return or.current.useCallback(s,r)};Qe.useContext=function(s){return or.current.useContext(s)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(s){return or.current.useDeferredValue(s)};Qe.useEffect=function(s,r){return or.current.useEffect(s,r)};Qe.useId=function(){return or.current.useId()};Qe.useImperativeHandle=function(s,r,a){return or.current.useImperativeHandle(s,r,a)};Qe.useInsertionEffect=function(s,r){return or.current.useInsertionEffect(s,r)};Qe.useLayoutEffect=function(s,r){return or.current.useLayoutEffect(s,r)};Qe.useMemo=function(s,r){return or.current.useMemo(s,r)};Qe.useReducer=function(s,r,a){return or.current.useReducer(s,r,a)};Qe.useRef=function(s){return or.current.useRef(s)};Qe.useState=function(s){return or.current.useState(s)};Qe.useSyncExternalStore=function(s,r,a){return or.current.useSyncExternalStore(s,r,a)};Qe.useTransition=function(){return or.current.useTransition()};Qe.version="18.3.1";Nx.exports=Qe;var u=Nx.exports;const Be=vx(u),dp=W0({__proto__:null,default:Be},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up=u,mp=Symbol.for("react.element"),gp=Symbol.for("react.fragment"),xp=Object.prototype.hasOwnProperty,hp=up.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fp={key:!0,ref:!0,__self:!0,__source:!0};function Px(s,r,a){var t,n={},o=null,i=null;a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(i=r.ref);for(t in r)xp.call(r,t)&&!fp.hasOwnProperty(t)&&(n[t]=r[t]);if(s&&s.defaultProps)for(t in r=s.defaultProps,r)n[t]===void 0&&(n[t]=r[t]);return{$$typeof:mp,type:s,key:o,ref:i,props:n,_owner:hp.current}}ml.Fragment=gp;ml.jsx=Px;ml.jsxs=Px;jx.exports=ml;var e=jx.exports,Lc={},Tx={exports:{}},Er={},Dx={exports:{}},Ox={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function r(H,K){var te=H.length;H.push(K);e:for(;0<te;){var W=te-1>>>1,O=H[W];if(0<n(O,K))H[W]=K,H[te]=O,te=W;else break e}}function a(H){return H.length===0?null:H[0]}function t(H){if(H.length===0)return null;var K=H[0],te=H.pop();if(te!==K){H[0]=te;e:for(var W=0,O=H.length,z=O>>>1;W<z;){var Y=2*(W+1)-1,Z=H[Y],U=Y+1,ee=H[U];if(0>n(Z,te))U<O&&0>n(ee,Z)?(H[W]=ee,H[U]=te,W=U):(H[W]=Z,H[Y]=te,W=Y);else if(U<O&&0>n(ee,te))H[W]=ee,H[U]=te,W=U;else break e}}return K}function n(H,K){var te=H.sortIndex-K.sortIndex;return te!==0?te:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();s.unstable_now=function(){return i.now()-l}}var c=[],d=[],g=1,x=null,y=3,w=!1,k=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var K=a(d);K!==null;){if(K.callback===null)t(d);else if(K.startTime<=H)t(d),K.sortIndex=K.expirationTime,r(c,K);else break;K=a(d)}}function E(H){if(S=!1,_(H),!k)if(a(c)!==null)k=!0,ne(b);else{var K=a(d);K!==null&&ce(E,K.startTime-H)}}function b(H,K){k=!1,S&&(S=!1,N(R),R=-1),w=!0;var te=y;try{for(_(K),x=a(c);x!==null&&(!(x.expirationTime>K)||H&&!$());){var W=x.callback;if(typeof W=="function"){x.callback=null,y=x.priorityLevel;var O=W(x.expirationTime<=K);K=s.unstable_now(),typeof O=="function"?x.callback=O:x===a(c)&&t(c),_(K)}else t(c);x=a(c)}if(x!==null)var z=!0;else{var Y=a(d);Y!==null&&ce(E,Y.startTime-K),z=!1}return z}finally{x=null,y=te,w=!1}}var f=!1,P=null,R=-1,q=5,I=-1;function $(){return!(s.unstable_now()-I<q)}function G(){if(P!==null){var H=s.unstable_now();I=H;var K=!0;try{K=P(!0,H)}finally{K?V():(f=!1,P=null)}}else f=!1}var V;if(typeof p=="function")V=function(){p(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ae=F.port2;F.port1.onmessage=G,V=function(){ae.postMessage(null)}}else V=function(){C(G,0)};function ne(H){P=H,f||(f=!0,V())}function ce(H,K){R=C(function(){H(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_continueExecution=function(){k||w||(k=!0,ne(b))},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return a(c)},s.unstable_next=function(H){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var te=y;y=K;try{return H()}finally{y=te}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=y;y=H;try{return K()}finally{y=te}},s.unstable_scheduleCallback=function(H,K,te){var W=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?W+te:W):te=W,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,H={id:g++,callback:K,priorityLevel:H,startTime:te,expirationTime:O,sortIndex:-1},te>W?(H.sortIndex=te,r(d,H),a(c)===null&&H===a(d)&&(S?(N(R),R=-1):S=!0,ce(E,te-W))):(H.sortIndex=O,r(c,H),k||w||(k=!0,ne(b))),H},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(H){var K=y;return function(){var te=y;y=K;try{return H.apply(this,arguments)}finally{y=te}}}})(Ox);Dx.exports=Ox;var pp=Dx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=u,wr=pp;function Re(s){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ix=new Set,uo={};function Ot(s,r){hn(s,r),hn(s+"Capture",r)}function hn(s,r){for(uo[s]=r,s=0;s<r.length;s++)Ix.add(r[s])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=Object.prototype.hasOwnProperty,bp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um={},mm={};function vp(s){return zc.call(mm,s)?!0:zc.call(um,s)?!1:bp.test(s)?mm[s]=!0:(um[s]=!0,!1)}function jp(s,r,a,t){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return t?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function Np(s,r,a,t){if(r===null||typeof r>"u"||jp(s,r,a,t))return!0;if(t)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function ir(s,r,a,t,n,o,i){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=t,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=s,this.type=r,this.sanitizeURL=o,this.removeEmptyString=i}var Gs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Gs[s]=new ir(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var r=s[0];Gs[r]=new ir(r,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Gs[s]=new ir(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Gs[s]=new ir(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Gs[s]=new ir(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Gs[s]=new ir(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Gs[s]=new ir(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Gs[s]=new ir(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Gs[s]=new ir(s,5,!1,s.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function eu(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var r=s.replace(Xd,eu);Gs[r]=new ir(r,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var r=s.replace(Xd,eu);Gs[r]=new ir(r,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var r=s.replace(Xd,eu);Gs[r]=new ir(r,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Gs[s]=new ir(s,1,!1,s.toLowerCase(),null,!1,!1)});Gs.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Gs[s]=new ir(s,1,!1,s.toLowerCase(),null,!0,!0)});function su(s,r,a,t){var n=Gs.hasOwnProperty(r)?Gs[r]:null;(n!==null?n.type!==0:t||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Np(r,a,n,t)&&(a=null),t||n===null?vp(r)&&(a===null?s.removeAttribute(r):s.setAttribute(r,""+a)):n.mustUseProperty?s[n.propertyName]=a===null?n.type===3?!1:"":a:(r=n.attributeName,t=n.attributeNamespace,a===null?s.removeAttribute(r):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,t?s.setAttributeNS(t,r,a):s.setAttribute(r,a))))}var ja=yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ho=Symbol.for("react.element"),Gt=Symbol.for("react.portal"),Qt=Symbol.for("react.fragment"),ru=Symbol.for("react.strict_mode"),Uc=Symbol.for("react.profiler"),Mx=Symbol.for("react.provider"),Fx=Symbol.for("react.context"),au=Symbol.for("react.forward_ref"),$c=Symbol.for("react.suspense"),Vc=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),Ra=Symbol.for("react.lazy"),Lx=Symbol.for("react.offscreen"),gm=Symbol.iterator;function An(s){return s===null||typeof s!="object"?null:(s=gm&&s[gm]||s["@@iterator"],typeof s=="function"?s:null)}var Ns=Object.assign,ql;function Wn(s){if(ql===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ql=r&&r[1]||""}return`
`+ql+s}var Hl=!1;function Gl(s,r){if(!s||Hl)return"";Hl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(d){var t=d}Reflect.construct(s,[],r)}else{try{r.call()}catch(d){t=d}s.call(r.prototype)}else{try{throw Error()}catch(d){t=d}s()}}catch(d){if(d&&t&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),o=t.stack.split(`
`),i=n.length-1,l=o.length-1;1<=i&&0<=l&&n[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||n[i]!==o[l]){var c=`
`+n[i].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=i&&0<=l);break}}}finally{Hl=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?Wn(s):""}function wp(s){switch(s.tag){case 5:return Wn(s.type);case 16:return Wn("Lazy");case 13:return Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 2:case 15:return s=Gl(s.type,!1),s;case 11:return s=Gl(s.type.render,!1),s;case 1:return s=Gl(s.type,!0),s;default:return""}}function Bc(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Qt:return"Fragment";case Gt:return"Portal";case Uc:return"Profiler";case ru:return"StrictMode";case $c:return"Suspense";case Vc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Fx:return(s.displayName||"Context")+".Consumer";case Mx:return(s._context.displayName||"Context")+".Provider";case au:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case tu:return r=s.displayName||null,r!==null?r:Bc(s.type)||"Memo";case Ra:r=s._payload,s=s._init;try{return Bc(s(r))}catch{}}return null}function Ep(s){var r=s.type;switch(s.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=r.render,s=s.displayName||s.name||"",r.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bc(r);case 8:return r===ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ya(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function zx(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function kp(s){var r=zx(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),t=""+s[r];if(!s.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return n.call(this)},set:function(i){t=""+i,o.call(this,i)}}),Object.defineProperty(s,r,{enumerable:a.enumerable}),{getValue:function(){return t},setValue:function(i){t=""+i},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Go(s){s._valueTracker||(s._valueTracker=kp(s))}function Ux(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),t="";return s&&(t=zx(s)?s.checked?"true":"false":s.value),s=t,s!==a?(r.setValue(s),!0):!1}function Di(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function qc(s,r){var a=r.checked;return Ns({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function xm(s,r){var a=r.defaultValue==null?"":r.defaultValue,t=r.checked!=null?r.checked:r.defaultChecked;a=Ya(r.value!=null?r.value:a),s._wrapperState={initialChecked:t,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function $x(s,r){r=r.checked,r!=null&&su(s,"checked",r,!1)}function Hc(s,r){$x(s,r);var a=Ya(r.value),t=r.type;if(a!=null)t==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(t==="submit"||t==="reset"){s.removeAttribute("value");return}r.hasOwnProperty("value")?Gc(s,r.type,a):r.hasOwnProperty("defaultValue")&&Gc(s,r.type,Ya(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(s.defaultChecked=!!r.defaultChecked)}function hm(s,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var t=r.type;if(!(t!=="submit"&&t!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+s._wrapperState.initialValue,a||r===s.value||(s.value=r),s.defaultValue=r}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function Gc(s,r,a){(r!=="number"||Di(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var Kn=Array.isArray;function nn(s,r,a,t){if(s=s.options,r){r={};for(var n=0;n<a.length;n++)r["$"+a[n]]=!0;for(a=0;a<s.length;a++)n=r.hasOwnProperty("$"+s[a].value),s[a].selected!==n&&(s[a].selected=n),n&&t&&(s[a].defaultSelected=!0)}else{for(a=""+Ya(a),r=null,n=0;n<s.length;n++){if(s[n].value===a){s[n].selected=!0,t&&(s[n].defaultSelected=!0);return}r!==null||s[n].disabled||(r=s[n])}r!==null&&(r.selected=!0)}}function Qc(s,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Ns({},r,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function fm(s,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(Re(92));if(Kn(a)){if(1<a.length)throw Error(Re(93));a=a[0]}r=a}r==null&&(r=""),a=r}s._wrapperState={initialValue:Ya(a)}}function Vx(s,r){var a=Ya(r.value),t=Ya(r.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),r.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),t!=null&&(s.defaultValue=""+t)}function pm(s){var r=s.textContent;r===s._wrapperState.initialValue&&r!==""&&r!==null&&(s.value=r)}function Bx(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wc(s,r){return s==null||s==="http://www.w3.org/1999/xhtml"?Bx(r):s==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Qo,qx=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,t,n){MSApp.execUnsafeLocalFunction(function(){return s(r,a,t,n)})}:s}(function(s,r){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=r;else{for(Qo=Qo||document.createElement("div"),Qo.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Qo.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)s.appendChild(r.firstChild)}});function mo(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_p=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(s){_p.forEach(function(r){r=r+s.charAt(0).toUpperCase()+s.substring(1),Yn[r]=Yn[s]})});function Hx(s,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Yn.hasOwnProperty(s)&&Yn[s]?(""+r).trim():r+"px"}function Gx(s,r){s=s.style;for(var a in r)if(r.hasOwnProperty(a)){var t=a.indexOf("--")===0,n=Hx(a,r[a],t);a==="float"&&(a="cssFloat"),t?s.setProperty(a,n):s[a]=n}}var Sp=Ns({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kc(s,r){if(r){if(Sp[s]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Re(137,s));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Re(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Re(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Re(62))}}function Zc(s,r){if(s.indexOf("-")===-1)return typeof r.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=null;function nu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yc=null,on=null,ln=null;function ym(s){if(s=Oo(s)){if(typeof Yc!="function")throw Error(Re(280));var r=s.stateNode;r&&(r=pl(r),Yc(s.stateNode,s.type,r))}}function Qx(s){on?ln?ln.push(s):ln=[s]:on=s}function Wx(){if(on){var s=on,r=ln;if(ln=on=null,ym(s),r)for(s=0;s<r.length;s++)ym(r[s])}}function Kx(s,r){return s(r)}function Zx(){}var Ql=!1;function Jx(s,r,a){if(Ql)return s(r,a);Ql=!0;try{return Kx(s,r,a)}finally{Ql=!1,(on!==null||ln!==null)&&(Zx(),Wx())}}function go(s,r){var a=s.stateNode;if(a===null)return null;var t=pl(a);if(t===null)return null;a=t[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(s=s.type,t=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!t;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(Re(231,r,typeof a));return a}var Xc=!1;if(fa)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Xc=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Xc=!1}function Cp(s,r,a,t,n,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{r.apply(a,d)}catch(g){this.onError(g)}}var Xn=!1,Oi=null,Ii=!1,ed=null,Rp={onError:function(s){Xn=!0,Oi=s}};function Ap(s,r,a,t,n,o,i,l,c){Xn=!1,Oi=null,Cp.apply(Rp,arguments)}function Pp(s,r,a,t,n,o,i,l,c){if(Ap.apply(this,arguments),Xn){if(Xn){var d=Oi;Xn=!1,Oi=null}else throw Error(Re(198));Ii||(Ii=!0,ed=d)}}function It(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,r.flags&4098&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function Yx(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function bm(s){if(It(s)!==s)throw Error(Re(188))}function Tp(s){var r=s.alternate;if(!r){if(r=It(s),r===null)throw Error(Re(188));return r!==s?null:s}for(var a=s,t=r;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(t=n.return,t!==null){a=t;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return bm(n),s;if(o===t)return bm(n),r;o=o.sibling}throw Error(Re(188))}if(a.return!==t.return)a=n,t=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,t=o;break}if(l===t){i=!0,t=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,t=n;break}if(l===t){i=!0,t=o,a=n;break}l=l.sibling}if(!i)throw Error(Re(189))}}if(a.alternate!==t)throw Error(Re(190))}if(a.tag!==3)throw Error(Re(188));return a.stateNode.current===a?s:r}function Xx(s){return s=Tp(s),s!==null?eh(s):null}function eh(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var r=eh(s);if(r!==null)return r;s=s.sibling}return null}var sh=wr.unstable_scheduleCallback,vm=wr.unstable_cancelCallback,Dp=wr.unstable_shouldYield,Op=wr.unstable_requestPaint,_s=wr.unstable_now,Ip=wr.unstable_getCurrentPriorityLevel,ou=wr.unstable_ImmediatePriority,rh=wr.unstable_UserBlockingPriority,Mi=wr.unstable_NormalPriority,Mp=wr.unstable_LowPriority,ah=wr.unstable_IdlePriority,gl=null,sa=null;function Fp(s){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(gl,s,void 0,(s.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:Up,Lp=Math.log,zp=Math.LN2;function Up(s){return s>>>=0,s===0?32:31-(Lp(s)/zp|0)|0}var Wo=64,Ko=4194304;function Zn(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Fi(s,r){var a=s.pendingLanes;if(a===0)return 0;var t=0,n=s.suspendedLanes,o=s.pingedLanes,i=a&268435455;if(i!==0){var l=i&~n;l!==0?t=Zn(l):(o&=i,o!==0&&(t=Zn(o)))}else i=a&~n,i!==0?t=Zn(i):o!==0&&(t=Zn(o));if(t===0)return 0;if(r!==0&&r!==t&&!(r&n)&&(n=t&-t,o=r&-r,n>=o||n===16&&(o&4194240)!==0))return r;if(t&4&&(t|=a&16),r=s.entangledLanes,r!==0)for(s=s.entanglements,r&=t;0<r;)a=31-Br(r),n=1<<a,t|=s[a],r&=~n;return t}function $p(s,r){switch(s){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vp(s,r){for(var a=s.suspendedLanes,t=s.pingedLanes,n=s.expirationTimes,o=s.pendingLanes;0<o;){var i=31-Br(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&t)&&(n[i]=$p(l,r)):c<=r&&(s.expiredLanes|=l),o&=~l}}function sd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function th(){var s=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),s}function Wl(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function To(s,r,a){s.pendingLanes|=r,r!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,r=31-Br(r),s[r]=a}function Bp(s,r){var a=s.pendingLanes&~r;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=r,s.mutableReadLanes&=r,s.entangledLanes&=r,r=s.entanglements;var t=s.eventTimes;for(s=s.expirationTimes;0<a;){var n=31-Br(a),o=1<<n;r[n]=0,t[n]=-1,s[n]=-1,a&=~o}}function iu(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var t=31-Br(a),n=1<<t;n&r|s[t]&r&&(s[t]|=r),a&=~n}}var as=0;function nh(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var oh,lu,ih,lh,ch,rd=!1,Zo=[],Va=null,Ba=null,qa=null,xo=new Map,ho=new Map,Oa=[],qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jm(s,r){switch(s){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":xo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ho.delete(r.pointerId)}}function Tn(s,r,a,t,n,o){return s===null||s.nativeEvent!==o?(s={blockedOn:r,domEventName:a,eventSystemFlags:t,nativeEvent:o,targetContainers:[n]},r!==null&&(r=Oo(r),r!==null&&lu(r)),s):(s.eventSystemFlags|=t,r=s.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),s)}function Hp(s,r,a,t,n){switch(r){case"focusin":return Va=Tn(Va,s,r,a,t,n),!0;case"dragenter":return Ba=Tn(Ba,s,r,a,t,n),!0;case"mouseover":return qa=Tn(qa,s,r,a,t,n),!0;case"pointerover":var o=n.pointerId;return xo.set(o,Tn(xo.get(o)||null,s,r,a,t,n)),!0;case"gotpointercapture":return o=n.pointerId,ho.set(o,Tn(ho.get(o)||null,s,r,a,t,n)),!0}return!1}function dh(s){var r=pt(s.target);if(r!==null){var a=It(r);if(a!==null){if(r=a.tag,r===13){if(r=Yx(a),r!==null){s.blockedOn=r,ch(s.priority,function(){ih(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hi(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=ad(s.domEventName,s.eventSystemFlags,r[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var t=new a.constructor(a.type,a);Jc=t,a.target.dispatchEvent(t),Jc=null}else return r=Oo(a),r!==null&&lu(r),s.blockedOn=a,!1;r.shift()}return!0}function Nm(s,r,a){hi(s)&&a.delete(r)}function Gp(){rd=!1,Va!==null&&hi(Va)&&(Va=null),Ba!==null&&hi(Ba)&&(Ba=null),qa!==null&&hi(qa)&&(qa=null),xo.forEach(Nm),ho.forEach(Nm)}function Dn(s,r){s.blockedOn===r&&(s.blockedOn=null,rd||(rd=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,Gp)))}function fo(s){function r(n){return Dn(n,s)}if(0<Zo.length){Dn(Zo[0],s);for(var a=1;a<Zo.length;a++){var t=Zo[a];t.blockedOn===s&&(t.blockedOn=null)}}for(Va!==null&&Dn(Va,s),Ba!==null&&Dn(Ba,s),qa!==null&&Dn(qa,s),xo.forEach(r),ho.forEach(r),a=0;a<Oa.length;a++)t=Oa[a],t.blockedOn===s&&(t.blockedOn=null);for(;0<Oa.length&&(a=Oa[0],a.blockedOn===null);)dh(a),a.blockedOn===null&&Oa.shift()}var cn=ja.ReactCurrentBatchConfig,Li=!0;function Qp(s,r,a,t){var n=as,o=cn.transition;cn.transition=null;try{as=1,cu(s,r,a,t)}finally{as=n,cn.transition=o}}function Wp(s,r,a,t){var n=as,o=cn.transition;cn.transition=null;try{as=4,cu(s,r,a,t)}finally{as=n,cn.transition=o}}function cu(s,r,a,t){if(Li){var n=ad(s,r,a,t);if(n===null)tc(s,r,t,zi,a),jm(s,t);else if(Hp(n,s,r,a,t))t.stopPropagation();else if(jm(s,t),r&4&&-1<qp.indexOf(s)){for(;n!==null;){var o=Oo(n);if(o!==null&&oh(o),o=ad(s,r,a,t),o===null&&tc(s,r,t,zi,a),o===n)break;n=o}n!==null&&t.stopPropagation()}else tc(s,r,t,null,a)}}var zi=null;function ad(s,r,a,t){if(zi=null,s=nu(t),s=pt(s),s!==null)if(r=It(s),r===null)s=null;else if(a=r.tag,a===13){if(s=Yx(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null);return zi=s,null}function uh(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ip()){case ou:return 1;case rh:return 4;case Mi:case Mp:return 16;case ah:return 536870912;default:return 16}default:return 16}}var za=null,du=null,fi=null;function mh(){if(fi)return fi;var s,r=du,a=r.length,t,n="value"in za?za.value:za.textContent,o=n.length;for(s=0;s<a&&r[s]===n[s];s++);var i=a-s;for(t=1;t<=i&&r[a-t]===n[o-t];t++);return fi=n.slice(s,1<t?1-t:void 0)}function pi(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Jo(){return!0}function wm(){return!1}function kr(s){function r(a,t,n,o,i){this._reactName=a,this._targetInst=n,this.type=t,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(a=s[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Jo:wm,this.isPropagationStopped=wm,this}return Ns(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),r}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=kr(En),Do=Ns({},En,{view:0,detail:0}),Kp=kr(Do),Kl,Zl,On,xl=Ns({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==On&&(On&&s.type==="mousemove"?(Kl=s.screenX-On.screenX,Zl=s.screenY-On.screenY):Zl=Kl=0,On=s),Kl)},movementY:function(s){return"movementY"in s?s.movementY:Zl}}),Em=kr(xl),Zp=Ns({},xl,{dataTransfer:0}),Jp=kr(Zp),Yp=Ns({},Do,{relatedTarget:0}),Jl=kr(Yp),Xp=Ns({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),ey=kr(Xp),sy=Ns({},En,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ry=kr(sy),ay=Ns({},En,{data:0}),km=kr(ay),ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ny={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iy(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=oy[s])?!!r[s]:!1}function mu(){return iy}var ly=Ns({},Do,{key:function(s){if(s.key){var r=ty[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=pi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ny[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mu,charCode:function(s){return s.type==="keypress"?pi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?pi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),cy=kr(ly),dy=Ns({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=kr(dy),uy=Ns({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mu}),my=kr(uy),gy=Ns({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),xy=kr(gy),hy=Ns({},xl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fy=kr(hy),py=[9,13,27,32],gu=fa&&"CompositionEvent"in window,eo=null;fa&&"documentMode"in document&&(eo=document.documentMode);var yy=fa&&"TextEvent"in window&&!eo,gh=fa&&(!gu||eo&&8<eo&&11>=eo),Sm=" ",Cm=!1;function xh(s,r){switch(s){case"keyup":return py.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wt=!1;function by(s,r){switch(s){case"compositionend":return hh(r);case"keypress":return r.which!==32?null:(Cm=!0,Sm);case"textInput":return s=r.data,s===Sm&&Cm?null:s;default:return null}}function vy(s,r){if(Wt)return s==="compositionend"||!gu&&xh(s,r)?(s=mh(),fi=du=za=null,Wt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gh&&r.locale!=="ko"?null:r.data;default:return null}}var jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!jy[s.type]:r==="textarea"}function fh(s,r,a,t){Qx(t),r=Ui(r,"onChange"),0<r.length&&(a=new uu("onChange","change",null,a,t),s.push({event:a,listeners:r}))}var so=null,po=null;function Ny(s){Sh(s,0)}function hl(s){var r=Jt(s);if(Ux(r))return s}function wy(s,r){if(s==="change")return r}var ph=!1;if(fa){var Yl;if(fa){var Xl="oninput"in document;if(!Xl){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Xl=typeof Am.oninput=="function"}Yl=Xl}else Yl=!1;ph=Yl&&(!document.documentMode||9<document.documentMode)}function Pm(){so&&(so.detachEvent("onpropertychange",yh),po=so=null)}function yh(s){if(s.propertyName==="value"&&hl(po)){var r=[];fh(r,po,s,nu(s)),Jx(Ny,r)}}function Ey(s,r,a){s==="focusin"?(Pm(),so=r,po=a,so.attachEvent("onpropertychange",yh)):s==="focusout"&&Pm()}function ky(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hl(po)}function _y(s,r){if(s==="click")return hl(r)}function Sy(s,r){if(s==="input"||s==="change")return hl(r)}function Cy(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Hr=typeof Object.is=="function"?Object.is:Cy;function yo(s,r){if(Hr(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),t=Object.keys(r);if(a.length!==t.length)return!1;for(t=0;t<a.length;t++){var n=a[t];if(!zc.call(r,n)||!Hr(s[n],r[n]))return!1}return!0}function Tm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Dm(s,r){var a=Tm(s);s=0;for(var t;a;){if(a.nodeType===3){if(t=s+a.textContent.length,s<=r&&t>=r)return{node:a,offset:r-s};s=t}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tm(a)}}function bh(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?bh(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function vh(){for(var s=window,r=Di();r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=Di(s.document)}return r}function xu(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}function Ry(s){var r=vh(),a=s.focusedElem,t=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&bh(a.ownerDocument.documentElement,a)){if(t!==null&&xu(a)){if(r=t.start,s=t.end,s===void 0&&(s=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(s,a.value.length);else if(s=(r=a.ownerDocument||document)&&r.defaultView||window,s.getSelection){s=s.getSelection();var n=a.textContent.length,o=Math.min(t.start,n);t=t.end===void 0?o:Math.min(t.end,n),!s.extend&&o>t&&(n=t,t=o,o=n),n=Dm(a,o);var i=Dm(a,t);n&&i&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==i.node||s.focusOffset!==i.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),s.removeAllRanges(),o>t?(s.addRange(r),s.extend(i.node,i.offset)):(r.setEnd(i.node,i.offset),s.addRange(r)))}}for(r=[],s=a;s=s.parentNode;)s.nodeType===1&&r.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)s=r[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Ay=fa&&"documentMode"in document&&11>=document.documentMode,Kt=null,td=null,ro=null,nd=!1;function Om(s,r,a){var t=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nd||Kt==null||Kt!==Di(t)||(t=Kt,"selectionStart"in t&&xu(t)?t={start:t.selectionStart,end:t.selectionEnd}:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection(),t={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}),ro&&yo(ro,t)||(ro=t,t=Ui(td,"onSelect"),0<t.length&&(r=new uu("onSelect","select",null,r,a),s.push({event:r,listeners:t}),r.target=Kt)))}function Yo(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var Zt={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},ec={},jh={};fa&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);function fl(s){if(ec[s])return ec[s];if(!Zt[s])return s;var r=Zt[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in jh)return ec[s]=r[a];return s}var Nh=fl("animationend"),wh=fl("animationiteration"),Eh=fl("animationstart"),kh=fl("transitionend"),_h=new Map,Im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function st(s,r){_h.set(s,r),Ot(r,[s])}for(var sc=0;sc<Im.length;sc++){var rc=Im[sc],Py=rc.toLowerCase(),Ty=rc[0].toUpperCase()+rc.slice(1);st(Py,"on"+Ty)}st(Nh,"onAnimationEnd");st(wh,"onAnimationIteration");st(Eh,"onAnimationStart");st("dblclick","onDoubleClick");st("focusin","onFocus");st("focusout","onBlur");st(kh,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ot("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jn));function Mm(s,r,a){var t=s.type||"unknown-event";s.currentTarget=a,Pp(t,r,void 0,s),s.currentTarget=null}function Sh(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var t=s[a],n=t.event;t=t.listeners;e:{var o=void 0;if(r)for(var i=t.length-1;0<=i;i--){var l=t[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;Mm(n,l,d),o=c}else for(i=0;i<t.length;i++){if(l=t[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;Mm(n,l,d),o=c}}}if(Ii)throw s=ed,Ii=!1,ed=null,s}function ms(s,r){var a=r[dd];a===void 0&&(a=r[dd]=new Set);var t=s+"__bubble";a.has(t)||(Ch(r,s,2,!1),a.add(t))}function ac(s,r,a){var t=0;r&&(t|=4),Ch(a,s,t,r)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function bo(s){if(!s[Xo]){s[Xo]=!0,Ix.forEach(function(a){a!=="selectionchange"&&(Dy.has(a)||ac(a,!1,s),ac(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Xo]||(r[Xo]=!0,ac("selectionchange",!1,r))}}function Ch(s,r,a,t){switch(uh(r)){case 1:var n=Qp;break;case 4:n=Wp;break;default:n=cu}a=n.bind(null,r,a,s),n=void 0,!Xc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),t?n!==void 0?s.addEventListener(r,a,{capture:!0,passive:n}):s.addEventListener(r,a,!0):n!==void 0?s.addEventListener(r,a,{passive:n}):s.addEventListener(r,a,!1)}function tc(s,r,a,t,n){var o=t;if(!(r&1)&&!(r&2)&&t!==null)e:for(;;){if(t===null)return;var i=t.tag;if(i===3||i===4){var l=t.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(i===4)for(i=t.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;l!==null;){if(i=pt(l),i===null)return;if(c=i.tag,c===5||c===6){t=o=i;continue e}l=l.parentNode}}t=t.return}Jx(function(){var d=o,g=nu(a),x=[];e:{var y=_h.get(s);if(y!==void 0){var w=uu,k=s;switch(s){case"keypress":if(pi(a)===0)break e;case"keydown":case"keyup":w=cy;break;case"focusin":k="focus",w=Jl;break;case"focusout":k="blur",w=Jl;break;case"beforeblur":case"afterblur":w=Jl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Jp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=my;break;case Nh:case wh:case Eh:w=ey;break;case kh:w=xy;break;case"scroll":w=Kp;break;case"wheel":w=fy;break;case"copy":case"cut":case"paste":w=ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_m}var S=(r&4)!==0,C=!S&&s==="scroll",N=S?y!==null?y+"Capture":null:y;S=[];for(var p=d,_;p!==null;){_=p;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,N!==null&&(E=go(p,N),E!=null&&S.push(vo(p,E,_)))),C)break;p=p.return}0<S.length&&(y=new w(y,k,null,a,g),x.push({event:y,listeners:S}))}}if(!(r&7)){e:{if(y=s==="mouseover"||s==="pointerover",w=s==="mouseout"||s==="pointerout",y&&a!==Jc&&(k=a.relatedTarget||a.fromElement)&&(pt(k)||k[pa]))break e;if((w||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,w?(k=a.relatedTarget||a.toElement,w=d,k=k?pt(k):null,k!==null&&(C=It(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=d),w!==k)){if(S=Em,E="onMouseLeave",N="onMouseEnter",p="mouse",(s==="pointerout"||s==="pointerover")&&(S=_m,E="onPointerLeave",N="onPointerEnter",p="pointer"),C=w==null?y:Jt(w),_=k==null?y:Jt(k),y=new S(E,p+"leave",w,a,g),y.target=C,y.relatedTarget=_,E=null,pt(g)===d&&(S=new S(N,p+"enter",k,a,g),S.target=_,S.relatedTarget=C,E=S),C=E,w&&k)s:{for(S=w,N=k,p=0,_=S;_;_=Ft(_))p++;for(_=0,E=N;E;E=Ft(E))_++;for(;0<p-_;)S=Ft(S),p--;for(;0<_-p;)N=Ft(N),_--;for(;p--;){if(S===N||N!==null&&S===N.alternate)break s;S=Ft(S),N=Ft(N)}S=null}else S=null;w!==null&&Fm(x,y,w,S,!1),k!==null&&C!==null&&Fm(x,C,k,S,!0)}}e:{if(y=d?Jt(d):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var b=wy;else if(Rm(y))if(ph)b=Sy;else{b=ky;var f=Ey}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(b=_y);if(b&&(b=b(s,d))){fh(x,b,a,g);break e}f&&f(s,y,d),s==="focusout"&&(f=y._wrapperState)&&f.controlled&&y.type==="number"&&Gc(y,"number",y.value)}switch(f=d?Jt(d):window,s){case"focusin":(Rm(f)||f.contentEditable==="true")&&(Kt=f,td=d,ro=null);break;case"focusout":ro=td=Kt=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,Om(x,a,g);break;case"selectionchange":if(Ay)break;case"keydown":case"keyup":Om(x,a,g)}var P;if(gu)e:{switch(s){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Wt?xh(s,a)&&(R="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(R="onCompositionStart");R&&(gh&&a.locale!=="ko"&&(Wt||R!=="onCompositionStart"?R==="onCompositionEnd"&&Wt&&(P=mh()):(za=g,du="value"in za?za.value:za.textContent,Wt=!0)),f=Ui(d,R),0<f.length&&(R=new km(R,s,null,a,g),x.push({event:R,listeners:f}),P?R.data=P:(P=hh(a),P!==null&&(R.data=P)))),(P=yy?by(s,a):vy(s,a))&&(d=Ui(d,"onBeforeInput"),0<d.length&&(g=new km("onBeforeInput","beforeinput",null,a,g),x.push({event:g,listeners:d}),g.data=P))}Sh(x,r)})}function vo(s,r,a){return{instance:s,listener:r,currentTarget:a}}function Ui(s,r){for(var a=r+"Capture",t=[];s!==null;){var n=s,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=go(s,a),o!=null&&t.unshift(vo(s,o,n)),o=go(s,r),o!=null&&t.push(vo(s,o,n))),s=s.return}return t}function Ft(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Fm(s,r,a,t,n){for(var o=r._reactName,i=[];a!==null&&a!==t;){var l=a,c=l.alternate,d=l.stateNode;if(c!==null&&c===t)break;l.tag===5&&d!==null&&(l=d,n?(c=go(a,o),c!=null&&i.unshift(vo(a,c,l))):n||(c=go(a,o),c!=null&&i.push(vo(a,c,l)))),a=a.return}i.length!==0&&s.push({event:r,listeners:i})}var Oy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function Lm(s){return(typeof s=="string"?s:""+s).replace(Oy,`
`).replace(Iy,"")}function ei(s,r,a){if(r=Lm(r),Lm(s)!==r&&a)throw Error(Re(425))}function $i(){}var od=null,id=null;function ld(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,My=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,Fy=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(s){return zm.resolve(null).then(s).catch(Ly)}:cd;function Ly(s){setTimeout(function(){throw s})}function nc(s,r){var a=r,t=0;do{var n=a.nextSibling;if(s.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(t===0){s.removeChild(n),fo(r);return}t--}else a!=="$"&&a!=="$?"&&a!=="$!"||t++;a=n}while(a);fo(r)}function Ha(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return s}function Um(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return s;r--}else a==="/$"&&r++}s=s.previousSibling}return null}var kn=Math.random().toString(36).slice(2),Yr="__reactFiber$"+kn,jo="__reactProps$"+kn,pa="__reactContainer$"+kn,dd="__reactEvents$"+kn,zy="__reactListeners$"+kn,Uy="__reactHandles$"+kn;function pt(s){var r=s[Yr];if(r)return r;for(var a=s.parentNode;a;){if(r=a[pa]||a[Yr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=Um(s);s!==null;){if(a=s[Yr])return a;s=Um(s)}return r}s=a,a=s.parentNode}return null}function Oo(s){return s=s[Yr]||s[pa],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Jt(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Re(33))}function pl(s){return s[jo]||null}var ud=[],Yt=-1;function rt(s){return{current:s}}function hs(s){0>Yt||(s.current=ud[Yt],ud[Yt]=null,Yt--)}function ds(s,r){Yt++,ud[Yt]=s.current,s.current=r}var Xa={},Ys=rt(Xa),mr=rt(!1),St=Xa;function fn(s,r){var a=s.type.contextTypes;if(!a)return Xa;var t=s.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===r)return t.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in a)n[o]=r[o];return t&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=n),n}function gr(s){return s=s.childContextTypes,s!=null}function Vi(){hs(mr),hs(Ys)}function $m(s,r,a){if(Ys.current!==Xa)throw Error(Re(168));ds(Ys,r),ds(mr,a)}function Rh(s,r,a){var t=s.stateNode;if(r=r.childContextTypes,typeof t.getChildContext!="function")return a;t=t.getChildContext();for(var n in t)if(!(n in r))throw Error(Re(108,Ep(s)||"Unknown",n));return Ns({},a,t)}function Bi(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Xa,St=Ys.current,ds(Ys,s),ds(mr,mr.current),!0}function Vm(s,r,a){var t=s.stateNode;if(!t)throw Error(Re(169));a?(s=Rh(s,r,St),t.__reactInternalMemoizedMergedChildContext=s,hs(mr),hs(Ys),ds(Ys,s)):hs(mr),ds(mr,a)}var da=null,yl=!1,oc=!1;function Ah(s){da===null?da=[s]:da.push(s)}function $y(s){yl=!0,Ah(s)}function at(){if(!oc&&da!==null){oc=!0;var s=0,r=as;try{var a=da;for(as=1;s<a.length;s++){var t=a[s];do t=t(!0);while(t!==null)}da=null,yl=!1}catch(n){throw da!==null&&(da=da.slice(s+1)),sh(ou,at),n}finally{as=r,oc=!1}}return null}var Xt=[],en=0,qi=null,Hi=0,Sr=[],Cr=0,Ct=null,ma=1,ga="";function xt(s,r){Xt[en++]=Hi,Xt[en++]=qi,qi=s,Hi=r}function Ph(s,r,a){Sr[Cr++]=ma,Sr[Cr++]=ga,Sr[Cr++]=Ct,Ct=s;var t=ma;s=ga;var n=32-Br(t)-1;t&=~(1<<n),a+=1;var o=32-Br(r)+n;if(30<o){var i=n-n%5;o=(t&(1<<i)-1).toString(32),t>>=i,n-=i,ma=1<<32-Br(r)+n|a<<n|t,ga=o+s}else ma=1<<o|a<<n|t,ga=s}function hu(s){s.return!==null&&(xt(s,1),Ph(s,1,0))}function fu(s){for(;s===qi;)qi=Xt[--en],Xt[en]=null,Hi=Xt[--en],Xt[en]=null;for(;s===Ct;)Ct=Sr[--Cr],Sr[Cr]=null,ga=Sr[--Cr],Sr[Cr]=null,ma=Sr[--Cr],Sr[Cr]=null}var jr=null,vr=null,bs=!1,$r=null;function Th(s,r){var a=Ar(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=s,r=s.deletions,r===null?(s.deletions=[a],s.flags|=16):r.push(a)}function Bm(s,r){switch(s.tag){case 5:var a=s.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(s.stateNode=r,jr=s,vr=Ha(r.firstChild),!0):!1;case 6:return r=s.pendingProps===""||r.nodeType!==3?null:r,r!==null?(s.stateNode=r,jr=s,vr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ct!==null?{id:ma,overflow:ga}:null,s.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Ar(18,null,null,0),a.stateNode=r,a.return=s,s.child=a,jr=s,vr=null,!0):!1;default:return!1}}function md(s){return(s.mode&1)!==0&&(s.flags&128)===0}function gd(s){if(bs){var r=vr;if(r){var a=r;if(!Bm(s,r)){if(md(s))throw Error(Re(418));r=Ha(a.nextSibling);var t=jr;r&&Bm(s,r)?Th(t,a):(s.flags=s.flags&-4097|2,bs=!1,jr=s)}}else{if(md(s))throw Error(Re(418));s.flags=s.flags&-4097|2,bs=!1,jr=s}}}function qm(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jr=s}function si(s){if(s!==jr)return!1;if(!bs)return qm(s),bs=!0,!1;var r;if((r=s.tag!==3)&&!(r=s.tag!==5)&&(r=s.type,r=r!=="head"&&r!=="body"&&!ld(s.type,s.memoizedProps)),r&&(r=vr)){if(md(s))throw Dh(),Error(Re(418));for(;r;)Th(s,r),r=Ha(r.nextSibling)}if(qm(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(r===0){vr=Ha(s.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}s=s.nextSibling}vr=null}}else vr=jr?Ha(s.stateNode.nextSibling):null;return!0}function Dh(){for(var s=vr;s;)s=Ha(s.nextSibling)}function pn(){vr=jr=null,bs=!1}function pu(s){$r===null?$r=[s]:$r.push(s)}var Vy=ja.ReactCurrentBatchConfig;function In(s,r,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Re(309));var t=a.stateNode}if(!t)throw Error(Re(147,s));var n=t,o=""+s;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(i){var l=n.refs;i===null?delete l[o]:l[o]=i},r._stringRef=o,r)}if(typeof s!="string")throw Error(Re(284));if(!a._owner)throw Error(Re(290,s))}return s}function ri(s,r){throw s=Object.prototype.toString.call(r),Error(Re(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s))}function Hm(s){var r=s._init;return r(s._payload)}function Oh(s){function r(N,p){if(s){var _=N.deletions;_===null?(N.deletions=[p],N.flags|=16):_.push(p)}}function a(N,p){if(!s)return null;for(;p!==null;)r(N,p),p=p.sibling;return null}function t(N,p){for(N=new Map;p!==null;)p.key!==null?N.set(p.key,p):N.set(p.index,p),p=p.sibling;return N}function n(N,p){return N=Ka(N,p),N.index=0,N.sibling=null,N}function o(N,p,_){return N.index=_,s?(_=N.alternate,_!==null?(_=_.index,_<p?(N.flags|=2,p):_):(N.flags|=2,p)):(N.flags|=1048576,p)}function i(N){return s&&N.alternate===null&&(N.flags|=2),N}function l(N,p,_,E){return p===null||p.tag!==6?(p=gc(_,N.mode,E),p.return=N,p):(p=n(p,_),p.return=N,p)}function c(N,p,_,E){var b=_.type;return b===Qt?g(N,p,_.props.children,E,_.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ra&&Hm(b)===p.type)?(E=n(p,_.props),E.ref=In(N,p,_),E.return=N,E):(E=Ei(_.type,_.key,_.props,null,N.mode,E),E.ref=In(N,p,_),E.return=N,E)}function d(N,p,_,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=xc(_,N.mode,E),p.return=N,p):(p=n(p,_.children||[]),p.return=N,p)}function g(N,p,_,E,b){return p===null||p.tag!==7?(p=Et(_,N.mode,E,b),p.return=N,p):(p=n(p,_),p.return=N,p)}function x(N,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=gc(""+p,N.mode,_),p.return=N,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ho:return _=Ei(p.type,p.key,p.props,null,N.mode,_),_.ref=In(N,null,p),_.return=N,_;case Gt:return p=xc(p,N.mode,_),p.return=N,p;case Ra:var E=p._init;return x(N,E(p._payload),_)}if(Kn(p)||An(p))return p=Et(p,N.mode,_,null),p.return=N,p;ri(N,p)}return null}function y(N,p,_,E){var b=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:l(N,p,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ho:return _.key===b?c(N,p,_,E):null;case Gt:return _.key===b?d(N,p,_,E):null;case Ra:return b=_._init,y(N,p,b(_._payload),E)}if(Kn(_)||An(_))return b!==null?null:g(N,p,_,E,null);ri(N,_)}return null}function w(N,p,_,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return N=N.get(_)||null,l(p,N,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ho:return N=N.get(E.key===null?_:E.key)||null,c(p,N,E,b);case Gt:return N=N.get(E.key===null?_:E.key)||null,d(p,N,E,b);case Ra:var f=E._init;return w(N,p,_,f(E._payload),b)}if(Kn(E)||An(E))return N=N.get(_)||null,g(p,N,E,b,null);ri(p,E)}return null}function k(N,p,_,E){for(var b=null,f=null,P=p,R=p=0,q=null;P!==null&&R<_.length;R++){P.index>R?(q=P,P=null):q=P.sibling;var I=y(N,P,_[R],E);if(I===null){P===null&&(P=q);break}s&&P&&I.alternate===null&&r(N,P),p=o(I,p,R),f===null?b=I:f.sibling=I,f=I,P=q}if(R===_.length)return a(N,P),bs&&xt(N,R),b;if(P===null){for(;R<_.length;R++)P=x(N,_[R],E),P!==null&&(p=o(P,p,R),f===null?b=P:f.sibling=P,f=P);return bs&&xt(N,R),b}for(P=t(N,P);R<_.length;R++)q=w(P,N,R,_[R],E),q!==null&&(s&&q.alternate!==null&&P.delete(q.key===null?R:q.key),p=o(q,p,R),f===null?b=q:f.sibling=q,f=q);return s&&P.forEach(function($){return r(N,$)}),bs&&xt(N,R),b}function S(N,p,_,E){var b=An(_);if(typeof b!="function")throw Error(Re(150));if(_=b.call(_),_==null)throw Error(Re(151));for(var f=b=null,P=p,R=p=0,q=null,I=_.next();P!==null&&!I.done;R++,I=_.next()){P.index>R?(q=P,P=null):q=P.sibling;var $=y(N,P,I.value,E);if($===null){P===null&&(P=q);break}s&&P&&$.alternate===null&&r(N,P),p=o($,p,R),f===null?b=$:f.sibling=$,f=$,P=q}if(I.done)return a(N,P),bs&&xt(N,R),b;if(P===null){for(;!I.done;R++,I=_.next())I=x(N,I.value,E),I!==null&&(p=o(I,p,R),f===null?b=I:f.sibling=I,f=I);return bs&&xt(N,R),b}for(P=t(N,P);!I.done;R++,I=_.next())I=w(P,N,R,I.value,E),I!==null&&(s&&I.alternate!==null&&P.delete(I.key===null?R:I.key),p=o(I,p,R),f===null?b=I:f.sibling=I,f=I);return s&&P.forEach(function(G){return r(N,G)}),bs&&xt(N,R),b}function C(N,p,_,E){if(typeof _=="object"&&_!==null&&_.type===Qt&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ho:e:{for(var b=_.key,f=p;f!==null;){if(f.key===b){if(b=_.type,b===Qt){if(f.tag===7){a(N,f.sibling),p=n(f,_.props.children),p.return=N,N=p;break e}}else if(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ra&&Hm(b)===f.type){a(N,f.sibling),p=n(f,_.props),p.ref=In(N,f,_),p.return=N,N=p;break e}a(N,f);break}else r(N,f);f=f.sibling}_.type===Qt?(p=Et(_.props.children,N.mode,E,_.key),p.return=N,N=p):(E=Ei(_.type,_.key,_.props,null,N.mode,E),E.ref=In(N,p,_),E.return=N,N=E)}return i(N);case Gt:e:{for(f=_.key;p!==null;){if(p.key===f)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){a(N,p.sibling),p=n(p,_.children||[]),p.return=N,N=p;break e}else{a(N,p);break}else r(N,p);p=p.sibling}p=xc(_,N.mode,E),p.return=N,N=p}return i(N);case Ra:return f=_._init,C(N,p,f(_._payload),E)}if(Kn(_))return k(N,p,_,E);if(An(_))return S(N,p,_,E);ri(N,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(a(N,p.sibling),p=n(p,_),p.return=N,N=p):(a(N,p),p=gc(_,N.mode,E),p.return=N,N=p),i(N)):a(N,p)}return C}var yn=Oh(!0),Ih=Oh(!1),Gi=rt(null),Qi=null,sn=null,yu=null;function bu(){yu=sn=Qi=null}function vu(s){var r=Gi.current;hs(Gi),s._currentValue=r}function xd(s,r,a){for(;s!==null;){var t=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,t!==null&&(t.childLanes|=r)):t!==null&&(t.childLanes&r)!==r&&(t.childLanes|=r),s===a)break;s=s.return}}function dn(s,r){Qi=s,yu=sn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&r&&(dr=!0),s.firstContext=null)}function Or(s){var r=s._currentValue;if(yu!==s)if(s={context:s,memoizedValue:r,next:null},sn===null){if(Qi===null)throw Error(Re(308));sn=s,Qi.dependencies={lanes:0,firstContext:s}}else sn=sn.next=s;return r}var yt=null;function ju(s){yt===null?yt=[s]:yt.push(s)}function Mh(s,r,a,t){var n=r.interleaved;return n===null?(a.next=a,ju(r)):(a.next=n.next,n.next=a),r.interleaved=a,ya(s,t)}function ya(s,r){s.lanes|=r;var a=s.alternate;for(a!==null&&(a.lanes|=r),a=s,s=s.return;s!==null;)s.childLanes|=r,a=s.alternate,a!==null&&(a.childLanes|=r),a=s,s=s.return;return a.tag===3?a.stateNode:null}var Aa=!1;function Nu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function xa(s,r){return{eventTime:s,lane:r,tag:0,payload:null,callback:null,next:null}}function Ga(s,r,a){var t=s.updateQueue;if(t===null)return null;if(t=t.shared,Ke&2){var n=t.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),t.pending=r,ya(s,a)}return n=t.interleaved,n===null?(r.next=r,ju(t)):(r.next=n.next,n.next=r),t.interleaved=r,ya(s,a)}function yi(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var t=r.lanes;t&=s.pendingLanes,a|=t,r.lanes=a,iu(s,a)}}function Gm(s,r){var a=s.updateQueue,t=s.alternate;if(t!==null&&(t=t.updateQueue,a===t)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=r:o=o.next=r}else n=o=r;a={baseState:t.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:t.shared,effects:t.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}function Wi(s,r,a,t){var n=s.updateQueue;Aa=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var g=s.alternate;g!==null&&(g=g.updateQueue,l=g.lastBaseUpdate,l!==i&&(l===null?g.firstBaseUpdate=d:l.next=d,g.lastBaseUpdate=c))}if(o!==null){var x=n.baseState;i=0,g=d=c=null,l=o;do{var y=l.lane,w=l.eventTime;if((t&y)===y){g!==null&&(g=g.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=s,S=l;switch(y=r,w=a,S.tag){case 1:if(k=S.payload,typeof k=="function"){x=k.call(w,x,y);break e}x=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,y=typeof k=="function"?k.call(w,x,y):k,y==null)break e;x=Ns({},x,y);break e;case 2:Aa=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,y=n.effects,y===null?n.effects=[l]:y.push(l))}else w={eventTime:w,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},g===null?(d=g=w,c=x):g=g.next=w,i|=y;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;y=l,l=y.next,y.next=null,n.lastBaseUpdate=y,n.shared.pending=null}}while(!0);if(g===null&&(c=x),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=g,r=n.shared.interleaved,r!==null){n=r;do i|=n.lane,n=n.next;while(n!==r)}else o===null&&(n.shared.lanes=0);At|=i,s.lanes=i,s.memoizedState=x}}function Qm(s,r,a){if(s=r.effects,r.effects=null,s!==null)for(r=0;r<s.length;r++){var t=s[r],n=t.callback;if(n!==null){if(t.callback=null,t=a,typeof n!="function")throw Error(Re(191,n));n.call(t)}}}var Io={},ra=rt(Io),No=rt(Io),wo=rt(Io);function bt(s){if(s===Io)throw Error(Re(174));return s}function wu(s,r){switch(ds(wo,r),ds(No,s),ds(ra,Io),s=r.nodeType,s){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Wc(null,"");break;default:s=s===8?r.parentNode:r,r=s.namespaceURI||null,s=s.tagName,r=Wc(r,s)}hs(ra),ds(ra,r)}function bn(){hs(ra),hs(No),hs(wo)}function Lh(s){bt(wo.current);var r=bt(ra.current),a=Wc(r,s.type);r!==a&&(ds(No,s),ds(ra,a))}function Eu(s){No.current===s&&(hs(ra),hs(No))}var vs=rt(0);function Ki(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ic=[];function ku(){for(var s=0;s<ic.length;s++)ic[s]._workInProgressVersionPrimary=null;ic.length=0}var bi=ja.ReactCurrentDispatcher,lc=ja.ReactCurrentBatchConfig,Rt=0,js=null,Is=null,Ls=null,Zi=!1,ao=!1,Eo=0,By=0;function Qs(){throw Error(Re(321))}function _u(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!Hr(s[a],r[a]))return!1;return!0}function Su(s,r,a,t,n,o){if(Rt=o,js=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,bi.current=s===null||s.memoizedState===null?Qy:Wy,s=a(t,n),ao){o=0;do{if(ao=!1,Eo=0,25<=o)throw Error(Re(301));o+=1,Ls=Is=null,r.updateQueue=null,bi.current=Ky,s=a(t,n)}while(ao)}if(bi.current=Ji,r=Is!==null&&Is.next!==null,Rt=0,Ls=Is=js=null,Zi=!1,r)throw Error(Re(300));return s}function Cu(){var s=Eo!==0;return Eo=0,s}function Zr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?js.memoizedState=Ls=s:Ls=Ls.next=s,Ls}function Ir(){if(Is===null){var s=js.alternate;s=s!==null?s.memoizedState:null}else s=Is.next;var r=Ls===null?js.memoizedState:Ls.next;if(r!==null)Ls=r,Is=s;else{if(s===null)throw Error(Re(310));Is=s,s={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Ls===null?js.memoizedState=Ls=s:Ls=Ls.next=s}return Ls}function ko(s,r){return typeof r=="function"?r(s):r}function cc(s){var r=Ir(),a=r.queue;if(a===null)throw Error(Re(311));a.lastRenderedReducer=s;var t=Is,n=t.baseQueue,o=a.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,a.pending=null}if(n!==null){o=n.next,t=t.baseState;var l=i=null,c=null,d=o;do{var g=d.lane;if((Rt&g)===g)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),t=d.hasEagerState?d.eagerState:s(t,d.action);else{var x={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=x,i=t):c=c.next=x,js.lanes|=g,At|=g}d=d.next}while(d!==null&&d!==o);c===null?i=t:c.next=l,Hr(t,r.memoizedState)||(dr=!0),r.memoizedState=t,r.baseState=i,r.baseQueue=c,a.lastRenderedState=t}if(s=a.interleaved,s!==null){n=s;do o=n.lane,js.lanes|=o,At|=o,n=n.next;while(n!==s)}else n===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function dc(s){var r=Ir(),a=r.queue;if(a===null)throw Error(Re(311));a.lastRenderedReducer=s;var t=a.dispatch,n=a.pending,o=r.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=s(o,i.action),i=i.next;while(i!==n);Hr(o,r.memoizedState)||(dr=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),a.lastRenderedState=o}return[o,t]}function zh(){}function Uh(s,r){var a=js,t=Ir(),n=r(),o=!Hr(t.memoizedState,n);if(o&&(t.memoizedState=n,dr=!0),t=t.queue,Ru(Bh.bind(null,a,t,s),[s]),t.getSnapshot!==r||o||Ls!==null&&Ls.memoizedState.tag&1){if(a.flags|=2048,_o(9,Vh.bind(null,a,t,n,r),void 0,null),zs===null)throw Error(Re(349));Rt&30||$h(a,r,n)}return n}function $h(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=js.updateQueue,r===null?(r={lastEffect:null,stores:null},js.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function Vh(s,r,a,t){r.value=a,r.getSnapshot=t,qh(r)&&Hh(s)}function Bh(s,r,a){return a(function(){qh(r)&&Hh(s)})}function qh(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!Hr(s,a)}catch{return!0}}function Hh(s){var r=ya(s,1);r!==null&&qr(r,s,1,-1)}function Wm(s){var r=Zr();return typeof s=="function"&&(s=s()),r.memoizedState=r.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:s},r.queue=s,s=s.dispatch=Gy.bind(null,js,s),[r.memoizedState,s]}function _o(s,r,a,t){return s={tag:s,create:r,destroy:a,deps:t,next:null},r=js.updateQueue,r===null?(r={lastEffect:null,stores:null},js.updateQueue=r,r.lastEffect=s.next=s):(a=r.lastEffect,a===null?r.lastEffect=s.next=s:(t=a.next,a.next=s,s.next=t,r.lastEffect=s)),s}function Gh(){return Ir().memoizedState}function vi(s,r,a,t){var n=Zr();js.flags|=s,n.memoizedState=_o(1|r,a,void 0,t===void 0?null:t)}function bl(s,r,a,t){var n=Ir();t=t===void 0?null:t;var o=void 0;if(Is!==null){var i=Is.memoizedState;if(o=i.destroy,t!==null&&_u(t,i.deps)){n.memoizedState=_o(r,a,o,t);return}}js.flags|=s,n.memoizedState=_o(1|r,a,o,t)}function Km(s,r){return vi(8390656,8,s,r)}function Ru(s,r){return bl(2048,8,s,r)}function Qh(s,r){return bl(4,2,s,r)}function Wh(s,r){return bl(4,4,s,r)}function Kh(s,r){if(typeof r=="function")return s=s(),r(s),function(){r(null)};if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Zh(s,r,a){return a=a!=null?a.concat([s]):null,bl(4,4,Kh.bind(null,r,s),a)}function Au(){}function Jh(s,r){var a=Ir();r=r===void 0?null:r;var t=a.memoizedState;return t!==null&&r!==null&&_u(r,t[1])?t[0]:(a.memoizedState=[s,r],s)}function Yh(s,r){var a=Ir();r=r===void 0?null:r;var t=a.memoizedState;return t!==null&&r!==null&&_u(r,t[1])?t[0]:(s=s(),a.memoizedState=[s,r],s)}function Xh(s,r,a){return Rt&21?(Hr(a,r)||(a=th(),js.lanes|=a,At|=a,s.baseState=!0),r):(s.baseState&&(s.baseState=!1,dr=!0),s.memoizedState=a)}function qy(s,r){var a=as;as=a!==0&&4>a?a:4,s(!0);var t=lc.transition;lc.transition={};try{s(!1),r()}finally{as=a,lc.transition=t}}function ef(){return Ir().memoizedState}function Hy(s,r,a){var t=Wa(s);if(a={lane:t,action:a,hasEagerState:!1,eagerState:null,next:null},sf(s))rf(r,a);else if(a=Mh(s,r,a,t),a!==null){var n=ar();qr(a,s,t,n),af(a,r,t)}}function Gy(s,r,a){var t=Wa(s),n={lane:t,action:a,hasEagerState:!1,eagerState:null,next:null};if(sf(s))rf(r,n);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var i=r.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,Hr(l,i)){var c=r.interleaved;c===null?(n.next=n,ju(r)):(n.next=c.next,c.next=n),r.interleaved=n;return}}catch{}finally{}a=Mh(s,r,n,t),a!==null&&(n=ar(),qr(a,s,t,n),af(a,r,t))}}function sf(s){var r=s.alternate;return s===js||r!==null&&r===js}function rf(s,r){ao=Zi=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function af(s,r,a){if(a&4194240){var t=r.lanes;t&=s.pendingLanes,a|=t,r.lanes=a,iu(s,a)}}var Ji={readContext:Or,useCallback:Qs,useContext:Qs,useEffect:Qs,useImperativeHandle:Qs,useInsertionEffect:Qs,useLayoutEffect:Qs,useMemo:Qs,useReducer:Qs,useRef:Qs,useState:Qs,useDebugValue:Qs,useDeferredValue:Qs,useTransition:Qs,useMutableSource:Qs,useSyncExternalStore:Qs,useId:Qs,unstable_isNewReconciler:!1},Qy={readContext:Or,useCallback:function(s,r){return Zr().memoizedState=[s,r===void 0?null:r],s},useContext:Or,useEffect:Km,useImperativeHandle:function(s,r,a){return a=a!=null?a.concat([s]):null,vi(4194308,4,Kh.bind(null,r,s),a)},useLayoutEffect:function(s,r){return vi(4194308,4,s,r)},useInsertionEffect:function(s,r){return vi(4,2,s,r)},useMemo:function(s,r){var a=Zr();return r=r===void 0?null:r,s=s(),a.memoizedState=[s,r],s},useReducer:function(s,r,a){var t=Zr();return r=a!==void 0?a(r):r,t.memoizedState=t.baseState=r,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},t.queue=s,s=s.dispatch=Hy.bind(null,js,s),[t.memoizedState,s]},useRef:function(s){var r=Zr();return s={current:s},r.memoizedState=s},useState:Wm,useDebugValue:Au,useDeferredValue:function(s){return Zr().memoizedState=s},useTransition:function(){var s=Wm(!1),r=s[0];return s=qy.bind(null,s[1]),Zr().memoizedState=s,[r,s]},useMutableSource:function(){},useSyncExternalStore:function(s,r,a){var t=js,n=Zr();if(bs){if(a===void 0)throw Error(Re(407));a=a()}else{if(a=r(),zs===null)throw Error(Re(349));Rt&30||$h(t,r,a)}n.memoizedState=a;var o={value:a,getSnapshot:r};return n.queue=o,Km(Bh.bind(null,t,o,s),[s]),t.flags|=2048,_o(9,Vh.bind(null,t,o,a,r),void 0,null),a},useId:function(){var s=Zr(),r=zs.identifierPrefix;if(bs){var a=ga,t=ma;a=(t&~(1<<32-Br(t)-1)).toString(32)+a,r=":"+r+"R"+a,a=Eo++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=By++,r=":"+r+"r"+a.toString(32)+":";return s.memoizedState=r},unstable_isNewReconciler:!1},Wy={readContext:Or,useCallback:Jh,useContext:Or,useEffect:Ru,useImperativeHandle:Zh,useInsertionEffect:Qh,useLayoutEffect:Wh,useMemo:Yh,useReducer:cc,useRef:Gh,useState:function(){return cc(ko)},useDebugValue:Au,useDeferredValue:function(s){var r=Ir();return Xh(r,Is.memoizedState,s)},useTransition:function(){var s=cc(ko)[0],r=Ir().memoizedState;return[s,r]},useMutableSource:zh,useSyncExternalStore:Uh,useId:ef,unstable_isNewReconciler:!1},Ky={readContext:Or,useCallback:Jh,useContext:Or,useEffect:Ru,useImperativeHandle:Zh,useInsertionEffect:Qh,useLayoutEffect:Wh,useMemo:Yh,useReducer:dc,useRef:Gh,useState:function(){return dc(ko)},useDebugValue:Au,useDeferredValue:function(s){var r=Ir();return Is===null?r.memoizedState=s:Xh(r,Is.memoizedState,s)},useTransition:function(){var s=dc(ko)[0],r=Ir().memoizedState;return[s,r]},useMutableSource:zh,useSyncExternalStore:Uh,useId:ef,unstable_isNewReconciler:!1};function Lr(s,r){if(s&&s.defaultProps){r=Ns({},r),s=s.defaultProps;for(var a in s)r[a]===void 0&&(r[a]=s[a]);return r}return r}function hd(s,r,a,t){r=s.memoizedState,a=a(t,r),a=a==null?r:Ns({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var vl={isMounted:function(s){return(s=s._reactInternals)?It(s)===s:!1},enqueueSetState:function(s,r,a){s=s._reactInternals;var t=ar(),n=Wa(s),o=xa(t,n);o.payload=r,a!=null&&(o.callback=a),r=Ga(s,o,n),r!==null&&(qr(r,s,n,t),yi(r,s,n))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var t=ar(),n=Wa(s),o=xa(t,n);o.tag=1,o.payload=r,a!=null&&(o.callback=a),r=Ga(s,o,n),r!==null&&(qr(r,s,n,t),yi(r,s,n))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=ar(),t=Wa(s),n=xa(a,t);n.tag=2,r!=null&&(n.callback=r),r=Ga(s,n,t),r!==null&&(qr(r,s,t,a),yi(r,s,t))}};function Zm(s,r,a,t,n,o,i){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(t,o,i):r.prototype&&r.prototype.isPureReactComponent?!yo(a,t)||!yo(n,o):!0}function tf(s,r,a){var t=!1,n=Xa,o=r.contextType;return typeof o=="object"&&o!==null?o=Or(o):(n=gr(r)?St:Ys.current,t=r.contextTypes,o=(t=t!=null)?fn(s,n):Xa),r=new r(a,o),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=vl,s.stateNode=r,r._reactInternals=s,t&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=o),r}function Jm(s,r,a,t){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,t),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,t),r.state!==s&&vl.enqueueReplaceState(r,r.state,null)}function fd(s,r,a,t){var n=s.stateNode;n.props=a,n.state=s.memoizedState,n.refs={},Nu(s);var o=r.contextType;typeof o=="object"&&o!==null?n.context=Or(o):(o=gr(r)?St:Ys.current,n.context=fn(s,o)),n.state=s.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(hd(s,r,o,a),n.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&vl.enqueueReplaceState(n,n.state,null),Wi(s,a,n,t),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function vn(s,r){try{var a="",t=r;do a+=wp(t),t=t.return;while(t);var n=a}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:s,source:r,stack:n,digest:null}}function uc(s,r,a){return{value:s,source:null,stack:a??null,digest:r??null}}function pd(s,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Zy=typeof WeakMap=="function"?WeakMap:Map;function nf(s,r,a){a=xa(-1,a),a.tag=3,a.payload={element:null};var t=r.value;return a.callback=function(){Xi||(Xi=!0,Sd=t),pd(s,r)},a}function of(s,r,a){a=xa(-1,a),a.tag=3;var t=s.type.getDerivedStateFromError;if(typeof t=="function"){var n=r.value;a.payload=function(){return t(n)},a.callback=function(){pd(s,r)}}var o=s.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(a.callback=function(){pd(s,r),typeof t!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:i!==null?i:""})}),a}function Ym(s,r,a){var t=s.pingCache;if(t===null){t=s.pingCache=new Zy;var n=new Set;t.set(r,n)}else n=t.get(r),n===void 0&&(n=new Set,t.set(r,n));n.has(a)||(n.add(a),s=db.bind(null,s,r,a),r.then(s,s))}function Xm(s){do{var r;if((r=s.tag===13)&&(r=s.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return s;s=s.return}while(s!==null);return null}function eg(s,r,a,t,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===r?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=xa(-1,1),r.tag=2,Ga(a,r,1))),a.lanes|=1),s)}var Jy=ja.ReactCurrentOwner,dr=!1;function rr(s,r,a,t){r.child=s===null?Ih(r,null,a,t):yn(r,s.child,a,t)}function sg(s,r,a,t,n){a=a.render;var o=r.ref;return dn(r,n),t=Su(s,r,a,t,o,n),a=Cu(),s!==null&&!dr?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~n,ba(s,r,n)):(bs&&a&&hu(r),r.flags|=1,rr(s,r,t,n),r.child)}function rg(s,r,a,t,n){if(s===null){var o=a.type;return typeof o=="function"&&!Lu(o)&&o.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=o,lf(s,r,o,t,n)):(s=Ei(a.type,null,t,r,r.mode,n),s.ref=r.ref,s.return=r,r.child=s)}if(o=s.child,!(s.lanes&n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:yo,a(i,t)&&s.ref===r.ref)return ba(s,r,n)}return r.flags|=1,s=Ka(o,t),s.ref=r.ref,s.return=r,r.child=s}function lf(s,r,a,t,n){if(s!==null){var o=s.memoizedProps;if(yo(o,t)&&s.ref===r.ref)if(dr=!1,r.pendingProps=t=o,(s.lanes&n)!==0)s.flags&131072&&(dr=!0);else return r.lanes=s.lanes,ba(s,r,n)}return yd(s,r,a,t,n)}function cf(s,r,a){var t=r.pendingProps,n=t.children,o=s!==null?s.memoizedState:null;if(t.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ds(an,yr),yr|=a;else{if(!(a&1073741824))return s=o!==null?o.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:s,cachePool:null,transitions:null},r.updateQueue=null,ds(an,yr),yr|=s,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=o!==null?o.baseLanes:a,ds(an,yr),yr|=t}else o!==null?(t=o.baseLanes|a,r.memoizedState=null):t=a,ds(an,yr),yr|=t;return rr(s,r,n,a),r.child}function df(s,r){var a=r.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function yd(s,r,a,t,n){var o=gr(a)?St:Ys.current;return o=fn(r,o),dn(r,n),a=Su(s,r,a,t,o,n),t=Cu(),s!==null&&!dr?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~n,ba(s,r,n)):(bs&&t&&hu(r),r.flags|=1,rr(s,r,a,n),r.child)}function ag(s,r,a,t,n){if(gr(a)){var o=!0;Bi(r)}else o=!1;if(dn(r,n),r.stateNode===null)ji(s,r),tf(r,a,t),fd(r,a,t,n),t=!0;else if(s===null){var i=r.stateNode,l=r.memoizedProps;i.props=l;var c=i.context,d=a.contextType;typeof d=="object"&&d!==null?d=Or(d):(d=gr(a)?St:Ys.current,d=fn(r,d));var g=a.getDerivedStateFromProps,x=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";x||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==t||c!==d)&&Jm(r,i,t,d),Aa=!1;var y=r.memoizedState;i.state=y,Wi(r,t,i,n),c=r.memoizedState,l!==t||y!==c||mr.current||Aa?(typeof g=="function"&&(hd(r,a,g,t),c=r.memoizedState),(l=Aa||Zm(r,a,l,t,y,c,d))?(x||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(r.flags|=4194308)):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=t,r.memoizedState=c),i.props=t,i.state=c,i.context=d,t=l):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),t=!1)}else{i=r.stateNode,Fh(s,r),l=r.memoizedProps,d=r.type===r.elementType?l:Lr(r.type,l),i.props=d,x=r.pendingProps,y=i.context,c=a.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=gr(a)?St:Ys.current,c=fn(r,c));var w=a.getDerivedStateFromProps;(g=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==x||y!==c)&&Jm(r,i,t,c),Aa=!1,y=r.memoizedState,i.state=y,Wi(r,t,i,n);var k=r.memoizedState;l!==x||y!==k||mr.current||Aa?(typeof w=="function"&&(hd(r,a,w,t),k=r.memoizedState),(d=Aa||Zm(r,a,d,t,y,k,c)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(t,k,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(t,k,c)),typeof i.componentDidUpdate=="function"&&(r.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=1024),r.memoizedProps=t,r.memoizedState=k),i.props=t,i.state=k,i.context=c,t=d):(typeof i.componentDidUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=1024),t=!1)}return bd(s,r,a,t,o,n)}function bd(s,r,a,t,n,o){df(s,r);var i=(r.flags&128)!==0;if(!t&&!i)return n&&Vm(r,a,!1),ba(s,r,o);t=r.stateNode,Jy.current=r;var l=i&&typeof a.getDerivedStateFromError!="function"?null:t.render();return r.flags|=1,s!==null&&i?(r.child=yn(r,s.child,null,o),r.child=yn(r,null,l,o)):rr(s,r,l,o),r.memoizedState=t.state,n&&Vm(r,a,!0),r.child}function uf(s){var r=s.stateNode;r.pendingContext?$m(s,r.pendingContext,r.pendingContext!==r.context):r.context&&$m(s,r.context,!1),wu(s,r.containerInfo)}function tg(s,r,a,t,n){return pn(),pu(n),r.flags|=256,rr(s,r,a,t),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function jd(s){return{baseLanes:s,cachePool:null,transitions:null}}function mf(s,r,a){var t=r.pendingProps,n=vs.current,o=!1,i=(r.flags&128)!==0,l;if((l=i)||(l=s!==null&&s.memoizedState===null?!1:(n&2)!==0),l?(o=!0,r.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),ds(vs,n&1),s===null)return gd(r),s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(r.mode&1?s.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(i=t.children,s=t.fallback,o?(t=r.mode,o=r.child,i={mode:"hidden",children:i},!(t&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=wl(i,t,0,null),s=Et(s,t,a,null),o.return=r,s.return=r,o.sibling=s,r.child=o,r.child.memoizedState=jd(a),r.memoizedState=vd,s):Pu(r,i));if(n=s.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return Yy(s,r,i,t,l,n,a);if(o){o=t.fallback,i=r.mode,n=s.child,l=n.sibling;var c={mode:"hidden",children:t.children};return!(i&1)&&r.child!==n?(t=r.child,t.childLanes=0,t.pendingProps=c,r.deletions=null):(t=Ka(n,c),t.subtreeFlags=n.subtreeFlags&14680064),l!==null?o=Ka(l,o):(o=Et(o,i,a,null),o.flags|=2),o.return=r,t.return=r,t.sibling=o,r.child=t,t=o,o=r.child,i=s.child.memoizedState,i=i===null?jd(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=s.childLanes&~a,r.memoizedState=vd,t}return o=s.child,s=o.sibling,t=Ka(o,{mode:"visible",children:t.children}),!(r.mode&1)&&(t.lanes=a),t.return=r,t.sibling=null,s!==null&&(a=r.deletions,a===null?(r.deletions=[s],r.flags|=16):a.push(s)),r.child=t,r.memoizedState=null,t}function Pu(s,r){return r=wl({mode:"visible",children:r},s.mode,0,null),r.return=s,s.child=r}function ai(s,r,a,t){return t!==null&&pu(t),yn(r,s.child,null,a),s=Pu(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Yy(s,r,a,t,n,o,i){if(a)return r.flags&256?(r.flags&=-257,t=uc(Error(Re(422))),ai(s,r,i,t)):r.memoizedState!==null?(r.child=s.child,r.flags|=128,null):(o=t.fallback,n=r.mode,t=wl({mode:"visible",children:t.children},n,0,null),o=Et(o,n,i,null),o.flags|=2,t.return=r,o.return=r,t.sibling=o,r.child=t,r.mode&1&&yn(r,s.child,null,i),r.child.memoizedState=jd(i),r.memoizedState=vd,o);if(!(r.mode&1))return ai(s,r,i,null);if(n.data==="$!"){if(t=n.nextSibling&&n.nextSibling.dataset,t)var l=t.dgst;return t=l,o=Error(Re(419)),t=uc(o,t,void 0),ai(s,r,i,t)}if(l=(i&s.childLanes)!==0,dr||l){if(t=zs,t!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(t.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,ya(s,n),qr(t,s,n,-1))}return Fu(),t=uc(Error(Re(421))),ai(s,r,i,t)}return n.data==="$?"?(r.flags|=128,r.child=s.child,r=ub.bind(null,s),n._reactRetry=r,null):(s=o.treeContext,vr=Ha(n.nextSibling),jr=r,bs=!0,$r=null,s!==null&&(Sr[Cr++]=ma,Sr[Cr++]=ga,Sr[Cr++]=Ct,ma=s.id,ga=s.overflow,Ct=r),r=Pu(r,t.children),r.flags|=4096,r)}function ng(s,r,a){s.lanes|=r;var t=s.alternate;t!==null&&(t.lanes|=r),xd(s.return,r,a)}function mc(s,r,a,t,n){var o=s.memoizedState;o===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:t,tail:a,tailMode:n}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=t,o.tail=a,o.tailMode=n)}function gf(s,r,a){var t=r.pendingProps,n=t.revealOrder,o=t.tail;if(rr(s,r,t.children,a),t=vs.current,t&2)t=t&1|2,r.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ng(s,a,r);else if(s.tag===19)ng(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t&=1}if(ds(vs,t),!(r.mode&1))r.memoizedState=null;else switch(n){case"forwards":for(a=r.child,n=null;a!==null;)s=a.alternate,s!==null&&Ki(s)===null&&(n=a),a=a.sibling;a=n,a===null?(n=r.child,r.child=null):(n=a.sibling,a.sibling=null),mc(r,!1,n,a,o);break;case"backwards":for(a=null,n=r.child,r.child=null;n!==null;){if(s=n.alternate,s!==null&&Ki(s)===null){r.child=n;break}s=n.sibling,n.sibling=a,a=n,n=s}mc(r,!0,a,null,o);break;case"together":mc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ji(s,r){!(r.mode&1)&&s!==null&&(s.alternate=null,r.alternate=null,r.flags|=2)}function ba(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),At|=r.lanes,!(a&r.childLanes))return null;if(s!==null&&r.child!==s.child)throw Error(Re(153));if(r.child!==null){for(s=r.child,a=Ka(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=Ka(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function Xy(s,r,a){switch(r.tag){case 3:uf(r),pn();break;case 5:Lh(r);break;case 1:gr(r.type)&&Bi(r);break;case 4:wu(r,r.stateNode.containerInfo);break;case 10:var t=r.type._context,n=r.memoizedProps.value;ds(Gi,t._currentValue),t._currentValue=n;break;case 13:if(t=r.memoizedState,t!==null)return t.dehydrated!==null?(ds(vs,vs.current&1),r.flags|=128,null):a&r.child.childLanes?mf(s,r,a):(ds(vs,vs.current&1),s=ba(s,r,a),s!==null?s.sibling:null);ds(vs,vs.current&1);break;case 19:if(t=(a&r.childLanes)!==0,s.flags&128){if(t)return gf(s,r,a);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ds(vs,vs.current),t)break;return null;case 22:case 23:return r.lanes=0,cf(s,r,a)}return ba(s,r,a)}var xf,Nd,hf,ff;xf=function(s,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Nd=function(){};hf=function(s,r,a,t){var n=s.memoizedProps;if(n!==t){s=r.stateNode,bt(ra.current);var o=null;switch(a){case"input":n=qc(s,n),t=qc(s,t),o=[];break;case"select":n=Ns({},n,{value:void 0}),t=Ns({},t,{value:void 0}),o=[];break;case"textarea":n=Qc(s,n),t=Qc(s,t),o=[];break;default:typeof n.onClick!="function"&&typeof t.onClick=="function"&&(s.onclick=$i)}Kc(a,t);var i;a=null;for(d in n)if(!t.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(i in l)l.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in t){var c=t[d];if(l=n!=null?n[d]:void 0,t.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(a||(a={}),a[i]=c[i])}else a||(o||(o=[]),o.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ms("scroll",s),o||l===c||(o=[])):(o=o||[]).push(d,c))}a&&(o=o||[]).push("style",a);var d=o;(r.updateQueue=d)&&(r.flags|=4)}};ff=function(s,r,a,t){a!==t&&(r.flags|=4)};function Mn(s,r){if(!bs)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var t=null;a!==null;)a.alternate!==null&&(t=a),a=a.sibling;t===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:t.sibling=null}}function Ws(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,t=0;if(r)for(var n=s.child;n!==null;)a|=n.lanes|n.childLanes,t|=n.subtreeFlags&14680064,t|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)a|=n.lanes|n.childLanes,t|=n.subtreeFlags,t|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=t,s.childLanes=a,r}function eb(s,r,a){var t=r.pendingProps;switch(fu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(r),null;case 1:return gr(r.type)&&Vi(),Ws(r),null;case 3:return t=r.stateNode,bn(),hs(mr),hs(Ys),ku(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(s===null||s.child===null)&&(si(r)?r.flags|=4:s===null||s.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,$r!==null&&(Ad($r),$r=null))),Nd(s,r),Ws(r),null;case 5:Eu(r);var n=bt(wo.current);if(a=r.type,s!==null&&r.stateNode!=null)hf(s,r,a,t,n),s.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!t){if(r.stateNode===null)throw Error(Re(166));return Ws(r),null}if(s=bt(ra.current),si(r)){t=r.stateNode,a=r.type;var o=r.memoizedProps;switch(t[Yr]=r,t[jo]=o,s=(r.mode&1)!==0,a){case"dialog":ms("cancel",t),ms("close",t);break;case"iframe":case"object":case"embed":ms("load",t);break;case"video":case"audio":for(n=0;n<Jn.length;n++)ms(Jn[n],t);break;case"source":ms("error",t);break;case"img":case"image":case"link":ms("error",t),ms("load",t);break;case"details":ms("toggle",t);break;case"input":xm(t,o),ms("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!o.multiple},ms("invalid",t);break;case"textarea":fm(t,o),ms("invalid",t)}Kc(a,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?t.textContent!==l&&(o.suppressHydrationWarning!==!0&&ei(t.textContent,l,s),n=["children",l]):typeof l=="number"&&t.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ei(t.textContent,l,s),n=["children",""+l]):uo.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ms("scroll",t)}switch(a){case"input":Go(t),hm(t,o,!0);break;case"textarea":Go(t),pm(t);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(t.onclick=$i)}t=n,r.updateQueue=t,t!==null&&(r.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Bx(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=i.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof t.is=="string"?s=i.createElement(a,{is:t.is}):(s=i.createElement(a),a==="select"&&(i=s,t.multiple?i.multiple=!0:t.size&&(i.size=t.size))):s=i.createElementNS(s,a),s[Yr]=r,s[jo]=t,xf(s,r,!1,!1),r.stateNode=s;e:{switch(i=Zc(a,t),a){case"dialog":ms("cancel",s),ms("close",s),n=t;break;case"iframe":case"object":case"embed":ms("load",s),n=t;break;case"video":case"audio":for(n=0;n<Jn.length;n++)ms(Jn[n],s);n=t;break;case"source":ms("error",s),n=t;break;case"img":case"image":case"link":ms("error",s),ms("load",s),n=t;break;case"details":ms("toggle",s),n=t;break;case"input":xm(s,t),n=qc(s,t),ms("invalid",s);break;case"option":n=t;break;case"select":s._wrapperState={wasMultiple:!!t.multiple},n=Ns({},t,{value:void 0}),ms("invalid",s);break;case"textarea":fm(s,t),n=Qc(s,t),ms("invalid",s);break;default:n=t}Kc(a,n),l=n;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Gx(s,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qx(s,c)):o==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&mo(s,c):typeof c=="number"&&mo(s,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(uo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ms("scroll",s):c!=null&&su(s,o,c,i))}switch(a){case"input":Go(s),hm(s,t,!1);break;case"textarea":Go(s),pm(s);break;case"option":t.value!=null&&s.setAttribute("value",""+Ya(t.value));break;case"select":s.multiple=!!t.multiple,o=t.value,o!=null?nn(s,!!t.multiple,o,!1):t.defaultValue!=null&&nn(s,!!t.multiple,t.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=$i)}switch(a){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break e;case"img":t=!0;break e;default:t=!1}}t&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ws(r),null;case 6:if(s&&r.stateNode!=null)ff(s,r,s.memoizedProps,t);else{if(typeof t!="string"&&r.stateNode===null)throw Error(Re(166));if(a=bt(wo.current),bt(ra.current),si(r)){if(t=r.stateNode,a=r.memoizedProps,t[Yr]=r,(o=t.nodeValue!==a)&&(s=jr,s!==null))switch(s.tag){case 3:ei(t.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ei(t.nodeValue,a,(s.mode&1)!==0)}o&&(r.flags|=4)}else t=(a.nodeType===9?a:a.ownerDocument).createTextNode(t),t[Yr]=r,r.stateNode=t}return Ws(r),null;case 13:if(hs(vs),t=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(bs&&vr!==null&&r.mode&1&&!(r.flags&128))Dh(),pn(),r.flags|=98560,o=!1;else if(o=si(r),t!==null&&t.dehydrated!==null){if(s===null){if(!o)throw Error(Re(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Re(317));o[Yr]=r}else pn(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Ws(r),o=!1}else $r!==null&&(Ad($r),$r=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(t=t!==null,t!==(s!==null&&s.memoizedState!==null)&&t&&(r.child.flags|=8192,r.mode&1&&(s===null||vs.current&1?Fs===0&&(Fs=3):Fu())),r.updateQueue!==null&&(r.flags|=4),Ws(r),null);case 4:return bn(),Nd(s,r),s===null&&bo(r.stateNode.containerInfo),Ws(r),null;case 10:return vu(r.type._context),Ws(r),null;case 17:return gr(r.type)&&Vi(),Ws(r),null;case 19:if(hs(vs),o=r.memoizedState,o===null)return Ws(r),null;if(t=(r.flags&128)!==0,i=o.rendering,i===null)if(t)Mn(o,!1);else{if(Fs!==0||s!==null&&s.flags&128)for(s=r.child;s!==null;){if(i=Ki(s),i!==null){for(r.flags|=128,Mn(o,!1),t=i.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=a,a=r.child;a!==null;)o=a,s=t,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return ds(vs,vs.current&1|2),r.child}s=s.sibling}o.tail!==null&&_s()>jn&&(r.flags|=128,t=!0,Mn(o,!1),r.lanes=4194304)}else{if(!t)if(s=Ki(i),s!==null){if(r.flags|=128,t=!0,a=s.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Mn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!bs)return Ws(r),null}else 2*_s()-o.renderingStartTime>jn&&a!==1073741824&&(r.flags|=128,t=!0,Mn(o,!1),r.lanes=4194304);o.isBackwards?(i.sibling=r.child,r.child=i):(a=o.last,a!==null?a.sibling=i:r.child=i,o.last=i)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=_s(),r.sibling=null,a=vs.current,ds(vs,t?a&1|2:a&1),r):(Ws(r),null);case 22:case 23:return Mu(),t=r.memoizedState!==null,s!==null&&s.memoizedState!==null!==t&&(r.flags|=8192),t&&r.mode&1?yr&1073741824&&(Ws(r),r.subtreeFlags&6&&(r.flags|=8192)):Ws(r),null;case 24:return null;case 25:return null}throw Error(Re(156,r.tag))}function sb(s,r){switch(fu(r),r.tag){case 1:return gr(r.type)&&Vi(),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return bn(),hs(mr),hs(Ys),ku(),s=r.flags,s&65536&&!(s&128)?(r.flags=s&-65537|128,r):null;case 5:return Eu(r),null;case 13:if(hs(vs),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(Re(340));pn()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return hs(vs),null;case 4:return bn(),null;case 10:return vu(r.type._context),null;case 22:case 23:return Mu(),null;case 24:return null;default:return null}}var ti=!1,Ks=!1,rb=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function rn(s,r){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(t){ws(s,r,t)}else a.current=null}function wd(s,r,a){try{a()}catch(t){ws(s,r,t)}}var og=!1;function ab(s,r){if(od=Li,s=vh(),xu(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var t=a.getSelection&&a.getSelection();if(t&&t.rangeCount!==0){a=t.anchorNode;var n=t.anchorOffset,o=t.focusNode;t=t.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,g=0,x=s,y=null;s:for(;;){for(var w;x!==a||n!==0&&x.nodeType!==3||(l=i+n),x!==o||t!==0&&x.nodeType!==3||(c=i+t),x.nodeType===3&&(i+=x.nodeValue.length),(w=x.firstChild)!==null;)y=x,x=w;for(;;){if(x===s)break s;if(y===a&&++d===n&&(l=i),y===o&&++g===t&&(c=i),(w=x.nextSibling)!==null)break;x=y,y=x.parentNode}x=w}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(id={focusedElem:s,selectionRange:a},Li=!1,Ie=r;Ie!==null;)if(r=Ie,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ie=s;else for(;Ie!==null;){r=Ie;try{var k=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,C=k.memoizedState,N=r.stateNode,p=N.getSnapshotBeforeUpdate(r.elementType===r.type?S:Lr(r.type,S),C);N.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=r.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(E){ws(r,r.return,E)}if(s=r.sibling,s!==null){s.return=r.return,Ie=s;break}Ie=r.return}return k=og,og=!1,k}function to(s,r,a){var t=r.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&s)===s){var o=n.destroy;n.destroy=void 0,o!==void 0&&wd(r,a,o)}n=n.next}while(n!==t)}}function jl(s,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&s)===s){var t=a.create;a.destroy=t()}a=a.next}while(a!==r)}}function Ed(s){var r=s.ref;if(r!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof r=="function"?r(s):r.current=s}}function pf(s){var r=s.alternate;r!==null&&(s.alternate=null,pf(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&(delete r[Yr],delete r[jo],delete r[dd],delete r[zy],delete r[Uy])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function yf(s){return s.tag===5||s.tag===3||s.tag===4}function ig(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kd(s,r,a){var t=s.tag;if(t===5||t===6)s=s.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(s,r):a.insertBefore(s,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(s,a)):(r=a,r.appendChild(s)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$i));else if(t!==4&&(s=s.child,s!==null))for(kd(s,r,a),s=s.sibling;s!==null;)kd(s,r,a),s=s.sibling}function _d(s,r,a){var t=s.tag;if(t===5||t===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(t!==4&&(s=s.child,s!==null))for(_d(s,r,a),s=s.sibling;s!==null;)_d(s,r,a),s=s.sibling}var Us=null,Ur=!1;function Ea(s,r,a){for(a=a.child;a!==null;)bf(s,r,a),a=a.sibling}function bf(s,r,a){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(gl,a)}catch{}switch(a.tag){case 5:Ks||rn(a,r);case 6:var t=Us,n=Ur;Us=null,Ea(s,r,a),Us=t,Ur=n,Us!==null&&(Ur?(s=Us,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):Us.removeChild(a.stateNode));break;case 18:Us!==null&&(Ur?(s=Us,a=a.stateNode,s.nodeType===8?nc(s.parentNode,a):s.nodeType===1&&nc(s,a),fo(s)):nc(Us,a.stateNode));break;case 4:t=Us,n=Ur,Us=a.stateNode.containerInfo,Ur=!0,Ea(s,r,a),Us=t,Ur=n;break;case 0:case 11:case 14:case 15:if(!Ks&&(t=a.updateQueue,t!==null&&(t=t.lastEffect,t!==null))){n=t=t.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&wd(a,r,i),n=n.next}while(n!==t)}Ea(s,r,a);break;case 1:if(!Ks&&(rn(a,r),t=a.stateNode,typeof t.componentWillUnmount=="function"))try{t.props=a.memoizedProps,t.state=a.memoizedState,t.componentWillUnmount()}catch(l){ws(a,r,l)}Ea(s,r,a);break;case 21:Ea(s,r,a);break;case 22:a.mode&1?(Ks=(t=Ks)||a.memoizedState!==null,Ea(s,r,a),Ks=t):Ea(s,r,a);break;default:Ea(s,r,a)}}function lg(s){var r=s.updateQueue;if(r!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new rb),r.forEach(function(t){var n=mb.bind(null,s,t);a.has(t)||(a.add(t),t.then(n,n))})}}function Mr(s,r){var a=r.deletions;if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];try{var o=s,i=r,l=i;e:for(;l!==null;){switch(l.tag){case 5:Us=l.stateNode,Ur=!1;break e;case 3:Us=l.stateNode.containerInfo,Ur=!0;break e;case 4:Us=l.stateNode.containerInfo,Ur=!0;break e}l=l.return}if(Us===null)throw Error(Re(160));bf(o,i,n),Us=null,Ur=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){ws(n,r,d)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)vf(r,s),r=r.sibling}function vf(s,r){var a=s.alternate,t=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Mr(r,s),Qr(s),t&4){try{to(3,s,s.return),jl(3,s)}catch(S){ws(s,s.return,S)}try{to(5,s,s.return)}catch(S){ws(s,s.return,S)}}break;case 1:Mr(r,s),Qr(s),t&512&&a!==null&&rn(a,a.return);break;case 5:if(Mr(r,s),Qr(s),t&512&&a!==null&&rn(a,a.return),s.flags&32){var n=s.stateNode;try{mo(n,"")}catch(S){ws(s,s.return,S)}}if(t&4&&(n=s.stateNode,n!=null)){var o=s.memoizedProps,i=a!==null?a.memoizedProps:o,l=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&$x(n,o),Zc(l,i);var d=Zc(l,o);for(i=0;i<c.length;i+=2){var g=c[i],x=c[i+1];g==="style"?Gx(n,x):g==="dangerouslySetInnerHTML"?qx(n,x):g==="children"?mo(n,x):su(n,g,x,d)}switch(l){case"input":Hc(n,o);break;case"textarea":Vx(n,o);break;case"select":var y=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?nn(n,!!o.multiple,w,!1):y!==!!o.multiple&&(o.defaultValue!=null?nn(n,!!o.multiple,o.defaultValue,!0):nn(n,!!o.multiple,o.multiple?[]:"",!1))}n[jo]=o}catch(S){ws(s,s.return,S)}}break;case 6:if(Mr(r,s),Qr(s),t&4){if(s.stateNode===null)throw Error(Re(162));n=s.stateNode,o=s.memoizedProps;try{n.nodeValue=o}catch(S){ws(s,s.return,S)}}break;case 3:if(Mr(r,s),Qr(s),t&4&&a!==null&&a.memoizedState.isDehydrated)try{fo(r.containerInfo)}catch(S){ws(s,s.return,S)}break;case 4:Mr(r,s),Qr(s);break;case 13:Mr(r,s),Qr(s),n=s.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(Ou=_s())),t&4&&lg(s);break;case 22:if(g=a!==null&&a.memoizedState!==null,s.mode&1?(Ks=(d=Ks)||g,Mr(r,s),Ks=d):Mr(r,s),Qr(s),t&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!g&&s.mode&1)for(Ie=s,g=s.child;g!==null;){for(x=Ie=g;Ie!==null;){switch(y=Ie,w=y.child,y.tag){case 0:case 11:case 14:case 15:to(4,y,y.return);break;case 1:rn(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){t=y,a=y.return;try{r=t,k.props=r.memoizedProps,k.state=r.memoizedState,k.componentWillUnmount()}catch(S){ws(t,a,S)}}break;case 5:rn(y,y.return);break;case 22:if(y.memoizedState!==null){dg(x);continue}}w!==null?(w.return=y,Ie=w):dg(x)}g=g.sibling}e:for(g=null,x=s;;){if(x.tag===5){if(g===null){g=x;try{n=x.stateNode,d?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=x.stateNode,c=x.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Hx("display",i))}catch(S){ws(s,s.return,S)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(S){ws(s,s.return,S)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===s)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Mr(r,s),Qr(s),t&4&&lg(s);break;case 21:break;default:Mr(r,s),Qr(s)}}function Qr(s){var r=s.flags;if(r&2){try{e:{for(var a=s.return;a!==null;){if(yf(a)){var t=a;break e}a=a.return}throw Error(Re(160))}switch(t.tag){case 5:var n=t.stateNode;t.flags&32&&(mo(n,""),t.flags&=-33);var o=ig(s);_d(s,o,n);break;case 3:case 4:var i=t.stateNode.containerInfo,l=ig(s);kd(s,l,i);break;default:throw Error(Re(161))}}catch(c){ws(s,s.return,c)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function tb(s,r,a){Ie=s,jf(s)}function jf(s,r,a){for(var t=(s.mode&1)!==0;Ie!==null;){var n=Ie,o=n.child;if(n.tag===22&&t){var i=n.memoizedState!==null||ti;if(!i){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Ks;l=ti;var d=Ks;if(ti=i,(Ks=c)&&!d)for(Ie=n;Ie!==null;)i=Ie,c=i.child,i.tag===22&&i.memoizedState!==null?ug(n):c!==null?(c.return=i,Ie=c):ug(n);for(;o!==null;)Ie=o,jf(o),o=o.sibling;Ie=n,ti=l,Ks=d}cg(s)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Ie=o):cg(s)}}function cg(s){for(;Ie!==null;){var r=Ie;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ks||jl(5,r);break;case 1:var t=r.stateNode;if(r.flags&4&&!Ks)if(a===null)t.componentDidMount();else{var n=r.elementType===r.type?a.memoizedProps:Lr(r.type,a.memoizedProps);t.componentDidUpdate(n,a.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&Qm(r,o,t);break;case 3:var i=r.updateQueue;if(i!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Qm(r,i,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var c=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var d=r.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&fo(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Ks||r.flags&512&&Ed(r)}catch(y){ws(r,r.return,y)}}if(r===s){Ie=null;break}if(a=r.sibling,a!==null){a.return=r.return,Ie=a;break}Ie=r.return}}function dg(s){for(;Ie!==null;){var r=Ie;if(r===s){Ie=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Ie=a;break}Ie=r.return}}function ug(s){for(;Ie!==null;){var r=Ie;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{jl(4,r)}catch(c){ws(r,a,c)}break;case 1:var t=r.stateNode;if(typeof t.componentDidMount=="function"){var n=r.return;try{t.componentDidMount()}catch(c){ws(r,n,c)}}var o=r.return;try{Ed(r)}catch(c){ws(r,o,c)}break;case 5:var i=r.return;try{Ed(r)}catch(c){ws(r,i,c)}}}catch(c){ws(r,r.return,c)}if(r===s){Ie=null;break}var l=r.sibling;if(l!==null){l.return=r.return,Ie=l;break}Ie=r.return}}var nb=Math.ceil,Yi=ja.ReactCurrentDispatcher,Tu=ja.ReactCurrentOwner,Pr=ja.ReactCurrentBatchConfig,Ke=0,zs=null,Ps=null,Vs=0,yr=0,an=rt(0),Fs=0,So=null,At=0,Nl=0,Du=0,no=null,cr=null,Ou=0,jn=1/0,ca=null,Xi=!1,Sd=null,Qa=null,ni=!1,Ua=null,el=0,oo=0,Cd=null,Ni=-1,wi=0;function ar(){return Ke&6?_s():Ni!==-1?Ni:Ni=_s()}function Wa(s){return s.mode&1?Ke&2&&Vs!==0?Vs&-Vs:Vy.transition!==null?(wi===0&&(wi=th()),wi):(s=as,s!==0||(s=window.event,s=s===void 0?16:uh(s.type)),s):1}function qr(s,r,a,t){if(50<oo)throw oo=0,Cd=null,Error(Re(185));To(s,a,t),(!(Ke&2)||s!==zs)&&(s===zs&&(!(Ke&2)&&(Nl|=a),Fs===4&&Ia(s,Vs)),xr(s,t),a===1&&Ke===0&&!(r.mode&1)&&(jn=_s()+500,yl&&at()))}function xr(s,r){var a=s.callbackNode;Vp(s,r);var t=Fi(s,s===zs?Vs:0);if(t===0)a!==null&&vm(a),s.callbackNode=null,s.callbackPriority=0;else if(r=t&-t,s.callbackPriority!==r){if(a!=null&&vm(a),r===1)s.tag===0?$y(mg.bind(null,s)):Ah(mg.bind(null,s)),Fy(function(){!(Ke&6)&&at()}),a=null;else{switch(nh(t)){case 1:a=ou;break;case 4:a=rh;break;case 16:a=Mi;break;case 536870912:a=ah;break;default:a=Mi}a=Rf(a,Nf.bind(null,s))}s.callbackPriority=r,s.callbackNode=a}}function Nf(s,r){if(Ni=-1,wi=0,Ke&6)throw Error(Re(327));var a=s.callbackNode;if(un()&&s.callbackNode!==a)return null;var t=Fi(s,s===zs?Vs:0);if(t===0)return null;if(t&30||t&s.expiredLanes||r)r=sl(s,t);else{r=t;var n=Ke;Ke|=2;var o=Ef();(zs!==s||Vs!==r)&&(ca=null,jn=_s()+500,wt(s,r));do try{lb();break}catch(l){wf(s,l)}while(!0);bu(),Yi.current=o,Ke=n,Ps!==null?r=0:(zs=null,Vs=0,r=Fs)}if(r!==0){if(r===2&&(n=sd(s),n!==0&&(t=n,r=Rd(s,n))),r===1)throw a=So,wt(s,0),Ia(s,t),xr(s,_s()),a;if(r===6)Ia(s,t);else{if(n=s.current.alternate,!(t&30)&&!ob(n)&&(r=sl(s,t),r===2&&(o=sd(s),o!==0&&(t=o,r=Rd(s,o))),r===1))throw a=So,wt(s,0),Ia(s,t),xr(s,_s()),a;switch(s.finishedWork=n,s.finishedLanes=t,r){case 0:case 1:throw Error(Re(345));case 2:ht(s,cr,ca);break;case 3:if(Ia(s,t),(t&130023424)===t&&(r=Ou+500-_s(),10<r)){if(Fi(s,0)!==0)break;if(n=s.suspendedLanes,(n&t)!==t){ar(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=cd(ht.bind(null,s,cr,ca),r);break}ht(s,cr,ca);break;case 4:if(Ia(s,t),(t&4194240)===t)break;for(r=s.eventTimes,n=-1;0<t;){var i=31-Br(t);o=1<<i,i=r[i],i>n&&(n=i),t&=~o}if(t=n,t=_s()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*nb(t/1960))-t,10<t){s.timeoutHandle=cd(ht.bind(null,s,cr,ca),t);break}ht(s,cr,ca);break;case 5:ht(s,cr,ca);break;default:throw Error(Re(329))}}}return xr(s,_s()),s.callbackNode===a?Nf.bind(null,s):null}function Rd(s,r){var a=no;return s.current.memoizedState.isDehydrated&&(wt(s,r).flags|=256),s=sl(s,r),s!==2&&(r=cr,cr=a,r!==null&&Ad(r)),s}function Ad(s){cr===null?cr=s:cr.push.apply(cr,s)}function ob(s){for(var r=s;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var t=0;t<a.length;t++){var n=a[t],o=n.getSnapshot;n=n.value;try{if(!Hr(o(),n))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ia(s,r){for(r&=~Du,r&=~Nl,s.suspendedLanes|=r,s.pingedLanes&=~r,s=s.expirationTimes;0<r;){var a=31-Br(r),t=1<<a;s[a]=-1,r&=~t}}function mg(s){if(Ke&6)throw Error(Re(327));un();var r=Fi(s,0);if(!(r&1))return xr(s,_s()),null;var a=sl(s,r);if(s.tag!==0&&a===2){var t=sd(s);t!==0&&(r=t,a=Rd(s,t))}if(a===1)throw a=So,wt(s,0),Ia(s,r),xr(s,_s()),a;if(a===6)throw Error(Re(345));return s.finishedWork=s.current.alternate,s.finishedLanes=r,ht(s,cr,ca),xr(s,_s()),null}function Iu(s,r){var a=Ke;Ke|=1;try{return s(r)}finally{Ke=a,Ke===0&&(jn=_s()+500,yl&&at())}}function Pt(s){Ua!==null&&Ua.tag===0&&!(Ke&6)&&un();var r=Ke;Ke|=1;var a=Pr.transition,t=as;try{if(Pr.transition=null,as=1,s)return s()}finally{as=t,Pr.transition=a,Ke=r,!(Ke&6)&&at()}}function Mu(){yr=an.current,hs(an)}function wt(s,r){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,My(a)),Ps!==null)for(a=Ps.return;a!==null;){var t=a;switch(fu(t),t.tag){case 1:t=t.type.childContextTypes,t!=null&&Vi();break;case 3:bn(),hs(mr),hs(Ys),ku();break;case 5:Eu(t);break;case 4:bn();break;case 13:hs(vs);break;case 19:hs(vs);break;case 10:vu(t.type._context);break;case 22:case 23:Mu()}a=a.return}if(zs=s,Ps=s=Ka(s.current,null),Vs=yr=r,Fs=0,So=null,Du=Nl=At=0,cr=no=null,yt!==null){for(r=0;r<yt.length;r++)if(a=yt[r],t=a.interleaved,t!==null){a.interleaved=null;var n=t.next,o=a.pending;if(o!==null){var i=o.next;o.next=n,t.next=i}a.pending=t}yt=null}return s}function wf(s,r){do{var a=Ps;try{if(bu(),bi.current=Ji,Zi){for(var t=js.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Zi=!1}if(Rt=0,Ls=Is=js=null,ao=!1,Eo=0,Tu.current=null,a===null||a.return===null){Fs=1,So=r,Ps=null;break}e:{var o=s,i=a.return,l=a,c=r;if(r=Vs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,g=l,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var w=Xm(i);if(w!==null){w.flags&=-257,eg(w,i,l,o,r),w.mode&1&&Ym(o,d,r),r=w,c=d;var k=r.updateQueue;if(k===null){var S=new Set;S.add(c),r.updateQueue=S}else k.add(c);break e}else{if(!(r&1)){Ym(o,d,r),Fu();break e}c=Error(Re(426))}}else if(bs&&l.mode&1){var C=Xm(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),eg(C,i,l,o,r),pu(vn(c,l));break e}}o=c=vn(c,l),Fs!==4&&(Fs=2),no===null?no=[o]:no.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var N=nf(o,c,r);Gm(o,N);break e;case 1:l=c;var p=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qa===null||!Qa.has(_)))){o.flags|=65536,r&=-r,o.lanes|=r;var E=of(o,l,r);Gm(o,E);break e}}o=o.return}while(o!==null)}_f(a)}catch(b){r=b,Ps===a&&a!==null&&(Ps=a=a.return);continue}break}while(!0)}function Ef(){var s=Yi.current;return Yi.current=Ji,s===null?Ji:s}function Fu(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),zs===null||!(At&268435455)&&!(Nl&268435455)||Ia(zs,Vs)}function sl(s,r){var a=Ke;Ke|=2;var t=Ef();(zs!==s||Vs!==r)&&(ca=null,wt(s,r));do try{ib();break}catch(n){wf(s,n)}while(!0);if(bu(),Ke=a,Yi.current=t,Ps!==null)throw Error(Re(261));return zs=null,Vs=0,Fs}function ib(){for(;Ps!==null;)kf(Ps)}function lb(){for(;Ps!==null&&!Dp();)kf(Ps)}function kf(s){var r=Cf(s.alternate,s,yr);s.memoizedProps=s.pendingProps,r===null?_f(s):Ps=r,Tu.current=null}function _f(s){var r=s;do{var a=r.alternate;if(s=r.return,r.flags&32768){if(a=sb(a,r),a!==null){a.flags&=32767,Ps=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Fs=6,Ps=null;return}}else if(a=eb(a,r,yr),a!==null){Ps=a;return}if(r=r.sibling,r!==null){Ps=r;return}Ps=r=s}while(r!==null);Fs===0&&(Fs=5)}function ht(s,r,a){var t=as,n=Pr.transition;try{Pr.transition=null,as=1,cb(s,r,a,t)}finally{Pr.transition=n,as=t}return null}function cb(s,r,a,t){do un();while(Ua!==null);if(Ke&6)throw Error(Re(327));a=s.finishedWork;var n=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(Re(177));s.callbackNode=null,s.callbackPriority=0;var o=a.lanes|a.childLanes;if(Bp(s,o),s===zs&&(Ps=zs=null,Vs=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||ni||(ni=!0,Rf(Mi,function(){return un(),null})),o=(a.flags&15990)!==0,a.subtreeFlags&15990||o){o=Pr.transition,Pr.transition=null;var i=as;as=1;var l=Ke;Ke|=4,Tu.current=null,ab(s,a),vf(a,s),Ry(id),Li=!!od,id=od=null,s.current=a,tb(a),Op(),Ke=l,as=i,Pr.transition=o}else s.current=a;if(ni&&(ni=!1,Ua=s,el=n),o=s.pendingLanes,o===0&&(Qa=null),Fp(a.stateNode),xr(s,_s()),r!==null)for(t=s.onRecoverableError,a=0;a<r.length;a++)n=r[a],t(n.value,{componentStack:n.stack,digest:n.digest});if(Xi)throw Xi=!1,s=Sd,Sd=null,s;return el&1&&s.tag!==0&&un(),o=s.pendingLanes,o&1?s===Cd?oo++:(oo=0,Cd=s):oo=0,at(),null}function un(){if(Ua!==null){var s=nh(el),r=Pr.transition,a=as;try{if(Pr.transition=null,as=16>s?16:s,Ua===null)var t=!1;else{if(s=Ua,Ua=null,el=0,Ke&6)throw Error(Re(331));var n=Ke;for(Ke|=4,Ie=s.current;Ie!==null;){var o=Ie,i=o.child;if(Ie.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ie=d;Ie!==null;){var g=Ie;switch(g.tag){case 0:case 11:case 15:to(8,g,o)}var x=g.child;if(x!==null)x.return=g,Ie=x;else for(;Ie!==null;){g=Ie;var y=g.sibling,w=g.return;if(pf(g),g===d){Ie=null;break}if(y!==null){y.return=w,Ie=y;break}Ie=w}}}var k=o.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}Ie=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ie=i;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:to(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,Ie=N;break e}Ie=o.return}}var p=s.current;for(Ie=p;Ie!==null;){i=Ie;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,Ie=_;else e:for(i=p;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:jl(9,l)}}catch(b){ws(l,l.return,b)}if(l===i){Ie=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,Ie=E;break e}Ie=l.return}}if(Ke=n,at(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(gl,s)}catch{}t=!0}return t}finally{as=a,Pr.transition=r}}return!1}function gg(s,r,a){r=vn(a,r),r=nf(s,r,1),s=Ga(s,r,1),r=ar(),s!==null&&(To(s,1,r),xr(s,r))}function ws(s,r,a){if(s.tag===3)gg(s,s,a);else for(;r!==null;){if(r.tag===3){gg(r,s,a);break}else if(r.tag===1){var t=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof t.componentDidCatch=="function"&&(Qa===null||!Qa.has(t))){s=vn(a,s),s=of(r,s,1),r=Ga(r,s,1),s=ar(),r!==null&&(To(r,1,s),xr(r,s));break}}r=r.return}}function db(s,r,a){var t=s.pingCache;t!==null&&t.delete(r),r=ar(),s.pingedLanes|=s.suspendedLanes&a,zs===s&&(Vs&a)===a&&(Fs===4||Fs===3&&(Vs&130023424)===Vs&&500>_s()-Ou?wt(s,0):Du|=a),xr(s,r)}function Sf(s,r){r===0&&(s.mode&1?(r=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):r=1);var a=ar();s=ya(s,r),s!==null&&(To(s,r,a),xr(s,a))}function ub(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),Sf(s,a)}function mb(s,r){var a=0;switch(s.tag){case 13:var t=s.stateNode,n=s.memoizedState;n!==null&&(a=n.retryLane);break;case 19:t=s.stateNode;break;default:throw Error(Re(314))}t!==null&&t.delete(r),Sf(s,a)}var Cf;Cf=function(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps||mr.current)dr=!0;else{if(!(s.lanes&a)&&!(r.flags&128))return dr=!1,Xy(s,r,a);dr=!!(s.flags&131072)}else dr=!1,bs&&r.flags&1048576&&Ph(r,Hi,r.index);switch(r.lanes=0,r.tag){case 2:var t=r.type;ji(s,r),s=r.pendingProps;var n=fn(r,Ys.current);dn(r,a),n=Su(null,r,t,s,n,a);var o=Cu();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,gr(t)?(o=!0,Bi(r)):o=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Nu(r),n.updater=vl,r.stateNode=n,n._reactInternals=r,fd(r,t,s,a),r=bd(null,r,t,!0,o,a)):(r.tag=0,bs&&o&&hu(r),rr(null,r,n,a),r=r.child),r;case 16:t=r.elementType;e:{switch(ji(s,r),s=r.pendingProps,n=t._init,t=n(t._payload),r.type=t,n=r.tag=xb(t),s=Lr(t,s),n){case 0:r=yd(null,r,t,s,a);break e;case 1:r=ag(null,r,t,s,a);break e;case 11:r=sg(null,r,t,s,a);break e;case 14:r=rg(null,r,t,Lr(t.type,s),a);break e}throw Error(Re(306,t,""))}return r;case 0:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Lr(t,n),yd(s,r,t,n,a);case 1:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Lr(t,n),ag(s,r,t,n,a);case 3:e:{if(uf(r),s===null)throw Error(Re(387));t=r.pendingProps,o=r.memoizedState,n=o.element,Fh(s,r),Wi(r,t,null,a);var i=r.memoizedState;if(t=i.element,o.isDehydrated)if(o={element:t,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){n=vn(Error(Re(423)),r),r=tg(s,r,t,a,n);break e}else if(t!==n){n=vn(Error(Re(424)),r),r=tg(s,r,t,a,n);break e}else for(vr=Ha(r.stateNode.containerInfo.firstChild),jr=r,bs=!0,$r=null,a=Ih(r,null,t,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(pn(),t===n){r=ba(s,r,a);break e}rr(s,r,t,a)}r=r.child}return r;case 5:return Lh(r),s===null&&gd(r),t=r.type,n=r.pendingProps,o=s!==null?s.memoizedProps:null,i=n.children,ld(t,n)?i=null:o!==null&&ld(t,o)&&(r.flags|=32),df(s,r),rr(s,r,i,a),r.child;case 6:return s===null&&gd(r),null;case 13:return mf(s,r,a);case 4:return wu(r,r.stateNode.containerInfo),t=r.pendingProps,s===null?r.child=yn(r,null,t,a):rr(s,r,t,a),r.child;case 11:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Lr(t,n),sg(s,r,t,n,a);case 7:return rr(s,r,r.pendingProps,a),r.child;case 8:return rr(s,r,r.pendingProps.children,a),r.child;case 12:return rr(s,r,r.pendingProps.children,a),r.child;case 10:e:{if(t=r.type._context,n=r.pendingProps,o=r.memoizedProps,i=n.value,ds(Gi,t._currentValue),t._currentValue=i,o!==null)if(Hr(o.value,i)){if(o.children===n.children&&!mr.current){r=ba(s,r,a);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===t){if(o.tag===1){c=xa(-1,a&-a),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?c.next=c:(c.next=g.next,g.next=c),d.pending=c}}o.lanes|=a,c=o.alternate,c!==null&&(c.lanes|=a),xd(o.return,a,r),l.lanes|=a;break}c=c.next}}else if(o.tag===10)i=o.type===r.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Re(341));i.lanes|=a,l=i.alternate,l!==null&&(l.lanes|=a),xd(i,a,r),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===r){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}rr(s,r,n.children,a),r=r.child}return r;case 9:return n=r.type,t=r.pendingProps.children,dn(r,a),n=Or(n),t=t(n),r.flags|=1,rr(s,r,t,a),r.child;case 14:return t=r.type,n=Lr(t,r.pendingProps),n=Lr(t.type,n),rg(s,r,t,n,a);case 15:return lf(s,r,r.type,r.pendingProps,a);case 17:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Lr(t,n),ji(s,r),r.tag=1,gr(t)?(s=!0,Bi(r)):s=!1,dn(r,a),tf(r,t,n),fd(r,t,n,a),bd(null,r,t,!0,s,a);case 19:return gf(s,r,a);case 22:return cf(s,r,a)}throw Error(Re(156,r.tag))};function Rf(s,r){return sh(s,r)}function gb(s,r,a,t){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(s,r,a,t){return new gb(s,r,a,t)}function Lu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function xb(s){if(typeof s=="function")return Lu(s)?1:0;if(s!=null){if(s=s.$$typeof,s===au)return 11;if(s===tu)return 14}return 2}function Ka(s,r){var a=s.alternate;return a===null?(a=Ar(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function Ei(s,r,a,t,n,o){var i=2;if(t=s,typeof s=="function")Lu(s)&&(i=1);else if(typeof s=="string")i=5;else e:switch(s){case Qt:return Et(a.children,n,o,r);case ru:i=8,n|=8;break;case Uc:return s=Ar(12,a,r,n|2),s.elementType=Uc,s.lanes=o,s;case $c:return s=Ar(13,a,r,n),s.elementType=$c,s.lanes=o,s;case Vc:return s=Ar(19,a,r,n),s.elementType=Vc,s.lanes=o,s;case Lx:return wl(a,n,o,r);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Mx:i=10;break e;case Fx:i=9;break e;case au:i=11;break e;case tu:i=14;break e;case Ra:i=16,t=null;break e}throw Error(Re(130,s==null?s:typeof s,""))}return r=Ar(i,a,r,n),r.elementType=s,r.type=t,r.lanes=o,r}function Et(s,r,a,t){return s=Ar(7,s,t,r),s.lanes=a,s}function wl(s,r,a,t){return s=Ar(22,s,t,r),s.elementType=Lx,s.lanes=a,s.stateNode={isHidden:!1},s}function gc(s,r,a){return s=Ar(6,s,null,r),s.lanes=a,s}function xc(s,r,a){return r=Ar(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}function hb(s,r,a,t,n){this.tag=r,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=t,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function zu(s,r,a,t,n,o,i,l,c){return s=new hb(s,r,a,l,c),r===1?(r=1,o===!0&&(r|=8)):r=0,o=Ar(3,null,null,r),s.current=o,o.stateNode=s,o.memoizedState={element:t,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(o),s}function fb(s,r,a){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gt,key:t==null?null:""+t,children:s,containerInfo:r,implementation:a}}function Af(s){if(!s)return Xa;s=s._reactInternals;e:{if(It(s)!==s||s.tag!==1)throw Error(Re(170));var r=s;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(gr(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Re(171))}if(s.tag===1){var a=s.type;if(gr(a))return Rh(s,a,r)}return r}function Pf(s,r,a,t,n,o,i,l,c){return s=zu(a,t,!0,s,n,o,i,l,c),s.context=Af(null),a=s.current,t=ar(),n=Wa(a),o=xa(t,n),o.callback=r??null,Ga(a,o,n),s.current.lanes=n,To(s,n,t),xr(s,t),s}function El(s,r,a,t){var n=r.current,o=ar(),i=Wa(n);return a=Af(a),r.context===null?r.context=a:r.pendingContext=a,r=xa(o,i),r.payload={element:s},t=t===void 0?null:t,t!==null&&(r.callback=t),s=Ga(n,r,i),s!==null&&(qr(s,n,i,o),yi(s,n,i)),i}function rl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function xg(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function Uu(s,r){xg(s,r),(s=s.alternate)&&xg(s,r)}function pb(){return null}var Tf=typeof reportError=="function"?reportError:function(s){console.error(s)};function $u(s){this._internalRoot=s}kl.prototype.render=$u.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(Re(409));El(s,r,null,null)};kl.prototype.unmount=$u.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Pt(function(){El(null,s,null,null)}),r[pa]=null}};function kl(s){this._internalRoot=s}kl.prototype.unstable_scheduleHydration=function(s){if(s){var r=lh();s={blockedOn:null,target:s,priority:r};for(var a=0;a<Oa.length&&r!==0&&r<Oa[a].priority;a++);Oa.splice(a,0,s),a===0&&dh(s)}};function Vu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function _l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function hg(){}function yb(s,r,a,t,n){if(n){if(typeof t=="function"){var o=t;t=function(){var d=rl(i);o.call(d)}}var i=Pf(r,t,s,0,null,!1,!1,"",hg);return s._reactRootContainer=i,s[pa]=i.current,bo(s.nodeType===8?s.parentNode:s),Pt(),i}for(;n=s.lastChild;)s.removeChild(n);if(typeof t=="function"){var l=t;t=function(){var d=rl(c);l.call(d)}}var c=zu(s,0,!1,null,null,!1,!1,"",hg);return s._reactRootContainer=c,s[pa]=c.current,bo(s.nodeType===8?s.parentNode:s),Pt(function(){El(r,c,a,t)}),c}function Sl(s,r,a,t,n){var o=a._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var l=n;n=function(){var c=rl(i);l.call(c)}}El(r,i,s,n)}else i=yb(a,r,s,n,t);return rl(i)}oh=function(s){switch(s.tag){case 3:var r=s.stateNode;if(r.current.memoizedState.isDehydrated){var a=Zn(r.pendingLanes);a!==0&&(iu(r,a|1),xr(r,_s()),!(Ke&6)&&(jn=_s()+500,at()))}break;case 13:Pt(function(){var t=ya(s,1);if(t!==null){var n=ar();qr(t,s,1,n)}}),Uu(s,1)}};lu=function(s){if(s.tag===13){var r=ya(s,134217728);if(r!==null){var a=ar();qr(r,s,134217728,a)}Uu(s,134217728)}};ih=function(s){if(s.tag===13){var r=Wa(s),a=ya(s,r);if(a!==null){var t=ar();qr(a,s,r,t)}Uu(s,r)}};lh=function(){return as};ch=function(s,r){var a=as;try{return as=s,r()}finally{as=a}};Yc=function(s,r,a){switch(r){case"input":if(Hc(s,a),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var t=a[r];if(t!==s&&t.form===s.form){var n=pl(t);if(!n)throw Error(Re(90));Ux(t),Hc(t,n)}}}break;case"textarea":Vx(s,a);break;case"select":r=a.value,r!=null&&nn(s,!!a.multiple,r,!1)}};Kx=Iu;Zx=Pt;var bb={usingClientEntryPoint:!1,Events:[Oo,Jt,pl,Qx,Wx,Iu]},Fn={findFiberByHostInstance:pt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vb={bundleType:Fn.bundleType,version:Fn.version,rendererPackageName:Fn.rendererPackageName,rendererConfig:Fn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Xx(s),s===null?null:s.stateNode},findFiberByHostInstance:Fn.findFiberByHostInstance||pb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{gl=oi.inject(vb),sa=oi}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bb;Er.createPortal=function(s,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(r))throw Error(Re(200));return fb(s,r,null,a)};Er.createRoot=function(s,r){if(!Vu(s))throw Error(Re(299));var a=!1,t="",n=Tf;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(t=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=zu(s,1,!1,null,null,a,!1,t,n),s[pa]=r.current,bo(s.nodeType===8?s.parentNode:s),new $u(r)};Er.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(Re(188)):(s=Object.keys(s).join(","),Error(Re(268,s)));return s=Xx(r),s=s===null?null:s.stateNode,s};Er.flushSync=function(s){return Pt(s)};Er.hydrate=function(s,r,a){if(!_l(r))throw Error(Re(200));return Sl(null,s,r,!0,a)};Er.hydrateRoot=function(s,r,a){if(!Vu(s))throw Error(Re(405));var t=a!=null&&a.hydratedSources||null,n=!1,o="",i=Tf;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),r=Pf(r,null,s,1,a??null,n,!1,o,i),s[pa]=r.current,bo(s),t)for(s=0;s<t.length;s++)a=t[s],n=a._getVersion,n=n(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,n]:r.mutableSourceEagerHydrationData.push(a,n);return new kl(r)};Er.render=function(s,r,a){if(!_l(r))throw Error(Re(200));return Sl(null,s,r,!1,a)};Er.unmountComponentAtNode=function(s){if(!_l(s))throw Error(Re(40));return s._reactRootContainer?(Pt(function(){Sl(null,null,s,!1,function(){s._reactRootContainer=null,s[pa]=null})}),!0):!1};Er.unstable_batchedUpdates=Iu;Er.unstable_renderSubtreeIntoContainer=function(s,r,a,t){if(!_l(a))throw Error(Re(200));if(s==null||s._reactInternals===void 0)throw Error(Re(38));return Sl(s,r,a,!1,t)};Er.version="18.3.1-next-f1338f8080-20240426";function Df(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Df)}catch(s){console.error(s)}}Df(),Tx.exports=Er;var Bu=Tx.exports;const jb=vx(Bu);var fg=Bu;Lc.createRoot=fg.createRoot,Lc.hydrateRoot=fg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Co(){return Co=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Co.apply(this,arguments)}var $a;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})($a||($a={}));const pg="popstate";function Nb(s){s===void 0&&(s={});function r(t,n){let{pathname:o,search:i,hash:l}=t.location;return Pd("",{pathname:o,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(t,n){return typeof n=="string"?n:al(n)}return Eb(r,a,null,s)}function Ss(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Of(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function wb(){return Math.random().toString(36).substr(2,8)}function yg(s,r){return{usr:s.state,key:s.key,idx:r}}function Pd(s,r,a,t){return a===void 0&&(a=null),Co({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof r=="string"?_n(r):r,{state:a,key:r&&r.key||t||wb()})}function al(s){let{pathname:r="/",search:a="",hash:t=""}=s;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function _n(s){let r={};if(s){let a=s.indexOf("#");a>=0&&(r.hash=s.substr(a),s=s.substr(0,a));let t=s.indexOf("?");t>=0&&(r.search=s.substr(t),s=s.substr(0,t)),s&&(r.pathname=s)}return r}function Eb(s,r,a,t){t===void 0&&(t={});let{window:n=document.defaultView,v5Compat:o=!1}=t,i=n.history,l=$a.Pop,c=null,d=g();d==null&&(d=0,i.replaceState(Co({},i.state,{idx:d}),""));function g(){return(i.state||{idx:null}).idx}function x(){l=$a.Pop;let C=g(),N=C==null?null:C-d;d=C,c&&c({action:l,location:S.location,delta:N})}function y(C,N){l=$a.Push;let p=Pd(S.location,C,N);d=g()+1;let _=yg(p,d),E=S.createHref(p);try{i.pushState(_,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;n.location.assign(E)}o&&c&&c({action:l,location:S.location,delta:1})}function w(C,N){l=$a.Replace;let p=Pd(S.location,C,N);d=g();let _=yg(p,d),E=S.createHref(p);i.replaceState(_,"",E),o&&c&&c({action:l,location:S.location,delta:0})}function k(C){let N=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof C=="string"?C:al(C);return p=p.replace(/ $/,"%20"),Ss(N,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,N)}let S={get action(){return l},get location(){return s(n,i)},listen(C){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(pg,x),c=C,()=>{n.removeEventListener(pg,x),c=null}},createHref(C){return r(n,C)},createURL:k,encodeLocation(C){let N=k(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:w,go(C){return i.go(C)}};return S}var bg;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(bg||(bg={}));function kb(s,r,a){return a===void 0&&(a="/"),_b(s,r,a)}function _b(s,r,a,t){let n=typeof r=="string"?_n(r):r,o=qu(n.pathname||"/",a);if(o==null)return null;let i=If(s);Sb(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=zb(o);l=Mb(i[c],d)}return l}function If(s,r,a,t){r===void 0&&(r=[]),a===void 0&&(a=[]),t===void 0&&(t="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Ss(c.relativePath.startsWith(t),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(t.length));let d=Za([t,c.relativePath]),g=a.concat(c);o.children&&o.children.length>0&&(Ss(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),If(o.children,r,g,d)),!(o.path==null&&!o.index)&&r.push({path:d,score:Ob(d,o.index),routesMeta:g})};return s.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of Mf(o.path))n(o,i,c)}),r}function Mf(s){let r=s.split("/");if(r.length===0)return[];let[a,...t]=r,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(t.length===0)return n?[o,""]:[o];let i=Mf(t.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function Sb(s){s.sort((r,a)=>r.score!==a.score?a.score-r.score:Ib(r.routesMeta.map(t=>t.childrenIndex),a.routesMeta.map(t=>t.childrenIndex)))}const Cb=/^:[\w-]+$/,Rb=3,Ab=2,Pb=1,Tb=10,Db=-2,vg=s=>s==="*";function Ob(s,r){let a=s.split("/"),t=a.length;return a.some(vg)&&(t+=Db),r&&(t+=Ab),a.filter(n=>!vg(n)).reduce((n,o)=>n+(Cb.test(o)?Rb:o===""?Pb:Tb),t)}function Ib(s,r){return s.length===r.length&&s.slice(0,-1).every((t,n)=>t===r[n])?s[s.length-1]-r[r.length-1]:0}function Mb(s,r,a){let{routesMeta:t}=s,n={},o="/",i=[];for(let l=0;l<t.length;++l){let c=t[l],d=l===t.length-1,g=o==="/"?r:r.slice(o.length)||"/",x=Fb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},g),y=c.route;if(!x)return null;Object.assign(n,x.params),i.push({params:n,pathname:Za([o,x.pathname]),pathnameBase:Bb(Za([o,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(o=Za([o,x.pathnameBase]))}return i}function Fb(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,t]=Lb(s.path,s.caseSensitive,s.end),n=r.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:t.reduce((d,g,x)=>{let{paramName:y,isOptional:w}=g;if(y==="*"){let S=l[x]||"";i=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const k=l[x];return w&&!k?d[y]=void 0:d[y]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:s}}function Lb(s,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),Of(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let t=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(t.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(t.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),t]}function zb(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Of(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),s}}function qu(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,t=s.charAt(a);return t&&t!=="/"?null:s.slice(a)||"/"}function Ub(s,r){r===void 0&&(r="/");let{pathname:a,search:t="",hash:n=""}=typeof s=="string"?_n(s):s;return{pathname:a?a.startsWith("/")?a:$b(a,r):r,search:qb(t),hash:Hb(n)}}function $b(s,r){let a=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function hc(s,r,a,t){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vb(s){return s.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function Hu(s,r){let a=Vb(s);return r?a.map((t,n)=>n===a.length-1?t.pathname:t.pathnameBase):a.map(t=>t.pathnameBase)}function Gu(s,r,a,t){t===void 0&&(t=!1);let n;typeof s=="string"?n=_n(s):(n=Co({},s),Ss(!n.pathname||!n.pathname.includes("?"),hc("?","pathname","search",n)),Ss(!n.pathname||!n.pathname.includes("#"),hc("#","pathname","hash",n)),Ss(!n.search||!n.search.includes("#"),hc("#","search","hash",n)));let o=s===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let x=r.length-1;if(!t&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),x-=1;n.pathname=y.join("/")}l=x>=0?r[x]:"/"}let c=Ub(n,l),d=i&&i!=="/"&&i.endsWith("/"),g=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||g)&&(c.pathname+="/"),c}const Za=s=>s.join("/").replace(/\/\/+/g,"/"),Bb=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),qb=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Hb=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Gb(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Ff=["post","put","patch","delete"];new Set(Ff);const Qb=["get",...Ff];new Set(Qb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Ro.apply(this,arguments)}const Qu=u.createContext(null),Wb=u.createContext(null),tt=u.createContext(null),Cl=u.createContext(null),na=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Lf=u.createContext(null);function Kb(s,r){let{relative:a}=r===void 0?{}:r;Sn()||Ss(!1);let{basename:t,navigator:n}=u.useContext(tt),{hash:o,pathname:i,search:l}=Uf(s,{relative:a}),c=i;return t!=="/"&&(c=i==="/"?t:Za([t,i])),n.createHref({pathname:c,search:l,hash:o})}function Sn(){return u.useContext(Cl)!=null}function nt(){return Sn()||Ss(!1),u.useContext(Cl).location}function zf(s){u.useContext(tt).static||u.useLayoutEffect(s)}function _r(){let{isDataRoute:s}=u.useContext(na);return s?uv():Zb()}function Zb(){Sn()||Ss(!1);let s=u.useContext(Qu),{basename:r,future:a,navigator:t}=u.useContext(tt),{matches:n}=u.useContext(na),{pathname:o}=nt(),i=JSON.stringify(Hu(n,a.v7_relativeSplatPath)),l=u.useRef(!1);return zf(()=>{l.current=!0}),u.useCallback(function(d,g){if(g===void 0&&(g={}),!l.current)return;if(typeof d=="number"){t.go(d);return}let x=Gu(d,JSON.parse(i),o,g.relative==="path");s==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:Za([r,x.pathname])),(g.replace?t.replace:t.push)(x,g.state,g)},[r,t,i,o,s])}const Jb=u.createContext(null);function Yb(s){let r=u.useContext(na).outlet;return r&&u.createElement(Jb.Provider,{value:s},r)}function Xb(){let{matches:s}=u.useContext(na),r=s[s.length-1];return r?r.params:{}}function Uf(s,r){let{relative:a}=r===void 0?{}:r,{future:t}=u.useContext(tt),{matches:n}=u.useContext(na),{pathname:o}=nt(),i=JSON.stringify(Hu(n,t.v7_relativeSplatPath));return u.useMemo(()=>Gu(s,JSON.parse(i),o,a==="path"),[s,i,o,a])}function ev(s,r){return sv(s,r)}function sv(s,r,a,t){Sn()||Ss(!1);let{navigator:n}=u.useContext(tt),{matches:o}=u.useContext(na),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=nt(),g;if(r){var x;let C=typeof r=="string"?_n(r):r;c==="/"||(x=C.pathname)!=null&&x.startsWith(c)||Ss(!1),g=C}else g=d;let y=g.pathname||"/",w=y;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=kb(s,{pathname:w}),S=ov(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Za([c,n.encodeLocation?n.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Za([c,n.encodeLocation?n.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,a,t);return r&&S?u.createElement(Cl.Provider,{value:{location:Ro({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:$a.Pop}},S):S}function rv(){let s=dv(),r=Gb(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},r),a?u.createElement("pre",{style:n},a):null,null)}const av=u.createElement(rv,null);class tv extends u.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?u.createElement(na.Provider,{value:this.props.routeContext},u.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nv(s){let{routeContext:r,match:a,children:t}=s,n=u.useContext(Qu);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(na.Provider,{value:r},t)}function ov(s,r,a,t){var n;if(r===void 0&&(r=[]),a===void 0&&(a=null),t===void 0&&(t=null),s==null){var o;if(!a)return null;if(a.errors)s=a.matches;else if((o=t)!=null&&o.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let i=s,l=(n=a)==null?void 0:n.errors;if(l!=null){let g=i.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);g>=0||Ss(!1),i=i.slice(0,Math.min(i.length,g+1))}let c=!1,d=-1;if(a&&t&&t.v7_partialHydration)for(let g=0;g<i.length;g++){let x=i[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=g),x.route.id){let{loaderData:y,errors:w}=a,k=x.route.loader&&y[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||k){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((g,x,y)=>{let w,k=!1,S=null,C=null;a&&(w=l&&x.route.id?l[x.route.id]:void 0,S=x.route.errorElement||av,c&&(d<0&&y===0?(mv("route-fallback"),k=!0,C=null):d===y&&(k=!0,C=x.route.hydrateFallbackElement||null)));let N=r.concat(i.slice(0,y+1)),p=()=>{let _;return w?_=S:k?_=C:x.route.Component?_=u.createElement(x.route.Component,null):x.route.element?_=x.route.element:_=g,u.createElement(nv,{match:x,routeContext:{outlet:g,matches:N,isDataRoute:a!=null},children:_})};return a&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?u.createElement(tv,{location:a.location,revalidation:a.revalidation,component:S,error:w,children:p(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):p()},null)}var $f=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}($f||{}),Vf=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(Vf||{});function iv(s){let r=u.useContext(Qu);return r||Ss(!1),r}function lv(s){let r=u.useContext(Wb);return r||Ss(!1),r}function cv(s){let r=u.useContext(na);return r||Ss(!1),r}function Bf(s){let r=cv(),a=r.matches[r.matches.length-1];return a.route.id||Ss(!1),a.route.id}function dv(){var s;let r=u.useContext(Lf),a=lv(),t=Bf();return r!==void 0?r:(s=a.errors)==null?void 0:s[t]}function uv(){let{router:s}=iv($f.UseNavigateStable),r=Bf(Vf.UseNavigateStable),a=u.useRef(!1);return zf(()=>{a.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,Ro({fromRouteId:r},o)))},[s,r])}const jg={};function mv(s,r,a){jg[s]||(jg[s]=!0)}function gv(s,r){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function gs(s){let{to:r,replace:a,state:t,relative:n}=s;Sn()||Ss(!1);let{future:o,static:i}=u.useContext(tt),{matches:l}=u.useContext(na),{pathname:c}=nt(),d=_r(),g=Gu(r,Hu(l,o.v7_relativeSplatPath),c,n==="path"),x=JSON.stringify(g);return u.useEffect(()=>d(JSON.parse(x),{replace:a,state:t,relative:n}),[d,x,n,a,t]),null}function xv(s){return Yb(s.context)}function Te(s){Ss(!1)}function hv(s){let{basename:r="/",children:a=null,location:t,navigationType:n=$a.Pop,navigator:o,static:i=!1,future:l}=s;Sn()&&Ss(!1);let c=r.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:Ro({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof t=="string"&&(t=_n(t));let{pathname:g="/",search:x="",hash:y="",state:w=null,key:k="default"}=t,S=u.useMemo(()=>{let C=qu(g,c);return C==null?null:{location:{pathname:C,search:x,hash:y,state:w,key:k},navigationType:n}},[c,g,x,y,w,k,n]);return S==null?null:u.createElement(tt.Provider,{value:d},u.createElement(Cl.Provider,{children:a,value:S}))}function fv(s){let{children:r,location:a}=s;return ev(Td(r),a)}new Promise(()=>{});function Td(s,r){r===void 0&&(r=[]);let a=[];return u.Children.forEach(s,(t,n)=>{if(!u.isValidElement(t))return;let o=[...r,n];if(t.type===u.Fragment){a.push.apply(a,Td(t.props.children,o));return}t.type!==Te&&Ss(!1),!t.props.index||!t.props.children||Ss(!1);let i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Td(t.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dd(){return Dd=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Dd.apply(this,arguments)}function pv(s,r){if(s==null)return{};var a={},t=Object.keys(s),n,o;for(o=0;o<t.length;o++)n=t[o],!(r.indexOf(n)>=0)&&(a[n]=s[n]);return a}function yv(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function bv(s,r){return s.button===0&&(!r||r==="_self")&&!yv(s)}const vv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jv="6";try{window.__reactRouterVersion=jv}catch{}const Nv="startTransition",Ng=dp[Nv];function wv(s){let{basename:r,children:a,future:t,window:n}=s,o=u.useRef();o.current==null&&(o.current=Nb({window:n,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=t||{},g=u.useCallback(x=>{d&&Ng?Ng(()=>c(x)):c(x)},[c,d]);return u.useLayoutEffect(()=>i.listen(g),[i,g]),u.useEffect(()=>gv(t),[t]),u.createElement(hv,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i,future:t})}const Ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=u.forwardRef(function(r,a){let{onClick:t,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:g,viewTransition:x}=r,y=pv(r,vv),{basename:w}=u.useContext(tt),k,S=!1;if(typeof d=="string"&&kv.test(d)&&(k=d,Ev))try{let _=new URL(window.location.href),E=d.startsWith("//")?new URL(_.protocol+d):new URL(d),b=qu(E.pathname,w);E.origin===_.origin&&b!=null?d=b+E.search+E.hash:S=!0}catch{}let C=Kb(d,{relative:n}),N=_v(d,{replace:i,state:l,target:c,preventScrollReset:g,relative:n,viewTransition:x});function p(_){t&&t(_),_.defaultPrevented||N(_)}return u.createElement("a",Dd({},y,{href:k||C,onClick:S||o?t:p,ref:a,target:c}))});var wg;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(wg||(wg={}));var Eg;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Eg||(Eg={}));function _v(s,r){let{target:a,replace:t,state:n,preventScrollReset:o,relative:i,viewTransition:l}=r===void 0?{}:r,c=_r(),d=nt(),g=Uf(s,{relative:i});return u.useCallback(x=>{if(bv(x,a)){x.preventDefault();let y=t!==void 0?t:al(d)===al(g);c(s,{replace:y,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,g,t,n,a,s,o,i,l])}function Od(s,r){return Od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},Od(s,r)}function Rl(s,r){s.prototype=Object.create(r.prototype),s.prototype.constructor=s,Od(s,r)}var Al=function(){function s(){this.listeners=[]}var r=s.prototype;return r.subscribe=function(t){var n=this,o=t||function(){};return this.listeners.push(o),this.onSubscribe(),function(){n.listeners=n.listeners.filter(function(i){return i!==o}),n.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},s}();function rs(){return rs=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},rs.apply(null,arguments)}var qf=typeof window>"u";function er(){}function Sv(s,r){return typeof s=="function"?s(r):s}function Cv(s){return typeof s=="number"&&s>=0&&s!==1/0}function tl(s){return Array.isArray(s)?s:[s]}function Rv(s,r){return Math.max(s+(r||0)-Date.now(),0)}function fc(s,r,a){return Pl(s)?typeof r=="function"?rs({},a,{queryKey:s,queryFn:r}):rs({},r,{queryKey:s}):s}function Pa(s,r,a){return Pl(s)?[rs({},r,{queryKey:s}),a]:[s||{},r]}function Av(s,r){if(s===!0&&r===!0||s==null&&r==null)return"all";if(s===!1&&r===!1)return"none";var a=s??!r;return a?"active":"inactive"}function kg(s,r){var a=s.active,t=s.exact,n=s.fetching,o=s.inactive,i=s.predicate,l=s.queryKey,c=s.stale;if(Pl(l)){if(t){if(r.queryHash!==Wu(l,r.options))return!1}else if(!nl(r.queryKey,l))return!1}var d=Av(a,o);if(d==="none")return!1;if(d!=="all"){var g=r.isActive();if(d==="active"&&!g||d==="inactive"&&g)return!1}return!(typeof c=="boolean"&&r.isStale()!==c||typeof n=="boolean"&&r.isFetching()!==n||i&&!i(r))}function _g(s,r){var a=s.exact,t=s.fetching,n=s.predicate,o=s.mutationKey;if(Pl(o)){if(!r.options.mutationKey)return!1;if(a){if(vt(r.options.mutationKey)!==vt(o))return!1}else if(!nl(r.options.mutationKey,o))return!1}return!(typeof t=="boolean"&&r.state.status==="loading"!==t||n&&!n(r))}function Wu(s,r){var a=(r==null?void 0:r.queryKeyHashFn)||vt;return a(s)}function vt(s){var r=tl(s);return Pv(r)}function Pv(s){return JSON.stringify(s,function(r,a){return Id(a)?Object.keys(a).sort().reduce(function(t,n){return t[n]=a[n],t},{}):a})}function nl(s,r){return Hf(tl(s),tl(r))}function Hf(s,r){return s===r?!0:typeof s!=typeof r?!1:s&&r&&typeof s=="object"&&typeof r=="object"?!Object.keys(r).some(function(a){return!Hf(s[a],r[a])}):!1}function Gf(s,r){if(s===r)return s;var a=Array.isArray(s)&&Array.isArray(r);if(a||Id(s)&&Id(r)){for(var t=a?s.length:Object.keys(s).length,n=a?r:Object.keys(r),o=n.length,i=a?[]:{},l=0,c=0;c<o;c++){var d=a?c:n[c];i[d]=Gf(s[d],r[d]),i[d]===s[d]&&l++}return t===o&&l===t?s:i}return r}function Id(s){if(!Sg(s))return!1;var r=s.constructor;if(typeof r>"u")return!0;var a=r.prototype;return!(!Sg(a)||!a.hasOwnProperty("isPrototypeOf"))}function Sg(s){return Object.prototype.toString.call(s)==="[object Object]"}function Pl(s){return typeof s=="string"||Array.isArray(s)}function Tv(s){return new Promise(function(r){setTimeout(r,s)})}function Cg(s){Promise.resolve().then(s).catch(function(r){return setTimeout(function(){throw r})})}function Qf(){if(typeof AbortController=="function")return new AbortController}var Dv=function(s){Rl(r,s);function r(){var t;return t=s.call(this)||this,t.setup=function(n){var o;if(!qf&&((o=window)!=null&&o.addEventListener)){var i=function(){return n()};return window.addEventListener("visibilitychange",i,!1),window.addEventListener("focus",i,!1),function(){window.removeEventListener("visibilitychange",i),window.removeEventListener("focus",i)}}},t}var a=r.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}},a.setEventListener=function(n){var o,i=this;this.setup=n,(o=this.cleanup)==null||o.call(this),this.cleanup=n(function(l){typeof l=="boolean"?i.setFocused(l):i.onFocus()})},a.setFocused=function(n){this.focused=n,n&&this.onFocus()},a.onFocus=function(){this.listeners.forEach(function(n){n()})},a.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(Al),ki=new Dv,Ov=function(s){Rl(r,s);function r(){var t;return t=s.call(this)||this,t.setup=function(n){var o;if(!qf&&((o=window)!=null&&o.addEventListener)){var i=function(){return n()};return window.addEventListener("online",i,!1),window.addEventListener("offline",i,!1),function(){window.removeEventListener("online",i),window.removeEventListener("offline",i)}}},t}var a=r.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}},a.setEventListener=function(n){var o,i=this;this.setup=n,(o=this.cleanup)==null||o.call(this),this.cleanup=n(function(l){typeof l=="boolean"?i.setOnline(l):i.onOnline()})},a.setOnline=function(n){this.online=n,n&&this.onOnline()},a.onOnline=function(){this.listeners.forEach(function(n){n()})},a.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(Al),_i=new Ov;function Iv(s){return Math.min(1e3*Math.pow(2,s),3e4)}function ol(s){return typeof(s==null?void 0:s.cancel)=="function"}var Wf=function(r){this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent};function pc(s){return s instanceof Wf}var Kf=function(r){var a=this,t=!1,n,o,i,l;this.abort=r.abort,this.cancel=function(y){return n==null?void 0:n(y)},this.cancelRetry=function(){t=!0},this.continueRetry=function(){t=!1},this.continue=function(){return o==null?void 0:o()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(y,w){i=y,l=w});var c=function(w){a.isResolved||(a.isResolved=!0,r.onSuccess==null||r.onSuccess(w),o==null||o(),i(w))},d=function(w){a.isResolved||(a.isResolved=!0,r.onError==null||r.onError(w),o==null||o(),l(w))},g=function(){return new Promise(function(w){o=w,a.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){o=void 0,a.isPaused=!1,r.onContinue==null||r.onContinue()})},x=function y(){if(!a.isResolved){var w;try{w=r.fn()}catch(k){w=Promise.reject(k)}n=function(S){if(!a.isResolved&&(d(new Wf(S)),a.abort==null||a.abort(),ol(w)))try{w.cancel()}catch{}},a.isTransportCancelable=ol(w),Promise.resolve(w).then(c).catch(function(k){var S,C;if(!a.isResolved){var N=(S=r.retry)!=null?S:3,p=(C=r.retryDelay)!=null?C:Iv,_=typeof p=="function"?p(a.failureCount,k):p,E=N===!0||typeof N=="number"&&a.failureCount<N||typeof N=="function"&&N(a.failureCount,k);if(t||!E){d(k);return}a.failureCount++,r.onFail==null||r.onFail(a.failureCount,k),Tv(_).then(function(){if(!ki.isFocused()||!_i.isOnline())return g()}).then(function(){t?d(k):y()})}})}};x()},Mv=function(){function s(){this.queue=[],this.transactions=0,this.notifyFn=function(a){a()},this.batchNotifyFn=function(a){a()}}var r=s.prototype;return r.batch=function(t){var n;this.transactions++;try{n=t()}finally{this.transactions--,this.transactions||this.flush()}return n},r.schedule=function(t){var n=this;this.transactions?this.queue.push(t):Cg(function(){n.notifyFn(t)})},r.batchCalls=function(t){var n=this;return function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];n.schedule(function(){t.apply(void 0,i)})}},r.flush=function(){var t=this,n=this.queue;this.queue=[],n.length&&Cg(function(){t.batchNotifyFn(function(){n.forEach(function(o){t.notifyFn(o)})})})},r.setNotifyFunction=function(t){this.notifyFn=t},r.setBatchNotifyFunction=function(t){this.batchNotifyFn=t},s}(),$s=new Mv,Zf=console;function Jf(){return Zf}function Fv(s){Zf=s}var Lv=function(){function s(a){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.cache=a.cache,this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.initialState=a.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=a.meta,this.scheduleGc()}var r=s.prototype;return r.setOptions=function(t){var n;this.options=rs({},this.defaultOptions,t),this.meta=t==null?void 0:t.meta,this.cacheTime=Math.max(this.cacheTime||0,(n=this.options.cacheTime)!=null?n:5*60*1e3)},r.setDefaultOptions=function(t){this.defaultOptions=t},r.scheduleGc=function(){var t=this;this.clearGcTimeout(),Cv(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){t.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(t,n){var o,i,l=this.state.data,c=Sv(t,l);return(o=(i=this.options).isDataEqual)!=null&&o.call(i,l,c)?c=l:this.options.structuralSharing!==!1&&(c=Gf(l,c)),this.dispatch({data:c,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt}),c},r.setState=function(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})},r.cancel=function(t){var n,o=this.promise;return(n=this.retryer)==null||n.cancel(t),o?o.then(er).catch(er):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(t){return t.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(t){return t.getCurrentResult().isStale})},r.isStaleByTime=function(t){return t===void 0&&(t=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Rv(this.state.dataUpdatedAt,t)},r.onFocus=function(){var t,n=this.observers.find(function(o){return o.shouldFetchOnWindowFocus()});n&&n.refetch(),(t=this.retryer)==null||t.continue()},r.onOnline=function(){var t,n=this.observers.find(function(o){return o.shouldFetchOnReconnect()});n&&n.refetch(),(t=this.retryer)==null||t.continue()},r.addObserver=function(t){this.observers.indexOf(t)===-1&&(this.observers.push(t),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))},r.removeObserver=function(t){this.observers.indexOf(t)!==-1&&(this.observers=this.observers.filter(function(n){return n!==t}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:t}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(t,n){var o=this,i,l,c;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var d;return(d=this.retryer)==null||d.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){var g=this.observers.find(function(p){return p.options.queryFn});g&&this.setOptions(g.options)}var x=tl(this.queryKey),y=Qf(),w={queryKey:x,pageParam:void 0,meta:this.meta};Object.defineProperty(w,"signal",{enumerable:!0,get:function(){if(y)return o.abortSignalConsumed=!0,y.signal}});var k=function(){return o.options.queryFn?(o.abortSignalConsumed=!1,o.options.queryFn(w)):Promise.reject("Missing queryFn")},S={fetchOptions:n,options:this.options,queryKey:x,state:this.state,fetchFn:k,meta:this.meta};if((i=this.options.behavior)!=null&&i.onFetch){var C;(C=this.options.behavior)==null||C.onFetch(S)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=S.fetchOptions)==null?void 0:l.meta)){var N;this.dispatch({type:"fetch",meta:(N=S.fetchOptions)==null?void 0:N.meta})}return this.retryer=new Kf({fn:S.fetchFn,abort:y==null||(c=y.abort)==null?void 0:c.bind(y),onSuccess:function(_){o.setData(_),o.cache.config.onSuccess==null||o.cache.config.onSuccess(_,o),o.cacheTime===0&&o.optionalRemove()},onError:function(_){pc(_)&&_.silent||o.dispatch({type:"error",error:_}),pc(_)||(o.cache.config.onError==null||o.cache.config.onError(_,o),Jf().error(_)),o.cacheTime===0&&o.optionalRemove()},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:S.options.retry,retryDelay:S.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(t){var n=this;this.state=this.reducer(this.state,t),$s.batch(function(){n.observers.forEach(function(o){o.onQueryUpdate(t)}),n.cache.notify({query:n,type:"queryUpdated",action:t})})},r.getDefaultState=function(t){var n=typeof t.initialData=="function"?t.initialData():t.initialData,o=typeof t.initialData<"u",i=o?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,l=typeof n<"u";return{data:n,dataUpdateCount:0,dataUpdatedAt:l?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},r.reducer=function(t,n){var o,i;switch(n.type){case"failed":return rs({},t,{fetchFailureCount:t.fetchFailureCount+1});case"pause":return rs({},t,{isPaused:!0});case"continue":return rs({},t,{isPaused:!1});case"fetch":return rs({},t,{fetchFailureCount:0,fetchMeta:(o=n.meta)!=null?o:null,isFetching:!0,isPaused:!1},!t.dataUpdatedAt&&{error:null,status:"loading"});case"success":return rs({},t,{data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(i=n.dataUpdatedAt)!=null?i:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=n.error;return pc(l)&&l.revert&&this.revertState?rs({},this.revertState):rs({},t,{error:l,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return rs({},t,{isInvalidated:!0});case"setState":return rs({},t,n.state);default:return t}},s}(),zv=function(s){Rl(r,s);function r(t){var n;return n=s.call(this)||this,n.config=t||{},n.queries=[],n.queriesMap={},n}var a=r.prototype;return a.build=function(n,o,i){var l,c=o.queryKey,d=(l=o.queryHash)!=null?l:Wu(c,o),g=this.get(d);return g||(g=new Lv({cache:this,queryKey:c,queryHash:d,options:n.defaultQueryOptions(o),state:i,defaultOptions:n.getQueryDefaults(c),meta:o.meta}),this.add(g)),g},a.add=function(n){this.queriesMap[n.queryHash]||(this.queriesMap[n.queryHash]=n,this.queries.push(n),this.notify({type:"queryAdded",query:n}))},a.remove=function(n){var o=this.queriesMap[n.queryHash];o&&(n.destroy(),this.queries=this.queries.filter(function(i){return i!==n}),o===n&&delete this.queriesMap[n.queryHash],this.notify({type:"queryRemoved",query:n}))},a.clear=function(){var n=this;$s.batch(function(){n.queries.forEach(function(o){n.remove(o)})})},a.get=function(n){return this.queriesMap[n]},a.getAll=function(){return this.queries},a.find=function(n,o){var i=Pa(n,o),l=i[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(c){return kg(l,c)})},a.findAll=function(n,o){var i=Pa(n,o),l=i[0];return Object.keys(l).length>0?this.queries.filter(function(c){return kg(l,c)}):this.queries},a.notify=function(n){var o=this;$s.batch(function(){o.listeners.forEach(function(i){i(n)})})},a.onFocus=function(){var n=this;$s.batch(function(){n.queries.forEach(function(o){o.onFocus()})})},a.onOnline=function(){var n=this;$s.batch(function(){n.queries.forEach(function(o){o.onOnline()})})},r}(Al),Uv=function(){function s(a){this.options=rs({},a.defaultOptions,a.options),this.mutationId=a.mutationId,this.mutationCache=a.mutationCache,this.observers=[],this.state=a.state||$v(),this.meta=a.meta}var r=s.prototype;return r.setState=function(t){this.dispatch({type:"setState",state:t})},r.addObserver=function(t){this.observers.indexOf(t)===-1&&this.observers.push(t)},r.removeObserver=function(t){this.observers=this.observers.filter(function(n){return n!==t})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(er).catch(er)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var t=this,n,o=this.state.status==="loading",i=Promise.resolve();return o||(this.dispatch({type:"loading",variables:this.options.variables}),i=i.then(function(){t.mutationCache.config.onMutate==null||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return t.options.onMutate==null?void 0:t.options.onMutate(t.state.variables)}).then(function(l){l!==t.state.context&&t.dispatch({type:"loading",context:l,variables:t.state.variables})})),i.then(function(){return t.executeMutation()}).then(function(l){n=l,t.mutationCache.config.onSuccess==null||t.mutationCache.config.onSuccess(n,t.state.variables,t.state.context,t)}).then(function(){return t.options.onSuccess==null?void 0:t.options.onSuccess(n,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(n,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:n}),n}).catch(function(l){return t.mutationCache.config.onError==null||t.mutationCache.config.onError(l,t.state.variables,t.state.context,t),Jf().error(l),Promise.resolve().then(function(){return t.options.onError==null?void 0:t.options.onError(l,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(void 0,l,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:l}),l})})},r.executeMutation=function(){var t=this,n;return this.retryer=new Kf({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:(n=this.options.retry)!=null?n:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(t){var n=this;this.state=Vv(this.state,t),$s.batch(function(){n.observers.forEach(function(o){o.onMutationUpdate(t)}),n.mutationCache.notify(n)})},s}();function $v(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Vv(s,r){switch(r.type){case"failed":return rs({},s,{failureCount:s.failureCount+1});case"pause":return rs({},s,{isPaused:!0});case"continue":return rs({},s,{isPaused:!1});case"loading":return rs({},s,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return rs({},s,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return rs({},s,{data:void 0,error:r.error,failureCount:s.failureCount+1,isPaused:!1,status:"error"});case"setState":return rs({},s,r.state);default:return s}}var Bv=function(s){Rl(r,s);function r(t){var n;return n=s.call(this)||this,n.config=t||{},n.mutations=[],n.mutationId=0,n}var a=r.prototype;return a.build=function(n,o,i){var l=new Uv({mutationCache:this,mutationId:++this.mutationId,options:n.defaultMutationOptions(o),state:i,defaultOptions:o.mutationKey?n.getMutationDefaults(o.mutationKey):void 0,meta:o.meta});return this.add(l),l},a.add=function(n){this.mutations.push(n),this.notify(n)},a.remove=function(n){this.mutations=this.mutations.filter(function(o){return o!==n}),n.cancel(),this.notify(n)},a.clear=function(){var n=this;$s.batch(function(){n.mutations.forEach(function(o){n.remove(o)})})},a.getAll=function(){return this.mutations},a.find=function(n){return typeof n.exact>"u"&&(n.exact=!0),this.mutations.find(function(o){return _g(n,o)})},a.findAll=function(n){return this.mutations.filter(function(o){return _g(n,o)})},a.notify=function(n){var o=this;$s.batch(function(){o.listeners.forEach(function(i){i(n)})})},a.onFocus=function(){this.resumePausedMutations()},a.onOnline=function(){this.resumePausedMutations()},a.resumePausedMutations=function(){var n=this.mutations.filter(function(o){return o.state.isPaused});return $s.batch(function(){return n.reduce(function(o,i){return o.then(function(){return i.continue().catch(er)})},Promise.resolve())})},r}(Al);function qv(){return{onFetch:function(r){r.fetchFn=function(){var a,t,n,o,i,l,c=(a=r.fetchOptions)==null||(t=a.meta)==null?void 0:t.refetchPage,d=(n=r.fetchOptions)==null||(o=n.meta)==null?void 0:o.fetchMore,g=d==null?void 0:d.pageParam,x=(d==null?void 0:d.direction)==="forward",y=(d==null?void 0:d.direction)==="backward",w=((i=r.state.data)==null?void 0:i.pages)||[],k=((l=r.state.data)==null?void 0:l.pageParams)||[],S=Qf(),C=S==null?void 0:S.signal,N=k,p=!1,_=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},E=function(F,ae,ne,ce){return N=ce?[ae].concat(N):[].concat(N,[ae]),ce?[ne].concat(F):[].concat(F,[ne])},b=function(F,ae,ne,ce){if(p)return Promise.reject("Cancelled");if(typeof ne>"u"&&!ae&&F.length)return Promise.resolve(F);var H={queryKey:r.queryKey,signal:C,pageParam:ne,meta:r.meta},K=_(H),te=Promise.resolve(K).then(function(O){return E(F,ne,O,ce)});if(ol(K)){var W=te;W.cancel=K.cancel}return te},f;if(!w.length)f=b([]);else if(x){var P=typeof g<"u",R=P?g:Rg(r.options,w);f=b(w,P,R)}else if(y){var q=typeof g<"u",I=q?g:Hv(r.options,w);f=b(w,q,I,!0)}else(function(){N=[];var V=typeof r.options.getNextPageParam>"u",F=c&&w[0]?c(w[0],0,w):!0;f=F?b([],V,k[0]):Promise.resolve(E([],k[0],w[0]));for(var ae=function(H){f=f.then(function(K){var te=c&&w[H]?c(w[H],H,w):!0;if(te){var W=V?k[H]:Rg(r.options,K);return b(K,V,W)}return Promise.resolve(E(K,k[H],w[H]))})},ne=1;ne<w.length;ne++)ae(ne)})();var $=f.then(function(V){return{pages:V,pageParams:N}}),G=$;return G.cancel=function(){p=!0,S==null||S.abort(),ol(f)&&f.cancel()},$}}}}function Rg(s,r){return s.getNextPageParam==null?void 0:s.getNextPageParam(r[r.length-1],r)}function Hv(s,r){return s.getPreviousPageParam==null?void 0:s.getPreviousPageParam(r[0],r)}var Gv=function(){function s(a){a===void 0&&(a={}),this.queryCache=a.queryCache||new zv,this.mutationCache=a.mutationCache||new Bv,this.defaultOptions=a.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=s.prototype;return r.mount=function(){var t=this;this.unsubscribeFocus=ki.subscribe(function(){ki.isFocused()&&_i.isOnline()&&(t.mutationCache.onFocus(),t.queryCache.onFocus())}),this.unsubscribeOnline=_i.subscribe(function(){ki.isFocused()&&_i.isOnline()&&(t.mutationCache.onOnline(),t.queryCache.onOnline())})},r.unmount=function(){var t,n;(t=this.unsubscribeFocus)==null||t.call(this),(n=this.unsubscribeOnline)==null||n.call(this)},r.isFetching=function(t,n){var o=Pa(t,n),i=o[0];return i.fetching=!0,this.queryCache.findAll(i).length},r.isMutating=function(t){return this.mutationCache.findAll(rs({},t,{fetching:!0})).length},r.getQueryData=function(t,n){var o;return(o=this.queryCache.find(t,n))==null?void 0:o.state.data},r.getQueriesData=function(t){return this.getQueryCache().findAll(t).map(function(n){var o=n.queryKey,i=n.state,l=i.data;return[o,l]})},r.setQueryData=function(t,n,o){var i=fc(t),l=this.defaultQueryOptions(i);return this.queryCache.build(this,l).setData(n,o)},r.setQueriesData=function(t,n,o){var i=this;return $s.batch(function(){return i.getQueryCache().findAll(t).map(function(l){var c=l.queryKey;return[c,i.setQueryData(c,n,o)]})})},r.getQueryState=function(t,n){var o;return(o=this.queryCache.find(t,n))==null?void 0:o.state},r.removeQueries=function(t,n){var o=Pa(t,n),i=o[0],l=this.queryCache;$s.batch(function(){l.findAll(i).forEach(function(c){l.remove(c)})})},r.resetQueries=function(t,n,o){var i=this,l=Pa(t,n,o),c=l[0],d=l[1],g=this.queryCache,x=rs({},c,{active:!0});return $s.batch(function(){return g.findAll(c).forEach(function(y){y.reset()}),i.refetchQueries(x,d)})},r.cancelQueries=function(t,n,o){var i=this,l=Pa(t,n,o),c=l[0],d=l[1],g=d===void 0?{}:d;typeof g.revert>"u"&&(g.revert=!0);var x=$s.batch(function(){return i.queryCache.findAll(c).map(function(y){return y.cancel(g)})});return Promise.all(x).then(er).catch(er)},r.invalidateQueries=function(t,n,o){var i,l,c,d=this,g=Pa(t,n,o),x=g[0],y=g[1],w=rs({},x,{active:(i=(l=x.refetchActive)!=null?l:x.active)!=null?i:!0,inactive:(c=x.refetchInactive)!=null?c:!1});return $s.batch(function(){return d.queryCache.findAll(x).forEach(function(k){k.invalidate()}),d.refetchQueries(w,y)})},r.refetchQueries=function(t,n,o){var i=this,l=Pa(t,n,o),c=l[0],d=l[1],g=$s.batch(function(){return i.queryCache.findAll(c).map(function(y){return y.fetch(void 0,rs({},d,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))})}),x=Promise.all(g).then(er);return d!=null&&d.throwOnError||(x=x.catch(er)),x},r.fetchQuery=function(t,n,o){var i=fc(t,n,o),l=this.defaultQueryOptions(i);typeof l.retry>"u"&&(l.retry=!1);var c=this.queryCache.build(this,l);return c.isStaleByTime(l.staleTime)?c.fetch(l):Promise.resolve(c.state.data)},r.prefetchQuery=function(t,n,o){return this.fetchQuery(t,n,o).then(er).catch(er)},r.fetchInfiniteQuery=function(t,n,o){var i=fc(t,n,o);return i.behavior=qv(),this.fetchQuery(i)},r.prefetchInfiniteQuery=function(t,n,o){return this.fetchInfiniteQuery(t,n,o).then(er).catch(er)},r.cancelMutations=function(){var t=this,n=$s.batch(function(){return t.mutationCache.getAll().map(function(o){return o.cancel()})});return Promise.all(n).then(er).catch(er)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(t){return this.mutationCache.build(this,t).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(t){this.defaultOptions=t},r.setQueryDefaults=function(t,n){var o=this.queryDefaults.find(function(i){return vt(t)===vt(i.queryKey)});o?o.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})},r.getQueryDefaults=function(t){var n;return t?(n=this.queryDefaults.find(function(o){return nl(t,o.queryKey)}))==null?void 0:n.defaultOptions:void 0},r.setMutationDefaults=function(t,n){var o=this.mutationDefaults.find(function(i){return vt(t)===vt(i.mutationKey)});o?o.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})},r.getMutationDefaults=function(t){var n;return t?(n=this.mutationDefaults.find(function(o){return nl(t,o.mutationKey)}))==null?void 0:n.defaultOptions:void 0},r.defaultQueryOptions=function(t){if(t!=null&&t._defaulted)return t;var n=rs({},this.defaultOptions.queries,this.getQueryDefaults(t==null?void 0:t.queryKey),t,{_defaulted:!0});return!n.queryHash&&n.queryKey&&(n.queryHash=Wu(n.queryKey,n)),n},r.defaultQueryObserverOptions=function(t){return this.defaultQueryOptions(t)},r.defaultMutationOptions=function(t){return t!=null&&t._defaulted?t:rs({},this.defaultOptions.mutations,this.getMutationDefaults(t==null?void 0:t.mutationKey),t,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},s}(),Qv=jb.unstable_batchedUpdates;$s.setBatchNotifyFunction(Qv);var Wv=console;Fv(Wv);var Ag=Be.createContext(void 0),Kv=Be.createContext(!1);function Zv(s){return s&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Ag),window.ReactQueryClientContext):Ag}var Jv=function(r){var a=r.client,t=r.contextSharing,n=t===void 0?!1:t,o=r.children;Be.useEffect(function(){return a.mount(),function(){a.unmount()}},[a]);var i=Zv(n);return Be.createElement(Kv.Provider,{value:n},Be.createElement(i.Provider,{value:a},o))};let Yv={data:""},Xv=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||Yv},ej=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sj=/\/\*[^]*?\*\/|  +/g,Pg=/\n+/g,Ma=(s,r)=>{let a="",t="",n="";for(let o in s){let i=s[o];o[0]=="@"?o[1]=="i"?a=o+" "+i+";":t+=o[1]=="f"?Ma(i,o):o+"{"+Ma(i,o[1]=="k"?"":r)+"}":typeof i=="object"?t+=Ma(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Ma.p?Ma.p(o,i):o+":"+i+";")}return a+(r&&n?r+"{"+n+"}":n)+t},ia={},Yf=s=>{if(typeof s=="object"){let r="";for(let a in s)r+=a+Yf(s[a]);return r}return s},rj=(s,r,a,t,n)=>{let o=Yf(s),i=ia[o]||(ia[o]=(c=>{let d=0,g=11;for(;d<c.length;)g=101*g+c.charCodeAt(d++)>>>0;return"go"+g})(o));if(!ia[i]){let c=o!==s?s:(d=>{let g,x,y=[{}];for(;g=ej.exec(d.replace(sj,""));)g[4]?y.shift():g[3]?(x=g[3].replace(Pg," ").trim(),y.unshift(y[0][x]=y[0][x]||{})):y[0][g[1]]=g[2].replace(Pg," ").trim();return y[0]})(s);ia[i]=Ma(n?{["@keyframes "+i]:c}:c,a?"":"."+i)}let l=a&&ia.g?ia.g:null;return a&&(ia.g=ia[i]),((c,d,g,x)=>{x?d.data=d.data.replace(x,c):d.data.indexOf(c)===-1&&(d.data=g?c+d.data:d.data+c)})(ia[i],r,t,l),i},aj=(s,r,a)=>s.reduce((t,n,o)=>{let i=r[o];if(i&&i.call){let l=i(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":Ma(l,""):l===!1?"":l}return t+n+(i??"")},"");function Tl(s){let r=this||{},a=s.call?s(r.p):s;return rj(a.unshift?a.raw?aj(a,[].slice.call(arguments,1),r.p):a.reduce((t,n)=>Object.assign(t,n&&n.call?n(r.p):n),{}):a,Xv(r.target),r.g,r.o,r.k)}let Xf,Md,Fd;Tl.bind({g:1});let va=Tl.bind({k:1});function tj(s,r,a,t){Ma.p=r,Xf=s,Md=a,Fd=t}function ot(s,r){let a=this||{};return function(){let t=arguments;function n(o,i){let l=Object.assign({},o),c=l.className||n.className;a.p=Object.assign({theme:Md&&Md()},l),a.o=/ *go\d+/.test(c),l.className=Tl.apply(a,t)+(c?" "+c:"");let d=s;return s[0]&&(d=l.as||s,delete l.as),Fd&&d[0]&&Fd(l),Xf(d,l)}return n}}var nj=s=>typeof s=="function",il=(s,r)=>nj(s)?s(r):s,oj=(()=>{let s=0;return()=>(++s).toString()})(),e0=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),ij=20,Ku="default",s0=(s,r)=>{let{toastLimit:a}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:t}=r;return s0(s,{type:s.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:n}=r;return{...s,toasts:s.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let o=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Si=[],r0={toasts:[],pausedAt:void 0,settings:{toastLimit:ij}},Xr={},a0=(s,r=Ku)=>{Xr[r]=s0(Xr[r]||r0,s),Si.forEach(([a,t])=>{a===r&&t(Xr[r])})},t0=s=>Object.keys(Xr).forEach(r=>a0(s,r)),lj=s=>Object.keys(Xr).find(r=>Xr[r].toasts.some(a=>a.id===s)),Dl=(s=Ku)=>r=>{a0(r,s)},cj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dj=(s={},r=Ku)=>{let[a,t]=u.useState(Xr[r]||r0),n=u.useRef(Xr[r]);u.useEffect(()=>(n.current!==Xr[r]&&t(Xr[r]),Si.push([r,t]),()=>{let i=Si.findIndex(([l])=>l===r);i>-1&&Si.splice(i,1)}),[r]);let o=a.toasts.map(i=>{var l,c,d;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((l=s[i.type])==null?void 0:l.removeDelay)||(s==null?void 0:s.removeDelay),duration:i.duration||((c=s[i.type])==null?void 0:c.duration)||(s==null?void 0:s.duration)||cj[i.type],style:{...s.style,...(d=s[i.type])==null?void 0:d.style,...i.style}}});return{...a,toasts:o}},uj=(s,r="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||oj()}),Mo=s=>(r,a)=>{let t=uj(r,s,a);return Dl(t.toasterId||lj(t.id))({type:2,toast:t}),t.id},Ms=(s,r)=>Mo("blank")(s,r);Ms.error=Mo("error");Ms.success=Mo("success");Ms.loading=Mo("loading");Ms.custom=Mo("custom");Ms.dismiss=(s,r)=>{let a={type:3,toastId:s};r?Dl(r)(a):t0(a)};Ms.dismissAll=s=>Ms.dismiss(void 0,s);Ms.remove=(s,r)=>{let a={type:4,toastId:s};r?Dl(r)(a):t0(a)};Ms.removeAll=s=>Ms.remove(void 0,s);Ms.promise=(s,r,a)=>{let t=Ms.loading(r.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(n=>{let o=r.success?il(r.success,n):void 0;return o?Ms.success(o,{id:t,...a,...a==null?void 0:a.success}):Ms.dismiss(t),n}).catch(n=>{let o=r.error?il(r.error,n):void 0;o?Ms.error(o,{id:t,...a,...a==null?void 0:a.error}):Ms.dismiss(t)}),s};var mj=1e3,gj=(s,r="default")=>{let{toasts:a,pausedAt:t}=dj(s,r),n=u.useRef(new Map).current,o=u.useCallback((x,y=mj)=>{if(n.has(x))return;let w=setTimeout(()=>{n.delete(x),i({type:4,toastId:x})},y);n.set(x,w)},[]);u.useEffect(()=>{if(t)return;let x=Date.now(),y=a.map(w=>{if(w.duration===1/0)return;let k=(w.duration||0)+w.pauseDuration-(x-w.createdAt);if(k<0){w.visible&&Ms.dismiss(w.id);return}return setTimeout(()=>Ms.dismiss(w.id,r),k)});return()=>{y.forEach(w=>w&&clearTimeout(w))}},[a,t,r]);let i=u.useCallback(Dl(r),[r]),l=u.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=u.useCallback((x,y)=>{i({type:1,toast:{id:x,height:y}})},[i]),d=u.useCallback(()=>{t&&i({type:6,time:Date.now()})},[t,i]),g=u.useCallback((x,y)=>{let{reverseOrder:w=!1,gutter:k=8,defaultPosition:S}=y||{},C=a.filter(_=>(_.position||S)===(x.position||S)&&_.height),N=C.findIndex(_=>_.id===x.id),p=C.filter((_,E)=>E<N&&_.visible).length;return C.filter(_=>_.visible).slice(...w?[p+1]:[0,p]).reduce((_,E)=>_+(E.height||0)+k,0)},[a]);return u.useEffect(()=>{a.forEach(x=>{if(x.dismissed)o(x.id,x.removeDelay);else{let y=n.get(x.id);y&&(clearTimeout(y),n.delete(x.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:g}}},xj=va`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hj=va`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fj=va`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pj=ot("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${fj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yj=va`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,bj=ot("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${yj} 1s linear infinite;
`,vj=va`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jj=va`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Nj=ot("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wj=ot("div")`
  position: absolute;
`,Ej=ot("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kj=va`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_j=ot("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sj=({toast:s})=>{let{icon:r,type:a,iconTheme:t}=s;return r!==void 0?typeof r=="string"?u.createElement(_j,null,r):r:a==="blank"?null:u.createElement(Ej,null,u.createElement(bj,{...t}),a!=="loading"&&u.createElement(wj,null,a==="error"?u.createElement(pj,{...t}):u.createElement(Nj,{...t})))},Cj=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Rj=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Aj="0%{opacity:0;} 100%{opacity:1;}",Pj="0%{opacity:1;} 100%{opacity:0;}",Tj=ot("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Dj=ot("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Oj=(s,r)=>{let a=s.includes("top")?1:-1,[t,n]=e0()?[Aj,Pj]:[Cj(a),Rj(a)];return{animation:r?`${va(t)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${va(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ij=u.memo(({toast:s,position:r,style:a,children:t})=>{let n=s.height?Oj(s.position||r||"top-center",s.visible):{opacity:0},o=u.createElement(Sj,{toast:s}),i=u.createElement(Dj,{...s.ariaProps},il(s.message,s));return u.createElement(Tj,{className:s.className,style:{...n,...a,...s.style}},typeof t=="function"?t({icon:o,message:i}):u.createElement(u.Fragment,null,o,i))});tj(u.createElement);var Mj=({id:s,className:r,style:a,onHeightUpdate:t,children:n})=>{let o=u.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;t(s,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[s,t]);return u.createElement("div",{ref:o,className:r,style:a},n)},Fj=(s,r)=>{let a=s.includes("top"),t=a?{top:0}:{bottom:0},n=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:e0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(a?1:-1)}px)`,...t,...n}},Lj=Tl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ii=16,zj=({reverseOrder:s,position:r="top-center",toastOptions:a,gutter:t,children:n,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=gj(a,o);return u.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:ii,left:ii,right:ii,bottom:ii,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(g=>{let x=g.position||r,y=d.calculateOffset(g,{reverseOrder:s,gutter:t,defaultPosition:r}),w=Fj(x,y);return u.createElement(Mj,{id:g.id,key:g.id,onHeightUpdate:d.updateHeight,className:g.visible?Lj:"",style:w},g.type==="custom"?il(g.message,g):n?n(g):u.createElement(Ij,{toast:g,position:x}))}))},m=Ms;function n0(s,r){return function(){return s.apply(r,arguments)}}const{toString:Uj}=Object.prototype,{getPrototypeOf:Zu}=Object,{iterator:Ol,toStringTag:o0}=Symbol,Il=(s=>r=>{const a=Uj.call(r);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Gr=s=>(s=s.toLowerCase(),r=>Il(r)===s),Ml=s=>r=>typeof r===s,{isArray:Cn}=Array,Nn=Ml("undefined");function Fo(s){return s!==null&&!Nn(s)&&s.constructor!==null&&!Nn(s.constructor)&&hr(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const i0=Gr("ArrayBuffer");function $j(s){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(s):r=s&&s.buffer&&i0(s.buffer),r}const Vj=Ml("string"),hr=Ml("function"),l0=Ml("number"),Lo=s=>s!==null&&typeof s=="object",Bj=s=>s===!0||s===!1,Ci=s=>{if(Il(s)!=="object")return!1;const r=Zu(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(o0 in s)&&!(Ol in s)},qj=s=>{if(!Lo(s)||Fo(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Hj=Gr("Date"),Gj=Gr("File"),Qj=Gr("Blob"),Wj=Gr("FileList"),Kj=s=>Lo(s)&&hr(s.pipe),Zj=s=>{let r;return s&&(typeof FormData=="function"&&s instanceof FormData||hr(s.append)&&((r=Il(s))==="formdata"||r==="object"&&hr(s.toString)&&s.toString()==="[object FormData]"))},Jj=Gr("URLSearchParams"),[Yj,Xj,eN,sN]=["ReadableStream","Request","Response","Headers"].map(Gr),rN=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zo(s,r,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let t,n;if(typeof s!="object"&&(s=[s]),Cn(s))for(t=0,n=s.length;t<n;t++)r.call(null,s[t],t,s);else{if(Fo(s))return;const o=a?Object.getOwnPropertyNames(s):Object.keys(s),i=o.length;let l;for(t=0;t<i;t++)l=o[t],r.call(null,s[l],l,s)}}function c0(s,r){if(Fo(s))return null;r=r.toLowerCase();const a=Object.keys(s);let t=a.length,n;for(;t-- >0;)if(n=a[t],r===n.toLowerCase())return n;return null}const jt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,d0=s=>!Nn(s)&&s!==jt;function Ld(){const{caseless:s,skipUndefined:r}=d0(this)&&this||{},a={},t=(n,o)=>{const i=s&&c0(a,o)||o;Ci(a[i])&&Ci(n)?a[i]=Ld(a[i],n):Ci(n)?a[i]=Ld({},n):Cn(n)?a[i]=n.slice():(!r||!Nn(n))&&(a[i]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&zo(arguments[n],t);return a}const aN=(s,r,a,{allOwnKeys:t}={})=>(zo(r,(n,o)=>{a&&hr(n)?s[o]=n0(n,a):s[o]=n},{allOwnKeys:t}),s),tN=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),nN=(s,r,a,t)=>{s.prototype=Object.create(r.prototype,t),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:r.prototype}),a&&Object.assign(s.prototype,a)},oN=(s,r,a,t)=>{let n,o,i;const l={};if(r=r||{},s==null)return r;do{for(n=Object.getOwnPropertyNames(s),o=n.length;o-- >0;)i=n[o],(!t||t(i,s,r))&&!l[i]&&(r[i]=s[i],l[i]=!0);s=a!==!1&&Zu(s)}while(s&&(!a||a(s,r))&&s!==Object.prototype);return r},iN=(s,r,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=r.length;const t=s.indexOf(r,a);return t!==-1&&t===a},lN=s=>{if(!s)return null;if(Cn(s))return s;let r=s.length;if(!l0(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=s[r];return a},cN=(s=>r=>s&&r instanceof s)(typeof Uint8Array<"u"&&Zu(Uint8Array)),dN=(s,r)=>{const t=(s&&s[Ol]).call(s);let n;for(;(n=t.next())&&!n.done;){const o=n.value;r.call(s,o[0],o[1])}},uN=(s,r)=>{let a;const t=[];for(;(a=s.exec(r))!==null;)t.push(a);return t},mN=Gr("HTMLFormElement"),gN=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,t,n){return t.toUpperCase()+n}),Tg=(({hasOwnProperty:s})=>(r,a)=>s.call(r,a))(Object.prototype),xN=Gr("RegExp"),u0=(s,r)=>{const a=Object.getOwnPropertyDescriptors(s),t={};zo(a,(n,o)=>{let i;(i=r(n,o,s))!==!1&&(t[o]=i||n)}),Object.defineProperties(s,t)},hN=s=>{u0(s,(r,a)=>{if(hr(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const t=s[a];if(hr(t)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},fN=(s,r)=>{const a={},t=n=>{n.forEach(o=>{a[o]=!0})};return Cn(s)?t(s):t(String(s).split(r)),a},pN=()=>{},yN=(s,r)=>s!=null&&Number.isFinite(s=+s)?s:r;function bN(s){return!!(s&&hr(s.append)&&s[o0]==="FormData"&&s[Ol])}const vN=s=>{const r=new Array(10),a=(t,n)=>{if(Lo(t)){if(r.indexOf(t)>=0)return;if(Fo(t))return t;if(!("toJSON"in t)){r[n]=t;const o=Cn(t)?[]:{};return zo(t,(i,l)=>{const c=a(i,n+1);!Nn(c)&&(o[l]=c)}),r[n]=void 0,o}}return t};return a(s,0)},jN=Gr("AsyncFunction"),NN=s=>s&&(Lo(s)||hr(s))&&hr(s.then)&&hr(s.catch),m0=((s,r)=>s?setImmediate:r?((a,t)=>(jt.addEventListener("message",({source:n,data:o})=>{n===jt&&o===a&&t.length&&t.shift()()},!1),n=>{t.push(n),jt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",hr(jt.postMessage)),wN=typeof queueMicrotask<"u"?queueMicrotask.bind(jt):typeof process<"u"&&process.nextTick||m0,EN=s=>s!=null&&hr(s[Ol]),fe={isArray:Cn,isArrayBuffer:i0,isBuffer:Fo,isFormData:Zj,isArrayBufferView:$j,isString:Vj,isNumber:l0,isBoolean:Bj,isObject:Lo,isPlainObject:Ci,isEmptyObject:qj,isReadableStream:Yj,isRequest:Xj,isResponse:eN,isHeaders:sN,isUndefined:Nn,isDate:Hj,isFile:Gj,isBlob:Qj,isRegExp:xN,isFunction:hr,isStream:Kj,isURLSearchParams:Jj,isTypedArray:cN,isFileList:Wj,forEach:zo,merge:Ld,extend:aN,trim:rN,stripBOM:tN,inherits:nN,toFlatObject:oN,kindOf:Il,kindOfTest:Gr,endsWith:iN,toArray:lN,forEachEntry:dN,matchAll:uN,isHTMLForm:mN,hasOwnProperty:Tg,hasOwnProp:Tg,reduceDescriptors:u0,freezeMethods:hN,toObjectSet:fN,toCamelCase:gN,noop:pN,toFiniteNumber:yN,findKey:c0,global:jt,isContextDefined:d0,isSpecCompliantForm:bN,toJSONObject:vN,isAsyncFn:jN,isThenable:NN,setImmediate:m0,asap:wN,isIterable:EN};function qe(s,r,a,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",r&&(this.code=r),a&&(this.config=a),t&&(this.request=t),n&&(this.response=n,this.status=n.status?n.status:null)}fe.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const g0=qe.prototype,x0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{x0[s]={value:s}});Object.defineProperties(qe,x0);Object.defineProperty(g0,"isAxiosError",{value:!0});qe.from=(s,r,a,t,n,o)=>{const i=Object.create(g0);fe.toFlatObject(s,i,function(g){return g!==Error.prototype},d=>d!=="isAxiosError");const l=s&&s.message?s.message:"Error",c=r==null&&s?s.code:r;return qe.call(i,l,c,a,t,n),s&&i.cause==null&&Object.defineProperty(i,"cause",{value:s,configurable:!0}),i.name=s&&s.name||"Error",o&&Object.assign(i,o),i};const kN=null;function zd(s){return fe.isPlainObject(s)||fe.isArray(s)}function h0(s){return fe.endsWith(s,"[]")?s.slice(0,-2):s}function Dg(s,r,a){return s?s.concat(r).map(function(n,o){return n=h0(n),!a&&o?"["+n+"]":n}).join(a?".":""):r}function _N(s){return fe.isArray(s)&&!s.some(zd)}const SN=fe.toFlatObject(fe,{},null,function(r){return/^is[A-Z]/.test(r)});function Fl(s,r,a){if(!fe.isObject(s))throw new TypeError("target must be an object");r=r||new FormData,a=fe.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!fe.isUndefined(C[S])});const t=a.metaTokens,n=a.visitor||g,o=a.dots,i=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(r);if(!fe.isFunction(n))throw new TypeError("visitor must be a function");function d(k){if(k===null)return"";if(fe.isDate(k))return k.toISOString();if(fe.isBoolean(k))return k.toString();if(!c&&fe.isBlob(k))throw new qe("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(k)||fe.isTypedArray(k)?c&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function g(k,S,C){let N=k;if(k&&!C&&typeof k=="object"){if(fe.endsWith(S,"{}"))S=t?S:S.slice(0,-2),k=JSON.stringify(k);else if(fe.isArray(k)&&_N(k)||(fe.isFileList(k)||fe.endsWith(S,"[]"))&&(N=fe.toArray(k)))return S=h0(S),N.forEach(function(_,E){!(fe.isUndefined(_)||_===null)&&r.append(i===!0?Dg([S],E,o):i===null?S:S+"[]",d(_))}),!1}return zd(k)?!0:(r.append(Dg(C,S,o),d(k)),!1)}const x=[],y=Object.assign(SN,{defaultVisitor:g,convertValue:d,isVisitable:zd});function w(k,S){if(!fe.isUndefined(k)){if(x.indexOf(k)!==-1)throw Error("Circular reference detected in "+S.join("."));x.push(k),fe.forEach(k,function(N,p){(!(fe.isUndefined(N)||N===null)&&n.call(r,N,fe.isString(p)?p.trim():p,S,y))===!0&&w(N,S?S.concat(p):[p])}),x.pop()}}if(!fe.isObject(s))throw new TypeError("data must be an object");return w(s),r}function Og(s){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function Ju(s,r){this._pairs=[],s&&Fl(s,this,r)}const f0=Ju.prototype;f0.append=function(r,a){this._pairs.push([r,a])};f0.toString=function(r){const a=r?function(t){return r.call(this,t,Og)}:Og;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function CN(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function p0(s,r,a){if(!r)return s;const t=a&&a.encode||CN;fe.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let o;if(n?o=n(r,a):o=fe.isURLSearchParams(r)?r.toString():new Ju(r,a).toString(t),o){const i=s.indexOf("#");i!==-1&&(s=s.slice(0,i)),s+=(s.indexOf("?")===-1?"?":"&")+o}return s}class Ig{constructor(){this.handlers=[]}use(r,a,t){return this.handlers.push({fulfilled:r,rejected:a,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){fe.forEach(this.handlers,function(t){t!==null&&r(t)})}}const y0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RN=typeof URLSearchParams<"u"?URLSearchParams:Ju,AN=typeof FormData<"u"?FormData:null,PN=typeof Blob<"u"?Blob:null,TN={isBrowser:!0,classes:{URLSearchParams:RN,FormData:AN,Blob:PN},protocols:["http","https","file","blob","url","data"]},Yu=typeof window<"u"&&typeof document<"u",Ud=typeof navigator=="object"&&navigator||void 0,DN=Yu&&(!Ud||["ReactNative","NativeScript","NS"].indexOf(Ud.product)<0),ON=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IN=Yu&&window.location.href||"http://localhost",MN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yu,hasStandardBrowserEnv:DN,hasStandardBrowserWebWorkerEnv:ON,navigator:Ud,origin:IN},Symbol.toStringTag,{value:"Module"})),Zs={...MN,...TN};function FN(s,r){return Fl(s,new Zs.classes.URLSearchParams,{visitor:function(a,t,n,o){return Zs.isNode&&fe.isBuffer(a)?(this.append(t,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function LN(s){return fe.matchAll(/\w+|\[(\w*)]/g,s).map(r=>r[0]==="[]"?"":r[1]||r[0])}function zN(s){const r={},a=Object.keys(s);let t;const n=a.length;let o;for(t=0;t<n;t++)o=a[t],r[o]=s[o];return r}function b0(s){function r(a,t,n,o){let i=a[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=a.length;return i=!i&&fe.isArray(n)?n.length:i,c?(fe.hasOwnProp(n,i)?n[i]=[n[i],t]:n[i]=t,!l):((!n[i]||!fe.isObject(n[i]))&&(n[i]=[]),r(a,t,n[i],o)&&fe.isArray(n[i])&&(n[i]=zN(n[i])),!l)}if(fe.isFormData(s)&&fe.isFunction(s.entries)){const a={};return fe.forEachEntry(s,(t,n)=>{r(LN(t),n,a,0)}),a}return null}function UN(s,r,a){if(fe.isString(s))try{return(r||JSON.parse)(s),fe.trim(s)}catch(t){if(t.name!=="SyntaxError")throw t}return(a||JSON.stringify)(s)}const Uo={transitional:y0,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const t=a.getContentType()||"",n=t.indexOf("application/json")>-1,o=fe.isObject(r);if(o&&fe.isHTMLForm(r)&&(r=new FormData(r)),fe.isFormData(r))return n?JSON.stringify(b0(r)):r;if(fe.isArrayBuffer(r)||fe.isBuffer(r)||fe.isStream(r)||fe.isFile(r)||fe.isBlob(r)||fe.isReadableStream(r))return r;if(fe.isArrayBufferView(r))return r.buffer;if(fe.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(t.indexOf("application/x-www-form-urlencoded")>-1)return FN(r,this.formSerializer).toString();if((l=fe.isFileList(r))||t.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Fl(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||n?(a.setContentType("application/json",!1),UN(r)):r}],transformResponse:[function(r){const a=this.transitional||Uo.transitional,t=a&&a.forcedJSONParsing,n=this.responseType==="json";if(fe.isResponse(r)||fe.isReadableStream(r))return r;if(r&&fe.isString(r)&&(t&&!this.responseType||n)){const i=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?qe.from(l,qe.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zs.classes.FormData,Blob:Zs.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],s=>{Uo.headers[s]={}});const $N=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VN=s=>{const r={};let a,t,n;return s&&s.split(`
`).forEach(function(i){n=i.indexOf(":"),a=i.substring(0,n).trim().toLowerCase(),t=i.substring(n+1).trim(),!(!a||r[a]&&$N[a])&&(a==="set-cookie"?r[a]?r[a].push(t):r[a]=[t]:r[a]=r[a]?r[a]+", "+t:t)}),r},Mg=Symbol("internals");function Ln(s){return s&&String(s).trim().toLowerCase()}function Ri(s){return s===!1||s==null?s:fe.isArray(s)?s.map(Ri):String(s)}function BN(s){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=a.exec(s);)r[t[1]]=t[2];return r}const qN=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function yc(s,r,a,t,n){if(fe.isFunction(t))return t.call(this,r,a);if(n&&(r=a),!!fe.isString(r)){if(fe.isString(t))return r.indexOf(t)!==-1;if(fe.isRegExp(t))return t.test(r)}}function HN(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,t)=>a.toUpperCase()+t)}function GN(s,r){const a=fe.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(s,t+a,{value:function(n,o,i){return this[t].call(this,r,n,o,i)},configurable:!0})})}let fr=class{constructor(r){r&&this.set(r)}set(r,a,t){const n=this;function o(l,c,d){const g=Ln(c);if(!g)throw new Error("header name must be a non-empty string");const x=fe.findKey(n,g);(!x||n[x]===void 0||d===!0||d===void 0&&n[x]!==!1)&&(n[x||c]=Ri(l))}const i=(l,c)=>fe.forEach(l,(d,g)=>o(d,g,c));if(fe.isPlainObject(r)||r instanceof this.constructor)i(r,a);else if(fe.isString(r)&&(r=r.trim())&&!qN(r))i(VN(r),a);else if(fe.isObject(r)&&fe.isIterable(r)){let l={},c,d;for(const g of r){if(!fe.isArray(g))throw TypeError("Object iterator must return a key-value pair");l[d=g[0]]=(c=l[d])?fe.isArray(c)?[...c,g[1]]:[c,g[1]]:g[1]}i(l,a)}else r!=null&&o(a,r,t);return this}get(r,a){if(r=Ln(r),r){const t=fe.findKey(this,r);if(t){const n=this[t];if(!a)return n;if(a===!0)return BN(n);if(fe.isFunction(a))return a.call(this,n,t);if(fe.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Ln(r),r){const t=fe.findKey(this,r);return!!(t&&this[t]!==void 0&&(!a||yc(this,this[t],t,a)))}return!1}delete(r,a){const t=this;let n=!1;function o(i){if(i=Ln(i),i){const l=fe.findKey(t,i);l&&(!a||yc(t,t[l],l,a))&&(delete t[l],n=!0)}}return fe.isArray(r)?r.forEach(o):o(r),n}clear(r){const a=Object.keys(this);let t=a.length,n=!1;for(;t--;){const o=a[t];(!r||yc(this,this[o],o,r,!0))&&(delete this[o],n=!0)}return n}normalize(r){const a=this,t={};return fe.forEach(this,(n,o)=>{const i=fe.findKey(t,o);if(i){a[i]=Ri(n),delete a[o];return}const l=r?HN(o):String(o).trim();l!==o&&delete a[o],a[l]=Ri(n),t[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return fe.forEach(this,(t,n)=>{t!=null&&t!==!1&&(a[n]=r&&fe.isArray(t)?t.join(", "):t)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const t=new this(r);return a.forEach(n=>t.set(n)),t}static accessor(r){const t=(this[Mg]=this[Mg]={accessors:{}}).accessors,n=this.prototype;function o(i){const l=Ln(i);t[l]||(GN(n,i),t[l]=!0)}return fe.isArray(r)?r.forEach(o):o(r),this}};fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(fr.prototype,({value:s},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>s,set(t){this[a]=t}}});fe.freezeMethods(fr);function bc(s,r){const a=this||Uo,t=r||a,n=fr.from(t.headers);let o=t.data;return fe.forEach(s,function(l){o=l.call(a,o,n.normalize(),r?r.status:void 0)}),n.normalize(),o}function v0(s){return!!(s&&s.__CANCEL__)}function Rn(s,r,a){qe.call(this,s??"canceled",qe.ERR_CANCELED,r,a),this.name="CanceledError"}fe.inherits(Rn,qe,{__CANCEL__:!0});function j0(s,r,a){const t=a.config.validateStatus;!a.status||!t||t(a.status)?s(a):r(new qe("Request failed with status code "+a.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function QN(s){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return r&&r[1]||""}function WN(s,r){s=s||10;const a=new Array(s),t=new Array(s);let n=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),g=t[o];i||(i=d),a[n]=c,t[n]=d;let x=o,y=0;for(;x!==n;)y+=a[x++],x=x%s;if(n=(n+1)%s,n===o&&(o=(o+1)%s),d-i<r)return;const w=g&&d-g;return w?Math.round(y*1e3/w):void 0}}function KN(s,r){let a=0,t=1e3/r,n,o;const i=(d,g=Date.now())=>{a=g,n=null,o&&(clearTimeout(o),o=null),s(...d)};return[(...d)=>{const g=Date.now(),x=g-a;x>=t?i(d,g):(n=d,o||(o=setTimeout(()=>{o=null,i(n)},t-x)))},()=>n&&i(n)]}const ll=(s,r,a=3)=>{let t=0;const n=WN(50,250);return KN(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-t,d=n(c),g=i<=l;t=i;const x={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&g?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};s(x)},a)},Fg=(s,r)=>{const a=s!=null;return[t=>r[0]({lengthComputable:a,total:s,loaded:t}),r[1]]},Lg=s=>(...r)=>fe.asap(()=>s(...r)),ZN=Zs.hasStandardBrowserEnv?((s,r)=>a=>(a=new URL(a,Zs.origin),s.protocol===a.protocol&&s.host===a.host&&(r||s.port===a.port)))(new URL(Zs.origin),Zs.navigator&&/(msie|trident)/i.test(Zs.navigator.userAgent)):()=>!0,JN=Zs.hasStandardBrowserEnv?{write(s,r,a,t,n,o){const i=[s+"="+encodeURIComponent(r)];fe.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),fe.isString(t)&&i.push("path="+t),fe.isString(n)&&i.push("domain="+n),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(s){const r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YN(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function XN(s,r){return r?s.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):s}function N0(s,r,a){let t=!YN(r);return s&&(t||a==!1)?XN(s,r):r}const zg=s=>s instanceof fr?{...s}:s;function Tt(s,r){r=r||{};const a={};function t(d,g,x,y){return fe.isPlainObject(d)&&fe.isPlainObject(g)?fe.merge.call({caseless:y},d,g):fe.isPlainObject(g)?fe.merge({},g):fe.isArray(g)?g.slice():g}function n(d,g,x,y){if(fe.isUndefined(g)){if(!fe.isUndefined(d))return t(void 0,d,x,y)}else return t(d,g,x,y)}function o(d,g){if(!fe.isUndefined(g))return t(void 0,g)}function i(d,g){if(fe.isUndefined(g)){if(!fe.isUndefined(d))return t(void 0,d)}else return t(void 0,g)}function l(d,g,x){if(x in r)return t(d,g);if(x in s)return t(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,g,x)=>n(zg(d),zg(g),x,!0)};return fe.forEach(Object.keys({...s,...r}),function(g){const x=c[g]||n,y=x(s[g],r[g],g);fe.isUndefined(y)&&x!==l||(a[g]=y)}),a}const w0=s=>{const r=Tt({},s);let{data:a,withXSRFToken:t,xsrfHeaderName:n,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=fr.from(i),r.url=p0(N0(r.baseURL,r.url,r.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),fe.isFormData(a)){if(Zs.hasStandardBrowserEnv||Zs.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(fe.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([g,x])=>{d.includes(g.toLowerCase())&&i.set(g,x)})}}if(Zs.hasStandardBrowserEnv&&(t&&fe.isFunction(t)&&(t=t(r)),t||t!==!1&&ZN(r.url))){const c=n&&o&&JN.read(o);c&&i.set(n,c)}return r},ew=typeof XMLHttpRequest<"u",sw=ew&&function(s){return new Promise(function(a,t){const n=w0(s);let o=n.data;const i=fr.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,g,x,y,w,k;function S(){w&&w(),k&&k(),n.cancelToken&&n.cancelToken.unsubscribe(g),n.signal&&n.signal.removeEventListener("abort",g)}let C=new XMLHttpRequest;C.open(n.method.toUpperCase(),n.url,!0),C.timeout=n.timeout;function N(){if(!C)return;const _=fr.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),b={data:!l||l==="text"||l==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:_,config:s,request:C};j0(function(P){a(P),S()},function(P){t(P),S()},b),C=null}"onloadend"in C?C.onloadend=N:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(N)},C.onabort=function(){C&&(t(new qe("Request aborted",qe.ECONNABORTED,s,C)),C=null)},C.onerror=function(E){const b=E&&E.message?E.message:"Network Error",f=new qe(b,qe.ERR_NETWORK,s,C);f.event=E||null,t(f),C=null},C.ontimeout=function(){let E=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const b=n.transitional||y0;n.timeoutErrorMessage&&(E=n.timeoutErrorMessage),t(new qe(E,b.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,s,C)),C=null},o===void 0&&i.setContentType(null),"setRequestHeader"in C&&fe.forEach(i.toJSON(),function(E,b){C.setRequestHeader(b,E)}),fe.isUndefined(n.withCredentials)||(C.withCredentials=!!n.withCredentials),l&&l!=="json"&&(C.responseType=n.responseType),d&&([y,k]=ll(d,!0),C.addEventListener("progress",y)),c&&C.upload&&([x,w]=ll(c),C.upload.addEventListener("progress",x),C.upload.addEventListener("loadend",w)),(n.cancelToken||n.signal)&&(g=_=>{C&&(t(!_||_.type?new Rn(null,s,C):_),C.abort(),C=null)},n.cancelToken&&n.cancelToken.subscribe(g),n.signal&&(n.signal.aborted?g():n.signal.addEventListener("abort",g)));const p=QN(n.url);if(p&&Zs.protocols.indexOf(p)===-1){t(new qe("Unsupported protocol "+p+":",qe.ERR_BAD_REQUEST,s));return}C.send(o||null)})},rw=(s,r)=>{const{length:a}=s=s?s.filter(Boolean):[];if(r||a){let t=new AbortController,n;const o=function(d){if(!n){n=!0,l();const g=d instanceof Error?d:this.reason;t.abort(g instanceof qe?g:new Rn(g instanceof Error?g.message:g))}};let i=r&&setTimeout(()=>{i=null,o(new qe(`timeout ${r} of ms exceeded`,qe.ETIMEDOUT))},r);const l=()=>{s&&(i&&clearTimeout(i),i=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),s=null)};s.forEach(d=>d.addEventListener("abort",o));const{signal:c}=t;return c.unsubscribe=()=>fe.asap(l),c}},aw=function*(s,r){let a=s.byteLength;if(a<r){yield s;return}let t=0,n;for(;t<a;)n=t+r,yield s.slice(t,n),t=n},tw=async function*(s,r){for await(const a of nw(s))yield*aw(a,r)},nw=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const r=s.getReader();try{for(;;){const{done:a,value:t}=await r.read();if(a)break;yield t}}finally{await r.cancel()}},Ug=(s,r,a,t)=>{const n=tw(s,r);let o=0,i,l=c=>{i||(i=!0,t&&t(c))};return new ReadableStream({async pull(c){try{const{done:d,value:g}=await n.next();if(d){l(),c.close();return}let x=g.byteLength;if(a){let y=o+=x;a(y)}c.enqueue(new Uint8Array(g))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},$g=64*1024,{isFunction:li}=fe,ow=(({Request:s,Response:r})=>({Request:s,Response:r}))(fe.global),{ReadableStream:Vg,TextEncoder:Bg}=fe.global,qg=(s,...r)=>{try{return!!s(...r)}catch{return!1}},iw=s=>{s=fe.merge.call({skipUndefined:!0},ow,s);const{fetch:r,Request:a,Response:t}=s,n=r?li(r):typeof fetch=="function",o=li(a),i=li(t);if(!n)return!1;const l=n&&li(Vg),c=n&&(typeof Bg=="function"?(k=>S=>k.encode(S))(new Bg):async k=>new Uint8Array(await new a(k).arrayBuffer())),d=o&&l&&qg(()=>{let k=!1;const S=new a(Zs.origin,{body:new Vg,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!S}),g=i&&l&&qg(()=>fe.isReadableStream(new t("").body)),x={stream:g&&(k=>k.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!x[k]&&(x[k]=(S,C)=>{let N=S&&S[k];if(N)return N.call(S);throw new qe(`Response type '${k}' is not supported`,qe.ERR_NOT_SUPPORT,C)})});const y=async k=>{if(k==null)return 0;if(fe.isBlob(k))return k.size;if(fe.isSpecCompliantForm(k))return(await new a(Zs.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(k)||fe.isArrayBuffer(k))return k.byteLength;if(fe.isURLSearchParams(k)&&(k=k+""),fe.isString(k))return(await c(k)).byteLength},w=async(k,S)=>{const C=fe.toFiniteNumber(k.getContentLength());return C??y(S)};return async k=>{let{url:S,method:C,data:N,signal:p,cancelToken:_,timeout:E,onDownloadProgress:b,onUploadProgress:f,responseType:P,headers:R,withCredentials:q="same-origin",fetchOptions:I}=w0(k),$=r||fetch;P=P?(P+"").toLowerCase():"text";let G=rw([p,_&&_.toAbortSignal()],E),V=null;const F=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let ae;try{if(f&&d&&C!=="get"&&C!=="head"&&(ae=await w(R,N))!==0){let W=new a(S,{method:"POST",body:N,duplex:"half"}),O;if(fe.isFormData(N)&&(O=W.headers.get("content-type"))&&R.setContentType(O),W.body){const[z,Y]=Fg(ae,ll(Lg(f)));N=Ug(W.body,$g,z,Y)}}fe.isString(q)||(q=q?"include":"omit");const ne=o&&"credentials"in a.prototype,ce={...I,signal:G,method:C.toUpperCase(),headers:R.normalize().toJSON(),body:N,duplex:"half",credentials:ne?q:void 0};V=o&&new a(S,ce);let H=await(o?$(V,I):$(S,ce));const K=g&&(P==="stream"||P==="response");if(g&&(b||K&&F)){const W={};["status","statusText","headers"].forEach(Z=>{W[Z]=H[Z]});const O=fe.toFiniteNumber(H.headers.get("content-length")),[z,Y]=b&&Fg(O,ll(Lg(b),!0))||[];H=new t(Ug(H.body,$g,z,()=>{Y&&Y(),F&&F()}),W)}P=P||"text";let te=await x[fe.findKey(x,P)||"text"](H,k);return!K&&F&&F(),await new Promise((W,O)=>{j0(W,O,{data:te,headers:fr.from(H.headers),status:H.status,statusText:H.statusText,config:k,request:V})})}catch(ne){throw F&&F(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new qe("Network Error",qe.ERR_NETWORK,k,V),{cause:ne.cause||ne}):qe.from(ne,ne&&ne.code,k,V)}}},lw=new Map,E0=s=>{let r=s?s.env:{};const{fetch:a,Request:t,Response:n}=r,o=[t,n,a];let i=o.length,l=i,c,d,g=lw;for(;l--;)c=o[l],d=g.get(c),d===void 0&&g.set(c,d=l?new Map:iw(r)),g=d;return d};E0();const $d={http:kN,xhr:sw,fetch:{get:E0}};fe.forEach($d,(s,r)=>{if(s){try{Object.defineProperty(s,"name",{value:r})}catch{}Object.defineProperty(s,"adapterName",{value:r})}});const Hg=s=>`- ${s}`,cw=s=>fe.isFunction(s)||s===null||s===!1,k0={getAdapter:(s,r)=>{s=fe.isArray(s)?s:[s];const{length:a}=s;let t,n;const o={};for(let i=0;i<a;i++){t=s[i];let l;if(n=t,!cw(t)&&(n=$d[(l=String(t)).toLowerCase()],n===void 0))throw new qe(`Unknown adapter '${l}'`);if(n&&(fe.isFunction(n)||(n=n.get(r))))break;o[l||"#"+i]=n}if(!n){const i=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?i.length>1?`since :
`+i.map(Hg).join(`
`):" "+Hg(i[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:$d};function vc(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Rn(null,s)}function Gg(s){return vc(s),s.headers=fr.from(s.headers),s.data=bc.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),k0.getAdapter(s.adapter||Uo.adapter,s)(s).then(function(t){return vc(s),t.data=bc.call(s,s.transformResponse,t),t.headers=fr.from(t.headers),t},function(t){return v0(t)||(vc(s),t&&t.response&&(t.response.data=bc.call(s,s.transformResponse,t.response),t.response.headers=fr.from(t.response.headers))),Promise.reject(t)})}const _0="1.12.2",Ll={};["object","boolean","number","function","string","symbol"].forEach((s,r)=>{Ll[s]=function(t){return typeof t===s||"a"+(r<1?"n ":" ")+s}});const Qg={};Ll.transitional=function(r,a,t){function n(o,i){return"[Axios v"+_0+"] Transitional option '"+o+"'"+i+(t?". "+t:"")}return(o,i,l)=>{if(r===!1)throw new qe(n(i," has been removed"+(a?" in "+a:"")),qe.ERR_DEPRECATED);return a&&!Qg[i]&&(Qg[i]=!0,console.warn(n(i," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(o,i,l):!0}};Ll.spelling=function(r){return(a,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};function dw(s,r,a){if(typeof s!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const t=Object.keys(s);let n=t.length;for(;n-- >0;){const o=t[n],i=r[o];if(i){const l=s[o],c=l===void 0||i(l,o,s);if(c!==!0)throw new qe("option "+o+" must be "+c,qe.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new qe("Unknown option "+o,qe.ERR_BAD_OPTION)}}const Ai={assertOptions:dw,validators:Ll},Wr=Ai.validators;let kt=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ig,response:new Ig}}async request(r,a){try{return await this._request(r,a)}catch(t){if(t instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{t.stack?o&&!String(t.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+o):t.stack=o}catch{}}throw t}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=Tt(this.defaults,a);const{transitional:t,paramsSerializer:n,headers:o}=a;t!==void 0&&Ai.assertOptions(t,{silentJSONParsing:Wr.transitional(Wr.boolean),forcedJSONParsing:Wr.transitional(Wr.boolean),clarifyTimeoutError:Wr.transitional(Wr.boolean)},!1),n!=null&&(fe.isFunction(n)?a.paramsSerializer={serialize:n}:Ai.assertOptions(n,{encode:Wr.function,serialize:Wr.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ai.assertOptions(a,{baseUrl:Wr.spelling("baseURL"),withXsrfToken:Wr.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let i=o&&fe.merge(o.common,o[a.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],k=>{delete o[k]}),a.headers=fr.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(a)===!1||(c=c&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let g,x=0,y;if(!c){const k=[Gg.bind(this),void 0];for(k.unshift(...l),k.push(...d),y=k.length,g=Promise.resolve(a);x<y;)g=g.then(k[x++],k[x++]);return g}y=l.length;let w=a;for(;x<y;){const k=l[x++],S=l[x++];try{w=k(w)}catch(C){S.call(this,C);break}}try{g=Gg.call(this,w)}catch(k){return Promise.reject(k)}for(x=0,y=d.length;x<y;)g=g.then(d[x++],d[x++]);return g}getUri(r){r=Tt(this.defaults,r);const a=N0(r.baseURL,r.url,r.allowAbsoluteUrls);return p0(a,r.params,r.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(r){kt.prototype[r]=function(a,t){return this.request(Tt(t||{},{method:r,url:a,data:(t||{}).data}))}});fe.forEach(["post","put","patch"],function(r){function a(t){return function(o,i,l){return this.request(Tt(l||{},{method:r,headers:t?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}kt.prototype[r]=a(),kt.prototype[r+"Form"]=a(!0)});let uw=class S0{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const t=this;this.promise.then(n=>{if(!t._listeners)return;let o=t._listeners.length;for(;o-- >0;)t._listeners[o](n);t._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(l=>{t.subscribe(l),o=l}).then(n);return i.cancel=function(){t.unsubscribe(o)},i},r(function(o,i,l){t.reason||(t.reason=new Rn(o,i,l),a(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=t=>{r.abort(t)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new S0(function(n){r=n}),cancel:r}}};function mw(s){return function(a){return s.apply(null,a)}}function gw(s){return fe.isObject(s)&&s.isAxiosError===!0}const Vd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vd).forEach(([s,r])=>{Vd[r]=s});function C0(s){const r=new kt(s),a=n0(kt.prototype.request,r);return fe.extend(a,kt.prototype,r,{allOwnKeys:!0}),fe.extend(a,r,null,{allOwnKeys:!0}),a.create=function(n){return C0(Tt(s,n))},a}const Rs=C0(Uo);Rs.Axios=kt;Rs.CanceledError=Rn;Rs.CancelToken=uw;Rs.isCancel=v0;Rs.VERSION=_0;Rs.toFormData=Fl;Rs.AxiosError=qe;Rs.Cancel=Rs.CanceledError;Rs.all=function(r){return Promise.all(r)};Rs.spread=mw;Rs.isAxiosError=gw;Rs.mergeConfig=Tt;Rs.AxiosHeaders=fr;Rs.formToJSON=s=>b0(fe.isHTMLForm(s)?new FormData(s):s);Rs.getAdapter=k0.getAdapter;Rs.HttpStatusCode=Vd;Rs.default=Rs;const{Axios:bE,AxiosError:vE,CanceledError:jE,isCancel:NE,CancelToken:wE,VERSION:EE,all:kE,Cancel:_E,isAxiosError:SE,spread:CE,toFormData:RE,AxiosHeaders:AE,HttpStatusCode:PE,formToJSON:TE,getAdapter:DE,mergeConfig:OE}=Rs,R0={apiUrl:"http://localhost:8000/api"},M={SUCCESS:{LOGIN:"Inicio de sesin exitoso",LOGOUT:"Sesin cerrada exitosamente",CREATE:"Registro creado exitosamente",UPDATE:"Registro actualizado exitosamente",DELETE:"Registro eliminado exitosamente",IMPORT:"Importacin completada exitosamente",EXPORT:"Exportacin completada exitosamente"},ERROR:{LOGIN:"Error al iniciar sesin",LOGOUT:"Error al cerrar sesin",UNAUTHORIZED:"No autorizado",FORBIDDEN:"Acceso denegado",NOT_FOUND:"Recurso no encontrado",SERVER_ERROR:"Error del servidor",NETWORK:"Error de conexin",VALIDATION:"Datos de validacin incorrectos",CREATE:"Error al crear registro",UPDATE:"Error al actualizar registro",DELETE:"Error al eliminar registro",IMPORT:"Error al importar datos",EXPORT:"Error al exportar datos"},VALIDATION:{REQUIRED:"Este campo es obligatorio",EMAIL:"Debe ser un email vlido",MIN_LENGTH:"Debe tener al menos {min} caracteres",MAX_LENGTH:"No puede tener ms de {max} caracteres",UNIQUE:"Este valor ya existe",CONFIRMED:"Las contraseas no coinciden",DATE:"Debe ser una fecha vlida",TIME:"Debe ser una hora vlida",NUMBER:"Debe ser un nmero vlido",POSITIVE:"Debe ser un nmero positivo"}},ns={DEFAULT_PAGE_SIZE:15,PAGE_SIZE_OPTIONS:[10,15,25,50,100],MAX_PAGE_SIZE:100},Na=Rs.create({baseURL:R0.apiUrl,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});Na.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>(console.error(" Request Error:",s),Promise.reject(s)));Na.interceptors.response.use(s=>s,async s=>{var l,c,d,g,x,y,w,k,S,C,N,p,_,E;const r=s.config,a=!s.response&&(s.code==="ERR_NETWORK"||((l=s.message)==null?void 0:l.includes("Network Error"))),t=((c=s.message)==null?void 0:c.includes("CORS"))||((d=s.message)==null?void 0:d.includes("blocked"));if(!a&&!t&&console.error(" API Error:",{status:(g=s.response)==null?void 0:g.status,url:(x=s.config)==null?void 0:x.url,message:s.message,data:(y=s.response)==null?void 0:y.data}),((w=s.response)==null?void 0:w.status)===401){if((k=r.url)==null?void 0:k.includes("/auth/perfil"))localStorage.removeItem("token"),sessionStorage.clear();else if(localStorage.removeItem("token"),sessionStorage.clear(),!((S=r.url)!=null&&S.includes("/auth/login"))&&!((C=r.url)!=null&&C.includes("/auth/estudiante/login"))&&!((N=r.url)!=null&&N.includes("/auth/admin/login"))&&!window.location.pathname.includes("/login")){window.queryClient&&window.queryClient.clear();const f=window.location.pathname;f.startsWith("/estudiante")?window.location.href="/estudiante/login":f.startsWith("/docente")?window.location.href="/docente/login":window.location.href="/login"}return Promise.reject(s)}const n=xw(s),o=(p=r.url)==null?void 0:p.includes("/notificaciones");return!r.silent&&!(a&&o)&&m.error(n),Promise.reject({...s,message:n,status:(_=s.response)==null?void 0:_.status,data:(E=s.response)==null?void 0:E.data})});const xw=s=>{var t,n,o;if(!s.response)return(t=s.message)!=null&&t.includes("CORS")||(n=s.message)!=null&&n.includes("blocked")?"Error de CORS: El servidor no permite solicitudes desde este origen":s.code==="ERR_NETWORK"||(o=s.message)!=null&&o.includes("Network Error")?"Error de conexin: No se pudo conectar con el servidor":s.message||M.ERROR.NETWORK;const r=s.response.status,a=s.response.data;if(a!=null&&a.message)return a.message;if(r===422&&(a!=null&&a.errors)){const i=[];return typeof a.errors=="object"&&(Object.keys(a.errors).forEach(l=>{(Array.isArray(a.errors[l])?a.errors[l]:[a.errors[l]]).forEach(d=>i.push(`${l}: ${d}`))}),i.length>0)?i.length===1?i[0]:`Errores de validacin: ${i.slice(0,3).join(", ")}${i.length>3?"...":""}`:"Datos de validacin incorrectos"}switch(r){case 400:return a!=null&&a.errors?typeof a.errors=="string"?a.errors:"Datos invlidos":"Solicitud incorrecta";case 401:return(a==null?void 0:a.message)||M.ERROR.UNAUTHORIZED;case 403:return(a==null?void 0:a.message)||M.ERROR.FORBIDDEN;case 404:return(a==null?void 0:a.message)||M.ERROR.NOT_FOUND;case 422:return(a==null?void 0:a.message)||"Datos de validacin incorrectos";case 429:return"Demasiadas solicitudes. Intenta ms tarde";case 500:return(a==null?void 0:a.message)||(a==null?void 0:a.error)||M.ERROR.SERVER_ERROR;case 502:return"Servidor no disponible";case 503:return"Servicio temporalmente no disponible";default:return(a==null?void 0:a.message)||(a==null?void 0:a.error)||M.ERROR.SERVER_ERROR}},ye=(s,r={},a={})=>Na.get(s,{params:r,...a}),Me=(s,r={},a={})=>Na.post(s,r,a),Ze=(s,r={},a={})=>Na.put(s,r,a),ts=(s,r={})=>Na.delete(s,r),$o=(s,r,a={})=>Na.post(s,r,{headers:{"Content-Type":"multipart/form-data"},...a}),ft={async loginAdmin(s){var r,a;try{const t=await Me("/auth/admin/login",s);return t.data.success?{success:!0,data:{token:t.data.token,user:t.data.user,token_type:t.data.token_type,expires_in:t.data.expires_in},message:M.SUCCESS.LOGIN}:{success:!1,message:t.data.message||M.ERROR.LOGIN}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.LOGIN}}},async loginEstudiante(s){var r,a;try{const t=await Me("/auth/estudiante/login",s);return t.data.success?{success:!0,data:{token:t.data.token,user:t.data.user||t.data.data,token_type:t.data.token_type,expires_in:t.data.expires_in},message:M.SUCCESS.LOGIN}:{success:!1,message:t.data.message||M.ERROR.LOGIN}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.LOGIN}}},async login(s){if(s.userType==="estudiante")return s.email?this.loginEstudiante(s):{success:!1,message:"El email es obligatorio para estudiantes"};if(s.userType==="admin"||s.email)return this.loginAdmin(s);if(s.ci){const r=await this.loginAdmin(s);return r.success?r:{success:!1,message:"Debe proporcionar email para estudiantes o credenciales vlidas para admin/docente"}}else return{success:!1,message:"Debe proporcionar email o CI"}},async logout(){try{if(localStorage.getItem("token"))try{const r=await Me("/auth/logout");return{success:!0,message:M.SUCCESS.LOGOUT}}catch{return{success:!0,message:M.SUCCESS.LOGOUT}}return{success:!0,message:M.SUCCESS.LOGOUT}}catch{return{success:!0,message:M.SUCCESS.LOGOUT}}},async getCurrentUser(){var s,r,a;try{const t=await ye("/auth/perfil");if(t.data.success)return{success:!0,data:t.data.data||t.data.user||t.data};throw new Error(t.data.message||"Error al obtener usuario")}catch(t){throw((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),sessionStorage.clear()),new Error(((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario")}},async refreshToken(){try{const s=await Me("/auth/refresh");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al refrescar token")}catch(s){throw new Error(s.message||"Error al refrescar token")}},async updateProfile(s){try{const r=await Ze("/auth/profile",s);return r.data.success?{success:!0,data:r.data.data,message:M.SUCCESS.UPDATE}:{success:!1,message:r.data.message||M.ERROR.UPDATE}}catch(r){return{success:!1,message:r.message||M.ERROR.UPDATE}}},async changePassword(s){try{const r=await Ze("/auth/change-password",s);return r.data.success?{success:!0,message:"Contrasea actualizada exitosamente"}:{success:!1,message:r.data.message||"Error al cambiar contrasea"}}catch(r){return{success:!1,message:r.message||"Error al cambiar contrasea"}}},async requestPasswordReset(s){try{const r=await Me("/auth/forgot-password",{email:s});return r.data.success?{success:!0,message:"Se ha enviado un enlace de restablecimiento a tu email"}:{success:!1,message:r.data.message||"Error al solicitar restablecimiento"}}catch(r){return{success:!1,message:r.message||"Error al solicitar restablecimiento"}}},async resetPassword(s){try{const r=await Me("/auth/reset-password",s);return r.data.success?{success:!0,message:"Contrasea restablecida exitosamente"}:{success:!1,message:r.data.message||"Error al restablecer contrasea"}}catch(r){return{success:!1,message:r.message||"Error al restablecer contrasea"}}},async verifyResetToken(s){try{const r=await ye(`/auth/verify-reset-token/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Token invlido"}}catch(r){return{success:!1,message:r.message||"Token invlido"}}},async verifyEmail(s){try{const r=await Me("/auth/verify-email",{token:s});return r.data.success?{success:!0,message:"Email verificado exitosamente"}:{success:!1,message:r.data.message||"Error al verificar email"}}catch(r){return{success:!1,message:r.message||"Error al verificar email"}}},async resendVerificationEmail(){try{const s=await Me("/auth/resend-verification");return s.data.success?{success:!0,message:"Email de verificacin reenviado"}:{success:!1,message:s.data.message||"Error al reenviar email"}}catch(s){return{success:!1,message:s.message||"Error al reenviar email"}}},async getPermissions(){try{const s=await ye("/auth/permissions");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al obtener permisos")}catch(s){throw new Error(s.message||"Error al obtener permisos")}},async hasPermission(s){try{const r=await ye(`/auth/has-permission/${s}`);return r.data.success&&r.data.data.has_permission}catch{return!1}},async getRoles(){try{const s=await ye("/auth/roles");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al obtener roles")}catch(s){throw new Error(s.message||"Error al obtener roles")}},async hasRole(s){try{const r=await ye(`/auth/has-role/${s}`);return r.data.success&&r.data.data.has_role}catch{return!1}},async registrarEstudiante(s){var r,a,t,n;try{const o=await Me("/auth/estudiante/registrar",s);return o.data.success?{success:!0,data:{token:o.data.token,user:o.data.user||o.data.data,token_type:o.data.token_type||"bearer",expires_in:o.data.expires_in},message:o.data.message||"Registro exitoso. Bienvenido al sistema"}:{success:!1,message:o.data.message||"Error en el registro",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al registrar",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},os={ADMIN:"ADMIN",DOCENTE:"DOCENTE",ESTUDIANTE:"ESTUDIANTE"},hw={admin:os.ADMIN,docente:os.DOCENTE,estudiante:os.ESTUDIANTE,ADMIN:os.ADMIN,DOCENTE:os.DOCENTE,ESTUDIANTE:os.ESTUDIANTE},Js=s=>{if(!s)return null;const r=String(s).trim();return hw[r]||r.toUpperCase()},fw=(s,r)=>Js(s)===Js(r),Xu=(s,r)=>{if(!Array.isArray(r))return!1;const a=Js(s);return r.some(t=>Js(t)===a)},A0=u.createContext(),pw={user:null,token:null,isAuthenticated:!1,loading:!1,error:null};function yw(s,r){switch(r.type){case"AUTH_START":return{...s,loading:!0,error:null};case"AUTH_SUCCESS":const a=r.payload.user;return a&&a.rol&&(a.rol=Js(a.rol)),{...s,user:a,token:r.payload.token,isAuthenticated:!0,loading:!1,error:null};case"AUTH_FAILURE":return{...s,user:null,token:null,isAuthenticated:!1,loading:!1,error:r.payload};case"AUTH_LOGOUT":return{...s,user:null,token:null,isAuthenticated:!1,loading:!1,error:null};case"AUTH_CLEAR_ERROR":return{...s,error:null};default:return s}}function bw({children:s}){const[r,a]=u.useReducer(yw,pw),[t,n]=u.useState(!1);u.useEffect(()=>{(async()=>{const P=localStorage.getItem("token");if(P&&!r.user&&!r.isAuthenticated&&!t){console.log(" checkAuth: Verificando autenticacin con token existente"),a({type:"AUTH_START"}),n(!0);try{await o()}finally{n(!1)}}else P?r.user&&r.isAuthenticated&&(console.log(" checkAuth: Usuario ya autenticado, no verificar de nuevo"),a({type:"AUTH_CLEAR_ERROR"})):(console.log(" checkAuth: No hay token, marcando como no autenticado"),a({type:"AUTH_FAILURE",payload:null}))})()},[]);const o=async()=>{var f,P,R,q,I,$;try{const G=localStorage.getItem("token");if(console.log(" checkAuth iniciado, token:",G?"Presente":"Ausente"),!G){console.log(" checkAuth: No hay token, marcando como no autenticado"),a({type:"AUTH_FAILURE",payload:null});return}if(r.user&&r.isAuthenticated){console.log(" checkAuth: Usuario ya autenticado, saltando verificacin"),a({type:"AUTH_CLEAR_ERROR"});return}console.log(" checkAuth: Llamando a getCurrentUser...");const V=await ft.getCurrentUser();if(console.log(" checkAuth: Respuesta de getCurrentUser:",V),V.success&&V.data){const F=V.data.user||V.data;F&&F.rol&&(F.rol=Js(F.rol)),console.log(" checkAuth: Usuario obtenido, guardando en estado:",F),a({type:"AUTH_SUCCESS",payload:{user:F,token:G}})}else console.log(" checkAuth: Token no vlido, limpiando sesin"),localStorage.removeItem("token"),a({type:"AUTH_FAILURE",payload:"Sesin expirada"})}catch(G){console.error(" Error checking auth:",G),console.error(" Error details:",{status:(f=G.response)==null?void 0:f.status,message:G.message,data:(P=G.response)==null?void 0:P.data}),((R=G.response)==null?void 0:R.status)===401||((q=G.response)==null?void 0:q.status)===404||(I=G.message)!=null&&I.includes("401")||($=G.message)!=null&&$.includes("404")?(console.log(" checkAuth: Error 401/404, limpiando sesin"),localStorage.removeItem("token"),a({type:"AUTH_FAILURE",payload:"Sesin expirada"})):r.user?console.log(" checkAuth: Error pero hay usuario en estado, manteniendo sesin"):(console.log(" checkAuth: Error de conexin, pero manteniendo token para reintentar"),a({type:"AUTH_FAILURE",payload:"Error de conexin. Reintentando..."}),localStorage.getItem("token")&&setTimeout(()=>{!r.user&&!r.isAuthenticated&&(console.log(" checkAuth: Reintentando verificacin..."),o())},2e3))}},i=async f=>{var P,R;try{a({type:"AUTH_START"}),n(!0);const q=await ft.login(f);if(console.log(" Login Response:",q),q.success){const{user:I,token:$}=q.data||{};if(console.log(" User from response:",I),console.log(" Token from response:",$?"Token presente":"Token ausente"),!I||!$)throw console.error(" Error: Usuario o token faltante en la respuesta"),n(!1),new Error("Error: Datos de autenticacin incompletos");I&&I.rol&&(I.rol=Js(I.rol),console.log(" Rol normalizado:",I.rol)),localStorage.setItem("token",$),console.log(" Token guardado en localStorage"),a({type:"AUTH_SUCCESS",payload:{user:I,token:$}}),console.log(" Usuario autenticado y guardado en estado"),console.log(" Estado despus del dispatch:",{user:I,token:$,isAuthenticated:!0}),setTimeout(()=>{n(!1)},1e3);const G=I.nombre_completo||(I.nombre&&I.apellido?`${I.nombre} ${I.apellido}`.trim():I.nombre)||I.name||"Usuario";return m.success(`Bienvenido, ${G}`),{success:!0}}else throw console.error(" Login fallido:",q.message),n(!1),new Error(q.message||"Error en el login")}catch(q){console.error(" Error en login:",q),n(!1);const I=((R=(P=q.response)==null?void 0:P.data)==null?void 0:R.message)||q.message||"Error en el login";return a({type:"AUTH_FAILURE",payload:I}),m.error(I),{success:!1,error:I}}},l=async()=>{try{if(localStorage.getItem("token"))try{await ft.logout()}catch(P){console.error("Error during backend logout:",P)}}catch(f){console.error("Error during logout:",f)}finally{localStorage.removeItem("token"),sessionStorage.clear(),window.queryClient&&window.queryClient.clear(),a({type:"AUTH_LOGOUT"}),m.success("Sesin cerrada exitosamente"),setTimeout(()=>{window.location.href="/login"},500)}},c=async()=>{try{const f=await ft.refreshToken();if(f.success){const{token:P}=f.data;return localStorage.setItem("token",P),a({type:"AUTH_SUCCESS",payload:{user:r.user,token:P}}),{success:!0}}else throw new Error(f.message||"Error al refrescar token")}catch(f){return console.error("Error refreshing token:",f),l(),{success:!1}}},d=async f=>{var P,R,q,I,$,G;try{a({type:"AUTH_START"});const V=await ft.registrarEstudiante(f);if(V.success){const{user:F,token:ae}=V.data;return localStorage.setItem("token",ae),a({type:"AUTH_SUCCESS",payload:{user:F,token:ae}}),m.success(V.message||"Registro exitoso. Bienvenido al sistema"),{success:!0}}else return V.errors?Object.keys(V.errors).forEach(F=>{m.error(`${F}: ${Array.isArray(V.errors[F])?V.errors[F][0]:V.errors[F]}`)}):m.error(V.message||"Error en el registro"),a({type:"AUTH_FAILURE",payload:V.message||"Error en el registro"}),{success:!1,error:V.message,errors:V.errors}}catch(V){const F=((R=(P=V.response)==null?void 0:P.data)==null?void 0:R.message)||V.message||"Error al registrar";return(I=(q=V.response)==null?void 0:q.data)!=null&&I.errors?Object.keys(V.response.data.errors).forEach(ae=>{m.error(`${ae}: ${Array.isArray(V.response.data.errors[ae])?V.response.data.errors[ae][0]:V.response.data.errors[ae]}`)}):m.error(F),a({type:"AUTH_FAILURE",payload:F}),{success:!1,error:F,errors:(G=($=V.response)==null?void 0:$.data)==null?void 0:G.errors}}},g=async f=>{var P,R;try{const q=await ft.updateProfile(f);if(q.success)return a({type:"AUTH_SUCCESS",payload:{user:q.data.user,token:r.token}}),m.success("Perfil actualizado exitosamente"),{success:!0};throw new Error(q.message||"Error al actualizar perfil")}catch(q){const I=((R=(P=q.response)==null?void 0:P.data)==null?void 0:R.message)||q.message||"Error al actualizar perfil";return m.error(I),{success:!1,error:I}}},x=()=>{a({type:"AUTH_CLEAR_ERROR"})},y=f=>{var P;return(P=r.user)!=null&&P.rol?fw(r.user.rol,f):!1},b={...r,login:i,logout:l,registrar:d,refreshToken:c,updateProfile:g,clearError:x,hasRole:y,hasAnyRole:f=>{var P;return!((P=r.user)!=null&&P.rol)||!Array.isArray(f)?!1:Xu(r.user.rol,f)},hasPermission:f=>{var P;return!((P=r.user)!=null&&P.permisos)||!Array.isArray(r.user.permisos)?!1:r.user.permisos.some(R=>R.nombre_permiso===f||R.nombre===f)},hasPermissionByModuleAction:(f,P)=>{var R;return!((R=r.user)!=null&&R.permisos)||!Array.isArray(r.user.permisos)?!1:r.user.permisos.some(q=>q.modulo===f&&q.accion===P)},hasAnyPermission:f=>{var P;return!((P=r.user)!=null&&P.permisos)||!Array.isArray(r.user.permisos)||!Array.isArray(f)?!1:f.some(R=>r.user.permisos.some(q=>q.nombre_permiso===R||q.nombre===R))},isAdmin:()=>y(os.ADMIN),isDocente:()=>y(os.DOCENTE),isEstudiante:()=>y(os.ESTUDIANTE),getUserRole:()=>{var f;return Js((f=r.user)==null?void 0:f.rol)}};return e.jsx(A0.Provider,{value:b,children:s})}function Es(){const s=u.useContext(A0);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}const vw=u.createContext(),jw={theme:"light",sidebarOpen:!0,sidebarCollapsed:!1};function Nw(s,r){switch(r.type){case"SET_THEME":return{...s,theme:r.payload};case"TOGGLE_THEME":return{...s,theme:s.theme==="light"?"dark":"light"};case"SET_SIDEBAR_OPEN":return{...s,sidebarOpen:r.payload};case"TOGGLE_SIDEBAR":return{...s,sidebarOpen:!s.sidebarOpen};case"SET_SIDEBAR_COLLAPSED":return{...s,sidebarCollapsed:r.payload};case"TOGGLE_SIDEBAR_COLLAPSED":return{...s,sidebarCollapsed:!s.sidebarCollapsed};default:return s}}function ww({children:s}){const[r,a]=u.useReducer(Nw,jw);u.useEffect(()=>{const g=localStorage.getItem("theme"),x=localStorage.getItem("sidebarOpen"),y=localStorage.getItem("sidebarCollapsed");g&&a({type:"SET_THEME",payload:g}),x!==null&&a({type:"SET_SIDEBAR_OPEN",payload:x==="true"}),y!==null&&a({type:"SET_SIDEBAR_COLLAPSED",payload:y==="true"})},[]),u.useEffect(()=>{const g=document.documentElement;r.theme==="dark"?g.classList.add("dark"):g.classList.remove("dark")},[r.theme]),u.useEffect(()=>{localStorage.setItem("theme",r.theme),localStorage.setItem("sidebarOpen",r.sidebarOpen.toString()),localStorage.setItem("sidebarCollapsed",r.sidebarCollapsed.toString())},[r.theme,r.sidebarOpen,r.sidebarCollapsed]);const d={...r,setTheme:g=>{a({type:"SET_THEME",payload:g})},toggleTheme:()=>{a({type:"TOGGLE_THEME"})},setSidebarOpen:g=>{a({type:"SET_SIDEBAR_OPEN",payload:g})},toggleSidebar:()=>{a({type:"TOGGLE_SIDEBAR"})},setSidebarCollapsed:g=>{a({type:"SET_SIDEBAR_COLLAPSED",payload:g})},toggleSidebarCollapsed:()=>{a({type:"TOGGLE_SIDEBAR_COLLAPSED"})}};return e.jsx(vw.Provider,{value:d,children:s})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ew={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(s,r)=>{const a=u.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...d},g)=>u.createElement("svg",{ref:g,...Ew,width:n,height:n,stroke:t,strokeWidth:i?Number(o)*24/Number(n):o,className:["lucide",`lucide-${kw(s)}`,l].join(" "),...d},[...r.map(([x,y])=>u.createElement(x,y)),...Array.isArray(c)?c:[c]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=De("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=De("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=De("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=De("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=De("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=De("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=De("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=De("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=De("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=De("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=De("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=De("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=De("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=De("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=De("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=De("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=De("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=De("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=De("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=De("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=De("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=De("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=De("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=De("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=De("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=De("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=De("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=De("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=De("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=De("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=De("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=De("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=De("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=De("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sm=()=>{const{user:s,hasPermission:r,hasPermissionByModuleAction:a,hasAnyPermission:t}=Es();return{can:x=>r(x),canDo:(x,y)=>a(x,y),canAny:x=>t(x),canCreate:x=>a(x,"crear"),canEdit:x=>a(x,"editar"),canDelete:x=>a(x,"eliminar"),canView:x=>a(x,"ver"),permisos:(s==null?void 0:s.permisos)||[]}},ua={async getNotificaciones(s={}){var r,a,t,n,o,i;try{const l=await ye("/notificaciones",s);return l.data&&l.data.success?{success:!0,data:l.data.data,noLeidas:l.data.no_leidas||0}:{success:!1,message:((r=l.data)==null?void 0:r.message)||"Error al obtener notificaciones",data:null}}catch(l){const c=!l.response&&(l.code==="ERR_NETWORK"||((a=l.message)==null?void 0:a.includes("Network Error"))),d=((t=l.message)==null?void 0:t.includes("CORS"))||((n=l.message)==null?void 0:n.includes("blocked"));return!c&&!d&&console.error("Error en notificacionService.getNotificaciones:",l),{success:!1,message:((i=(o=l.response)==null?void 0:o.data)==null?void 0:i.message)||l.message||"Error al obtener notificaciones",data:null}}},async contarNoLeidas(){try{const s=await ye("/notificaciones/no-leidas");return s.data.success?{success:!0,count:s.data.data.count||0}:{success:!1,count:0}}catch{return{success:!1,count:0}}},async marcarLeida(s){try{const r=await Ze(`/notificaciones/${s}/marcar-leida`);return r.data.success?{success:!0,data:r.data.data,message:r.data.message||"Notificacin marcada como leda"}:{success:!1,message:r.data.message||"Error al marcar notificacin"}}catch(r){return{success:!1,message:r.message||"Error al marcar notificacin"}}},async marcarTodasLeidas(){try{const s=await Ze("/notificaciones/marcar-todas-leidas");return s.data.success?{success:!0,message:s.data.message||"Todas las notificaciones marcadas como ledas"}:{success:!1,message:s.data.message||"Error al marcar notificaciones"}}catch(s){return{success:!1,message:s.message||"Error al marcar notificaciones"}}},async eliminarNotificacion(s){try{const r=await ts(`/notificaciones/${s}`);return r.data.success?{success:!0,message:r.data.message||"Notificacin eliminada exitosamente"}:{success:!1,message:r.data.message||"Error al eliminar notificacin"}}catch(r){return{success:!1,message:r.message||"Error al eliminar notificacin"}}}},Bw=s=>{const a=new Date-new Date(s),t=Math.floor(a/1e3),n=Math.floor(t/60),o=Math.floor(n/60),i=Math.floor(o/24);return i>0?`hace ${i} da${i>1?"s":""}`:o>0?`hace ${o} hora${o>1?"s":""}`:n>0?`hace ${n} minuto${n>1?"s":""}`:"ahora"},qw=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(0),[n,o]=u.useState(!1),[i,l]=u.useState(!1),[c,d]=u.useState(!1),g=u.useRef(null),x=_r();u.useEffect(()=>{y();const _=setInterval(()=>{c||y()},3e4);return()=>clearInterval(_)},[c]),u.useEffect(()=>{const _=E=>{g.current&&!g.current.contains(E.target)&&o(!1)};return n&&document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[n]);const y=async()=>{var _,E,b,f,P,R;try{l(!0);const q=await ua.getNotificaciones({per_page:5});if(q.success)r(((_=q.data)==null?void 0:_.data)||[]),t(q.noLeidas||0),d(!1);else{const I=((E=q.message)==null?void 0:E.includes("conexin"))||((b=q.message)==null?void 0:b.includes("CORS"));d(I)}}catch(q){const I=!q.response&&(q.code==="ERR_NETWORK"||((f=q.message)==null?void 0:f.includes("Network Error"))),$=((P=q.message)==null?void 0:P.includes("CORS"))||((R=q.message)==null?void 0:R.includes("blocked"));(I||$)&&d(!0)}finally{l(!1)}},w=async(_,E)=>{E.stopPropagation(),(await ua.marcarLeida(_)).success&&(r(f=>f.map(P=>P.id===_?{...P,leida:!0,leida_at:new Date().toISOString()}:P)),t(f=>Math.max(0,f-1)))},k=async()=>{l(!0),(await ua.marcarTodasLeidas()).success&&(r(E=>E.map(b=>({...b,leida:!0}))),t(0),m.success("Todas las notificaciones marcadas como ledas")),l(!1)},S=async(_,E)=>{E.stopPropagation(),(await ua.eliminarNotificacion(_)).success&&(r(f=>f.filter(P=>P.id!==_)),m.success("Notificacin eliminada"))},C=_=>{_.leida||w(_.id,{stopPropagation:()=>{}}),_.accion_url&&(x(_.accion_url),o(!1))},N=_=>{switch(_){case"horario_cambio":return e.jsx(Bs,{className:"h-4 w-4"});case"asistencia":return e.jsx(ha,{className:"h-4 w-4"});case"alerta":return e.jsx(Nr,{className:"h-4 w-4"});default:return e.jsx(Ja,{className:"h-4 w-4"})}},p=_=>{switch(_){case"horario_cambio":return"text-primary-500 bg-primary-100 dark:bg-primary-900/30";case"asistencia":return"text-success-500 bg-success-100 dark:bg-success-900/30";case"alerta":return"text-warning-500 bg-warning-100 dark:bg-warning-900/30";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}};return e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>o(!n),className:"relative p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 group",children:[e.jsx(Ja,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-error-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse shadow-glow",children:a>9?"9+":a})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 glass-card border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-glow-lg z-50 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-r from-primary-500/10 to-accent-500/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold gradient-text",children:"Notificaciones"}),a>0&&e.jsx("button",{onClick:k,disabled:i,className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 font-medium transition-colors",children:i?"Marcando...":"Marcar todas ledas"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ja,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay notificaciones"})]}):e.jsx("div",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:s.map(_=>e.jsx("div",{onClick:()=>C(_),className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer ${_.leida?"":"bg-primary-50/50 dark:bg-primary-900/10"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${p(_.tipo)}`,children:N(_.tipo)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-semibold ${_.leida?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-gray-100"}`,children:_.titulo}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:_.mensaje}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2 flex items-center",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),Bw(_.created_at)]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!_.leida&&e.jsx("button",{onClick:E=>w(_.id,E),className:"p-1 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Marcar como leda",children:e.jsx(ha,{className:"h-4 w-4 text-primary-600 dark:text-primary-400"})}),e.jsx("button",{onClick:E=>S(_.id,E),className:"p-1 rounded-lg hover:bg-error-100 dark:hover:bg-error-900/30 transition-colors",title:"Eliminar",children:e.jsx(nr,{className:"h-4 w-4 text-error-600 dark:text-error-400"})})]})]})}),!_.leida&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-primary-500 rounded-full mt-2"})]})},_.id))})}),s.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("button",{onClick:()=>{x("/notificaciones"),o(!1)},className:"w-full text-center text-sm text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 font-medium transition-colors",children:"Ver todas las notificaciones"})})]})]})]})},Ti=()=>{var $,G,V;const[s,r]=u.useState(!1),[a,t]=u.useState(!1),[n,o]=u.useState(""),[i,l]=u.useState([]),[c,d]=u.useState(!1),g=u.useRef(null),x=nt(),y=_r(),{user:w,logout:k,hasPermission:S}=Es(),C=[{name:"Dashboard",href:"/admin/dashboard",icon:jc,roles:["ADMIN"],permiso:null},{name:"Pases",href:"/admin/paises",icon:lo,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Provincias",href:"/admin/provincias",icon:co,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Ciudades",href:"/admin/ciudades",icon:Dr,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Instituciones",href:"/admin/instituciones",icon:mn,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Usuarios Sistema",href:"/admin/sistema-usuarios",icon:pr,roles:["ADMIN"],permiso:"usuarios_ver"},{name:"Roles y Permisos",href:"/admin/roles",icon:pr,roles:["ADMIN"],permiso:"roles_ver"},{name:"Tipos Convenio",href:"/admin/tipo-convenios",icon:us,roles:["ADMIN"],permiso:"convenios_ver"},{name:"Convenios",href:"/admin/convenios",icon:us,roles:["ADMIN"],permiso:"convenios_ver"},{name:"Ramas Acadmicas",href:"/admin/ramas-academicas",icon:Ye,roles:["ADMIN"],permiso:"programas_ver"},{name:"Versiones",href:"/admin/versiones",icon:io,roles:["ADMIN"],permiso:"programas_ver"},{name:"Tipos Programa",href:"/admin/tipos-programa",icon:Ts,roles:["ADMIN"],permiso:"programas_ver"},{name:"Mdulos",href:"/admin/modulos",icon:Ts,roles:["ADMIN"],permiso:"programas_ver"},{name:"Programas",href:"/admin/programas",icon:Ts,roles:["ADMIN"],permiso:"programas_ver"},{name:"Docentes",href:"/admin/docentes",icon:ta,roles:["ADMIN"],permiso:"docentes_ver"},{name:"Horarios",href:"/admin/horarios",icon:Xe,roles:["ADMIN"],permiso:"grupos_ver"},{name:"Grupos",href:"/admin/grupos",icon:Cs,roles:["ADMIN"],permiso:"grupos_ver"},{name:"Estudiantes",href:"/admin/estudiantes",icon:Ye,roles:["ADMIN"],permiso:"estudiantes_ver"},{name:"Inscripciones",href:"/admin/inscripciones",icon:_t,roles:["ADMIN"],permiso:"inscripciones_ver"},{name:"Planes de Pago",href:"/admin/planes-pago",icon:Tr,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Descuentos",href:"/admin/descuentos",icon:Bd,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Gestin de Pagos",href:"/admin/gestion-pagos",icon:aa,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Pagos",href:"/admin/pagos",icon:Tr,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Validacin Documentos",href:"/admin/documentos",icon:T0,roles:["ADMIN"],permiso:"documentos_ver"},{name:"Tipos Documento",href:"/admin/tipos-documento",icon:us,roles:["ADMIN"],permiso:"documentos_ver"},{name:"Reportes",href:"/admin/reportes",icon:P0,roles:["ADMIN"],permiso:null},{name:"Bitcora",href:"/admin/bitacora",icon:cl,roles:["ADMIN"],permiso:"bitacora_ver"},{name:"Notificaciones",href:"/admin/notificaciones",icon:Ja,roles:["ADMIN"],permiso:null}],N=[{name:"Dashboard",href:"/docente/dashboard",icon:jc,roles:["DOCENTE"]},{name:"Horarios",href:"/docente/horarios",icon:Xe,roles:["DOCENTE"]},{name:"Asistencias",href:"/docente/asistencias",icon:_t,roles:["DOCENTE"]},{name:"Grupos",href:"/docente/grupos",icon:ta,roles:["DOCENTE"]},{name:"Notificaciones",href:"/docente/notificaciones",icon:Ja,roles:["DOCENTE"]}],p=[{name:"Dashboard",href:"/estudiante/dashboard",icon:jc,roles:["ESTUDIANTE"]},{name:"Inscripciones",href:"/estudiante/inscripciones",icon:Ye,roles:["ESTUDIANTE"]},{name:"Mis Materias",href:"/estudiante/materias",icon:Ts,roles:["ESTUDIANTE"]},{name:"Mis Notas",href:"/estudiante/notas",icon:et,roles:["ESTUDIANTE"]},{name:"Mis Documentos",href:"/estudiante/mis-documentos",icon:us,roles:["ESTUDIANTE"]},{name:"Mis Pagos",href:"/estudiante/mis-pagos",icon:Tr,roles:["ESTUDIANTE"]},{name:"Notificaciones",href:"/estudiante/notificaciones",icon:Ja,roles:["ESTUDIANTE"]}],E=(()=>{var ae;const F=(ae=w==null?void 0:w.rol)==null?void 0:ae.toUpperCase();return F==="ESTUDIANTE"?p:F==="DOCENTE"?N:C})(),b=F=>x.pathname===F||x.pathname.startsWith(F+"/"),f=async()=>{var ae;await k();const F=(ae=w==null?void 0:w.rol)==null?void 0:ae.toUpperCase();y(F==="ESTUDIANTE"?"/estudiante/login":F==="DOCENTE"?"/docente/login":"/login")},P=E.filter(F=>{var ae;return!F.permiso||((ae=w==null?void 0:w.rol)==null?void 0:ae.toUpperCase())==="ADMIN"?!0:S(F.permiso)}),R=()=>r(!1),q=()=>{t(!a),document.documentElement.classList.toggle("dark")},I=async F=>{const ae=F.trim().toLowerCase();if(!ae||ae.length<2){l([]),d(!1);return}const ne=ae.replace(/\s+/g," ").trim();try{const ce=[],K=[{name:"docentes",route:"/docentes",icon:Ye,label:"Docentes",getDisplayName:O=>{var z;return((z=O.user)==null?void 0:z.name)||O.codigo_docente||O.nombre||"Sin nombre"},getSubtitle:O=>{var z;return((z=O.user)==null?void 0:z.email)||O.especialidad||""}},{name:"materias",route:"/materias",icon:Ts,label:"Materias",getDisplayName:O=>O.nombre||O.codigo_materia||"Sin nombre",getSubtitle:O=>`${O.codigo_materia||""} ${O.sigla||""}`.trim()||O.nivel||""},{name:"aulas",route:"/aulas",icon:Dt,label:"Aulas",getDisplayName:O=>O.nombre||O.codigo_aula||"Sin nombre",getSubtitle:O=>`${O.edificio||""} - Piso ${O.piso||""}`.trim()||O.tipo||""},{name:"grupos",route:"/grupos",icon:ta,label:"Grupos",getDisplayName:O=>O.nombre||`Grupo ${O.numero_grupo||""}`||"Sin nombre",getSubtitle:O=>{var z,Y,Z;return((z=O.materia)==null?void 0:z.nombre)||((Y=O.materia)==null?void 0:Y.sigla)||((Z=O.gestion)==null?void 0:Z.nombre)||""}},{name:"usuarios",route:"/usuarios",icon:Cs,label:"Usuarios",getDisplayName:O=>O.name||O.email||"Sin nombre",getSubtitle:O=>{var z;return O.email||((z=O.rol)==null?void 0:z.nombre)||""}},{name:"horarios",route:"/horarios",icon:Xe,label:"Horarios",getDisplayName:O=>{var Z,U,ee;const z=((U=(Z=O.grupo)==null?void 0:Z.materia)==null?void 0:U.nombre)||O.materia||"Sin materia",Y=((ee=O.grupo)==null?void 0:ee.numero_grupo)||O.grupo||"";return`${z} - Grupo ${Y}`.trim()},getSubtitle:O=>{var U,ee,oe;const z=((U=O.aula)==null?void 0:U.nombre)||O.aula||"Sin aula",Y=((oe=(ee=O.docente)==null?void 0:ee.user)==null?void 0:oe.name)||O.docente||"Sin docente",Z=O.hora_inicio&&O.hora_fin?`${O.hora_inicio} - ${O.hora_fin}`:"";return`${z}  ${Y} ${Z?` ${Z}`:""}`.trim()}},{name:"asistencias",route:"/asistencias",icon:_t,label:"Asistencias",getDisplayName:O=>{var Z,U,ee;const z=((ee=(U=(Z=O.horario)==null?void 0:Z.grupo)==null?void 0:U.materia)==null?void 0:ee.nombre)||O.materia||"Sin materia",Y=O.fecha||"";return`${z} - ${Y}`.trim()},getSubtitle:O=>{var Z,U;const z=((U=(Z=O.docente)==null?void 0:Z.user)==null?void 0:U.name)||O.docente||"Sin docente",Y=O.estado||"";return`${z}  ${Y}`.trim()}},{name:"gestiones-academicas",route:"/gestiones-academicas",icon:io,label:"Gestiones Acadmicas",getDisplayName:O=>O.nombre||`${O.anio||O.ao||""} - ${O.periodo||""}`.trim()||"Sin nombre",getSubtitle:O=>`${O.anio||O.ao||""} ${O.periodo||""}`.trim()||""},{name:"paises",route:"/admin/paises",icon:lo,label:"Pases",getDisplayName:O=>O.nombre_pais||"Sin nombre",getSubtitle:O=>O.codigo_iso||O.codigo_telefono||""},{name:"provincias",route:"/admin/provincias",icon:co,label:"Provincias",getDisplayName:O=>O.nombre_provincia||"Sin nombre",getSubtitle:O=>{var z;return((z=O.pais)==null?void 0:z.nombre_pais)||O.codigo_provincia||""}},{name:"ciudades",route:"/admin/ciudades",icon:Dr,label:"Ciudades",getDisplayName:O=>O.nombre_ciudad||"Sin nombre",getSubtitle:O=>{var z;return((z=O.provincia)==null?void 0:z.nombre_provincia)||O.codigo_postal||""}},{name:"instituciones",route:"/admin/instituciones",icon:mn,label:"Instituciones",getDisplayName:O=>O.nombre||"Sin nombre",getSubtitle:O=>{var z;return((z=O.ciudad)==null?void 0:z.nombre_ciudad)||O.email||""}},{name:"sistema-usuarios",route:"/admin/sistema-usuarios",icon:pr,label:"Usuarios del Sistema",getDisplayName:O=>{const z=O.persona||{};return`${z.nombre||""} ${z.apellido||""}`.trim()||O.email||"Sin nombre"},getSubtitle:O=>{var z;return O.email||((z=O.rol)==null?void 0:z.nombre_rol)||""}}].filter(O=>{const z=E.find(Y=>Y.href===O.route);return z&&(!z.roles||z.roles.includes(w==null?void 0:w.rol))});for(const O of K){let z=`/${O.name}`;O.name==="paises"||O.name==="provincias"||O.name==="ciudades"||O.name==="instituciones"?z=`/admin/${O.name}`:O.name==="sistema-usuarios"?z="/admin/usuarios":O.name==="gestiones-academicas"?z="/admin/gestiones-academicas":O.name==="docentes"?z="/admin/docentes":O.name==="grupos"?z="/admin/grupos":O.name==="horarios"?z="/admin/horarios":O.name==="asistencias"&&(z="/admin/asistencias"),ce.push(Na.get(z,{params:{search:ne,per_page:5}}).then(Y=>{var U,ee;const Z=(U=Y.data)!=null&&U.success?((ee=Y.data.data)==null?void 0:ee.data)||Y.data.data||[]:[];return{module:O.name,route:O.route,icon:O.icon,label:O.label,getDisplayName:O.getDisplayName,getSubtitle:O.getSubtitle,results:Z}}).catch(Y=>(console.error(`Error buscando en ${O.name}:`,Y),{module:O.name,route:O.route,icon:O.icon,label:O.label,getDisplayName:O.getDisplayName,getSubtitle:O.getSubtitle,results:[]})))}const W=(await Promise.all(ce)).filter(O=>O.results&&O.results.length>0);l(W),d(W.length>0)}catch(ce){console.error("Error en bsqueda global:",ce),l([]),d(!1)}};return u.useEffect(()=>{const F=setTimeout(()=>{n&&n.trim().length>=2?I(n):(l([]),d(!1))},300);return()=>clearTimeout(F)},[n,w==null?void 0:w.rol]),u.useEffect(()=>{const F=ae=>{g.current&&!g.current.contains(ae.target)&&d(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]),e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${a?"dark":""}`,children:[s&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:R}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 glass-card transform transition-all duration-300 ease-in-out lg:hidden ${s?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold gradient-text",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Acadmico"})]})]}),e.jsx("button",{onClick:R,className:"p-2 rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:e.jsx(nr,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:e.jsx("div",{className:"space-y-2",children:P.map(F=>{const ae=F.icon,ne=b(F.href);return e.jsxs(As,{to:F.href,onClick:R,className:`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 group ${ne?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-glow":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(ae,{className:`mr-3 h-5 w-5 flex-shrink-0 transition-transform duration-200 ${ne?"text-white":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),F.name]},F.name)})})}),e.jsxs("div",{className:"border-t border-gray-200/50 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center shadow-glow",children:e.jsx("span",{className:"text-white font-bold text-lg",children:(($=w==null?void 0:w.name)==null?void 0:$.charAt(0))||"U"})})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:(w==null?void 0:w.name)||"Usuario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:(w==null?void 0:w.rol)||"Usuario"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(As,{to:"/perfil",onClick:R,className:"flex-1 flex items-center justify-center px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200",children:[e.jsx(tr,{className:"h-4 w-4 mr-2"}),"Perfil"]}),e.jsxs("button",{onClick:f,className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-error-500 to-error-600 text-white rounded-xl text-sm font-medium hover:shadow-glow transition-all duration-200",children:[e.jsx(Jg,{className:"h-4 w-4 mr-2"}),"Salir"]})]})]})]})}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 glass-card border-r border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center h-20 flex-shrink-0 px-6 border-b border-gray-200/50 dark:border-gray-700/50 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ye,{className:"h-7 w-7 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-success-500 rounded-full flex items-center justify-center shadow-glow animate-pulse",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Acadmico"})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:e.jsx("div",{className:"space-y-2",children:P.map(F=>{const ae=F.icon,ne=b(F.href);return e.jsxs(As,{to:F.href,className:`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-300 group relative overflow-hidden ${ne?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-glow":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 hover:shadow-soft"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-primary-500/10 to-accent-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${ne?"opacity-100":""}`}),e.jsx(ae,{className:`mr-3 h-5 w-5 flex-shrink-0 transition-all duration-300 ${ne?"text-white scale-110":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 group-hover:scale-110"}`}),e.jsx("span",{className:"relative z-10 group-hover:translate-x-1 transition-transform duration-300",children:F.name}),ne&&e.jsx("div",{className:"absolute right-2 w-2 h-2 bg-white rounded-full animate-pulse"})]},F.name)})})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200/50 dark:border-gray-700/50 p-6",children:[e.jsxs(As,{to:"/perfil",className:"flex items-center group mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center shadow-glow",children:e.jsx("span",{className:"text-white font-bold text-lg",children:((G=w==null?void 0:w.name)==null?void 0:G.charAt(0))||"U"})})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 truncate transition-colors duration-200",children:(w==null?void 0:w.name)||"Usuario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:(w==null?void 0:w.rol)||"Usuario"})]})]}),e.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-error-500 to-error-600 text-white rounded-xl text-sm font-medium hover:shadow-glow transition-all duration-200",children:[e.jsx(Jg,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})]})}),e.jsxs("div",{className:"lg:pl-72 flex flex-col min-h-screen",children:[e.jsx("div",{className:"sticky top-0 z-30 lg:hidden glass-card border-b border-gray-200/50 dark:border-gray-700/50 shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:e.jsx(Mw,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-lg font-bold gradient-text",children:"ICAP"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:q,className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:a?e.jsx(Xg,{className:"h-5 w-5"}):e.jsx(Yg,{className:"h-5 w-5"})})})]})}),e.jsx("div",{className:"hidden lg:block sticky top-0 z-30 glass-card border-b border-gray-200/50 dark:border-gray-700/50 shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between h-20 px-8",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative group",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:((V=E.find(F=>b(F.href)))==null?void 0:V.name)||"Dashboard"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-primary-500 to-accent-500 group-hover:w-full transition-all duration-300"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative group",ref:g,children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-hover:text-primary-500 transition-colors duration-200"}),e.jsx("input",{type:"text",placeholder:"Buscar en todo el sistema...",value:n,onChange:F=>{const ae=F.target.value;o(ae),ae.trim().length>=2&&i.length>0?d(!0):ae.trim().length<2&&d(!1)},onFocus:()=>{n.trim().length>=2&&i.length>0&&d(!0)},onKeyDown:F=>{F.key==="Escape"&&(d(!1),o(""))},className:"pl-10 pr-4 py-2 w-64 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:shadow-soft group-hover:shadow-glow"}),c&&i.length>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-glow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-50 to-accent-50 dark:from-primary-900/20 dark:to-accent-900/20",children:e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:[i.reduce((F,ae)=>F+ae.results.length,0)," resultados encontrados"]})}),i.map((F,ae)=>{const ne=F.icon;return e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900/50 flex items-center space-x-2",children:[e.jsx(ne,{className:"h-4 w-4 text-primary-500 dark:text-primary-400"}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:F.label||F.module}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",F.results.length,")"]})]}),e.jsxs("div",{className:"py-2",children:[F.results.slice(0,3).map((ce,H)=>{var W,O,z;const K=F.getDisplayName?F.getDisplayName(ce):ce.name||ce.nombre||ce.codigo_docente||ce.codigo_materia||ce.codigo_aula||"Sin nombre",te=F.getSubtitle?F.getSubtitle(ce):((W=ce.user)==null?void 0:W.email)||((O=ce.user)==null?void 0:O.name)||((z=ce.materia)==null?void 0:z.nombre)||"";return e.jsxs(As,{to:`${F.route}${ce.id?`?highlight=${ce.id}&search=${encodeURIComponent(n)}`:`?search=${encodeURIComponent(n)}`}`,onClick:()=>{d(!1),o("")},className:"block px-4 py-2 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors border-l-2 border-transparent hover:border-primary-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:K}),te&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:te})]},H)}),F.results.length>3&&e.jsxs(As,{to:`${F.route}?search=${encodeURIComponent(n)}`,onClick:()=>{d(!1),o("")},className:"block px-4 py-2 text-sm text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 font-medium border-l-2 border-transparent hover:border-primary-500",children:["Ver todos los resultados (",F.results.length,") "]})]})]},ae)}),i.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(Je,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No se encontraron resultados"})]})]})]}),e.jsx(qw,{}),e.jsx("button",{onClick:q,className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 group",children:e.jsx("div",{className:"group-hover:scale-110 transition-transform duration-200",children:a?e.jsx(Xg,{className:"h-5 w-5"}):e.jsx(Yg,{className:"h-5 w-5"})})}),e.jsx(As,{to:"/perfil",className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 group",children:e.jsx(Fw,{className:"h-5 w-5 group-hover:scale-110 group-hover:rotate-90 transition-all duration-200"})})]})]})}),e.jsx("main",{className:"flex-1",children:e.jsx(xv,{})})]})]})},Hw=()=>{const s=[{id:1,nombre:"Programa de Capacitacin",descripcion:"Programas especializados para el desarrollo profesional",icon:e.jsx(Ye,{className:"h-8 w-8"})},{id:2,nombre:"Cursos Tcnicos",descripcion:"Formacin tcnica de alta calidad",icon:e.jsx(Ts,{className:"h-8 w-8"})},{id:3,nombre:"Diplomados",descripcion:"Programas de diplomado especializados",icon:e.jsx(et,{className:"h-8 w-8"})}],r=["Certificacin reconocida","Docentes altamente calificados","Instalaciones modernas","Flexibilidad horaria","Bolsa de trabajo","Seguimiento personalizado"];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx(Ye,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ICAP"}),e.jsx("p",{className:"text-xs text-gray-600",children:"UAGRM - Oficial SCZ"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("a",{href:"https://www.facebook.com/p/ICAP-UAGRM-Oficial-SCZ-100083936572455/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 transition-colors",children:e.jsx(Zg,{className:"h-6 w-6"})}),e.jsx(As,{to:"/portales",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Acceder a Portales"})]})]})}),e.jsx("section",{className:"bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 text-white py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(mn,{className:"h-16 w-16 mx-auto mb-4"})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Instituto de Capacitacin"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-semibold mb-4",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Formacin profesional de excelencia para tu futuro"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(As,{to:"/portales",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2",children:["Ver Programas",e.jsx(Fa,{className:"h-5 w-5"})]}),e.jsx(As,{to:"/portales",className:"bg-blue-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-400 transition-colors border-2 border-white",children:"Iniciar Sesin"})]})]})})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Sobre Nosotros"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Nuestra Misin"}),e.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:"El Instituto de Capacitacin (ICAP) de la Universidad Autnoma Gabriel Ren Moreno tiene como misin proporcionar formacin profesional de alta calidad, desarrollando competencias tcnicas y profesionales que contribuyan al crecimiento personal y profesional de nuestros estudiantes."}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Nos comprometemos a ofrecer programas educativos innovadores, con docentes altamente calificados y un enfoque prctico que prepare a nuestros estudiantes para los desafos del mercado laboral actual."})]}),e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(zw,{className:"h-6 w-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Visin"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Ser el instituto de referencia en formacin profesional en Bolivia"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(et,{className:"h-6 w-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Valores"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Excelencia, compromiso, innovacin y responsabilidad social"})]})]})]})})]})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Nuestros Programas"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Ofertas acadmicas diseadas para tu crecimiento profesional"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mt-4"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:s.map(a=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 hover:shadow-xl transition-shadow hover:border-blue-500",children:[e.jsx("div",{className:"text-blue-600 mb-4",children:a.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:a.nombre}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.descripcion}),e.jsxs(As,{to:"/portales",className:"text-blue-600 font-medium hover:text-blue-700 flex items-center gap-2",children:["Ms informacin",e.jsx(Fa,{className:"h-4 w-4"})]})]},a.id))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Por qu elegir ICAP?"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:r.map((a,t)=>e.jsxs("div",{className:"flex items-start space-x-4 bg-white p-4 rounded-lg shadow-sm",children:[e.jsx(Le,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-gray-700 font-medium",children:a})]},t))})]})})}),e.jsx("section",{className:"py-20 bg-gray-900 text-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Contctanos"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[e.jsxs("div",{children:[e.jsx(Dr,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Ubicacin"}),e.jsxs("p",{className:"text-gray-400",children:["Universidad Autnoma Gabriel Ren Moreno",e.jsx("br",{}),"Santa Cruz, Bolivia"]})]}),e.jsxs("div",{children:[e.jsx(qd,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Telfono"}),e.jsx("p",{className:"text-gray-400",children:"Consultar en oficinas"})]}),e.jsxs("div",{children:[e.jsx(Vo,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-400",children:"icap@uagrm.edu.bo"})]})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("a",{href:"https://www.facebook.com/p/ICAP-UAGRM-Oficial-SCZ-100083936572455/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-blue-600 px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Zg,{className:"h-5 w-5"}),"Sguenos en Facebook"]})})]})})}),e.jsx("footer",{className:"bg-gray-800 text-gray-400 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("p",{className:"mb-2",children:[" ",new Date().getFullYear()," ICAP - UAGRM. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm",children:"Instituto de Capacitacin - Universidad Autnoma Gabriel Ren Moreno"})]})})]})},Gw=()=>{const s=[{id:"estudiante",titulo:"Portal del Estudiante",descripcion:"Accede a tus materias, calificaciones, documentos y pagos",icon:e.jsx(Ye,{className:"h-12 w-12"}),color:"from-green-500 to-green-600",hoverColor:"hover:from-green-600 hover:to-green-700",link:"/estudiante/login",features:["Consulta tus materias","Revisa tus calificaciones","Gestiona tus documentos","Realiza pagos en lnea"]},{id:"docente",titulo:"Portal del Docente",descripcion:"Administra tus grupos, estudiantes y calificaciones",icon:e.jsx(tr,{className:"h-12 w-12"}),color:"from-blue-500 to-blue-600",hoverColor:"hover:from-blue-600 hover:to-blue-700",link:"/docente/login",features:["Gestiona tus grupos","Registra calificaciones","Control de asistencias","Reportes acadmicos"]}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs(As,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx(Ye,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ICAP"}),e.jsx("p",{className:"text-xs text-gray-600",children:"UAGRM - Oficial SCZ"})]})]}),e.jsx(As,{to:"/",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Volver al inicio"})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Acceso a Portales"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Selecciona el portal correspondiente a tu rol"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-12",children:s.map(r=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow",children:[e.jsxs("div",{className:`bg-gradient-to-br ${r.color} ${r.hoverColor} p-8 text-white`,children:[e.jsx("div",{className:"mb-4",children:r.icon}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:r.titulo}),e.jsx("p",{className:"text-blue-100",children:r.descripcion})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("ul",{className:"space-y-3 mb-6",children:r.features.map((a,t)=>e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(et,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{children:a})]},t))}),e.jsxs(As,{to:r.link,className:`block w-full bg-gradient-to-r ${r.color} text-white text-center py-3 rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2`,children:["Acceder",e.jsx(Fa,{className:"h-5 w-5"})]})]})]},r.id))}),e.jsx("div",{className:"max-w-4xl mx-auto bg-blue-50 rounded-xl p-8 border-2 border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(pr,{className:"h-8 w-8 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Portal de Administracin"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"El portal de administracin es de acceso restringido y solo est disponible para personal autorizado. Si eres administrador, contacta con el equipo tcnico para obtener acceso."}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Nota:"})," El acceso al portal de administracin se realiza nicamente mediante enlace directo proporcionado por el administrador del sistema."]})]})]})})]})}),e.jsx("footer",{className:"bg-gray-800 text-gray-400 py-6 mt-12",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," ICAP - UAGRM. Todos los derechos reservados."]})})})]})};var Bo=s=>s.type==="checkbox",Nt=s=>s instanceof Date,lr=s=>s==null;const I0=s=>typeof s=="object";var Ds=s=>!lr(s)&&!Array.isArray(s)&&I0(s)&&!Nt(s),Qw=s=>Ds(s)&&s.target?Bo(s.target)?s.target.checked:s.target.value:s,Ww=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,Kw=(s,r)=>s.has(Ww(r)),Zw=s=>{const r=s.constructor&&s.constructor.prototype;return Ds(r)&&r.hasOwnProperty("isPrototypeOf")},rm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ys(s){let r;const a=Array.isArray(s),t=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)r=new Date(s);else if(!(rm&&(s instanceof Blob||t))&&(a||Ds(s)))if(r=a?[]:Object.create(Object.getPrototypeOf(s)),!a&&!Zw(s))r=s;else for(const n in s)s.hasOwnProperty(n)&&(r[n]=ys(s[n]));else return s;return r}var $l=s=>/^\w*$/.test(s),xs=s=>s===void 0,Vl=s=>Array.isArray(s)?s.filter(Boolean):[],am=s=>Vl(s.replace(/["|']|\]/g,"").split(/\.|\[/)),Oe=(s,r,a)=>{if(!r||!Ds(s))return a;const t=($l(r)?[r]:am(r)).reduce((n,o)=>lr(n)?n:n[o],s);return xs(t)||t===s?xs(s[r])?a:s[r]:t},Jr=s=>typeof s=="boolean",cs=(s,r,a)=>{let t=-1;const n=$l(r)?[r]:am(r),o=n.length,i=o-1;for(;++t<o;){const l=n[t];let c=a;if(t!==i){const d=s[l];c=Ds(d)||Array.isArray(d)?d:isNaN(+n[t+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;s[l]=c,s=s[l]}};const ex={BLUR:"blur",FOCUS_OUT:"focusout"},Rr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},la={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M0=Be.createContext(null);M0.displayName="HookFormContext";const Jw=()=>Be.useContext(M0);var Yw=(s,r,a,t=!0)=>{const n={defaultValues:r._defaultValues};for(const o in s)Object.defineProperty(n,o,{get:()=>{const i=o;return r._proxyFormState[i]!==Rr.all&&(r._proxyFormState[i]=!t||Rr.all),s[i]}});return n};const F0=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;var br=s=>typeof s=="string",Xw=(s,r,a,t,n)=>br(s)?(t&&r.watch.add(s),Oe(a,s,n)):Array.isArray(s)?s.map(o=>(t&&r.watch.add(o),Oe(a,o))):(t&&(r.watchAll=!0),a),Hd=s=>lr(s)||!I0(s);function La(s,r,a=new WeakSet){if(Hd(s)||Hd(r))return s===r;if(Nt(s)&&Nt(r))return s.getTime()===r.getTime();const t=Object.keys(s),n=Object.keys(r);if(t.length!==n.length)return!1;if(a.has(s)||a.has(r))return!0;a.add(s),a.add(r);for(const o of t){const i=s[o];if(!n.includes(o))return!1;if(o!=="ref"){const l=r[o];if(Nt(i)&&Nt(l)||Ds(i)&&Ds(l)||Array.isArray(i)&&Array.isArray(l)?!La(i,l,a):i!==l)return!1}}return!0}var e1=(s,r,a,t,n)=>r?{...a[s],types:{...a[s]&&a[s].types?a[s].types:{},[t]:n||!0}}:{},ur=s=>Array.isArray(s)?s:[s],sx=()=>{let s=[];return{get observers(){return s},next:n=>{for(const o of s)o.next&&o.next(n)},subscribe:n=>(s.push(n),{unsubscribe:()=>{s=s.filter(o=>o!==n)}}),unsubscribe:()=>{s=[]}}};function L0(s,r){const a={};for(const t in s)if(s.hasOwnProperty(t)){const n=s[t],o=r[t];if(n&&Ds(n)&&o){const i=L0(n,o);Ds(i)&&(a[t]=i)}else s[t]&&(a[t]=o)}return a}var sr=s=>Ds(s)&&!Object.keys(s).length,tm=s=>s.type==="file",Vr=s=>typeof s=="function",dl=s=>{if(!rm)return!1;const r=s?s.ownerDocument:0;return s instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},z0=s=>s.type==="select-multiple",nm=s=>s.type==="radio",s1=s=>nm(s)||Bo(s),wc=s=>dl(s)&&s.isConnected;function r1(s,r){const a=r.slice(0,-1).length;let t=0;for(;t<a;)s=xs(s)?t++:s[r[t++]];return s}function a1(s){for(const r in s)if(s.hasOwnProperty(r)&&!xs(s[r]))return!1;return!0}function ks(s,r){const a=Array.isArray(r)?r:$l(r)?[r]:am(r),t=a.length===1?s:r1(s,a),n=a.length-1,o=a[n];return t&&delete t[o],n!==0&&(Ds(t)&&sr(t)||Array.isArray(t)&&a1(t))&&ks(s,a.slice(0,-1)),s}var t1=s=>{for(const r in s)if(Vr(s[r]))return!0;return!1};function U0(s){return Array.isArray(s)||Ds(s)&&!t1(s)}function Gd(s,r={}){for(const a in s)U0(s[a])?(r[a]=Array.isArray(s[a])?[]:{},Gd(s[a],r[a])):xs(s[a])||(r[a]=!0);return r}function Vt(s,r,a){a||(a=Gd(r));for(const t in s)U0(s[t])?xs(r)||Hd(a[t])?a[t]=Gd(s[t],Array.isArray(s[t])?[]:{}):Vt(s[t],lr(r)?{}:r[t],a[t]):a[t]=!La(s[t],r[t]);return a}const rx={value:!1,isValid:!1},ax={value:!0,isValid:!0};var $0=s=>{if(Array.isArray(s)){if(s.length>1){const r=s.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:r,isValid:!!r.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!xs(s[0].attributes.value)?xs(s[0].value)||s[0].value===""?ax:{value:s[0].value,isValid:!0}:ax:rx}return rx},V0=(s,{valueAsNumber:r,valueAsDate:a,setValueAs:t})=>xs(s)?s:r?s===""?NaN:s&&+s:a&&br(s)?new Date(s):t?t(s):s;const tx={isValid:!1,value:null};var B0=s=>Array.isArray(s)?s.reduce((r,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:r,tx):tx;function nx(s){const r=s.ref;return tm(r)?r.files:nm(r)?B0(s.refs).value:z0(r)?[...r.selectedOptions].map(({value:a})=>a):Bo(r)?$0(s.refs).value:V0(xs(r.value)?s.ref.value:r.value,s)}var n1=(s,r,a,t)=>{const n={};for(const o of s){const i=Oe(r,o);i&&cs(n,o,i._f)}return{criteriaMode:a,names:[...s],fields:n,shouldUseNativeValidation:t}},ul=s=>s instanceof RegExp,zn=s=>xs(s)?s:ul(s)?s.source:Ds(s)?ul(s.value)?s.value.source:s.value:s,tn=s=>({isOnSubmit:!s||s===Rr.onSubmit,isOnBlur:s===Rr.onBlur,isOnChange:s===Rr.onChange,isOnAll:s===Rr.all,isOnTouch:s===Rr.onTouched});const ox="AsyncFunction";var o1=s=>!!s&&!!s.validate&&!!(Vr(s.validate)&&s.validate.constructor.name===ox||Ds(s.validate)&&Object.values(s.validate).find(r=>r.constructor.name===ox)),i1=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),Qd=(s,r,a)=>!a&&(r.watchAll||r.watch.has(s)||[...r.watch].some(t=>s.startsWith(t)&&/^\.\w+/.test(s.slice(t.length))));const xn=(s,r,a,t)=>{for(const n of a||Object.keys(s)){const o=Oe(s,n);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&r(i.refs[0],n)&&!t)return!0;if(i.ref&&r(i.ref,i.name)&&!t)return!0;if(xn(l,r))break}else if(Ds(l)&&xn(l,r))break}}};function ix(s,r,a){const t=Oe(s,a);if(t||$l(a))return{error:t,name:a};const n=a.split(".");for(;n.length;){const o=n.join("."),i=Oe(r,o),l=Oe(s,o);if(i&&!Array.isArray(i)&&a!==o)return{name:a};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};n.pop()}return{name:a}}var l1=(s,r,a,t)=>{a(s);const{name:n,...o}=s;return sr(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(i=>r[i]===(!t||Rr.all))},c1=(s,r,a)=>!s||!r||s===r||ur(s).some(t=>t&&(a?t===r:t.startsWith(r)||r.startsWith(t))),d1=(s,r,a,t,n)=>n.isOnAll?!1:!a&&n.isOnTouch?!(r||s):(a?t.isOnBlur:n.isOnBlur)?!s:(a?t.isOnChange:n.isOnChange)?s:!0,u1=(s,r)=>!Vl(Oe(s,r)).length&&ks(s,r),q0=(s,r,a)=>{const t=ur(Oe(s,a));return cs(t,"root",r[a]),cs(s,a,t),s};function lx(s,r,a="validate"){if(br(s)||Array.isArray(s)&&s.every(br)||Jr(s)&&!s)return{type:a,message:br(s)?s:"",ref:r}}var Lt=s=>Ds(s)&&!ul(s)?s:{value:s,message:""},Wd=async(s,r,a,t,n,o)=>{const{ref:i,refs:l,required:c,maxLength:d,minLength:g,min:x,max:y,pattern:w,validate:k,name:S,valueAsNumber:C,mount:N}=s._f,p=Oe(a,S);if(!N||r.has(S))return{};const _=l?l[0]:i,E=G=>{n&&_.reportValidity&&(_.setCustomValidity(Jr(G)?"":G||""),_.reportValidity())},b={},f=nm(i),P=Bo(i),R=f||P,q=(C||tm(i))&&xs(i.value)&&xs(p)||dl(i)&&i.value===""||p===""||Array.isArray(p)&&!p.length,I=e1.bind(null,S,t,b),$=(G,V,F,ae=la.maxLength,ne=la.minLength)=>{const ce=G?V:F;b[S]={type:G?ae:ne,message:ce,ref:i,...I(G?ae:ne,ce)}};if(o?!Array.isArray(p)||!p.length:c&&(!R&&(q||lr(p))||Jr(p)&&!p||P&&!$0(l).isValid||f&&!B0(l).isValid)){const{value:G,message:V}=br(c)?{value:!!c,message:c}:Lt(c);if(G&&(b[S]={type:la.required,message:V,ref:_,...I(la.required,V)},!t))return E(V),b}if(!q&&(!lr(x)||!lr(y))){let G,V;const F=Lt(y),ae=Lt(x);if(!lr(p)&&!isNaN(p)){const ne=i.valueAsNumber||p&&+p;lr(F.value)||(G=ne>F.value),lr(ae.value)||(V=ne<ae.value)}else{const ne=i.valueAsDate||new Date(p),ce=te=>new Date(new Date().toDateString()+" "+te),H=i.type=="time",K=i.type=="week";br(F.value)&&p&&(G=H?ce(p)>ce(F.value):K?p>F.value:ne>new Date(F.value)),br(ae.value)&&p&&(V=H?ce(p)<ce(ae.value):K?p<ae.value:ne<new Date(ae.value))}if((G||V)&&($(!!G,F.message,ae.message,la.max,la.min),!t))return E(b[S].message),b}if((d||g)&&!q&&(br(p)||o&&Array.isArray(p))){const G=Lt(d),V=Lt(g),F=!lr(G.value)&&p.length>+G.value,ae=!lr(V.value)&&p.length<+V.value;if((F||ae)&&($(F,G.message,V.message),!t))return E(b[S].message),b}if(w&&!q&&br(p)){const{value:G,message:V}=Lt(w);if(ul(G)&&!p.match(G)&&(b[S]={type:la.pattern,message:V,ref:i,...I(la.pattern,V)},!t))return E(V),b}if(k){if(Vr(k)){const G=await k(p,a),V=lx(G,_);if(V&&(b[S]={...V,...I(la.validate,V.message)},!t))return E(V.message),b}else if(Ds(k)){let G={};for(const V in k){if(!sr(G)&&!t)break;const F=lx(await k[V](p,a),_,V);F&&(G={...F,...I(V,F.message)},E(F.message),t&&(b[S]=G))}if(!sr(G)&&(b[S]={ref:_,...G},!t))return b}}return E(!0),b};const m1={mode:Rr.onSubmit,reValidateMode:Rr.onChange,shouldFocusError:!0};function g1(s={}){let r={...m1,...s},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vr(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},t={},n=Ds(r.defaultValues)||Ds(r.values)?ys(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:ys(n),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...g};const y={array:sx(),state:sx()},w=r.criteriaMode===Rr.all,k=h=>v=>{clearTimeout(d),d=setTimeout(h,v)},S=async h=>{if(!r.disabled&&(g.isValid||x.isValid||h)){const v=r.resolver?sr((await P()).errors):await q(t,!0);v!==a.isValid&&y.state.next({isValid:v})}},C=(h,v)=>{!r.disabled&&(g.isValidating||g.validatingFields||x.isValidating||x.validatingFields)&&((h||Array.from(l.mount)).forEach(T=>{T&&(v?cs(a.validatingFields,T,v):ks(a.validatingFields,T))}),y.state.next({validatingFields:a.validatingFields,isValidating:!sr(a.validatingFields)}))},N=(h,v=[],T,A,Q=!0,re=!0)=>{if(A&&T&&!r.disabled){if(i.action=!0,re&&Array.isArray(Oe(t,h))){const de=T(Oe(t,h),A.argA,A.argB);Q&&cs(t,h,de)}if(re&&Array.isArray(Oe(a.errors,h))){const de=T(Oe(a.errors,h),A.argA,A.argB);Q&&cs(a.errors,h,de),u1(a.errors,h)}if((g.touchedFields||x.touchedFields)&&re&&Array.isArray(Oe(a.touchedFields,h))){const de=T(Oe(a.touchedFields,h),A.argA,A.argB);Q&&cs(a.touchedFields,h,de)}(g.dirtyFields||x.dirtyFields)&&(a.dirtyFields=Vt(n,o)),y.state.next({name:h,isDirty:$(h,v),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else cs(o,h,v)},p=(h,v)=>{cs(a.errors,h,v),y.state.next({errors:a.errors})},_=h=>{a.errors=h,y.state.next({errors:a.errors,isValid:!1})},E=(h,v,T,A)=>{const Q=Oe(t,h);if(Q){const re=Oe(o,h,xs(T)?Oe(n,h):T);xs(re)||A&&A.defaultChecked||v?cs(o,h,v?re:nx(Q._f)):F(h,re),i.mount&&S()}},b=(h,v,T,A,Q)=>{let re=!1,de=!1;const ve={name:h};if(!r.disabled){if(!T||A){(g.isDirty||x.isDirty)&&(de=a.isDirty,a.isDirty=ve.isDirty=$(),re=de!==ve.isDirty);const je=La(Oe(n,h),v);de=!!Oe(a.dirtyFields,h),je?ks(a.dirtyFields,h):cs(a.dirtyFields,h,!0),ve.dirtyFields=a.dirtyFields,re=re||(g.dirtyFields||x.dirtyFields)&&de!==!je}if(T){const je=Oe(a.touchedFields,h);je||(cs(a.touchedFields,h,T),ve.touchedFields=a.touchedFields,re=re||(g.touchedFields||x.touchedFields)&&je!==T)}re&&Q&&y.state.next(ve)}return re?ve:{}},f=(h,v,T,A)=>{const Q=Oe(a.errors,h),re=(g.isValid||x.isValid)&&Jr(v)&&a.isValid!==v;if(r.delayError&&T?(c=k(()=>p(h,T)),c(r.delayError)):(clearTimeout(d),c=null,T?cs(a.errors,h,T):ks(a.errors,h)),(T?!La(Q,T):Q)||!sr(A)||re){const de={...A,...re&&Jr(v)?{isValid:v}:{},errors:a.errors,name:h};a={...a,...de},y.state.next(de)}},P=async h=>{C(h,!0);const v=await r.resolver(o,r.context,n1(h||l.mount,t,r.criteriaMode,r.shouldUseNativeValidation));return C(h),v},R=async h=>{const{errors:v}=await P(h);if(h)for(const T of h){const A=Oe(v,T);A?cs(a.errors,T,A):ks(a.errors,T)}else a.errors=v;return v},q=async(h,v,T={valid:!0})=>{for(const A in h){const Q=h[A];if(Q){const{_f:re,...de}=Q;if(re){const ve=l.array.has(re.name),je=Q._f&&o1(Q._f);je&&g.validatingFields&&C([re.name],!0);const le=await Wd(Q,l.disabled,o,w,r.shouldUseNativeValidation&&!v,ve);if(je&&g.validatingFields&&C([re.name]),le[re.name]&&(T.valid=!1,v))break;!v&&(Oe(le,re.name)?ve?q0(a.errors,le,re.name):cs(a.errors,re.name,le[re.name]):ks(a.errors,re.name))}!sr(de)&&await q(de,v,T)}}return T.valid},I=()=>{for(const h of l.unMount){const v=Oe(t,h);v&&(v._f.refs?v._f.refs.every(T=>!wc(T)):!wc(v._f.ref))&&ee(h)}l.unMount=new Set},$=(h,v)=>!r.disabled&&(h&&v&&cs(o,h,v),!La(te(),n)),G=(h,v,T)=>Xw(h,l,{...i.mount?o:xs(v)?n:br(h)?{[h]:v}:v},T,v),V=h=>Vl(Oe(i.mount?o:n,h,r.shouldUnregister?Oe(n,h,[]):[])),F=(h,v,T={})=>{const A=Oe(t,h);let Q=v;if(A){const re=A._f;re&&(!re.disabled&&cs(o,h,V0(v,re)),Q=dl(re.ref)&&lr(v)?"":v,z0(re.ref)?[...re.ref.options].forEach(de=>de.selected=Q.includes(de.value)):re.refs?Bo(re.ref)?re.refs.forEach(de=>{(!de.defaultChecked||!de.disabled)&&(Array.isArray(Q)?de.checked=!!Q.find(ve=>ve===de.value):de.checked=Q===de.value||!!Q)}):re.refs.forEach(de=>de.checked=de.value===Q):tm(re.ref)?re.ref.value="":(re.ref.value=Q,re.ref.type||y.state.next({name:h,values:ys(o)})))}(T.shouldDirty||T.shouldTouch)&&b(h,Q,T.shouldTouch,T.shouldDirty,!0),T.shouldValidate&&K(h)},ae=(h,v,T)=>{for(const A in v){if(!v.hasOwnProperty(A))return;const Q=v[A],re=h+"."+A,de=Oe(t,re);(l.array.has(h)||Ds(Q)||de&&!de._f)&&!Nt(Q)?ae(re,Q,T):F(re,Q,T)}},ne=(h,v,T={})=>{const A=Oe(t,h),Q=l.array.has(h),re=ys(v);cs(o,h,re),Q?(y.array.next({name:h,values:ys(o)}),(g.isDirty||g.dirtyFields||x.isDirty||x.dirtyFields)&&T.shouldDirty&&y.state.next({name:h,dirtyFields:Vt(n,o),isDirty:$(h,re)})):A&&!A._f&&!lr(re)?ae(h,re,T):F(h,re,T),Qd(h,l)&&y.state.next({...a,name:h}),y.state.next({name:i.mount?h:void 0,values:ys(o)})},ce=async h=>{i.mount=!0;const v=h.target;let T=v.name,A=!0;const Q=Oe(t,T),re=je=>{A=Number.isNaN(je)||Nt(je)&&isNaN(je.getTime())||La(je,Oe(o,T,je))},de=tn(r.mode),ve=tn(r.reValidateMode);if(Q){let je,le;const se=v.type?nx(Q._f):Qw(h),pe=h.type===ex.BLUR||h.type===ex.FOCUS_OUT,ke=!i1(Q._f)&&!r.resolver&&!Oe(a.errors,T)&&!Q._f.deps||d1(pe,Oe(a.touchedFields,T),a.isSubmitted,ve,de),_e=Qd(T,l,pe);cs(o,T,se),pe?(!v||!v.readOnly)&&(Q._f.onBlur&&Q._f.onBlur(h),c&&c(0)):Q._f.onChange&&Q._f.onChange(h);const Ce=b(T,se,pe),$e=!sr(Ce)||_e;if(!pe&&y.state.next({name:T,type:h.type,values:ys(o)}),ke)return(g.isValid||x.isValid)&&(r.mode==="onBlur"?pe&&S():pe||S()),$e&&y.state.next({name:T,..._e?{}:Ce});if(!pe&&_e&&y.state.next({...a}),r.resolver){const{errors:ss}=await P([T]);if(re(se),A){const we=ix(a.errors,t,T),be=ix(ss,t,we.name||T);je=be.error,T=be.name,le=sr(ss)}}else C([T],!0),je=(await Wd(Q,l.disabled,o,w,r.shouldUseNativeValidation))[T],C([T]),re(se),A&&(je?le=!1:(g.isValid||x.isValid)&&(le=await q(t,!0)));A&&(Q._f.deps&&(!Array.isArray(Q._f.deps)||Q._f.deps.length>0)&&K(Q._f.deps),f(T,le,je,Ce))}},H=(h,v)=>{if(Oe(a.errors,v)&&h.focus)return h.focus(),1},K=async(h,v={})=>{let T,A;const Q=ur(h);if(r.resolver){const re=await R(xs(h)?h:Q);T=sr(re),A=h?!Q.some(de=>Oe(re,de)):T}else h?(A=(await Promise.all(Q.map(async re=>{const de=Oe(t,re);return await q(de&&de._f?{[re]:de}:de)}))).every(Boolean),!(!A&&!a.isValid)&&S()):A=T=await q(t);return y.state.next({...!br(h)||(g.isValid||x.isValid)&&T!==a.isValid?{}:{name:h},...r.resolver||!h?{isValid:T}:{},errors:a.errors}),v.shouldFocus&&!A&&xn(t,H,h?Q:l.mount),A},te=(h,v)=>{let T={...i.mount?o:n};return v&&(T=L0(v.dirtyFields?a.dirtyFields:a.touchedFields,T)),xs(h)?T:br(h)?Oe(T,h):h.map(A=>Oe(T,A))},W=(h,v)=>({invalid:!!Oe((v||a).errors,h),isDirty:!!Oe((v||a).dirtyFields,h),error:Oe((v||a).errors,h),isValidating:!!Oe(a.validatingFields,h),isTouched:!!Oe((v||a).touchedFields,h)}),O=h=>{h&&ur(h).forEach(v=>ks(a.errors,v)),y.state.next({errors:h?a.errors:{}})},z=(h,v,T)=>{const A=(Oe(t,h,{_f:{}})._f||{}).ref,Q=Oe(a.errors,h)||{},{ref:re,message:de,type:ve,...je}=Q;cs(a.errors,h,{...je,...v,ref:A}),y.state.next({name:h,errors:a.errors,isValid:!1}),T&&T.shouldFocus&&A&&A.focus&&A.focus()},Y=(h,v)=>Vr(h)?y.state.subscribe({next:T=>"values"in T&&h(G(void 0,v),T)}):G(h,v,!0),Z=h=>y.state.subscribe({next:v=>{c1(h.name,v.name,h.exact)&&l1(v,h.formState||g,L,h.reRenderRoot)&&h.callback({values:{...o},...a,...v,defaultValues:n})}}).unsubscribe,U=h=>(i.mount=!0,x={...x,...h.formState},Z({...h,formState:x})),ee=(h,v={})=>{for(const T of h?ur(h):l.mount)l.mount.delete(T),l.array.delete(T),v.keepValue||(ks(t,T),ks(o,T)),!v.keepError&&ks(a.errors,T),!v.keepDirty&&ks(a.dirtyFields,T),!v.keepTouched&&ks(a.touchedFields,T),!v.keepIsValidating&&ks(a.validatingFields,T),!r.shouldUnregister&&!v.keepDefaultValue&&ks(n,T);y.state.next({values:ys(o)}),y.state.next({...a,...v.keepDirty?{isDirty:$()}:{}}),!v.keepIsValid&&S()},oe=({disabled:h,name:v})=>{(Jr(h)&&i.mount||h||l.disabled.has(v))&&(h?l.disabled.add(v):l.disabled.delete(v))},D=(h,v={})=>{let T=Oe(t,h);const A=Jr(v.disabled)||Jr(r.disabled);return cs(t,h,{...T||{},_f:{...T&&T._f?T._f:{ref:{name:h}},name:h,mount:!0,...v}}),l.mount.add(h),T?oe({disabled:Jr(v.disabled)?v.disabled:r.disabled,name:h}):E(h,!0,v.value),{...A?{disabled:v.disabled||r.disabled}:{},...r.progressive?{required:!!v.required,min:zn(v.min),max:zn(v.max),minLength:zn(v.minLength),maxLength:zn(v.maxLength),pattern:zn(v.pattern)}:{},name:h,onChange:ce,onBlur:ce,ref:Q=>{if(Q){D(h,v),T=Oe(t,h);const re=xs(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,de=s1(re),ve=T._f.refs||[];if(de?ve.find(je=>je===re):re===T._f.ref)return;cs(t,h,{_f:{...T._f,...de?{refs:[...ve.filter(wc),re,...Array.isArray(Oe(n,h))?[{}]:[]],ref:{type:re.type,name:h}}:{ref:re}}}),E(h,!1,void 0,re)}else T=Oe(t,h,{}),T._f&&(T._f.mount=!1),(r.shouldUnregister||v.shouldUnregister)&&!(Kw(l.array,h)&&i.action)&&l.unMount.add(h)}}},ie=()=>r.shouldFocusError&&xn(t,H,l.mount),xe=h=>{Jr(h)&&(y.state.next({disabled:h}),xn(t,(v,T)=>{const A=Oe(t,T);A&&(v.disabled=A._f.disabled||h,Array.isArray(A._f.refs)&&A._f.refs.forEach(Q=>{Q.disabled=A._f.disabled||h}))},0,!1))},Ee=(h,v)=>async T=>{let A;T&&(T.preventDefault&&T.preventDefault(),T.persist&&T.persist());let Q=ys(o);if(y.state.next({isSubmitting:!0}),r.resolver){const{errors:re,values:de}=await P();a.errors=re,Q=ys(de)}else await q(t);if(l.disabled.size)for(const re of l.disabled)ks(Q,re);if(ks(a.errors,"root"),sr(a.errors)){y.state.next({errors:{}});try{await h(Q,T)}catch(re){A=re}}else v&&await v({...a.errors},T),ie(),setTimeout(ie);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sr(a.errors)&&!A,submitCount:a.submitCount+1,errors:a.errors}),A)throw A},he=(h,v={})=>{Oe(t,h)&&(xs(v.defaultValue)?ne(h,ys(Oe(n,h))):(ne(h,v.defaultValue),cs(n,h,ys(v.defaultValue))),v.keepTouched||ks(a.touchedFields,h),v.keepDirty||(ks(a.dirtyFields,h),a.isDirty=v.defaultValue?$(h,ys(Oe(n,h))):$()),v.keepError||(ks(a.errors,h),g.isValid&&S()),y.state.next({...a}))},Ne=(h,v={})=>{const T=h?ys(h):n,A=ys(T),Q=sr(h),re=Q?n:A;if(v.keepDefaultValues||(n=T),!v.keepValues){if(v.keepDirtyValues){const de=new Set([...l.mount,...Object.keys(Vt(n,o))]);for(const ve of Array.from(de))Oe(a.dirtyFields,ve)?cs(re,ve,Oe(o,ve)):ne(ve,Oe(re,ve))}else{if(rm&&xs(h))for(const de of l.mount){const ve=Oe(t,de);if(ve&&ve._f){const je=Array.isArray(ve._f.refs)?ve._f.refs[0]:ve._f.ref;if(dl(je)){const le=je.closest("form");if(le){le.reset();break}}}}if(v.keepFieldsRef)for(const de of l.mount)ne(de,Oe(re,de));else t={}}o=r.shouldUnregister?v.keepDefaultValues?ys(n):{}:ys(re),y.array.next({values:{...re}}),y.state.next({values:{...re}})}l={mount:v.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!g.isValid||!!v.keepIsValid||!!v.keepDirtyValues,i.watch=!!r.shouldUnregister,y.state.next({submitCount:v.keepSubmitCount?a.submitCount:0,isDirty:Q?!1:v.keepDirty?a.isDirty:!!(v.keepDefaultValues&&!La(h,n)),isSubmitted:v.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:Q?{}:v.keepDirtyValues?v.keepDefaultValues&&o?Vt(n,o):a.dirtyFields:v.keepDefaultValues&&h?Vt(n,h):v.keepDirty?a.dirtyFields:{},touchedFields:v.keepTouched?a.touchedFields:{},errors:v.keepErrors?a.errors:{},isSubmitSuccessful:v.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},ue=(h,v)=>Ne(Vr(h)?h(o):h,v),J=(h,v={})=>{const T=Oe(t,h),A=T&&T._f;if(A){const Q=A.refs?A.refs[0]:A.ref;Q.focus&&(Q.focus(),v.shouldSelect&&Vr(Q.select)&&Q.select())}},L=h=>{a={...a,...h}},B={control:{register:D,unregister:ee,getFieldState:W,handleSubmit:Ee,setError:z,_subscribe:Z,_runSchema:P,_focusError:ie,_getWatch:G,_getDirty:$,_setValid:S,_setFieldArray:N,_setDisabledField:oe,_setErrors:_,_getFieldArray:V,_reset:Ne,_resetDefaultValues:()=>Vr(r.defaultValues)&&r.defaultValues().then(h=>{ue(h,r.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:xe,_subjects:y,_proxyFormState:g,get _fields(){return t},get _formValues(){return o},get _state(){return i},set _state(h){i=h},get _defaultValues(){return n},get _names(){return l},set _names(h){l=h},get _formState(){return a},get _options(){return r},set _options(h){r={...r,...h}}},subscribe:U,trigger:K,register:D,handleSubmit:Ee,watch:Y,setValue:ne,getValues:te,reset:ue,resetField:he,clearErrors:O,unregister:ee,setError:z,setFocus:J,getFieldState:W};return{...B,formControl:B}}var ka=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const s=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const a=(Math.random()*16+s)%16|0;return(r=="x"?a:a&3|8).toString(16)})},Ec=(s,r,a={})=>a.shouldFocus||xs(a.shouldFocus)?a.focusName||`${s}.${xs(a.focusIndex)?r:a.focusIndex}.`:"",kc=(s,r)=>[...s,...ur(r)],_c=s=>Array.isArray(s)?s.map(()=>{}):void 0;function Sc(s,r,a){return[...s.slice(0,r),...ur(a),...s.slice(r)]}var Cc=(s,r,a)=>Array.isArray(s)?(xs(s[a])&&(s[a]=void 0),s.splice(a,0,s.splice(r,1)[0]),s):[],Rc=(s,r)=>[...ur(r),...ur(s)];function x1(s,r){let a=0;const t=[...s];for(const n of r)t.splice(n-a,1),a++;return Vl(t).length?t:[]}var Ac=(s,r)=>xs(r)?[]:x1(s,ur(r).sort((a,t)=>a-t)),Pc=(s,r,a)=>{[s[r],s[a]]=[s[a],s[r]]},cx=(s,r,a)=>(s[r]=a,s);function h1(s){const r=Jw(),{control:a=r.control,name:t,keyName:n="id",shouldUnregister:o,rules:i}=s,[l,c]=Be.useState(a._getFieldArray(t)),d=Be.useRef(a._getFieldArray(t).map(ka)),g=Be.useRef(!1);a._names.array.add(t),Be.useMemo(()=>i&&l.length>=0&&a.register(t,i),[a,t,l.length,i]),F0(()=>a._subjects.array.subscribe({next:({values:E,name:b})=>{if(b===t||!b){const f=Oe(E,t);Array.isArray(f)&&(c(f),d.current=f.map(ka))}}}).unsubscribe,[a,t]);const x=Be.useCallback(E=>{g.current=!0,a._setFieldArray(t,E)},[a,t]),y=(E,b)=>{const f=ur(ys(E)),P=kc(a._getFieldArray(t),f);a._names.focus=Ec(t,P.length-1,b),d.current=kc(d.current,f.map(ka)),x(P),c(P),a._setFieldArray(t,P,kc,{argA:_c(E)})},w=(E,b)=>{const f=ur(ys(E)),P=Rc(a._getFieldArray(t),f);a._names.focus=Ec(t,0,b),d.current=Rc(d.current,f.map(ka)),x(P),c(P),a._setFieldArray(t,P,Rc,{argA:_c(E)})},k=E=>{const b=Ac(a._getFieldArray(t),E);d.current=Ac(d.current,E),x(b),c(b),!Array.isArray(Oe(a._fields,t))&&cs(a._fields,t,void 0),a._setFieldArray(t,b,Ac,{argA:E})},S=(E,b,f)=>{const P=ur(ys(b)),R=Sc(a._getFieldArray(t),E,P);a._names.focus=Ec(t,E,f),d.current=Sc(d.current,E,P.map(ka)),x(R),c(R),a._setFieldArray(t,R,Sc,{argA:E,argB:_c(b)})},C=(E,b)=>{const f=a._getFieldArray(t);Pc(f,E,b),Pc(d.current,E,b),x(f),c(f),a._setFieldArray(t,f,Pc,{argA:E,argB:b},!1)},N=(E,b)=>{const f=a._getFieldArray(t);Cc(f,E,b),Cc(d.current,E,b),x(f),c(f),a._setFieldArray(t,f,Cc,{argA:E,argB:b},!1)},p=(E,b)=>{const f=ys(b),P=cx(a._getFieldArray(t),E,f);d.current=[...P].map((R,q)=>!R||q===E?ka():d.current[q]),x(P),c([...P]),a._setFieldArray(t,P,cx,{argA:E,argB:f},!0,!1)},_=E=>{const b=ur(ys(E));d.current=b.map(ka),x([...b]),c([...b]),a._setFieldArray(t,[...b],f=>f,{},!0,!1)};return Be.useEffect(()=>{if(a._state.action=!1,Qd(t,a._names)&&a._subjects.state.next({...a._formState}),g.current&&(!tn(a._options.mode).isOnSubmit||a._formState.isSubmitted)&&!tn(a._options.reValidateMode).isOnSubmit)if(a._options.resolver)a._runSchema([t]).then(E=>{const b=Oe(E.errors,t),f=Oe(a._formState.errors,t);(f?!b&&f.type||b&&(f.type!==b.type||f.message!==b.message):b&&b.type)&&(b?cs(a._formState.errors,t,b):ks(a._formState.errors,t),a._subjects.state.next({errors:a._formState.errors}))});else{const E=Oe(a._fields,t);E&&E._f&&!(tn(a._options.reValidateMode).isOnSubmit&&tn(a._options.mode).isOnSubmit)&&Wd(E,a._names.disabled,a._formValues,a._options.criteriaMode===Rr.all,a._options.shouldUseNativeValidation,!0).then(b=>!sr(b)&&a._subjects.state.next({errors:q0(a._formState.errors,b,t)}))}a._subjects.state.next({name:t,values:ys(a._formValues)}),a._names.focus&&xn(a._fields,(E,b)=>{if(a._names.focus&&b.startsWith(a._names.focus)&&E.focus)return E.focus(),1}),a._names.focus="",a._setValid(),g.current=!1},[l,t,a]),Be.useEffect(()=>(!Oe(a._formValues,t)&&a._setFieldArray(t),()=>{const E=(b,f)=>{const P=Oe(a._fields,b);P&&P._f&&(P._f.mount=f)};a._options.shouldUnregister||o?a.unregister(t):E(t,!1)}),[t,a,n,o]),{swap:Be.useCallback(C,[x,t,a]),move:Be.useCallback(N,[x,t,a]),prepend:Be.useCallback(w,[x,t,a]),append:Be.useCallback(y,[x,t,a]),remove:Be.useCallback(k,[x,t,a]),insert:Be.useCallback(S,[x,t,a]),update:Be.useCallback(p,[x,t,a]),replace:Be.useCallback(_,[x,t,a]),fields:Be.useMemo(()=>l.map((E,b)=>({...E,[n]:d.current[b]||ka()})),[l,n])}}function We(s={}){const r=Be.useRef(void 0),a=Be.useRef(void 0),[t,n]=Be.useState({isDirty:!1,isValidating:!1,isLoading:Vr(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:Vr(s.defaultValues)?void 0:s.defaultValues});if(!r.current)if(s.formControl)r.current={...s.formControl,formState:t},s.defaultValues&&!Vr(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:i,...l}=g1(s);r.current={...l,formState:t}}const o=r.current.control;return o._options=s,F0(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),Be.useEffect(()=>o._disableForm(s.disabled),[o,s.disabled]),Be.useEffect(()=>{s.mode&&(o._options.mode=s.mode),s.reValidateMode&&(o._options.reValidateMode=s.reValidateMode)},[o,s.mode,s.reValidateMode]),Be.useEffect(()=>{s.errors&&(o._setErrors(s.errors),o._focusError())},[o,s.errors]),Be.useEffect(()=>{s.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,s.shouldUnregister]),Be.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==t.isDirty&&o._subjects.state.next({isDirty:i})}},[o,t.isDirty]),Be.useEffect(()=>{s.values&&!La(s.values,a.current)?(o._reset(s.values,{keepFieldsRef:!0,...o._options.resetOptions}),a.current=s.values,n(i=>({...i}))):o._resetDefaultValues()},[o,s.values]),Be.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),r.current.formState=Yw(t,o),r.current}function H0(s){var r,a,t="";if(typeof s=="string"||typeof s=="number")t+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(r=0;r<n;r++)s[r]&&(a=H0(s[r]))&&(t&&(t+=" "),t+=a)}else for(a in s)s[a]&&(t&&(t+=" "),t+=a);return t}function He(){for(var s,r,a=0,t="",n=arguments.length;a<n;a++)(s=arguments[a])&&(r=H0(s))&&(t&&(t+=" "),t+=r);return t}const X=({children:s,variant:r="primary",size:a="md",disabled:t=!1,loading:n=!1,icon:o,iconPosition:i="left",fullWidth:l=!1,className:c,onClick:d,type:g="button",...x})=>{const y="btn",w={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",warning:"btn-warning",danger:"btn-error",outline:"btn-outline",ghost:"btn-ghost",link:"text-primary-600 hover:text-primary-800 underline focus:ring-primary-500 bg-transparent hover:bg-primary-50 dark:hover:bg-primary-900/20"},k={sm:"btn-sm",md:"btn-md",lg:"btn-lg",xl:"h-14 px-10 text-lg rounded-2xl"},S=He(y,w[r],k[a],l&&"w-full",c),C=o&&e.jsx("span",{className:He("flex-shrink-0 transition-transform duration-200",i==="left"?"mr-2":"ml-2",n&&"opacity-0"),children:o}),N=n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return e.jsxs("button",{type:g,className:S,disabled:t||n,onClick:d,...x,children:[n&&N,!n&&i==="left"&&C,e.jsx("span",{className:He("transition-all duration-200",n&&"opacity-0"),children:s}),!n&&i==="right"&&C]})},me=u.forwardRef(({label:s,error:r,helperText:a,required:t=!1,disabled:n=!1,readOnly:o=!1,className:i,containerClassName:l,labelClassName:c,errorClassName:d,helperClassName:g,leftIcon:x,rightIcon:y,leftAddon:w,rightAddon:k,size:S="md",variant:C="default",...N},p)=>{const _="input",E={default:"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-primary-500",error:"border-error-300 dark:border-error-600 focus:border-error-500 focus:ring-error-500",success:"border-success-300 dark:border-success-600 focus:border-success-500 focus:ring-success-500"},b={sm:"h-9 px-3 text-sm rounded-lg",md:"h-11 px-4 text-sm rounded-xl",lg:"h-12 px-4 text-base rounded-xl"},f=He(_,E[r?"error":C],b[S],n&&"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed",o&&"bg-gray-50 dark:bg-gray-800",x&&"pl-10",y&&"pr-10",w&&"pl-12",k&&"pr-12",i),P=He("space-y-2",l),R=He("block text-sm font-semibold text-gray-700 dark:text-gray-300",r&&"text-error-700 dark:text-error-400",n&&"text-gray-500 dark:text-gray-400",c),q=He("text-sm text-error-600 dark:text-error-400 flex items-center gap-1",d),I=He("text-sm text-gray-500 dark:text-gray-400",g);return e.jsxs("div",{className:P,children:[s&&e.jsxs("label",{className:R,children:[s,t&&e.jsx("span",{className:"text-error-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[x&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:He("text-gray-400 dark:text-gray-500 transition-colors duration-200","group-focus-within:text-primary-500"),children:x})}),w&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:w})}),e.jsx("input",{ref:p,className:f,disabled:n,readOnly:o,...N}),y&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:He("text-gray-400 dark:text-gray-500 transition-colors duration-200","group-focus-within:text-primary-500"),children:y})}),k&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:k})})]}),r&&e.jsxs("p",{className:q,children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r]}),a&&!r&&e.jsx("p",{className:I,children:a})]})});me.displayName="Input";const om=({children:s,type:r="info",title:a,showIcon:t=!0,dismissible:n=!1,onDismiss:o,className:i,titleClassName:l,contentClassName:c,iconClassName:d,variant:g="default"})=>{const x={success:{bg:"bg-gradient-to-r from-success-50 to-success-100 dark:from-success-900/20 dark:to-success-800/20",border:"border-success-200/50 dark:border-success-700/50",text:"text-success-800 dark:text-success-200",icon:Le,iconColor:"text-success-500",iconBg:"bg-gradient-to-br from-success-500 to-success-600",glow:"shadow-glow shadow-success-500/25"},warning:{bg:"bg-gradient-to-r from-warning-50 to-warning-100 dark:from-warning-900/20 dark:to-warning-800/20",border:"border-warning-200/50 dark:border-warning-700/50",text:"text-warning-800 dark:text-warning-200",icon:Pi,iconColor:"text-warning-500",iconBg:"bg-gradient-to-br from-warning-500 to-warning-600",glow:"shadow-glow shadow-warning-500/25"},error:{bg:"bg-gradient-to-r from-error-50 to-error-100 dark:from-error-900/20 dark:to-error-800/20",border:"border-error-200/50 dark:border-error-700/50",text:"text-error-800 dark:text-error-200",icon:ls,iconColor:"text-error-500",iconBg:"bg-gradient-to-br from-error-500 to-error-600",glow:"shadow-glow shadow-error-500/25"},info:{bg:"bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20",border:"border-primary-200/50 dark:border-primary-700/50",text:"text-primary-800 dark:text-primary-200",icon:Ow,iconColor:"text-primary-500",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",glow:"shadow-glow shadow-primary-500/25"}},y=x[r]||x.info,w=y.icon,S=He({default:"rounded-xl border backdrop-blur-sm",glass:"rounded-2xl border backdrop-blur-xl glass-card",minimal:"rounded-lg border-0 bg-transparent"}[g],y.bg,y.border,g!=="minimal"&&"shadow-soft",g==="glass"&&y.glow,"transition-all duration-200 hover:shadow-soft-lg",i),C=He("text-sm font-semibold",y.text,l),N=He("text-sm",y.text,c),p=He("h-5 w-5",y.iconColor,d);return e.jsx("div",{className:S,children:e.jsxs("div",{className:"flex items-start",children:[t&&e.jsx("div",{className:"flex-shrink-0",children:g==="glass"?e.jsx("div",{className:`w-8 h-8 rounded-xl ${y.iconBg} flex items-center justify-center shadow-glow`,children:e.jsx(w,{className:"h-4 w-4 text-white"})}):e.jsx(w,{className:p})}),e.jsxs("div",{className:He(t?"ml-3":"","flex-1 min-w-0"),children:[a&&e.jsx("h3",{className:C,children:a}),e.jsx("div",{className:He(a?"mt-2":"",N),children:s})]}),n&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("div",{className:"-mx-1.5 -my-1.5",children:e.jsxs("button",{type:"button",className:He("inline-flex rounded-xl p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200","hover:bg-white/50 dark:hover:bg-gray-800/50","focus:ring-primary-500"),onClick:o,children:[e.jsx("span",{className:"sr-only",children:"Cerrar"}),e.jsx(nr,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})]})})})]})})},f1=()=>{var g,x,y;const[s,r]=u.useState(!1),{login:a}=Es(),t=_r(),{register:n,handleSubmit:o,formState:{errors:i,isSubmitting:l},setError:c}=We(),d=async w=>{try{const k=await ft.loginAdmin({...w,userType:"admin"});k.success?(localStorage.setItem("token",k.data.token),(await a({email:w.email||w.ci,password:w.password,userType:"admin"})).success&&(m.success("Bienvenido al portal docente"),t("/docente/dashboard"))):(c("root",{type:"manual",message:k.message||"Error al iniciar sesin"}),m.error(k.message||"Error al iniciar sesin"))}catch{c("root",{type:"manual",message:"Error de conexin. Intenta nuevamente."}),m.error("Error de conexin")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(As,{to:"/portales",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-6 transition-colors",children:[e.jsx(zl,{className:"h-5 w-5 mr-2"}),"Volver a portales"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(tr,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portal del Docente"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Inicia sesin para acceder a tu portal"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:o(d),children:[i.root&&e.jsx(om,{type:"error",title:"Error de autenticacin",children:i.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email o CI"}),e.jsx(me,{type:"text",placeholder:"tu@email.com o tu CI",icon:e.jsx(Vo,{className:"h-5 w-5"}),error:((g=i.email)==null?void 0:g.message)||((x=i.ci)==null?void 0:x.message),...n("email",{required:"El email o CI es obligatorio"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Puedes usar tu email o nmero de CI"})]}),e.jsx(me,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(ea,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(Ao,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})}),error:(y=i.password)==null?void 0:y.message,...n("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(X,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:l,disabled:l,children:l?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Problemas para acceder?"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contactar soporte"})]})})]})]})]})},p1=()=>{var w,k,S;const[s,r]=u.useState(!1),{login:a,isAuthenticated:t,user:n,loading:o}=Es(),i=_r(),{register:l,handleSubmit:c,formState:{errors:d,isSubmitting:g},setError:x}=We();if(u.useEffect(()=>{var C;!o&&t&&((C=n==null?void 0:n.rol)==null?void 0:C.toUpperCase())==="ESTUDIANTE"&&i("/estudiante/dashboard",{replace:!0})},[t,n,o,i]),!o&&t&&((w=n==null?void 0:n.rol)==null?void 0:w.toUpperCase())==="ESTUDIANTE")return e.jsx(gs,{to:"/estudiante/dashboard",replace:!0});const y=async C=>{try{console.log(" Iniciando login con Email:",C.email);const N=await a({email:C.email,password:C.password,userType:"estudiante"});if(console.log(" Login Result:",N),N.success){const p=localStorage.getItem("token");if(console.log(" Token en localStorage:",p?"Presente":"Ausente"),!p){console.error(" Error: Token no guardado en localStorage"),x("root",{type:"manual",message:"Error al guardar la sesin. Intenta nuevamente."});return}console.log(" Login exitoso, redirigiendo a dashboard..."),i("/estudiante/dashboard",{replace:!0})}else x("root",{type:"manual",message:N.error||"CI o contrasea incorrectos"})}catch(N){console.error(" Error en onSubmit:",N),x("root",{type:"manual",message:"Error de conexin. Intenta nuevamente."}),m.error("Error de conexin")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(As,{to:"/portales",className:"inline-flex items-center text-green-600 hover:text-green-700 mb-6 transition-colors",children:[e.jsx(zl,{className:"h-5 w-5 mr-2"}),"Volver a portales"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(Ye,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portal del Estudiante"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Inicia sesin o regstrate para acceder"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:c(y),children:[d.root&&e.jsx(om,{type:"error",title:"Error de autenticacin",children:d.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(me,{label:"Email",type:"email",placeholder:"tu@email.com",icon:e.jsx(Vo,{className:"h-5 w-5"}),error:(k=d.email)==null?void 0:k.message,...l("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email debe tener un formato vlido"}})}),e.jsx(me,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(ea,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(Ao,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})}),error:(S=d.password)==null?void 0:S.message,...l("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(X,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:g||o,disabled:g||o,children:g||o?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-center text-gray-600 mb-4",children:"No tienes una cuenta?"}),e.jsxs(As,{to:"/estudiante/registro",className:"block w-full text-center bg-green-50 text-green-600 py-3 rounded-lg font-semibold hover:bg-green-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx($w,{className:"h-5 w-5"}),"Crear cuenta de estudiante"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Problemas para acceder?"," ",e.jsx("a",{href:"#",className:"text-green-600 hover:text-green-700 font-medium",children:"Contactar soporte"})]})})]})]})]})},y1=()=>{var C,N,p,_,E,b,f,P,R,q;const[s,r]=u.useState(!1),[a,t]=u.useState(!1),{registrar:n,isAuthenticated:o,user:i,loading:l}=Es(),c=_r(),{register:d,handleSubmit:g,formState:{errors:x,isSubmitting:y},watch:w}=We(),k=w("password");if(u.useEffect(()=>{o&&(i==null?void 0:i.rol)==="ESTUDIANTE"&&c("/estudiante/dashboard",{replace:!0})},[o,i,c]),o&&(i==null?void 0:i.rol)==="ESTUDIANTE")return e.jsx(gs,{to:"/estudiante/dashboard",replace:!0});const S=async I=>{try{(await n(I)).success&&c("/estudiante/dashboard",{replace:!0})}catch($){console.error("Error en registro:",$),m.error("Error inesperado al registrar")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(As,{to:"/estudiante/login",className:"inline-flex items-center text-green-600 hover:text-green-700 mb-6 transition-colors",children:[e.jsx(zl,{className:"h-5 w-5 mr-2"}),"Volver al login"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(Ye,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registro de Estudiante"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Completa el formulario para crear tu cuenta"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:g(S),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(tr,{className:"h-5 w-5 text-green-600"}),"Informacin Personal"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Nmero de CI",type:"text",placeholder:"12345678",icon:e.jsx(Ye,{className:"h-5 w-5"}),error:(C=x.ci)==null?void 0:C.message,...d("ci",{required:"El CI es obligatorio",pattern:{value:/^\d+$/,message:"El CI debe contener solo nmeros"}})}),e.jsx(me,{label:"Nombre",type:"text",placeholder:"Tu nombre",icon:e.jsx(tr,{className:"h-5 w-5"}),error:(N=x.nombre)==null?void 0:N.message,...d("nombre",{required:"El nombre es obligatorio"})}),e.jsx(me,{label:"Apellido",type:"text",placeholder:"Tu apellido",icon:e.jsx(tr,{className:"h-5 w-5"}),error:(p=x.apellido)==null?void 0:p.message,...d("apellido",{required:"El apellido es obligatorio"})}),e.jsx(me,{label:"Fecha de Nacimiento",type:"date",icon:e.jsx(Bs,{className:"h-5 w-5"}),error:(_=x.fecha_nacimiento)==null?void 0:_.message,...d("fecha_nacimiento",{required:"La fecha de nacimiento es obligatoria"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sexo"}),e.jsxs("select",{className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${x.sexo?"border-red-500":"border-gray-300"}`,...d("sexo",{required:"El sexo es obligatorio"}),children:[e.jsx("option",{value:"",children:"Seleccione..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),x.sexo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.sexo.message})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(qd,{className:"h-5 w-5 text-green-600"}),"Informacin de Contacto"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Email",type:"email",placeholder:"tu@email.com",icon:e.jsx(Vo,{className:"h-5 w-5"}),error:(E=x.email)==null?void 0:E.message,...d("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email debe tener un formato vlido"}})}),e.jsx(me,{label:"Celular",type:"text",placeholder:"70000000",icon:e.jsx(qd,{className:"h-5 w-5"}),error:(b=x.celular)==null?void 0:b.message,...d("celular",{required:"El celular es obligatorio"})}),e.jsx(me,{label:"Provincia",type:"text",placeholder:"Santa Cruz",icon:e.jsx(Dr,{className:"h-5 w-5"}),error:(f=x.provincia)==null?void 0:f.message,...d("provincia",{required:"La provincia es obligatoria"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(me,{label:"Direccin",type:"text",placeholder:"Tu direccin completa",icon:e.jsx(Dr,{className:"h-5 w-5"}),error:(P=x.direccion)==null?void 0:P.message,...d("direccion",{required:"La direccin es obligatoria"})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ea,{className:"h-5 w-5 text-green-600"}),"Contrasea"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Contrasea",type:s?"text":"password",placeholder:"Mnimo 8 caracteres",icon:e.jsx(ea,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(Ao,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})}),error:(R=x.password)==null?void 0:R.message,...d("password",{required:"La contrasea es obligatoria",minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Debe contener al menos una mayscula, una minscula y un nmero"}})}),e.jsx(me,{label:"Confirmar Contrasea",type:a?"text":"password",placeholder:"Repite tu contrasea",icon:e.jsx(ea,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>t(!a),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a?e.jsx(Ao,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})}),error:(q=x.password_confirmation)==null?void 0:q.message,...d("password_confirmation",{required:"Confirma tu contrasea",validate:I=>I===k||"Las contraseas no coinciden"})})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"La contrasea debe contener al menos 8 caracteres, una mayscula, una minscula y un nmero"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(X,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:y||l,disabled:y||l,children:y||l?"Registrando...":"Crear Cuenta"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Ya tienes una cuenta?"," ",e.jsx(As,{to:"/estudiante/login",className:"text-green-600 hover:text-green-700 font-medium",children:"Inicia sesin aqu"})]})})]})]})]})},dx=()=>{var k,S;const[s,r]=u.useState(!1),{login:a,isAuthenticated:t,loading:n,user:o}=Es(),i=_r(),{register:l,handleSubmit:c,formState:{errors:d,isSubmitting:g},setError:x}=We(),y=C=>{const N=Js(C);return N===os.ADMIN?"/admin/dashboard":N===os.DOCENTE?"/docente/dashboard":N===os.ESTUDIANTE?"/estudiante/dashboard":"/login"};if(u.useEffect(()=>{if(t&&(o!=null&&o.rol)){const C=y(o.rol);console.log(" Usuario autenticado, redirigiendo a:",C),i(C,{replace:!0})}},[t,o,i]),t&&o){const C=y(o==null?void 0:o.rol);return e.jsx(gs,{to:C,replace:!0})}const w=async C=>{try{console.log(" Login genrico iniciado con:",{email:C.email,hasCI:!!C.ci});const N=await a({...C,userType:"admin"});console.log(" Resultado del login:",N),N.success?console.log(" Login exitoso, esperando actualizacin del estado..."):x("root",{type:"manual",message:N.message||"Error al iniciar sesin"})}catch(N){console.error(" Error en login:",N),x("root",{type:"manual",message:"Error de conexin. Intenta nuevamente."})}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 rounded-full animate-spin"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Cargando..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-accent-400/20 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-accent-400/20 to-primary-400/20 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-primary-300/10 to-accent-300/10 rounded-full blur-3xl animate-float"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow-lg animate-bounce-in",children:e.jsx(Ye,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"mt-6 text-4xl font-bold gradient-text animate-fade-in-up",children:"ICAP - UAGRM"}),e.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-400 animate-fade-in-up",children:"Sistema Acadmico Inteligente"}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-accent-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]}),e.jsxs("div",{className:"glass-card rounded-3xl p-8 shadow-soft-lg animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsxs("form",{className:"space-y-6",onSubmit:c(w),children:[d.root&&e.jsx(om,{type:"error",title:"Error de autenticacin",children:d.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(me,{label:"Correo electrnico",type:"email",placeholder:"tu@email.com",icon:e.jsx(Vo,{className:"h-5 w-5"}),error:(k=d.email)==null?void 0:k.message,...l("email",{required:"El email es obligatorio",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"El email no es vlido"}})}),e.jsx(me,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(ea,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s?e.jsx(Ao,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})}),error:(S=d.password)==null?void 0:S.message,...l("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(X,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:g,disabled:g,icon:e.jsx(Lw,{className:"h-5 w-5"}),children:g?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200/50 dark:border-gray-700/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Problemas para acceder?"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("a",{href:"#",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200 flex items-center gap-1",children:[e.jsx(pr,{className:"h-4 w-4"}),"Soporte tcnico"]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:""}),e.jsxs("a",{href:"#",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200 flex items-center gap-1",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Contactar admin"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(Cs,{className:"h-6 w-6 text-primary-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Gestin de Usuarios"})]}),e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(Ts,{className:"h-6 w-6 text-accent-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Control Acadmico"})]}),e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(pr,{className:"h-6 w-6 text-success-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Seguridad Avanzada"})]})]})]})]})},Tc=()=>e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mi Perfil"}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Informacin Personal"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+591 12345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Administrador"}),e.jsx("option",{children:"Docente"}),e.jsx("option",{children:"Estudiante"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Guardar Cambios"})})]})]})]}),b1=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-gray-300",children:"404"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Pgina no encontrada"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Lo sentimos, la pgina que buscas no existe."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(As,{to:"/dashboard",className:"block w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Ir al Dashboard"}),e.jsx("button",{onClick:()=>window.history.back(),className:"block w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Volver Atrs"})]})]})}),ge=({children:s,title:r,subtitle:a,header:t,footer:n,className:o,headerClassName:i,bodyClassName:l,footerClassName:c,titleClassName:d,subtitleClassName:g,shadow:x="soft",rounded:y="2xl",bordered:w=!0,padding:k="default",hover:S=!0,gradient:C=!1,...N})=>{const p={none:"",sm:"shadow-sm",soft:"shadow-soft",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl","soft-lg":"shadow-soft-lg",glow:"shadow-glow","glow-lg":"shadow-glow-lg"},_={none:"",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl","4xl":"rounded-4xl",full:"rounded-full"},E={none:"",sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},b=He("card",p[x],_[y],w&&"border border-gray-200/50 dark:border-gray-700/50",S&&"hover:shadow-soft-lg hover:-translate-y-1",C&&"bg-gradient-to-br from-white/90 to-gray-50/90 dark:from-gray-800/90 dark:to-gray-900/90",o),f=He("card-header",i),P=He("card-content",E[k],l),R=He("card-footer",c),q=He("card-title",d),I=He("card-description",g);return e.jsxs("div",{className:b,...N,children:[(t||r||a)&&e.jsx("div",{className:f,children:t||e.jsxs(e.Fragment,{children:[r&&e.jsx("h3",{className:q,children:r}),a&&e.jsx("p",{className:I,children:a})]})}),e.jsx("div",{className:P,children:s}),n&&e.jsx("div",{className:R,children:n})]})},Xs=({size:s="medium",className:r=""})=>{const a={small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12",xlarge:"h-16 w-16"};return e.jsx("div",{className:`flex items-center justify-center ${r}`,children:e.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${a[s]}`})})},v1=()=>{var c,d,g,x,y,w,k,S,C;const{user:s}=Es(),r=_r(),[a,t]=u.useState(null),[n,o]=u.useState(!0);u.useEffect(()=>{i()},[]);const i=async()=>{var N,p,_;try{o(!0);const E=await Na.get("/admin/dashboard");if(E.data&&E.data.success){const b=E.data.data;t(b)}else{const b=((N=E.data)==null?void 0:N.message)||"Error al cargar el dashboard";m.error(b)}}catch(E){const b=((_=(p=E.response)==null?void 0:p.data)==null?void 0:_.message)||E.message||"Error de conexin";m.error(b)}finally{o(!1)}};if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 rounded-full animate-spin"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Cargando dashboard..."})]})});const l=a?[{title:"Total Estudiantes",value:((c=a.totales)==null?void 0:c.estudiantes)||((d=a.estudiantes)==null?void 0:d.total)||0,icon:Ye,color:"primary",gradient:"from-primary-500 to-primary-600",bgGradient:"from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20"},{title:"Total Docentes",value:((g=a.totales)==null?void 0:g.docentes)||((x=a.docentes)==null?void 0:x.total)||0,icon:ta,color:"success",gradient:"from-success-500 to-success-600",bgGradient:"from-success-50 to-success-100 dark:from-success-900/20 dark:to-success-800/20"},{title:"Total Programas",value:((y=a.totales)==null?void 0:y.programas)||((w=a.programas)==null?void 0:w.total)||0,icon:Ts,color:"accent",gradient:"from-accent-500 to-accent-600",bgGradient:"from-accent-50 to-accent-100 dark:from-accent-900/20 dark:to-accent-800/20"},{title:"Total Grupos",value:((k=a.totales)==null?void 0:k.grupos)||((S=a.grupos)==null?void 0:S.total)||0,icon:Cs,color:"warning",gradient:"from-warning-500 to-warning-600",bgGradient:"from-warning-50 to-warning-100 dark:from-warning-900/20 dark:to-warning-800/20"}]:[];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center lg:text-left animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-4 mb-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow-lg animate-bounce-in group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ye,{className:"h-8 w-8 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-success-500 rounded-full flex items-center justify-center shadow-glow animate-pulse",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:["Bienvenido, ",(s==null?void 0:s.nombre)||(s==null?void 0:s.name)||"Administrador","!"]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:"Resumen general del sistema acadmico"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 glass rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sistema Activo"})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 glass rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Rol: ",((C=s==null?void 0:s.rol)==null?void 0:C.nombre)||(s==null?void 0:s.rol)||"Administrador"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:l.map((N,p)=>{const _=N.icon;return e.jsx(ge,{className:`group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 hover:scale-105 bg-gradient-to-br ${N.bgGradient} border-0 cursor-pointer`,style:{animationDelay:`${p*.1}s`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:N.title}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:N.value})]}),e.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${N.gradient} shadow-glow animate-float`,children:e.jsx(_,{className:"h-8 w-8 text-white"})})]})},p)})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsx(ge,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/estudiantes"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ye,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Gestin de Estudiantes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Administrar estudiantes"})]})}),e.jsx(ge,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/validacion-documentos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-warning-500 to-warning-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(us,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Validar Documentos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revisar documentos"})]})}),e.jsx(ge,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/gestion-pagos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-success-500 to-success-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(Tr,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Verificar Pagos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmar pagos"})]})}),e.jsx(ge,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/grupos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent-500 to-accent-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(ta,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Gestin de Grupos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Administrar grupos"})]})})]}),(a==null?void 0:a.actividad_reciente)&&a.actividad_reciente.length>0&&e.jsxs(ge,{className:"gradient",shadow:"glow-lg",style:{animationDelay:"0.3s"},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(_w,{className:"h-6 w-6 mr-2"}),e.jsx("h3",{className:"text-xl font-bold gradient-text",children:"Actividad Reciente"})]}),e.jsx("div",{className:"space-y-4",children:a.actividad_reciente.slice(0,5).map((N,p)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded-2xl transition-all duration-200 group",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-glow group-hover:scale-110 transition-transform duration-200",children:e.jsx(_t,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200",children:N.mensaje||N.titulo||"Actividad del sistema"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center space-x-2",children:[N.docente&&e.jsxs("span",{children:["Por: ",N.docente]}),N.fecha&&e.jsxs(e.Fragment,{children:[N.docente&&e.jsx("span",{children:""}),e.jsx("span",{children:N.fecha})]})]})]})]},N.id||p))})]})]})},Pe=({isOpen:s=!1,onClose:r,title:a,children:t,size:n="md",showCloseButton:o=!0,closeOnOverlayClick:i=!0,closeOnEscape:l=!0,className:c,overlayClassName:d,headerClassName:g,bodyClassName:x,footerClassName:y,footer:w})=>{if(u.useEffect(()=>{if(!s||!l)return;const f=P=>{P.key==="Escape"&&(r==null||r())};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[s,l,r]),u.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const k={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},S=He("fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",d),C=He("bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-h-[90vh] flex flex-col",k[n],c),N=He("flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",g),p=He("p-6 flex-1 min-h-0 overflow-y-auto",x),_=He("flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",y),E=f=>{i&&f.target===f.currentTarget&&(r==null||r())},b=e.jsx("div",{className:S,onClick:E,children:e.jsxs("div",{className:C,children:[(a||o)&&e.jsxs("div",{className:N,children:[a&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),o&&e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(nr,{className:"h-6 w-6"})})]}),e.jsx("div",{className:p,children:t}),w&&e.jsx("div",{className:_,children:w})]})});return Bu.createPortal(b,document.body)},es=({columns:s=[],data:r=[],loading:a=!1,emptyMessage:t="No hay datos disponibles",onSort:n,sortBy:o,sortDirection:i="asc",className:l,headerClassName:c,bodyClassName:d,rowClassName:g,cellClassName:x,striped:y=!1,hover:w=!0,bordered:k=!1,compact:S=!1,currentPage:C,totalPages:N,onPageChange:p,perPage:_,onPerPageChange:E,...b})=>{const f=He("min-w-full divide-y divide-gray-200 dark:divide-gray-700",k&&"border border-gray-200 dark:border-gray-700",l),P=He("bg-gray-50 dark:bg-gray-800",c),R=He("bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",d),q=F=>He(y&&F%2===1&&"bg-gray-50 dark:bg-gray-800/50",w&&"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150",g),I=()=>He(S?"px-3 py-2":"px-6 py-4","text-sm text-gray-900 dark:text-gray-100",x),$=F=>{if(!n||!F.sortable)return;const ae=o===F.key&&i==="asc"?"desc":"asc";n(F.key,ae)},G=F=>F.sortable?o===F.key?i==="asc"?e.jsx(Wg,{className:"h-4 w-4"}):e.jsx(Aw,{className:"h-4 w-4"}):e.jsx(Wg,{className:"h-4 w-4 opacity-30"}):null;if(a)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 dark:border-t-primary-400 rounded-full animate-spin"})]})});if(r.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:t})]});const V=Object.keys(b).reduce((F,ae)=>(["currentPage","totalPages","onPageChange","perPage","onPerPageChange"].includes(ae)||(F[ae]=b[ae]),F),{});return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:f,...V,children:[e.jsx("thead",{className:P,children:e.jsx("tr",{children:s.map(F=>e.jsx("th",{className:He(S?"px-3 py-2":"px-6 py-3","text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",F.sortable&&"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150",F.className),onClick:()=>$(F),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:F.label||F.title}),F.sortable&&G(F)]})},F.key))})}),e.jsx("tbody",{className:R,children:r.map((F,ae)=>e.jsx("tr",{className:q(ae),children:s.map(ne=>e.jsx("td",{className:He(I(),ne.cellClassName),children:ne.render?ne.render(F,ae):F[ne.key]},ne.key))},F.id||ae))})]})})},_a={async getUsers(s={}){var r,a,t,n,o;try{const i={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE};s.search&&s.search.trim()!==""&&(i.search=s.search.trim()),s.rol_id&&s.rol_id!==""&&(i.rol_id=s.rol_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(i.activo=s.activo);const l=await ye("/usuarios",i);return l.data&&l.data.success?{success:!0,data:l.data.data,message:l.data.message}:{success:!1,message:((r=l.data)==null?void 0:r.message)||"Error al obtener usuarios",data:null}}catch(i){return console.error("Error en userService.getUsers:",i),console.error("Response error:",(a=i.response)==null?void 0:a.data),console.error("Status:",(t=i.response)==null?void 0:t.status),{success:!1,message:((o=(n=i.response)==null?void 0:n.data)==null?void 0:o.message)||i.message||"Error al obtener usuarios",data:null}}},async getUser(s){var r,a;try{const t=await ye(`/usuarios/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Usuario no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario"}}},async createUser(s){var r,a,t,n;try{const o=await Me("/usuarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE,errors:null}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateUser(s,r){var a,t,n,o;try{const i=await Ze(`/usuarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE,errors:null}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteUser(s){var r,a;try{const t=await ts(`/usuarios/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async toggleStatus(s){var r,a;try{const t=await Ze(`/usuarios/${s}/toggle-status`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Estado actualizado exitosamente"}:{success:!1,message:t.data.message||"Error al actualizar el estado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al actualizar el estado"}}},async importUsers(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await Me("/usuarios/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Usuarios importados exitosamente"}:{success:!1,message:i.data.message||"Error al importar usuarios",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar usuarios",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async exportUsers(s={}){var r,a,t;try{const n={page:1,per_page:1e4};s.search&&s.search.trim()!==""&&(n.search=s.search.trim()),s.rol_id&&s.rol_id!==""&&(n.rol_id=s.rol_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(n.activo=s.activo);const o=await ye("/usuarios",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[]}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar usuarios"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar usuarios"}}}},Kr={async getRoles(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_order:s.sort_order||"asc"},a=await ye("/admin/roles",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener roles"}}catch(r){return{success:!1,message:r.message||"Error al obtener roles"}}},async getAllRoles(){try{const s=await ye("/admin/roles/all");return s.data.success?{success:!0,data:s.data.data}:{success:!1,message:s.data.message||"Error al obtener roles"}}catch(s){return{success:!1,message:s.message||"Error al obtener roles"}}},async getRole(s){try{const r=await ye(`/admin/roles/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Rol no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener rol"}}},async getPermisos(){var s,r;try{const a=await ye("/admin/permisos");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos"}}},async getPermisosAgrupados(){var s,r;try{const a=await ye("/admin/permisos/agrupados");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos agrupados"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos agrupados"}}},async createRole(s){var r,a,t,n,o,i;try{const l={nombre_rol:s.nombre_rol||s.nombre,descripcion:s.descripcion||"",activo:s.activo!==void 0?s.activo:!0},c=await Me("/admin/roles",l);if(s.permisos&&Array.isArray(s.permisos)&&s.permisos.length>0&&c.data.success){const d=((r=c.data.data)==null?void 0:r.rol_id)||((a=c.data.data)==null?void 0:a.id);d&&await this.asignarPermisos(d,s.permisos)}return c.data.success?{success:!0,data:c.data.data,message:c.data.message||M.SUCCESS.SAVE,errors:null}:{success:!1,message:c.data.message||M.ERROR.SAVE,errors:c.data.errors}}catch(l){return{success:!1,message:((n=(t=l.response)==null?void 0:t.data)==null?void 0:n.message)||l.message||M.ERROR.SAVE,errors:(i=(o=l.response)==null?void 0:o.data)==null?void 0:i.errors}}},async updateRole(s,r){var a,t,n,o;try{const i={nombre_rol:r.nombre_rol||r.nombre,descripcion:r.descripcion||"",activo:r.activo!==void 0?r.activo:!0},l=await Ze(`/admin/roles/${s}`,i);return r.permisos&&Array.isArray(r.permisos)&&r.permisos.length>=0&&await this.asignarPermisos(s,r.permisos),l.data.success?{success:!0,data:l.data.data,message:l.data.message||M.SUCCESS.UPDATE,errors:null}:{success:!1,message:l.data.message||M.ERROR.UPDATE,errors:l.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async asignarPermisos(s,r){var a,t,n,o;try{const i=await Me(`/admin/roles/${s}/permisos`,{permisos:r});return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Permisos asignados exitosamente"}:{success:!1,message:i.data.message||"Error al asignar permisos",errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||"Error al asignar permisos",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteRole(s){try{const r=await ts(`/admin/roles/${s}`);return r.data.success?{success:!0,message:M.SUCCESS.DELETE}:{success:!1,message:r.data.message||M.ERROR.DELETE}}catch(r){return{success:!1,message:r.message||M.ERROR.DELETE}}}},j1=s=>{if(!s)return"";const r=new Date(s);return isNaN(r.getTime())?"":r.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},ux=s=>{if(!s)return"";const a=new Date-new Date(s),t=Math.floor(a/1e3),n=Math.floor(t/60),o=Math.floor(n/60),i=Math.floor(o/24);return i>0?`hace ${i} da${i>1?"s":""}`:o>0?`hace ${o} hora${o>1?"s":""}`:n>0?`hace ${n} minuto${n>1?"s":""}`:"ahora"},Mt=(s,r="export.csv")=>{if(!s||s.length===0)return;const a=Object.keys(s[0]),t=[a.join(","),...s.map(i=>a.map(l=>`"${i[l]||""}"`).join(","))].join(`
`),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");if(o.download!==void 0){const i=URL.createObjectURL(n);o.setAttribute("href",i),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},N1=()=>{var ie,xe,Ee,he,Ne;const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState([]),[o,i]=u.useState(!0),[l,c]=u.useState(""),[d,g]=u.useState(1),[x,y]=u.useState(1),[w,k]=u.useState(10),[S,C]=u.useState(!1),[N,p]=u.useState(!1),[_,E]=u.useState(!1),[b,f]=u.useState(null),[P,R]=u.useState(null),[q,I]=u.useState(!1),[$,G]=u.useState(null),V=u.useRef(null),{register:F,handleSubmit:ae,reset:ne,formState:{errors:ce}}=We();u.useEffect(()=>{H(),K()},[d,w,l]);const H=async()=>{var ue,J;try{i(!0);const L=await _a.getUsers({page:d,per_page:w,search:l});L.success&&L.data?(a(L.data.data||[]),y(L.data.last_page||1)):(m.error(L.message||"Error al cargar usuarios"),a([]),y(1))}catch(L){const j=((J=(ue=L.response)==null?void 0:ue.data)==null?void 0:J.message)||L.message||"Error de conexin";m.error(j),console.error("Error al cargar usuarios:",L),a([]),y(1)}finally{i(!1)}},K=async()=>{try{const ue=await Kr.getAllRoles();ue.success&&n(ue.data||[])}catch(ue){console.error("Error al cargar roles:",ue)}},te=()=>{f(null),ne({name:"",email:"",password:"",rol_id:"",activo:!0}),C(!0)},W=ue=>{var J;f(ue),ne({name:ue.name,email:ue.email,rol_id:ue.rol_id||((J=ue.rol)==null?void 0:J.id),activo:ue.activo}),C(!0)},O=async ue=>{try{const J=await _a.getUser(ue.id);J.success&&(R(J.data),p(!0))}catch{m.error("Error al cargar el usuario")}},z=async ue=>{var J,L;if(window.confirm("Ests seguro de que quieres eliminar este usuario?"))try{i(!0);const j=await _a.deleteUser(ue);j.success?(m.success(j.message||"Usuario eliminado exitosamente"),await H()):m.error(j.message||"Error al eliminar el usuario")}catch(j){const B=((L=(J=j.response)==null?void 0:J.data)==null?void 0:L.message)||j.message||"Error al eliminar el usuario";m.error(B)}finally{i(!1)}},Y=async ue=>{var J,L;try{const j=await _a.toggleStatus(ue);j.success?(m.success(j.message||"Estado actualizado exitosamente"),await H()):m.error(j.message||"Error al actualizar el estado")}catch(j){const B=((L=(J=j.response)==null?void 0:J.data)==null?void 0:L.message)||j.message||"Error al actualizar el estado";m.error(B)}},Z=async ue=>{var J,L,j,B;try{i(!0);const h={...ue,rol_id:parseInt(ue.rol_id),activo:ue.activo==="true"||ue.activo===!0||ue.activo==="1"||ue.activo===1};b&&!ue.password&&delete h.password;let v;if(b)v=await _a.updateUser(b.id,h);else{if(!ue.password){m.error("La contrasea es obligatoria para crear un nuevo usuario");return}v=await _a.createUser(h)}v.success?(m.success(v.message||(b?"Usuario actualizado exitosamente":"Usuario creado exitosamente")),C(!1),f(null),ne(),await H()):(m.error(v.message||"Error al guardar el usuario"),v.errors&&Object.keys(v.errors).forEach(T=>{m.error(`${T}: ${v.errors[T]}`)}))}catch(h){const v=((L=(J=h.response)==null?void 0:J.data)==null?void 0:L.message)||h.message||"Error al guardar el usuario";m.error(v),(B=(j=h.response)==null?void 0:j.data)!=null&&B.errors&&Object.keys(h.response.data.errors).forEach(T=>{m.error(`${T}: ${h.response.data.errors[T]}`)})}finally{i(!1)}},U=async ue=>{var L,j;const J=ue.target.files[0];if(J){if(!J.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}I(!0),G(null);try{const B=await _a.importUsers(J);B.success?(G(B.data),m.success(B.message||"Usuarios importados exitosamente"),await H(),setTimeout(()=>{E(!1),G(null),V.current&&(V.current.value="")},3e3)):(m.error(B.message||"Error al importar usuarios"),B.errors&&G({errores:B.errors}))}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al importar usuarios";m.error(h)}finally{I(!1)}}},ee=()=>{const ue=`nombre,email,rol,codigo_docente
Juan Prez,juan.perez@example.com,docente,DOC001
Mara Gonzlez,maria.gonzalez@example.com,coordinador,
`,J=new Blob([ue],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a");L.href=URL.createObjectURL(J),L.download="template_usuarios.csv",L.click()},oe=async()=>{var ue,J;try{i(!0);const L=await _a.exportUsers({search:l});if(L.success&&L.data&&Array.isArray(L.data)){if(L.data.length===0){m.error("No hay usuarios para exportar");return}const j=L.data.map(B=>{var h;return{Nombre:B.name||"",Email:B.email||"",Rol:((h=B.rol)==null?void 0:h.nombre)||"Sin rol",Estado:B.activo?"Activo":"Inactivo",Creado:B.created_at?new Date(B.created_at).toLocaleDateString("es-ES"):""}});Mt(j,`usuarios_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${j.length} usuarios exitosamente`)}else m.error(L.message||"Error al exportar usuarios: No se recibieron datos vlidos"),console.error("Error en exportacin:",L)}catch(L){console.error("Error al exportar usuarios:",L),m.error(((J=(ue=L.response)==null?void 0:ue.data)==null?void 0:J.message)||L.message||"Error al exportar usuarios")}finally{i(!1)}},D=[{key:"name",label:"Usuario",sortable:!0,render:ue=>{var J;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((J=ue.name)==null?void 0:J.charAt(0))||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ue.name}),e.jsx("div",{className:"text-sm text-gray-500",children:ue.email})]})]})}},{key:"rol",label:"Rol",sortable:!0,render:ue=>{var J;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((J=ue.rol)==null?void 0:J.nombre)||"Sin rol"})]})}},{key:"activo",label:"Estado",sortable:!0,render:ue=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ue.activo?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:ue.activo?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})},{key:"actions",label:"Acciones",render:ue=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>O(ue)}),e.jsx(X,{variant:"ghost",size:"sm",icon:ue.activo?e.jsx(ls,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"}),onClick:()=>Y(ue.id),title:ue.activo?"Desactivar":"Activar"}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>W(ue)}),ue.id!==(s==null?void 0:s.id)&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>z(ue.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Usuarios"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los usuarios del sistema"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{variant:"success",icon:e.jsx(Hs,{className:"h-5 w-5"}),onClick:()=>E(!0),children:"Importar"}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:te,children:"Nuevo Usuario"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(ue=>ue.activo).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(ue=>{var J;return((J=ue.rol)==null?void 0:J.nombre)==="docente"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(pr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Coordinadores"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(ue=>{var J;return((J=ue.rol)==null?void 0:J.nombre)==="coordinador"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(pr,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Usuarios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar usuarios...",value:l,onChange:ue=>c(ue.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>E(!0),children:"Importar"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:oe,disabled:o,children:"Exportar"})]})]})]}),e.jsx(es,{columns:D,data:r,loading:o,pagination:{currentPage:d,totalPages:x,perPage:w,onPageChange:g,onPerPageChange:k}})]}),e.jsx(Pe,{isOpen:S,onClose:()=>{C(!1),f(null),ne()},title:b?"Editar Usuario":"Nuevo Usuario",size:"lg",children:e.jsxs("form",{onSubmit:ae(Z),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(me,{label:"Nombre Completo *",placeholder:"Ej: Juan Prez",error:(ie=ce.name)==null?void 0:ie.message,...F("name",{required:"El nombre es obligatorio"})}),e.jsx(me,{label:"Email *",type:"email",placeholder:"Ej: juan@example.com",error:(xe=ce.email)==null?void 0:xe.message,...F("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invlido"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol *"}),e.jsxs("select",{...F("rol_id",{required:"El rol es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar rol..."}),t.map(ue=>e.jsxs("option",{value:ue.id,children:[ue.nombre," - ",ue.descripcion||""]},ue.id))]}),ce.rol_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ce.rol_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{...F("activo",{setValueAs:ue=>ue==="true"||ue===!0||ue==="1"||ue===1}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"true",children:"Activo"}),e.jsx("option",{value:"false",children:"Inactivo"})]})]}),!b&&e.jsx(me,{label:"Contrasea *",type:"password",placeholder:"Mnimo 8 caracteres",error:(Ee=ce.password)==null?void 0:Ee.message,...F("password",{required:!b&&"La contrasea es obligatoria",minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"}})}),b&&e.jsx(me,{label:"Nueva Contrasea (opcional)",type:"password",placeholder:"Dejar vaco para mantener la actual",error:(he=ce.password)==null?void 0:he.message,...F("password",{minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"}})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{C(!1),f(null),ne()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[b?"Actualizar":"Crear"," Usuario"]})]})]})}),e.jsx(Pe,{isOpen:_,onClose:()=>{E(!1),G(null),V.current&&(V.current.value="")},title:"Importar Usuarios",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-info-900 dark:text-info-100 mb-2",children:"Formato del archivo"}),e.jsx("p",{className:"text-sm text-info-700 dark:text-info-300 mb-2",children:"El archivo debe ser Excel (.xlsx, .xls) o CSV con las siguientes columnas:"}),e.jsxs("ul",{className:"text-sm text-info-700 dark:text-info-300 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"nombre"})," o ",e.jsx("strong",{children:"name"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"email"})," o ",e.jsx("strong",{children:"correo"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"rol"})," (opcional, por defecto: docente)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"codigo"})," o ",e.jsx("strong",{children:"cdigo"})," (opcional, para docentes)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar archivo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{ref:V,type:"file",accept:".xlsx,.xls,.csv",onChange:U,disabled:q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),e.jsx(X,{type:"button",variant:"outline",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:ee,children:"Template"})]})]}),q&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando usuarios..."})]}),$&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Resultado de la importacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-success-600",children:"Creados:"})," ",$.creados||0]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-info-600",children:"Actualizados:"})," ",$.actualizados||0]}),$.errores&&$.errores.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-semibold text-error-600 mb-2",children:"Errores:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:$.errores.map((ue,J)=>e.jsx("p",{className:"text-xs text-error-600",children:ue},J))})]})]})]})]})}),e.jsx(Pe,{isOpen:N,onClose:()=>p(!1),title:"Detalles del Usuario",size:"lg",children:P&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:P.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:P.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400 capitalize",children:((Ne=P.rol)==null?void 0:Ne.nombre)||"Sin rol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.activo?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:P.activo?"Activo":"Inactivo"})]})]})})})]})},Bt={async getPaises(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/paises",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener pases"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener pases"}}},async getPais(s){var r,a;try{const t=await ye(`/admin/paises/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Pas no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener pas"}}},async createPais(s){var r,a,t,n;try{const o=await Me("/admin/paises",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updatePais(s,r){var a,t,n,o;try{const i=await Ze(`/admin/paises/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deletePais(s){var r,a;try{const t=await ts(`/admin/paises/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}}},qt={async getProvincias(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",pais_id:s.pais_id||""};t.search||delete t.search,t.pais_id||delete t.pais_id;const n=await ye("/admin/provincias",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener provincias"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener provincias"}}},async getProvincia(s){var r,a;try{const t=await ye(`/admin/provincias/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Provincia no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener provincia"}}},async createProvincia(s){var r,a,t,n;try{const o=await Me("/admin/provincias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateProvincia(s,r){var a,t,n,o;try{const i=await Ze(`/admin/provincias/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteProvincia(s){var r,a;try{const t=await ts(`/admin/provincias/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}}},Ht={async getCiudades(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",provincia_id:s.provincia_id||""};t.search||delete t.search,t.provincia_id||delete t.provincia_id;const n=await ye("/admin/ciudades",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener ciudades"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener ciudades"}}},async getCiudad(s){var r,a;try{const t=await ye(`/admin/ciudades/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Ciudad no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener ciudad"}}},async createCiudad(s){var r,a,t,n;try{const o=await Me("/admin/ciudades",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateCiudad(s,r){var a,t,n,o;try{const i=await Ze(`/admin/ciudades/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteCiudad(s){var r,a;try{const t=await ts(`/admin/ciudades/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}}},Un={async getInstituciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",ciudad_id:s.ciudad_id||"",estado:s.estado!==void 0?s.estado:""};t.search||delete t.search,t.ciudad_id||delete t.ciudad_id,t.estado===""&&delete t.estado;const n=await ye("/admin/instituciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener instituciones"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener instituciones"}}},async getInstitucion(s){var r,a;try{const t=await ye(`/admin/instituciones/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Institucin no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener institucin"}}},async createInstitucion(s){var r,a,t,n;try{const o=await Me("/admin/instituciones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateInstitucion(s,r){var a,t,n,o;try{const i=await Ze(`/admin/instituciones/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteInstitucion(s){var r,a;try{const t=await ts(`/admin/instituciones/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}}},zt={async getUsuarios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",rol_id:s.rol_id||""};t.search||delete t.search,t.rol_id||delete t.rol_id;const n=await ye("/admin/usuarios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener usuarios"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuarios"}}},async getUsuario(s){var r,a;try{const t=await ye(`/admin/usuarios/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Usuario no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario"}}},async createUsuario(s){var r,a,t,n;try{const o=await Me("/admin/usuarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateUsuario(s,r){var a,t,n,o;try{const i=await Ze(`/admin/usuarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteUsuario(s){var r,a;try{const t=await ts(`/admin/usuarios/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async getRoles(){var s,r;try{const a=await ye("/admin/usuarios/roles");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener roles"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener roles"}}}},$n={async getTiposConvenio(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/tipo-convenios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getTipoConvenioById(s){var r,a;try{const t=await ye(`/admin/tipo-convenios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createTipoConvenio(s){var r,a,t,n;try{const o=await Me("/admin/tipo-convenios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo de convenio:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateTipoConvenio(s,r){var a,t,n,o;try{const i=await Ze(`/admin/tipo-convenios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo de convenio:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeTipoConvenio(s){var r,a;try{const t=await ts(`/admin/tipo-convenios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing tipo de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},it={async getConvenios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",tipo_convenio_id:s.tipo_convenio_id||"",estado:s.estado!==void 0?s.estado:"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||""};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await ye("/admin/convenios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching convenios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getConvenioById(s){var r,a;try{const t=await ye(`/admin/convenios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await ye("/admin/convenios/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async createConvenio(s){var r,a,t,n;try{const o=await Me("/admin/convenios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating convenio:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateConvenio(s,r){var a,t,n,o;try{const i=await Ze(`/admin/convenios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating convenio:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeConvenio(s){var r,a;try{const t=await ts(`/admin/convenios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}},async agregarInstitucion(s,r){var a,t;try{const n=await Me(`/admin/convenios/${s}/instituciones`,r);return n.data.success?{success:!0,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_UPDATE}}catch(n){return console.error("Error agregando institucin:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE}}},async removerInstitucion(s,r){var a,t;try{const n=await ts(`/admin/convenios/${s}/instituciones/${r}`);return n.data.success?{success:!0,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_DELETE}}catch(n){return console.error("Error removiendo institucin:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_DELETE}}}},w1=()=>{var Y,Z,U,ee,oe,D,ie,xe,Ee,he,Ne,ue,J,L,j,B,h;const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState([]),[o,i]=u.useState(!0),[l,c]=u.useState(""),[d,g]=u.useState(""),[x,y]=u.useState(1),[w,k]=u.useState(1),[S,C]=u.useState(10),[N,p]=u.useState(!1),[_,E]=u.useState(!1),[b,f]=u.useState(null),[P,R]=u.useState(null),{register:q,handleSubmit:I,reset:$,formState:{errors:G},watch:V,trigger:F,setValue:ae}=We({mode:"onChange",defaultValues:{ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",email:"",password:"",password_confirmation:"",rol_id:""}});u.useEffect(()=>{ne()},[]),u.useEffect(()=>{ce()},[x,S,l,d]);const ne=async()=>{var v,T;try{const A=await zt.getRoles();if(A.success){const Q=(A.data||[]).filter(re=>re.nombre_rol!=="ESTUDIANTE"&&re.nombre_rol!=="estudiante");n(Q)}else m.error(A.message||"Error al cargar roles")}catch(A){const Q=((T=(v=A.response)==null?void 0:v.data)==null?void 0:T.message)||A.message||"Error al cargar roles";m.error(Q)}},ce=async()=>{var v,T;try{i(!0);const A=await zt.getUsuarios({page:x,per_page:S,search:l,rol_id:d||void 0});if(A.success&&A.data){const Q=(A.data.data||[]).filter(re=>{var ve;const de=((ve=re.rol)==null?void 0:ve.nombre_rol)||"";return de!=="ESTUDIANTE"&&de!=="estudiante"});a(Q),k(A.data.last_page||1)}else{const Q=A.message||"Error al cargar usuarios";m.error(Q),a([]),k(1)}}catch(A){const Q=((T=(v=A.response)==null?void 0:v.data)==null?void 0:T.message)||A.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(Q),a([]),k(1)}finally{i(!1)}},H=()=>{f(null),$({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",email:"",password:"",password_confirmation:"",rol_id:""}),p(!0)},K=v=>{f(v);const T=v.persona||{};$({ci:T.ci||"",nombre:T.nombre||"",apellido:T.apellido||"",celular:T.celular||"",sexo:T.sexo||"",fecha_nacimiento:T.fecha_nacimiento?T.fecha_nacimiento.split("T")[0]:"",direccion:T.direccion||"",email:v.email||"",password:"",password_confirmation:"",rol_id:v.rol_id||""}),p(!0)},te=async v=>{var T,A,Q,re,de,ve;try{const je=await zt.getUsuario(v.usuario_id||v.id);if(je.success){if(((A=(T=je.data)==null?void 0:T.rol)==null?void 0:A.nombre_rol)==="ESTUDIANTE"||((re=(Q=je.data)==null?void 0:Q.rol)==null?void 0:re.nombre_rol)==="estudiante"){m.error("Los usuarios estudiantes se gestionan desde el mdulo de estudiantes");return}R(je.data),E(!0)}else m.error(je.message||"Error al cargar el usuario")}catch(je){const le=((ve=(de=je.response)==null?void 0:de.data)==null?void 0:ve.message)||je.message||"Error al cargar el usuario";m.error(le)}},W=async v=>{var T,A;if(window.confirm("Ests seguro de que quieres eliminar este usuario?"))try{i(!0);const Q=await zt.deleteUsuario(v);Q.success?(m.success(Q.message||"Usuario eliminado exitosamente"),await ce()):m.error(Q.message||"Error al eliminar el usuario")}catch(Q){m.error(((A=(T=Q.response)==null?void 0:T.data)==null?void 0:A.message)||Q.message||"Error al eliminar el usuario")}finally{i(!1)}},O=async v=>{var Q,re,de,ve;if(!v.ci||v.ci.trim()===""){m.error("El CI es obligatorio");return}if(!v.nombre||v.nombre.trim()===""){m.error("El nombre es obligatorio");return}if(!v.apellido||v.apellido.trim()===""){m.error("El apellido es obligatorio");return}if(!v.email||v.email.trim()===""){m.error("El email es obligatorio");return}if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(v.email)){m.error("El email no es vlido");return}if(!v.rol_id){m.error("El rol es obligatorio");return}const A=t.find(je=>je.rol_id===parseInt(v.rol_id));if(A&&(A.nombre_rol==="ESTUDIANTE"||A.nombre_rol==="estudiante")){m.error("No se puede crear un usuario con rol ESTUDIANTE desde este mdulo. Los estudiantes se registran desde el portal de estudiantes.");return}if(b){if(v.password&&v.password.trim()!==""){if(v.password.length<6){m.error("La contrasea debe tener al menos 6 caracteres");return}if(v.password!==v.password_confirmation){m.error("Las contraseas no coinciden");return}}}else{if(!v.password||v.password.length<6){m.error("La contrasea es obligatoria y debe tener al menos 6 caracteres");return}if(v.password!==v.password_confirmation){m.error("Las contraseas no coinciden");return}}try{i(!0);const je={ci:v.ci.trim(),nombre:v.nombre.trim(),apellido:v.apellido.trim(),celular:v.celular?v.celular.trim():null,sexo:v.sexo||null,fecha_nacimiento:v.fecha_nacimiento||null,direccion:v.direccion?v.direccion.trim():null,email:v.email.trim().toLowerCase(),rol_id:parseInt(v.rol_id)};Object.keys(je).forEach(se=>{(je[se]===null||je[se]==="")&&delete je[se]}),b?v.password&&v.password.trim()!==""&&(je.password=v.password.trim(),je.password_confirmation=v.password_confirmation?v.password_confirmation.trim():""):(je.password=v.password,je.password_confirmation=v.password_confirmation);let le;b?le=await zt.updateUsuario(b.usuario_id||b.id,je):le=await zt.createUsuario(je),le.success?(m.success(le.message||(b?"Usuario actualizado exitosamente":"Usuario creado exitosamente")),p(!1),f(null),$(),await ce()):(m.error(le.message||"Error al guardar el usuario"),le.errors&&(Array.isArray(le.errors)?le.errors:Object.values(le.errors).flat()).forEach(pe=>{typeof pe=="string"&&pe.trim()&&m.error(pe,{duration:4e3})}))}catch(je){const le=((re=(Q=je.response)==null?void 0:Q.data)==null?void 0:re.message)||je.message||"Error al guardar el usuario";if(m.error(le),(ve=(de=je.response)==null?void 0:de.data)!=null&&ve.errors){const se=je.response.data.errors;(Array.isArray(se)?se:Object.values(se).flat()).forEach(ke=>{typeof ke=="string"&&ke.trim()&&m.error(ke,{duration:4e3})})}}finally{i(!1)}},z=[{key:"persona",label:"Usuario",sortable:!0,render:v=>{const T=v.persona||{},A=`${T.nombre||""} ${T.apellido||""}`.trim()||v.email;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:A.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:A}),e.jsx("div",{className:"text-sm text-gray-500",children:v.email})]})]})}},{key:"rol",label:"Rol",sortable:!0,render:v=>{var T;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((T=v.rol)==null?void 0:T.nombre_rol)||"Sin rol"})]})}},{key:"ci",label:"CI",render:v=>{var T;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((T=v.persona)==null?void 0:T.ci)||"-"})}},{key:"actions",label:"Acciones",render:v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>te(v)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>K(v)}),(v.usuario_id||v.id)!==(s==null?void 0:s.id)&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>W(v.usuario_id||v.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Usuarios del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los usuarios base del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:H,children:"Nuevo Usuario"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Administradores"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(v=>{var T;return((T=v.rol)==null?void 0:T.nombre_rol)==="ADMIN"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(pr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(v=>{var T;return((T=v.rol)==null?void 0:T.nombre_rol)==="DOCENTE"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(tr,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Usuarios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar usuarios...",value:l,onChange:v=>c(v.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:d,onChange:v=>g(v.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los roles"}),t.map(v=>e.jsx("option",{value:v.rol_id,children:v.nombre_rol},v.rol_id))]})]})]}),e.jsx(es,{columns:z,data:r,loading:o,pagination:{currentPage:x,totalPages:w,perPage:S,onPageChange:y,onPerPageChange:C}})]}),e.jsx(Pe,{isOpen:N,onClose:()=>{p(!1),f(null),$()},title:b?"Editar Usuario":"Nuevo Usuario",size:"xl",children:e.jsxs("form",{onSubmit:I(O),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx("h3",{className:"col-span-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Datos de la Persona"}),e.jsx(me,{label:"CI *",placeholder:"Ej: 12345678",error:(Y=G.ci)==null?void 0:Y.message,...q("ci",{required:"El CI es obligatorio",maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"},validate:v=>v&&v.trim().length===0?"El CI no puede estar vaco":!0}),onBlur:()=>F("ci")}),e.jsx(me,{label:"Nombre *",placeholder:"Ej: Juan",error:(Z=G.nombre)==null?void 0:Z.message,...q("nombre",{required:"El nombre es obligatorio",maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"},validate:v=>v&&v.trim().length===0?"El nombre no puede estar vaco":!0}),onBlur:()=>F("nombre")}),e.jsx(me,{label:"Apellido *",placeholder:"Ej: Prez",error:(U=G.apellido)==null?void 0:U.message,...q("apellido",{required:"El apellido es obligatorio",maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"},validate:v=>v&&v.trim().length===0?"El apellido no puede estar vaco":!0}),onBlur:()=>F("apellido")}),e.jsx(me,{label:"Celular",placeholder:"Ej: 70000000",error:(ee=G.celular)==null?void 0:ee.message,...q("celular",{maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"},pattern:{value:/^[0-9]*$/,message:"El celular solo puede contener nmeros"}}),onBlur:()=>F("celular")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...q("sexo"),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]})]}),e.jsx(me,{label:"Fecha de Nacimiento",type:"date",error:(oe=G.fecha_nacimiento)==null?void 0:oe.message,...q("fecha_nacimiento")}),e.jsx(me,{label:"Direccin",placeholder:"Ej: Av. Principal #123",error:(D=G.direccion)==null?void 0:D.message,...q("direccion",{maxLength:{value:300,message:"La direccin no puede tener ms de 300 caracteres"}}),className:"col-span-2",onBlur:()=>F("direccion")}),e.jsx("h3",{className:"col-span-2 text-lg font-semibold text-gray-900 dark:text-gray-100 mt-4",children:"Datos del Usuario"}),e.jsx(me,{label:"Email *",type:"email",placeholder:"Ej: juan@example.com",error:(ie=G.email)==null?void 0:ie.message,...q("email",{required:"El email es obligatorio",maxLength:{value:100,message:"El email no puede tener ms de 100 caracteres"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email no es vlido"},validate:v=>v&&v.trim().length===0?"El email no puede estar vaco":!0}),onBlur:()=>F("email"),onChange:v=>{const T=v.target.value.toLowerCase().trim();ae("email",T,{shouldValidate:!0})}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol *"}),e.jsxs("select",{...q("rol_id",{required:"El rol es obligatorio",validate:v=>{if(!v)return"El rol es obligatorio";const T=t.find(A=>A.rol_id===parseInt(v));return T&&(T.nombre_rol==="ESTUDIANTE"||T.nombre_rol==="estudiante")?"No se puede seleccionar el rol ESTUDIANTE. Los estudiantes se registran desde el portal de estudiantes.":!0}}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onBlur:()=>F("rol_id"),children:[e.jsx("option",{value:"",children:"Seleccionar rol..."}),t.filter(v=>v.nombre_rol!=="ESTUDIANTE"&&v.nombre_rol!=="estudiante").map(v=>e.jsxs("option",{value:v.rol_id,children:[v.nombre_rol," - ",v.descripcion||""]},v.rol_id))]}),G.rol_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:G.rol_id.message})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsx(me,{label:"Contrasea *",type:"password",placeholder:"Mnimo 6 caracteres",error:(xe=G.password)==null?void 0:xe.message,...q("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"},validate:v=>!v||v.length<6?"La contrasea debe tener al menos 6 caracteres":!0}),onBlur:()=>F("password")}),e.jsx(me,{label:"Confirmar Contrasea *",type:"password",placeholder:"Repite la contrasea",error:(Ee=G.password_confirmation)==null?void 0:Ee.message,...q("password_confirmation",{required:"La confirmacin de contrasea es obligatoria",validate:v=>v?v!==V("password")?"Las contraseas no coinciden":!0:"La confirmacin de contrasea es obligatoria"}),onBlur:()=>F("password_confirmation")})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(me,{label:"Nueva Contrasea (opcional)",type:"password",placeholder:"Dejar vaco para mantener la actual",error:(he=G.password)==null?void 0:he.message,...q("password",{minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"},validate:v=>v&&v.length>0&&v.length<6?"La contrasea debe tener al menos 6 caracteres":!0}),onBlur:()=>F("password")}),e.jsx(me,{label:"Confirmar Nueva Contrasea (opcional)",type:"password",placeholder:"Solo si cambias la contrasea",error:(Ne=G.password_confirmation)==null?void 0:Ne.message,...q("password_confirmation",{validate:v=>{const T=V("password");if(T&&T.trim()!==""){if(!v||v.trim()==="")return"Debes confirmar la nueva contrasea";if(v!==T)return"Las contraseas no coinciden"}return!0}}),onBlur:()=>F("password_confirmation")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{p(!1),f(null),$()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[b?"Actualizar":"Crear"," Usuario"]})]})]})}),e.jsx(Pe,{isOpen:_,onClose:()=>E(!1),title:"Detalles del Usuario",size:"lg",children:P&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[((ue=P.persona)==null?void 0:ue.nombre)||""," ",((J=P.persona)==null?void 0:J.apellido)||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CI"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((L=P.persona)==null?void 0:L.ci)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:P.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400 capitalize",children:((j=P.rol)==null?void 0:j.nombre_rol)||"Sin rol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Celular"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((B=P.persona)==null?void 0:B.celular)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((h=P.persona)==null?void 0:h.direccion)||"-"})]})]})})})]})},E1=()=>{var H;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState({total:0,conConvenios:0}),{register:f,handleSubmit:P,reset:R,formState:{errors:q},trigger:I}=We({mode:"onChange",defaultValues:{nombre_tipo:"",descripcion:""}});u.useEffect(()=>{$()},[i,g,n]);const $=async()=>{var K,te,W;try{t(!0);const O=await $n.getTiposConvenio({page:i,per_page:g,search:n});if(O.success&&O.data)r(O.data.data||[]),d(O.data.last_page||1),b({total:O.data.total||0,conConvenios:((K=O.data.data)==null?void 0:K.filter(z=>z.convenios_count>0).length)||0});else{const z=O.message||"Error al cargar tipos de convenio";m.error(z),r([]),d(1)}}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(z),r([]),d(1)}finally{t(!1)}},G=async K=>{var te,W,O,z;if(!K.nombre_tipo||K.nombre_tipo.trim()===""){m.error("El nombre del tipo de convenio es obligatorio");return}try{t(!0);const Y={nombre_tipo:K.nombre_tipo.trim(),descripcion:K.descripcion?K.descripcion.trim():null};Y.descripcion||delete Y.descripcion;let Z;C?Z=await $n.updateTipoConvenio(C.tipo_convenio_id,Y):Z=await $n.createTipoConvenio(Y),Z.success?(m.success(Z.message||(C?"Tipo de convenio actualizado exitosamente":"Tipo de convenio creado exitosamente")),w(!1),R(),N(null),await $()):(m.error(Z.message||"Error al guardar el tipo de convenio"),Z.errors&&(Array.isArray(Z.errors)?Z.errors:Object.values(Z.errors).flat()).forEach(ee=>{typeof ee=="string"&&ee.trim()?m.error(ee,{duration:4e3}):Array.isArray(ee)&&ee.length>0&&m.error(ee[0],{duration:4e3})}))}catch(Y){const Z=((W=(te=Y.response)==null?void 0:te.data)==null?void 0:W.message)||Y.message||"Error al guardar el tipo de convenio";if(m.error(Z),(z=(O=Y.response)==null?void 0:O.data)!=null&&z.errors){const U=Y.response.data.errors;(Array.isArray(U)?U:Object.values(U).flat()).forEach(oe=>{typeof oe=="string"&&oe.trim()?m.error(oe,{duration:4e3}):Array.isArray(oe)&&oe.length>0&&m.error(oe[0],{duration:4e3})})}}finally{t(!1)}},V=K=>{N(K),R({nombre_tipo:K.nombre_tipo,descripcion:K.descripcion||""}),w(!0)},F=async K=>{var te,W;try{const O=await $n.getTipoConvenioById(K.tipo_convenio_id);O.success?(_(O.data),S(!0)):m.error(O.message||"Error al cargar detalles del tipo de convenio")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al cargar detalles del tipo de convenio";m.error(z)}},ae=async K=>{var te,W;if(window.confirm(`Est seguro de eliminar el tipo de convenio "${K.nombre_tipo}"?`))try{t(!0);const O=await $n.removeTipoConvenio(K.tipo_convenio_id);O.success?(m.success(O.message||"Tipo de convenio eliminado exitosamente"),await $()):m.error(O.message||"Error al eliminar el tipo de convenio")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al eliminar el tipo de convenio";m.error(z)}finally{t(!1)}},ne=()=>{N(null),R({nombre_tipo:"",descripcion:""}),w(!0)},ce=[{key:"nombre_tipo",label:"Nombre",render:K=>K.nombre_tipo||"-"},{key:"descripcion",label:"Descripcin",render:K=>K.descripcion||"-"},{key:"convenios_count",label:"Convenios",render:K=>K.convenios_count||0},{key:"actions",label:"Acciones",render:K=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>F(K),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(K),className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(K),className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar",disabled:K.convenios_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Convenio"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de tipos de convenio institucional"})]}),e.jsx(X,{onClick:ne,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Tipo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total de Tipos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.total})]}),e.jsx(us,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Convenios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.conConvenios})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre o descripcin...",value:n,onChange:K=>{o(K.target.value),l(1)},icon:Je})})})}),e.jsx(ge,{children:e.jsx(es,{columns:ce,data:s,loading:a,currentPage:i,totalPages:c,onPageChange:l,perPage:g,onPerPageChange:x})}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),R()},title:C?"Editar Tipo de Convenio":"Nuevo Tipo de Convenio",children:e.jsxs("form",{onSubmit:P(G),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Tipo *"}),e.jsx(me,{...f("nombre_tipo",{required:"El nombre es obligatorio",maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"},validate:K=>K&&K.trim().length===0?"El nombre no puede estar vaco":!0}),placeholder:"Ej: Educativo, Interinstitucional, Internacional",error:(H=q.nombre_tipo)==null?void 0:H.message,onBlur:()=>I("nombre_tipo")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("textarea",{...f("descripcion"),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"Descripcin del tipo de convenio..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),R()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:C?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>{S(!1),_(null)},title:"Detalles del Tipo de Convenio",children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p.nombre_tipo})]}),p.descripcion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Descripcin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.descripcion})]}),p.convenios&&p.convenios.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Convenios Asociados (",p.convenios.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:p.convenios.map(K=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:K.numero_convenio}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.objeto_convenio})]},K.convenio_id))})]})]})})]})},k1=()=>{var Ne,ue,J,L,j,B;const[s,r]=u.useState([]),[a,t]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState(!0),[c,d]=u.useState(""),[g,x]=u.useState(""),[y,w]=u.useState(1),[k,S]=u.useState(1),[C,N]=u.useState(10),[p,_]=u.useState(!1),[E,b]=u.useState(!1),[f,P]=u.useState(null),[R,q]=u.useState(null),[I,$]=u.useState([]),[G,V]=u.useState(""),[F,ae]=u.useState({total:0,activos:0}),{register:ne,handleSubmit:ce,reset:H,formState:{errors:K},watch:te,setValue:W,trigger:O}=We({mode:"onChange",defaultValues:{numero_convenio:"",objeto_convenio:"",fecha_ini:"",fecha_fin:"",fecha_firma:"",moneda:"",observaciones:"",tipo_convenio_id:""}});u.useEffect(()=>{z(),Y()},[y,C,c,g]);const z=async()=>{var h,v;try{const T=await it.getDatosFormulario();T.success&&T.data?(t(T.data.tipos_convenio||[]),o(T.data.instituciones||[]),!f&&T.data.siguiente_numero_convenio&&V(T.data.siguiente_numero_convenio)):m.error(T.message||"Error al cargar datos del formulario")}catch(T){const A=((v=(h=T.response)==null?void 0:h.data)==null?void 0:v.message)||T.message||"Error al cargar datos del formulario";m.error(A)}},Y=async()=>{var h,v,T;try{l(!0);const A=await it.getConvenios({page:y,per_page:C,search:c,tipo_convenio_id:g||void 0});if(A.success&&A.data){const Q=A.data.data||[];Q.length>0&&(console.log(" fetchConvenios - Primer convenio recibido:",Q[0]),console.log(" fetchConvenios - convenio_id:",Q[0].convenio_id,"id:",Q[0].id)),r(Q),S(A.data.last_page||1),ae({total:A.data.total||0,activos:((h=A.data.data)==null?void 0:h.filter(re=>new Date(re.fecha_fin)>=new Date).length)||0})}else{const Q=A.message||"Error al cargar convenios";m.error(Q),r([]),S(1)}}catch(A){const Q=((T=(v=A.response)==null?void 0:v.data)==null?void 0:T.message)||A.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(Q),r([]),S(1)}finally{l(!1)}},Z=()=>{$([...I,{id:"",porcentaje_participacion:"",monto_asignado:""}])},U=h=>{$(I.filter((v,T)=>T!==h))},ee=(h,v,T)=>{const A=[...I];A[h][v]=T,$(A)},oe=async h=>{var A,Q,re,de;if(!h.objeto_convenio||h.objeto_convenio.trim()===""){m.error("El objeto del convenio es obligatorio");return}if(h.objeto_convenio.length>500){m.error("El objeto del convenio no puede tener ms de 500 caracteres");return}if(!h.fecha_ini){m.error("La fecha de inicio es obligatoria");return}if(!h.fecha_fin){m.error("La fecha de fin es obligatoria");return}const v=new Date(h.fecha_ini);if(new Date(h.fecha_fin)<=v){m.error("La fecha de fin debe ser posterior a la fecha de inicio");return}if(h.fecha_firma){const ve=new Date(h.fecha_firma),je=new Date;if(je.setHours(23,59,59,999),ve>je){m.error("La fecha de firma no puede ser posterior a hoy");return}}if(!h.tipo_convenio_id){m.error("El tipo de convenio es obligatorio");return}if(I.length===0){m.error("Debe agregar al menos una institucin");return}for(let ve=0;ve<I.length;ve++){const je=I[ve];if(!je.id||je.id===""){m.error(`La institucin ${ve+1} debe estar seleccionada`);return}if(je.porcentaje_participacion&&je.porcentaje_participacion!==""){const le=parseFloat(je.porcentaje_participacion);if(isNaN(le)||le<0||le>100){m.error(`El porcentaje de participacin de la institucin ${ve+1} debe ser un nmero entre 0 y 100`);return}}if(je.monto_asignado&&je.monto_asignado!==""){const le=parseFloat(je.monto_asignado);if(isNaN(le)||le<0){m.error(`El monto asignado de la institucin ${ve+1} debe ser un nmero mayor o igual a 0`);return}}}if(h.moneda&&h.moneda.length>10){m.error("La moneda no puede tener ms de 10 caracteres");return}if(h.observaciones&&h.observaciones.length>1e3){m.error("Las observaciones no pueden tener ms de 1000 caracteres");return}try{l(!0);const ve={objeto_convenio:h.objeto_convenio.trim(),fecha_ini:h.fecha_ini,fecha_fin:h.fecha_fin,fecha_firma:h.fecha_firma||null,moneda:h.moneda?h.moneda.trim().toUpperCase():null,observaciones:h.observaciones?h.observaciones.trim():null,tipo_convenio_id:parseInt(h.tipo_convenio_id),instituciones:I.map(le=>({id:parseInt(le.id),porcentaje_participacion:le.porcentaje_participacion&&le.porcentaje_participacion!==""?parseFloat(le.porcentaje_participacion):null,monto_asignado:le.monto_asignado&&le.monto_asignado!==""?parseFloat(le.monto_asignado):null}))};ve.fecha_firma||delete ve.fecha_firma,ve.moneda||delete ve.moneda,ve.observaciones||delete ve.observaciones,f&&(ve.numero_convenio=h.numero_convenio||f.numero_convenio);let je;if(f){const le=f.convenio_id||f.id;if(!le){console.error(" onSubmit - No se encontr ID en editingConvenio:",f),m.error("No se pudo identificar el ID del convenio para actualizar"),l(!1);return}console.log(" onSubmit - Actualizando convenio con ID:",le),je=await it.updateConvenio(le,ve)}else je=await it.createConvenio(ve);je.success?(m.success(je.message||(f?"Convenio actualizado exitosamente":"Convenio creado exitosamente")),_(!1),H(),P(null),$([]),V(""),await z(),await Y()):(m.error(je.message||"Error al guardar el convenio"),je.errors&&(Array.isArray(je.errors)?je.errors:Object.values(je.errors).flat()).forEach(se=>{typeof se=="string"&&se.trim()?m.error(se,{duration:4e3}):Array.isArray(se)&&se.length>0&&m.error(se[0],{duration:4e3})}))}catch(ve){const je=((Q=(A=ve.response)==null?void 0:A.data)==null?void 0:Q.message)||ve.message||"Error al guardar el convenio";if(m.error(je),(de=(re=ve.response)==null?void 0:re.data)!=null&&de.errors){const le=ve.response.data.errors;(Array.isArray(le)?le:Object.values(le).flat()).forEach(pe=>{typeof pe=="string"&&pe.trim()?m.error(pe,{duration:4e3}):Array.isArray(pe)&&pe.length>0&&m.error(pe[0],{duration:4e3})})}}finally{l(!1)}},D=async h=>{var v,T;console.log(" handleEdit - Convenio recibido:",h),console.log(" handleEdit - convenio_id:",h.convenio_id,"id:",h.id);try{const A=h.convenio_id||h.id;if(!A){console.error(" handleEdit - No se encontr ID. Objeto completo:",h),m.error("No se pudo identificar el ID del convenio");return}console.log(" handleEdit - Llamando API con ID:",A);const Q=await it.getConvenioById(A);if(console.log(" handleEdit - Respuesta recibida:",Q),Q.success){const re=Q.data;console.log(" handleEdit - ConvenioData recibido:",re),console.log(" handleEdit - convenio_id:",re.convenio_id),P(re),H({convenio_id:re.convenio_id,numero_convenio:re.numero_convenio,objeto_convenio:re.objeto_convenio,fecha_ini:re.fecha_ini?re.fecha_ini.split("T")[0]:"",fecha_fin:re.fecha_fin?re.fecha_fin.split("T")[0]:"",fecha_firma:re.fecha_firma?re.fecha_firma.split("T")[0]:"",moneda:re.moneda||"",observaciones:re.observaciones||"",tipo_convenio_id:re.tipo_convenio_id}),re.instituciones&&re.instituciones.length>0?$(re.instituciones.map(de=>{var ve,je,le,se;return{id:de.id.toString(),porcentaje_participacion:((je=(ve=de.pivot)==null?void 0:ve.porcentaje_participacion)==null?void 0:je.toString())||"",monto_asignado:((se=(le=de.pivot)==null?void 0:le.monto_asignado)==null?void 0:se.toString())||""}})):$([]),V(""),console.log(" handleEdit - Abriendo modal..."),_(!0),console.log(" handleEdit - Modal abierto, showModal:",!0)}else console.error(" handleEdit - Error en respuesta:",Q.message),m.error(Q.message||"Error al cargar datos del convenio")}catch(A){console.error(" handleEdit - Excepcin:",A);const Q=((T=(v=A.response)==null?void 0:v.data)==null?void 0:T.message)||A.message||"Error al cargar datos del convenio";m.error(Q)}},ie=async h=>{var v,T;try{const A=h.convenio_id||h.id;if(!A){console.error(" handleView - No se encontr ID. Objeto completo:",h),m.error("No se pudo identificar el ID del convenio");return}console.log(" handleView - ID extrado:",A);const Q=await it.getConvenioById(A);Q.success?(q(Q.data),b(!0)):m.error(Q.message||"Error al cargar detalles del convenio")}catch(A){const Q=((T=(v=A.response)==null?void 0:v.data)==null?void 0:T.message)||A.message||"Error al cargar detalles del convenio";m.error(Q)}},xe=async h=>{var T,A;const v=h.convenio_id||h.id;if(!v){console.error(" handleDelete - No se encontr ID. Objeto completo:",h),m.error("No se pudo identificar el ID del convenio");return}if(console.log(" handleDelete - ID extrado:",v),!!window.confirm(`Est seguro de eliminar el convenio "${h.numero_convenio||"este convenio"}"?`))try{l(!0);const Q=await it.removeConvenio(v);Q.success?(m.success(Q.message||"Convenio eliminado exitosamente"),await Y()):m.error(Q.message||"Error al eliminar el convenio")}catch(Q){const re=((A=(T=Q.response)==null?void 0:T.data)==null?void 0:A.message)||Q.message||"Error al eliminar el convenio";m.error(re)}finally{l(!1)}},Ee=async()=>{P(null),H({convenio_id:"",numero_convenio:"",objeto_convenio:"",fecha_ini:"",fecha_fin:"",fecha_firma:"",moneda:"",observaciones:"",tipo_convenio_id:""}),$([]),await z(),_(!0)},he=[{key:"convenio_id",label:"id",render:h=>h.convenio_id||"-"},{key:"numero_convenio",label:"Nmero",render:h=>h.numero_convenio||"-"},{key:"objeto_convenio",label:"Objeto",render:h=>{const v=h.objeto_convenio||"";return v.length>50?v.substring(0,50)+"...":v||"-"}},{key:"tipo_convenio",label:"Tipo",render:h=>{var v,T;return((v=h.tipo_convenio)==null?void 0:v.nombre_tipo)||((T=h.tipoConvenio)==null?void 0:T.nombre_tipo)||"N/A"}},{key:"fecha_ini",label:"Fecha Inicio",render:h=>{const v=h.fecha_ini;return v?new Date(v).toLocaleDateString("es-ES"):"N/A"}},{key:"fecha_fin",label:"Fecha Fin",render:h=>{const v=h.fecha_fin;return v?new Date(v).toLocaleDateString("es-ES"):"N/A"}},{key:"estado",label:"Estado",render:h=>new Date(h.fecha_fin)>=new Date?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-error-100 text-error-800",children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Vencido"]})},{key:"actions",label:"Acciones",render:h=>(console.log(" render actions - Row recibido:",h),console.log(" render actions - convenio_id:",h==null?void 0:h.convenio_id,"id:",h==null?void 0:h.id),!h||!h.convenio_id&&!h.id?(console.error(" render actions - Row invlido:",h),e.jsx("span",{className:"text-error-600",children:"Error: datos invlidos"})):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),console.log(" onClick handleView - Row:",h),ie(h)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),console.log(" onClick handleEdit - Row:",h),console.log(" onClick handleEdit - convenio_id:",h.convenio_id),D(h)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),console.log(" onClick handleDelete - Row:",h),xe(h)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]}))}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Convenios Institucionales"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de convenios y asociacin con instituciones"})]}),e.jsx(X,{onClick:Ee,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Convenio"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Convenios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:F.total})]}),e.jsx(us,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Convenios Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:F.activos})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nmero o objeto...",value:c,onChange:h=>{d(h.target.value),w(1)},icon:Je})}),e.jsx("div",{className:"w-64",children:e.jsxs("select",{value:g,onChange:h=>{x(h.target.value),w(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),a.map(h=>e.jsx("option",{value:h.id,children:h.nombre_tipo},h.id))]})})]})}),e.jsx(ge,{children:e.jsx(es,{columns:he,data:s,loading:i,currentPage:y,totalPages:k,onPageChange:w,perPage:C,onPerPageChange:N})}),e.jsx(Pe,{isOpen:p,onClose:()=>{_(!1),P(null),$([]),H()},title:f?"Editar Convenio":"Nuevo Convenio",size:"xl",children:e.jsxs("form",{onSubmit:ce(oe),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nmero de Convenio ",!f&&"*"]}),f?e.jsx(me,{...ne("numero_convenio",{required:"El nmero es requerido"}),placeholder:"Ej: CONV-2024-001",error:(Ne=K.numero_convenio)==null?void 0:Ne.message,readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}):e.jsx(me,{value:G,placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),!f&&G&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este nmero se asignar automticamente al crear el convenio"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Convenio *"}),e.jsxs("select",{...ne("tipo_convenio_id",{required:"El tipo es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),a.map(h=>e.jsx("option",{value:h.id,children:h.nombre_tipo},h.id))]}),K.tipo_convenio_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.tipo_convenio_id.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Objeto del Convenio *"}),e.jsx("textarea",{...ne("objeto_convenio",{required:"El objeto del convenio es obligatorio",maxLength:{value:500,message:"El objeto del convenio no puede tener ms de 500 caracteres"},validate:h=>h&&h.trim().length===0?"El objeto del convenio no puede estar vaco":!0}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white",placeholder:"Descripcin del objeto del convenio...",onBlur:()=>O("objeto_convenio")}),K.objeto_convenio&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.objeto_convenio.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio *"}),e.jsx(me,{type:"date",...ne("fecha_ini",{required:"La fecha de inicio es obligatoria",validate:h=>{if(!h)return"La fecha de inicio es obligatoria";const v=new Date(h),T=te("fecha_fin");return T&&new Date(T)<=v?"La fecha de inicio debe ser anterior a la fecha de fin":!0}}),error:(ue=K.fecha_ini)==null?void 0:ue.message,onBlur:()=>O("fecha_ini"),onChange:h=>{W("fecha_ini",h.target.value,{shouldValidate:!0}),O("fecha_fin")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin *"}),e.jsx(me,{type:"date",...ne("fecha_fin",{required:"La fecha de fin es obligatoria",validate:h=>{if(!h)return"La fecha de fin es obligatoria";const v=new Date(h),T=te("fecha_ini");return T&&v<=new Date(T)?"La fecha de fin debe ser posterior a la fecha de inicio":!0}}),error:(J=K.fecha_fin)==null?void 0:J.message,onBlur:()=>O("fecha_fin"),onChange:h=>{W("fecha_fin",h.target.value,{shouldValidate:!0}),O("fecha_ini")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Firma"}),e.jsx(me,{type:"date",...ne("fecha_firma",{validate:h=>{if(h){const v=new Date(h),T=new Date;if(T.setHours(23,59,59,999),v>T)return"La fecha de firma no puede ser posterior a hoy"}return!0}}),error:(L=K.fecha_firma)==null?void 0:L.message,onBlur:()=>O("fecha_firma"),max:new Date().toISOString().split("T")[0]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Moneda"}),e.jsx(me,{...ne("moneda",{maxLength:{value:10,message:"La moneda no puede tener ms de 10 caracteres"}}),placeholder:"Ej: BOB, USD",error:(j=K.moneda)==null?void 0:j.message,onBlur:()=>O("moneda"),onChange:h=>{const v=h.target.value.toUpperCase().trim();W("moneda",v,{shouldValidate:!0})}})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones"}),e.jsx("textarea",{...ne("observaciones",{maxLength:{value:1e3,message:"Las observaciones no pueden tener ms de 1000 caracteres"}}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white",placeholder:"Observaciones adicionales...",onBlur:()=>O("observaciones")}),K.observaciones&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.observaciones.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instituciones Participantes *"}),e.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:Z,icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Agregar Institucin"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[I.map((h,v)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Institucin ",v+1]}),e.jsx("button",{type:"button",onClick:()=>U(v),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(nr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("select",{value:h.id,onChange:T=>ee(v,"id",T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),n.filter(T=>!I.some((A,Q)=>Q!==v&&A.id===T.id.toString())).map(T=>e.jsx("option",{value:T.id,children:T.nombre},T.id))]})}),e.jsx("div",{children:e.jsx(me,{type:"number",placeholder:"% Participacin (0-100)",value:h.porcentaje_participacion,onChange:T=>{const A=T.target.value;(A===""||parseFloat(A)>=0&&parseFloat(A)<=100)&&ee(v,"porcentaje_participacion",A)},min:"0",max:"100",step:"0.01"})}),e.jsx("div",{children:e.jsx(me,{type:"number",placeholder:"Monto Asignado",value:h.monto_asignado,onChange:T=>{const A=T.target.value;(A===""||parseFloat(A)>=0)&&ee(v,"monto_asignado",A)},min:"0",step:"0.01"})})]})]},v)),I.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay instituciones agregadas. Haga clic en "Agregar Institucin" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{_(!1),P(null),$([]),H()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:f?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:E,onClose:()=>{b(!1),q(null)},title:"Detalles del Convenio",size:"xl",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nmero de Convenio"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:R.numero_convenio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Convenio"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((B=R.tipo_convenio)==null?void 0:B.nombre_tipo)||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Objeto del Convenio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.objeto_convenio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.fecha_ini?new Date(R.fecha_ini).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.fecha_fin?new Date(R.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Firma"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.fecha_firma?new Date(R.fecha_firma).toLocaleDateString("es-ES"):"N/A"})]})]}),R.moneda&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Moneda"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.moneda})]}),R.observaciones&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.observaciones})]}),R.instituciones&&R.instituciones.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Instituciones Participantes (",R.instituciones.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.instituciones.map(h=>{var v,T;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:h.nombre}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[((v=h.pivot)==null?void 0:v.porcentaje_participacion)&&e.jsxs("span",{children:["Participacin: ",h.pivot.porcentaje_participacion,"%"]}),((T=h.pivot)==null?void 0:T.monto_asignado)&&e.jsxs("span",{children:["Monto: ",h.pivot.monto_asignado," ",R.moneda||""]})]})]},h.id)})})]})]})})]})},Vn={async getRamasAcademicas(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/ramas-academicas",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching ramas acadmicas:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getRamaAcademicaById(s){var r,a;try{const t=await ye(`/admin/ramas-academicas/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching rama acadmica:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createRamaAcademica(s){var r,a,t,n;try{const o=await Me("/admin/ramas-academicas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating rama acadmica:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateRamaAcademica(s,r){var a,t,n,o;try{const i=await Ze(`/admin/ramas-academicas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating rama acadmica:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeRamaAcademica(s){var r,a;try{const t=await ts(`/admin/ramas-academicas/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing rama acadmica:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},Bn={async getVersiones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",ao:s.ao||""};t.search||delete t.search,t.ao||delete t.ao;const n=await ye("/admin/versiones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching versiones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getVersionById(s){var r,a;try{const t=await ye(`/admin/versiones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching versin:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createVersion(s){var r,a,t,n;try{const o=await Me("/admin/versiones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating versin:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateVersion(s,r){var a,t,n,o;try{const i=await Ze(`/admin/versiones/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating versin:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeVersion(s){var r,a;try{const t=await ts(`/admin/versiones/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing versin:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},qn={async getTiposPrograma(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/tipos-programa",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getTipoProgramaById(s){var r,a;try{const t=await ye(`/admin/tipos-programa/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createTipoPrograma(s){var r,a,t,n;try{const o=await Me("/admin/tipos-programa",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo de programa:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateTipoPrograma(s,r){var a,t,n,o;try{const i=await Ze(`/admin/tipos-programa/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo de programa:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeTipoPrograma(s){var r,a;try{const t=await ts(`/admin/tipos-programa/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing tipo de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},Hn={async getModulos(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/modulos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching mdulos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getModuloById(s){var r,a;try{const t=await ye(`/admin/modulos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching mdulo:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createModulo(s){var r,a,t,n;try{const o=await Me("/admin/modulos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating mdulo:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateModulo(s,r){var a,t,n,o;try{const i=await Ze(`/admin/modulos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating mdulo:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeModulo(s){var r,a;try{const t=await ts(`/admin/modulos/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing mdulo:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},Ca={async getProgramas(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",rama_academica_id:s.rama_academica_id||"",tipo_programa_id:s.tipo_programa_id||"",version_id:s.version_id||"",institucion_id:s.institucion_id||""};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await ye("/admin/programas",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching programas:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getProgramaById(s){var r,a;try{const t=await ye(`/admin/programas/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await ye("/admin/programas/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async createPrograma(s){var r,a,t,n;try{const o=await Me("/admin/programas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating programa:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updatePrograma(s,r){var a,t,n,o;try{const i=await Ze(`/admin/programas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating programa:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removePrograma(s){var r,a;try{const t=await ts(`/admin/programas/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},_1=()=>{var ce;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState({total:0,conProgramas:0}),{register:f,handleSubmit:P,reset:R,formState:{errors:q}}=We();u.useEffect(()=>{I()},[i,g,n]);const I=async()=>{var H;try{t(!0);const K=await Vn.getRamasAcademicas({page:i,per_page:g,search:n});K.success&&K.data?(r(K.data.data||[]),d(K.data.last_page||1),b({total:K.data.total||0,conProgramas:((H=K.data.data)==null?void 0:H.filter(te=>te.programas_count>0).length)||0})):m.error(K.message||"Error al cargar ramas acadmicas")}catch{m.error("Error al cargar ramas acadmicas")}finally{t(!1)}},$=async H=>{var K,te,W,O;if(!H.nombre||H.nombre.trim()===""){m.error("El nombre de la rama acadmica es obligatorio");return}try{t(!0);let z;if(C){const Y=C.id||C.rama_academica_id;if(!Y){m.error("No se pudo identificar el ID de la rama acadmica para actualizar"),t(!1);return}z=await Vn.updateRamaAcademica(Y,{nombre:H.nombre.trim()})}else z=await Vn.createRamaAcademica({nombre:H.nombre.trim()});z.success?(m.success(z.message||(C?"Rama acadmica actualizada exitosamente":"Rama acadmica creada exitosamente")),w(!1),R(),N(null),await I()):(m.error(z.message||"Error al guardar rama acadmica"),z.errors&&(Array.isArray(z.errors)?z.errors:Object.values(z.errors).flat()).forEach(Z=>{typeof Z=="string"&&Z.trim()?m.error(Z,{duration:4e3}):Array.isArray(Z)&&Z.length>0&&m.error(Z[0],{duration:4e3})}))}catch(z){const Y=((te=(K=z.response)==null?void 0:K.data)==null?void 0:te.message)||z.message||"Error al guardar rama acadmica";if(m.error(Y),(O=(W=z.response)==null?void 0:W.data)!=null&&O.errors){const Z=z.response.data.errors;(Array.isArray(Z)?Z:Object.values(Z).flat()).forEach(ee=>{typeof ee=="string"&&ee.trim()?m.error(ee,{duration:4e3}):Array.isArray(ee)&&ee.length>0&&m.error(ee[0],{duration:4e3})})}}finally{t(!1)}},G=H=>{if(!(H.id||H.rama_academica_id)){m.error("No se pudo identificar el ID de la rama acadmica");return}N(H),R({nombre:H.nombre}),w(!0)},V=async H=>{var te,W;const K=H.id||H.rama_academica_id;if(!K){m.error("No se pudo identificar el ID de la rama acadmica");return}try{const O=await Vn.getRamaAcademicaById(K);O.success?(_(O.data),S(!0)):m.error(O.message||"Error al cargar detalles de la rama acadmica")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al cargar detalles de la rama acadmica";m.error(z)}},F=async H=>{var te,W;const K=H.id||H.rama_academica_id;if(!K){m.error("No se pudo identificar el ID de la rama acadmica");return}if(window.confirm(`Est seguro de eliminar la rama acadmica "${H.nombre}"?`))try{const O=await Vn.removeRamaAcademica(K);O.success?(m.success(O.message||"Rama acadmica eliminada exitosamente"),I()):m.error(O.message||"Error al eliminar rama acadmica")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al eliminar rama acadmica";m.error(z)}},ae=()=>{N(null),R({nombre:""}),w(!0)},ne=[{key:"nombre",label:"Nombre",render:H=>H.nombre||"-"},{key:"programas_count",label:"Programas",render:H=>H.programas_count||0},{key:"actions",label:"Acciones",render:H=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),V(H)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),G(H)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),F(H)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:H.programas_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Ramas Acadmicas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de ramas acadmicas del sistema"})]}),e.jsx(X,{onClick:ae,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nueva Rama"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Ramas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.total})]}),e.jsx(Ye,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.conProgramas})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:H=>{o(H.target.value),l(1)},icon:Je})})})}),e.jsx(ge,{children:e.jsx(es,{columns:ne,data:s,loading:a,currentPage:i,totalPages:c,onPageChange:l,perPage:g,onPerPageChange:x})}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),R()},title:C?"Editar Rama Acadmica":"Nueva Rama Acadmica",children:e.jsxs("form",{onSubmit:P($),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Rama *"}),e.jsx(me,{...f("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Ciencias de la Educacin, Ingeniera, etc.",error:(ce=q.nombre)==null?void 0:ce.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),R()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:C?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>{S(!1),_(null)},title:"Detalles de la Rama Acadmica",children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p.nombre})]}),p.programas&&p.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",p.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:p.programas.map(H=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:H.nombre}),H.tipo_programa&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:H.tipo_programa.nombre})]},H.id))})]})]})})]})},S1=()=>{var K,te;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState(1),[g,x]=u.useState(1),[y,w]=u.useState(10),[k,S]=u.useState(!1),[C,N]=u.useState(!1),[p,_]=u.useState(null),[E,b]=u.useState(null),[f,P]=u.useState({total:0,conProgramas:0}),{register:R,handleSubmit:q,reset:I,formState:{errors:$}}=We();u.useEffect(()=>{G()},[c,y,n,i]);const G=async()=>{var W;try{t(!0);const O=await Bn.getVersiones({page:c,per_page:y,search:n,ao:i});O.success&&O.data?(r(O.data.data||[]),x(O.data.last_page||1),P({total:O.data.total||0,conProgramas:((W=O.data.data)==null?void 0:W.filter(z=>z.programas_count>0).length)||0})):m.error(O.message||"Error al cargar versiones")}catch{m.error("Error al cargar versiones")}finally{t(!1)}},V=async W=>{var z,Y,Z,U;if(!W.nombre||W.nombre.trim()===""){m.error("El nombre de la versin es obligatorio");return}if(!W.ao){m.error("El ao es obligatorio");return}const O=parseInt(W.ao);if(isNaN(O)||O<2e3||O>new Date().getFullYear()+10){m.error("El ao debe ser un nmero vlido entre 2000 y "+(new Date().getFullYear()+10));return}try{t(!0);let ee;if(p){const oe=p.id||p.version_id;if(!oe){m.error("No se pudo identificar el ID de la versin para actualizar"),t(!1);return}ee=await Bn.updateVersion(oe,{nombre:W.nombre.trim(),ao:O})}else ee=await Bn.createVersion({nombre:W.nombre.trim(),ao:O});ee.success?(m.success(ee.message||(p?"Versin actualizada exitosamente":"Versin creada exitosamente")),S(!1),I(),_(null),await G()):(m.error(ee.message||"Error al guardar versin"),ee.errors&&(Array.isArray(ee.errors)?ee.errors:Object.values(ee.errors).flat()).forEach(D=>{typeof D=="string"&&D.trim()?m.error(D,{duration:4e3}):Array.isArray(D)&&D.length>0&&m.error(D[0],{duration:4e3})}))}catch(ee){const oe=((Y=(z=ee.response)==null?void 0:z.data)==null?void 0:Y.message)||ee.message||"Error al guardar versin";if(m.error(oe),(U=(Z=ee.response)==null?void 0:Z.data)!=null&&U.errors){const D=ee.response.data.errors;(Array.isArray(D)?D:Object.values(D).flat()).forEach(xe=>{typeof xe=="string"&&xe.trim()?m.error(xe,{duration:4e3}):Array.isArray(xe)&&xe.length>0&&m.error(xe[0],{duration:4e3})})}}finally{t(!1)}},F=W=>{if(!(W.id||W.version_id)){m.error("No se pudo identificar el ID de la versin");return}_(W),I({nombre:W.nombre,ao:W.ao}),S(!0)},ae=async W=>{var z,Y;const O=W.id||W.version_id;if(!O){m.error("No se pudo identificar el ID de la versin");return}try{const Z=await Bn.getVersionById(O);Z.success?(b(Z.data),N(!0)):m.error(Z.message||"Error al cargar detalles de la versin")}catch(Z){const U=((Y=(z=Z.response)==null?void 0:z.data)==null?void 0:Y.message)||Z.message||"Error al cargar detalles de la versin";m.error(U)}},ne=async W=>{var z,Y;const O=W.id||W.version_id;if(!O){m.error("No se pudo identificar el ID de la versin");return}if(window.confirm(`Est seguro de eliminar la versin "${W.nombre}"?`))try{const Z=await Bn.removeVersion(O);Z.success?(m.success(Z.message||"Versin eliminada exitosamente"),await G()):m.error(Z.message||"Error al eliminar versin")}catch(Z){const U=((Y=(z=Z.response)==null?void 0:z.data)==null?void 0:Y.message)||Z.message||"Error al eliminar versin";m.error(U)}},ce=()=>{_(null),I({nombre:"",ao:new Date().getFullYear()}),S(!0)},H=[{key:"nombre",label:"Nombre",render:W=>W.nombre||"-"},{key:"ao",label:"Ao",render:W=>W.ao||"N/A"},{key:"programas_count",label:"Programas",render:W=>W.programas_count||0},{key:"actions",label:"Acciones",render:W=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),ae(W)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),F(W)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),ne(W)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:W.programas_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Versiones de Plan de Estudio"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de versiones de planes de estudio"})]}),e.jsx(X,{onClick:ce,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nueva Versin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Versiones"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:f.total})]}),e.jsx(Bs,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:f.conProgramas})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:W=>{o(W.target.value),d(1)},icon:Je})}),e.jsx("div",{className:"w-48",children:e.jsx(me,{type:"number",placeholder:"Filtrar por ao...",value:i,onChange:W=>{l(W.target.value),d(1)},min:"2000",max:new Date().getFullYear()+10})})]})}),e.jsx(ge,{children:e.jsx(es,{columns:H,data:s,loading:a,currentPage:c,totalPages:g,onPageChange:d,perPage:y,onPerPageChange:w})}),e.jsx(Pe,{isOpen:k,onClose:()=>{S(!1),_(null),I()},title:p?"Editar Versin":"Nueva Versin",children:e.jsxs("form",{onSubmit:q(V),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Versin *"}),e.jsx(me,{...R("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Versin 2024, Plan 2020-2024",error:(K=$.nombre)==null?void 0:K.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ao *"}),e.jsx(me,{type:"number",...R("ao",{required:"El ao es requerido",min:{value:2e3,message:"El ao debe ser mayor a 2000"},max:{value:new Date().getFullYear()+10,message:"El ao no puede ser mayor a "+(new Date().getFullYear()+10)}}),placeholder:"Ej: 2024",error:(te=$.ao)==null?void 0:te.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{S(!1),_(null),I()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:p?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),b(null)},title:"Detalles de la Versin",children:E&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Ao"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E.ao})]})]}),E.programas&&E.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",E.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:E.programas.map(W=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:W.nombre})},W.id))})]})]})})]})},C1=()=>{var ce;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState({total:0,conProgramas:0}),{register:f,handleSubmit:P,reset:R,formState:{errors:q}}=We();u.useEffect(()=>{I()},[i,g,n]);const I=async()=>{var H;try{t(!0);const K=await qn.getTiposPrograma({page:i,per_page:g,search:n});K.success&&K.data?(r(K.data.data||[]),d(K.data.last_page||1),b({total:K.data.total||0,conProgramas:((H=K.data.data)==null?void 0:H.filter(te=>te.programas_count>0).length)||0})):m.error(K.message||"Error al cargar tipos de programa")}catch{m.error("Error al cargar tipos de programa")}finally{t(!1)}},$=async H=>{var K,te,W,O;if(!H.nombre||H.nombre.trim()===""){m.error("El nombre del tipo de programa es obligatorio");return}try{t(!0);let z;if(C){const Y=C.id||C.tipo_programa_id;if(!Y){m.error("No se pudo identificar el ID del tipo de programa para actualizar"),t(!1);return}z=await qn.updateTipoPrograma(Y,{nombre:H.nombre.trim()})}else z=await qn.createTipoPrograma({nombre:H.nombre.trim()});z.success?(m.success(z.message||(C?"Tipo de programa actualizado exitosamente":"Tipo de programa creado exitosamente")),w(!1),R(),N(null),await I()):(m.error(z.message||"Error al guardar tipo de programa"),z.errors&&(Array.isArray(z.errors)?z.errors:Object.values(z.errors).flat()).forEach(Z=>{typeof Z=="string"&&Z.trim()?m.error(Z,{duration:4e3}):Array.isArray(Z)&&Z.length>0&&m.error(Z[0],{duration:4e3})}))}catch(z){const Y=((te=(K=z.response)==null?void 0:K.data)==null?void 0:te.message)||z.message||"Error al guardar tipo de programa";if(m.error(Y),(O=(W=z.response)==null?void 0:W.data)!=null&&O.errors){const Z=z.response.data.errors;(Array.isArray(Z)?Z:Object.values(Z).flat()).forEach(ee=>{typeof ee=="string"&&ee.trim()?m.error(ee,{duration:4e3}):Array.isArray(ee)&&ee.length>0&&m.error(ee[0],{duration:4e3})})}}finally{t(!1)}},G=H=>{if(!(H.id||H.tipo_programa_id)){m.error("No se pudo identificar el ID del tipo de programa");return}N(H),R({nombre:H.nombre}),w(!0)},V=async H=>{var te,W;const K=H.id||H.tipo_programa_id;if(!K){m.error("No se pudo identificar el ID del tipo de programa");return}try{const O=await qn.getTipoProgramaById(K);O.success?(_(O.data),S(!0)):m.error(O.message||"Error al cargar detalles del tipo de programa")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al cargar detalles del tipo de programa";m.error(z)}},F=async H=>{var te,W;const K=H.id||H.tipo_programa_id;if(!K){m.error("No se pudo identificar el ID del tipo de programa");return}if(window.confirm(`Est seguro de eliminar el tipo de programa "${H.nombre}"?`))try{const O=await qn.removeTipoPrograma(K);O.success?(m.success(O.message||"Tipo de programa eliminado exitosamente"),await I()):m.error(O.message||"Error al eliminar tipo de programa")}catch(O){const z=((W=(te=O.response)==null?void 0:te.data)==null?void 0:W.message)||O.message||"Error al eliminar tipo de programa";m.error(z)}},ae=()=>{N(null),R({nombre:""}),w(!0)},ne=[{key:"nombre",label:"Nombre",render:H=>H.nombre||"-"},{key:"programas_count",label:"Programas",render:H=>H.programas_count||0},{key:"actions",label:"Acciones",render:H=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),V(H)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),G(H)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),F(H)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:H.programas_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Programa"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de tipos de programa (Diplomado, Maestra, etc.)"})]}),e.jsx(X,{onClick:ae,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Tipo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Tipos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.total})]}),e.jsx(Ts,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.conProgramas})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:H=>{o(H.target.value),l(1)},icon:Je})})})}),e.jsx(ge,{children:e.jsx(es,{columns:ne,data:s,loading:a,currentPage:i,totalPages:c,onPageChange:l,perPage:g,onPerPageChange:x})}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),R()},title:C?"Editar Tipo de Programa":"Nuevo Tipo de Programa",children:e.jsxs("form",{onSubmit:P($),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Tipo *"}),e.jsx(me,{...f("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Diplomado, Maestra, Doctorado, Especializacin",error:(ce=q.nombre)==null?void 0:ce.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),R()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:C?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>{S(!1),_(null)},title:"Detalles del Tipo de Programa",children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p.nombre})]}),p.programas&&p.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",p.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:p.programas.map(H=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:H.nombre}),H.institucion&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:H.institucion.nombre})]},H.id))})]})]})})]})},R1=()=>{var ce,H,K;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState({total:0,conProgramas:0}),{register:f,handleSubmit:P,reset:R,formState:{errors:q}}=We();u.useEffect(()=>{I()},[i,g,n]);const I=async()=>{var te;try{t(!0);const W=await Hn.getModulos({page:i,per_page:g,search:n});W.success&&W.data?(r(W.data.data||[]),d(W.data.last_page||1),b({total:W.data.total||0,conProgramas:((te=W.data.data)==null?void 0:te.filter(O=>O.programas_count>0).length)||0})):m.error(W.message||"Error al cargar mdulos")}catch{m.error("Error al cargar mdulos")}finally{t(!1)}},$=async te=>{var W,O,z,Y;if(!te.nombre||te.nombre.trim()===""){m.error("El nombre del mdulo es obligatorio");return}if(!te.credito||parseInt(te.credito)<1||parseInt(te.credito)>20){m.error("Los crditos deben ser un nmero entre 1 y 20");return}if(!te.horas_academicas||parseInt(te.horas_academicas)<1){m.error("Las horas acadmicas deben ser un nmero mayor a 0");return}try{t(!0);let Z;if(C){const U=C.modulo_id||C.id;if(!U){m.error("No se pudo identificar el ID del mdulo para actualizar"),t(!1);return}Z=await Hn.updateModulo(U,{nombre:te.nombre.trim(),credito:parseInt(te.credito),horas_academicas:parseInt(te.horas_academicas)})}else Z=await Hn.createModulo({nombre:te.nombre.trim(),credito:parseInt(te.credito),horas_academicas:parseInt(te.horas_academicas)});Z.success?(m.success(Z.message||(C?"Mdulo actualizado exitosamente":"Mdulo creado exitosamente")),w(!1),R(),N(null),await I()):(m.error(Z.message||"Error al guardar mdulo"),Z.errors&&(Array.isArray(Z.errors)?Z.errors:Object.values(Z.errors).flat()).forEach(ee=>{typeof ee=="string"&&ee.trim()?m.error(ee,{duration:4e3}):Array.isArray(ee)&&ee.length>0&&m.error(ee[0],{duration:4e3})}))}catch(Z){const U=((O=(W=Z.response)==null?void 0:W.data)==null?void 0:O.message)||Z.message||"Error al guardar mdulo";if(m.error(U),(Y=(z=Z.response)==null?void 0:z.data)!=null&&Y.errors){const ee=Z.response.data.errors;(Array.isArray(ee)?ee:Object.values(ee).flat()).forEach(D=>{typeof D=="string"&&D.trim()?m.error(D,{duration:4e3}):Array.isArray(D)&&D.length>0&&m.error(D[0],{duration:4e3})})}}finally{t(!1)}},G=te=>{if(!(te.modulo_id||te.id)){m.error("No se pudo identificar el ID del mdulo");return}N(te),R({nombre:te.nombre,credito:te.credito,horas_academicas:te.horas_academicas}),w(!0)},V=async te=>{var O,z;const W=te.modulo_id||te.id;if(!W){m.error("No se pudo identificar el ID del mdulo");return}try{const Y=await Hn.getModuloById(W);Y.success?(_(Y.data),S(!0)):m.error(Y.message||"Error al cargar detalles del mdulo")}catch(Y){const Z=((z=(O=Y.response)==null?void 0:O.data)==null?void 0:z.message)||Y.message||"Error al cargar detalles del mdulo";m.error(Z)}},F=async te=>{var O,z;const W=te.modulo_id||te.id;if(!W){m.error("No se pudo identificar el ID del mdulo");return}if(window.confirm(`Est seguro de eliminar el mdulo "${te.nombre}"?`))try{const Y=await Hn.removeModulo(W);Y.success?(m.success(Y.message||"Mdulo eliminado exitosamente"),await I()):m.error(Y.message||"Error al eliminar mdulo")}catch(Y){const Z=((z=(O=Y.response)==null?void 0:O.data)==null?void 0:z.message)||Y.message||"Error al eliminar mdulo";m.error(Z)}},ae=()=>{N(null),R({nombre:"",credito:"",horas_academicas:""}),w(!0)},ne=[{key:"nombre",label:"Nombre",render:te=>te.nombre||"-"},{key:"credito",label:"Crditos",render:te=>te.credito||0},{key:"horas_academicas",label:"Horas Acadmicas",render:te=>te.horas_academicas||0},{key:"programas_count",label:"Programas",render:te=>te.programas_count||0},{key:"actions",label:"Acciones",render:te=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),V(te)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),G(te)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),F(te)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:te.programas_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mdulos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de mdulos (materias) del sistema"})]}),e.jsx(X,{onClick:ae,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Mdulo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Mdulos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.total})]}),e.jsx(Sw,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:E.conProgramas})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:te=>{o(te.target.value),l(1)},icon:Je})})})}),e.jsx(ge,{children:e.jsx(es,{columns:ne,data:s,loading:a,currentPage:i,totalPages:c,onPageChange:l,perPage:g,onPerPageChange:x})}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),R()},title:C?"Editar Mdulo":"Nuevo Mdulo",children:e.jsxs("form",{onSubmit:P($),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Mdulo *"}),e.jsx(me,{...f("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Didctica General, Metodologa de la Investigacin",error:(ce=q.nombre)==null?void 0:ce.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Crditos *"}),e.jsx(me,{type:"number",...f("credito",{required:"Los crditos son requeridos",min:{value:1,message:"Mnimo 1 crdito"},max:{value:20,message:"Mximo 20 crditos"}}),placeholder:"Ej: 3",error:(H=q.credito)==null?void 0:H.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horas Acadmicas *"}),e.jsx(me,{type:"number",...f("horas_academicas",{required:"Las horas acadmicas son requeridas",min:{value:1,message:"Mnimo 1 hora"}}),placeholder:"Ej: 45",error:(K=q.horas_academicas)==null?void 0:K.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),R()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:C?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>{S(!1),_(null)},title:"Detalles del Mdulo",children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p.nombre})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Crditos"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.credito})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Horas Acadmicas"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.horas_academicas})]})]}),p.programas&&p.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",p.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:p.programas.map(te=>{var W;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:te.nombre}),((W=te.pivot)==null?void 0:W.edicion)!==void 0&&te.pivot.edicion!==null&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Edicin: ",te.pivot.edicion]})]},te.id)})})]})]})})]})},A1={async getPermisos(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||100,search:s.search||"",modulo:s.modulo||""},n=await ye("/admin/permisos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener permisos"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener permisos"}}},async getPermisosPorModulo(){var s,r;try{const a=await ye("/admin/permisos/agrupados");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos"}}}},P1=()=>{var ue,J;const{user:s,isAdmin:r}=Es(),{canCreate:a,canEdit:t,canDelete:n,canView:o,canDo:i}=sm(),[l,c]=u.useState([]),[d,g]=u.useState([]),[x,y]=u.useState({}),[w,k]=u.useState(!0),[S,C]=u.useState(""),[N,p]=u.useState(1),[_,E]=u.useState(1),[b,f]=u.useState(10),[P,R]=u.useState(!1),[q,I]=u.useState(!1),[$,G]=u.useState(!1),[V,F]=u.useState(null),[ae,ne]=u.useState(null),[ce,H]=u.useState([]),{register:K,handleSubmit:te,reset:W,formState:{errors:O}}=We();u.useEffect(()=>{z(),Y()},[N,b,S]);const z=async()=>{var L,j;try{k(!0);const B=await Kr.getRoles({page:N,per_page:b,search:S,sort_by:"nombre_rol",sort_order:"asc"});if(B.success&&B.data){const h=B.data;if(h.data&&Array.isArray(h.data)){const T=h.data.map(A=>{var Q;return{id:A.id||A.rol_id,nombre:A.nombre_rol||A.nombre,nombre_rol:A.nombre_rol||A.nombre,descripcion:A.descripcion||"",activo:A.activo!==void 0?A.activo:!0,users_count:A.usuarios_count||A.users_count||0,permisos_count:((Q=A.permisos)==null?void 0:Q.length)||A.permisos_count||0,permisos:A.permisos||[]}});c(T),E(h.last_page||1)}else if(Array.isArray(h)){const v=h.map(T=>{var A;return{id:T.id||T.rol_id,nombre:T.nombre_rol||T.nombre,nombre_rol:T.nombre_rol||T.nombre,descripcion:T.descripcion||"",activo:T.activo!==void 0?T.activo:!0,users_count:T.usuarios_count||T.users_count||0,permisos_count:((A=T.permisos)==null?void 0:A.length)||T.permisos_count||0,permisos:T.permisos||[]}});c(v),E(1)}else c([]),E(1)}else m.error(B.message||"Error al cargar roles"),c([]),E(1)}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error de conexin";m.error(h),c([]),E(1)}finally{k(!1)}},Y=async()=>{try{const L=await A1.getPermisosPorModulo();if(L.success&&L.data){let j={};Array.isArray(L.data)?j=L.data.reduce((T,A)=>{const Q=A.modulo||"otros";return T[Q]||(T[Q]=[]),T[Q].push({id:A.permiso_id||A.id,permiso_id:A.permiso_id||A.id,nombre_permiso:A.nombre_permiso,descripcion:A.descripcion,modulo:A.modulo,accion:A.accion,activo:A.activo}),T},{}):Object.keys(L.data).forEach(T=>{j[T]=(L.data[T]||[]).map(A=>({id:A.permiso_id||A.id,permiso_id:A.permiso_id||A.id,nombre_permiso:A.nombre_permiso,descripcion:A.descripcion,modulo:A.modulo,accion:A.accion,activo:A.activo}))});const B=["usuarios","roles","estudiantes","inscripciones","programas","grupos","pagos","documentos","convenios","configuracion","bitacora","notificaciones","reportes"],h={};B.forEach(T=>{j[T]&&(h[T]=j[T])}),Object.keys(j).filter(T=>!B.includes(T)).sort().forEach(T=>{h[T]=j[T]}),y(h);const v=Object.values(h).flat();g(v)}else{const j=await Kr.getPermisos();if(j.success&&j.data){const B=Array.isArray(j.data)?j.data:[];g(B);const h=B.reduce((A,Q)=>{const re=Q.modulo||"otros";return A[re]||(A[re]=[]),A[re].push({id:Q.permiso_id||Q.id,permiso_id:Q.permiso_id||Q.id,nombre_permiso:Q.nombre_permiso,descripcion:Q.descripcion,modulo:Q.modulo,accion:Q.accion,activo:Q.activo}),A},{}),v=["usuarios","roles","estudiantes","inscripciones","programas","grupos","pagos","documentos","convenios","configuracion","bitacora","notificaciones","reportes"],T={};v.forEach(A=>{h[A]&&(T[A]=h[A])}),Object.keys(h).filter(A=>!v.includes(A)).sort().forEach(A=>{T[A]=h[A]}),y(T)}}}catch(L){console.error("Error al cargar permisos:",L),m.error("Error al cargar permisos")}},Z=()=>{F(null),H([]),W({nombre:"",descripcion:""}),R(!0)},U=async L=>{var j;try{const B=await Kr.getRole(L.id);if(B.success){const h=B.data;F(h);const v=((j=h.permisos)==null?void 0:j.map(T=>T.permiso_id||T.id))||[];H(v),W({nombre:h.nombre_rol||h.nombre,descripcion:h.descripcion||""}),R(!0)}}catch{m.error("Error al cargar el rol")}},ee=async L=>{try{const j=await Kr.getRole(L.id);j.success&&(ne(j.data),G(!0))}catch{m.error("Error al cargar el rol")}},oe=async L=>{var j;try{const B=await Kr.getRole(L.id);if(B.success){const h=B.data;F(h),H(((j=h.permisos)==null?void 0:j.map(v=>v.permiso_id||v.id))||[]),I(!0)}}catch{m.error("Error al cargar permisos del rol")}},D=async L=>{var j,B;if(window.confirm("Ests seguro de que quieres eliminar este rol?"))try{k(!0);const h=L.rol_id||L.id,v=await Kr.deleteRole(h);v.success?(m.success(v.message||"Rol eliminado exitosamente"),await z()):m.error(v.message||"Error al eliminar el rol")}catch(h){const v=((B=(j=h.response)==null?void 0:j.data)==null?void 0:B.message)||h.message||"Error al eliminar el rol";m.error(v)}finally{k(!1)}},ie=async L=>{var j,B;try{k(!0);const h={nombre_rol:L.nombre,descripcion:L.descripcion||"",permisos:ce};let v;if(V){const T=V.rol_id||V.id;v=await Kr.updateRole(T,h)}else v=await Kr.createRole(h);v.success?(m.success(v.message||(V?"Rol actualizado exitosamente":"Rol creado exitosamente")),R(!1),F(null),H([]),W(),await z()):(m.error(v.message||"Error al guardar el rol"),v.errors&&Object.keys(v.errors).forEach(T=>{m.error(`${T}: ${v.errors[T]}`)}))}catch(h){const v=((B=(j=h.response)==null?void 0:j.data)==null?void 0:B.message)||h.message||"Error al guardar el rol";m.error(v)}finally{k(!1)}},xe=async()=>{var L,j;try{k(!0);const B=V.rol_id||V.id,h=await Kr.asignarPermisos(B,ce);h.success?(m.success(h.message||"Permisos asignados exitosamente"),I(!1),F(null),H([]),await z()):m.error(h.message||"Error al asignar permisos")}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al asignar permisos";m.error(h)}finally{k(!1)}},Ee=L=>{H(j=>j.includes(L)?j.filter(B=>B!==L):[...j,L])},he=L=>{const j=L.map(h=>h.permiso_id||h.id),B=j.every(h=>ce.includes(h));H(B?h=>h.filter(v=>!j.includes(v)):h=>[...new Set([...h,...j])])},Ne=[{key:"nombre",label:"Rol",sortable:!0,render:L=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(pr,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:L.nombre}),e.jsx("div",{className:"text-sm text-gray-500",children:L.descripcion||"Sin descripcin"})]})]})},{key:"users_count",label:"Usuarios",sortable:!0,render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:L.users_count||0})]})},{key:"permisos_count",label:"Permisos",sortable:!0,render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ea,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:L.permisos_count||0})]})},{key:"actions",label:"Acciones",render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[(o("roles")||r())&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ee(L)}),(r()||i("roles","asignar_permisos"))&&e.jsx(X,{variant:"info",size:"sm",icon:e.jsx(ea,{className:"h-4 w-4"}),onClick:()=>oe(L),title:"Gestionar permisos"}),(t("roles")||r())&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>U(L)}),(n("roles")||r())&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>D(L)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(pr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Roles y Permisos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona los roles y sus permisos del sistema"})]})]}),(r()||a("roles"))&&e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:Z,children:"Nuevo Rol"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Roles"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:l.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(pr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Permisos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:d.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ea,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:l.reduce((L,j)=>L+(j.users_count||0),0)})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Roles"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar roles...",value:S,onChange:L=>C(L.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:Ne,data:l,loading:w,pagination:{currentPage:N,totalPages:_,perPage:b,onPageChange:p,onPerPageChange:f}})]}),e.jsx(Pe,{isOpen:P,onClose:()=>{R(!1),F(null),H([]),W()},title:V?"Editar Rol":"Nuevo Rol",size:"lg",bodyClassName:"max-h-[calc(90vh-180px)] overflow-y-auto",children:e.jsxs("form",{onSubmit:te(ie),className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-6 min-h-0",children:[e.jsx(me,{label:"Nombre del Rol *",placeholder:"Ej: coordinador_academico",error:(ue=O.nombre)==null?void 0:ue.message,...K("nombre",{required:"El nombre es obligatorio"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("textarea",{...K("descripcion"),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Descripcin del rol..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Permisos"}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:Object.keys(x).length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No hay permisos disponibles"}):Object.keys(x).map(L=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 capitalize",children:L.replace(/_/g," ")}),e.jsx("button",{type:"button",onClick:()=>he(x[L]),className:"text-xs text-primary-600 hover:text-primary-700 font-medium",children:x[L].every(j=>ce.includes(j.permiso_id||j.id))?"Desmarcar todos":"Marcar todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x[L].map(j=>{const B=j.permiso_id||j.id;return e.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ce.includes(B),onChange:()=>Ee(B),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.descripcion||j.accion||j.nombre_permiso})]},B)})})]},L))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-900",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{R(!1),F(null),H([]),W()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),disabled:w,children:[V?"Actualizar":"Crear"," Rol"]})]})]})}),e.jsx(Pe,{isOpen:q,onClose:()=>{I(!1),F(null),H([])},title:`Gestionar Permisos - ${(V==null?void 0:V.nombre_rol)||(V==null?void 0:V.nombre)||""}`,size:"xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:Object.keys(x).map(L=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 capitalize",children:L.replace(/_/g," ")}),e.jsx("button",{type:"button",onClick:()=>he(x[L]),className:"text-xs text-primary-600 hover:text-primary-700",children:x[L].every(j=>ce.includes(j.permiso_id||j.id))?"Desmarcar todos":"Marcar todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x[L].map(j=>{const B=j.permiso_id||j.id;return e.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ce.includes(B),onChange:()=>Ee(B),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.descripcion||j.accion||j.nombre_permiso})]},B)})})]},L))}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{I(!1),F(null),H([])},children:"Cancelar"}),e.jsx(X,{type:"button",variant:"primary",onClick:xe,icon:e.jsx(ea,{className:"h-5 w-5"}),children:"Guardar Permisos"})]})]})}),e.jsx(Pe,{isOpen:$,onClose:()=>G(!1),title:"Detalles del Rol",size:"lg",children:ae&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:ae.nombre_rol||ae.nombre||"N/A"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:ae.descripcion||"Sin descripcin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:ae.activo!==!1?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:"Activo"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Inactivo"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuarios Asignados"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-lg",children:ae.usuarios_count||ae.users_count||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permisos Asignados"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-lg",children:((J=ae.permisos)==null?void 0:J.length)||ae.permisos_count||0})]})]}),ae.permisos&&ae.permisos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permisos"}),e.jsx("div",{className:"space-y-2",children:Object.keys(x).map(L=>{const j=ae.permisos.filter(B=>{const h=B.permiso_id||B.id;return x[L].some(v=>(v.permiso_id||v.id)===h)});return j.length===0?null:e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2 capitalize",children:L.replace(/_/g," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(B=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400",children:B.descripcion||B.accion||B.nombre_permiso},B.permiso_id||B.id))})]},L)})})]})]})})]})},Dc={async getBitacora(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||50,usuario_id:s.usuario_id||"",tabla:s.tabla||"",transaccion:s.transaccion||"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||"",recientes:s.recientes||!1};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===!1||t[o]===null)&&delete t[o]});const n=await ye("/admin/bitacora",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener registros de bitcora"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener registros de bitcora"}}},async getRegistro(s){var r,a;try{const t=await ye(`/admin/bitacora/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Registro no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener registro"}}},async getEstadisticas(s={}){var r,a;try{const t={fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||""};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null)&&delete t[o]});const n=await ye("/admin/bitacora/estadisticas",t);return n.data.success?{success:!0,data:n.data.data}:{success:!1,message:n.data.message||"Error al obtener estadsticas"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener estadsticas"}}}},T1=()=>{var K,te,W,O,z,Y,Z,U,ee;const{isAdmin:s}=Es(),{canView:r}=sm(),[a,t]=u.useState([]),[n,o]=u.useState(null),[i,l]=u.useState(!0),[c,d]=u.useState(!1),[g,x]=u.useState(""),[y,w]=u.useState(1),[k,S]=u.useState(1),[C,N]=u.useState(50),[p,_]=u.useState(!1),[E,b]=u.useState(!1),[f,P]=u.useState(null),[R,q]=u.useState({usuario_id:"",tabla:"",transaccion:"",fecha_desde:"",fecha_hasta:"",recientes:!1});u.useEffect(()=>{I(),$()},[y,C,R]);const I=async()=>{var oe,D;try{l(!0);const ie={page:y,per_page:C,...R};g&&(ie.transaccion=g);const xe=await Dc.getBitacora(ie);if(xe.success&&xe.data){const Ee=xe.data;Ee.data&&Array.isArray(Ee.data)?(t(Ee.data),S(Ee.last_page||1)):(t([]),S(1))}else m.error(xe.message||"Error al cargar bitcora"),t([]),S(1)}catch(ie){const xe=((D=(oe=ie.response)==null?void 0:oe.data)==null?void 0:D.message)||ie.message||"Error de conexin";m.error(xe),t([]),S(1)}finally{l(!1)}},$=async()=>{try{d(!0);const oe=await Dc.getEstadisticas({fecha_desde:R.fecha_desde,fecha_hasta:R.fecha_hasta});oe.success&&oe.data&&o(oe.data)}catch(oe){console.error("Error al cargar estadsticas:",oe)}finally{d(!1)}},G=async oe=>{try{const D=await Dc.getRegistro(oe.id||oe.bitacora_id);D.success&&(P(D.data),b(!0))}catch{m.error("Error al cargar el registro")}},V=(oe,D)=>{q(ie=>({...ie,[oe]:D})),w(1)},F=()=>{q({usuario_id:"",tabla:"",transaccion:"",fecha_desde:"",fecha_hasta:"",recientes:!1}),x(""),w(1)},ae=oe=>{if(!oe)return"N/A";try{const D=new Date(oe);return isNaN(D.getTime())?"N/A":D.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},ne=oe=>oe!=null&&oe.includes("CREAR")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":oe!=null&&oe.includes("EDITAR")?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":oe!=null&&oe.includes("ELIMINAR")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":oe!=null&&oe.includes("APROBAR")?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400":oe!=null&&oe.includes("RECHAZAR")?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",ce=[{key:"fecha",label:"Fecha",sortable:!0,render:oe=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ae(oe.fecha)})]})},{key:"usuario",label:"Usuario",render:oe=>{var D,ie,xe,Ee,he;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tr,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((ie=(D=oe.usuario)==null?void 0:D.persona)==null?void 0:ie.nombre_completo)||((xe=oe.usuario)==null?void 0:xe.email)||"N/A"}),((he=(Ee=oe.usuario)==null?void 0:Ee.persona)==null?void 0:he.ci)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["CI: ",oe.usuario.persona.ci]})]})]})}},{key:"tabla",label:"Tabla",render:oe=>{var D;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kg,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((D=oe.tabla)==null?void 0:D.replace(/_/g," "))||"N/A"})]})}},{key:"transaccion",label:"Accin",render:oe=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ne(oe.transaccion)}`,children:oe.transaccion||"N/A"})},{key:"codTabla",label:"ID Registro",render:oe=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-sm",children:oe.codTabla||"N/A"})},{key:"actions",label:"Acciones",render:oe=>e.jsx("div",{className:"flex items-center space-x-2",children:(r("bitacora")||s())&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>G(oe),title:"Ver detalles"})})}],H=[...new Set(a.map(oe=>oe.tabla).filter(Boolean))].sort();return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(cl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Bitcora del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registro de todas las acciones realizadas en el sistema"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",icon:e.jsx(oa,{className:"h-5 w-5"}),onClick:()=>_(!p),children:p?"Ocultar Filtros":"Filtros"}),e.jsx(X,{variant:"outline",icon:e.jsx(O0,{className:"h-5 w-5"}),onClick:()=>{I(),$()},children:"Actualizar"})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n.total_registros||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(P0,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tablas Diferentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((K=n.por_tabla)==null?void 0:K.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Kg,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((te=n.por_usuario)==null?void 0:te.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(tr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tipos de Accin"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((W=n.por_transaccion)==null?void 0:W.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Ul,{className:"h-6 w-6 text-white"})})]})})]}),p&&e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar en transaccin"}),e.jsx(me,{placeholder:"Buscar...",value:g,onChange:oe=>x(oe.target.value),onKeyPress:oe=>{oe.key==="Enter"&&I()}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tabla"}),e.jsxs("select",{value:R.tabla,onChange:oe=>V("tabla",oe.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las tablas"}),H.map(oe=>e.jsx("option",{value:oe,children:oe.replace(/_/g," ")},oe))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Desde"}),e.jsx(me,{type:"date",value:R.fecha_desde,onChange:oe=>V("fecha_desde",oe.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Hasta"}),e.jsx(me,{type:"date",value:R.fecha_hasta,onChange:oe=>V("fecha_hasta",oe.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.recientes,onChange:oe=>V("recientes",oe.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Solo registros recientes (30 das)"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsx(X,{variant:"outline",onClick:F,className:"w-full",children:"Limpiar Filtros"})})]})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Registros de Actividad"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar en transacciones...",value:g,onChange:oe=>x(oe.target.value),onKeyPress:oe=>{oe.key==="Enter"&&I()},className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:ce,data:a,loading:i,pagination:{currentPage:y,totalPages:k,perPage:C,onPageChange:w,onPerPageChange:N}})]}),e.jsx(Pe,{isOpen:E,onClose:()=>b(!1),title:"Detalles del Registro",size:"lg",children:f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:ae(f.fecha)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((z=(O=f.usuario)==null?void 0:O.persona)==null?void 0:z.nombre_completo)||((Y=f.usuario)==null?void 0:Y.email)||"N/A"}),((U=(Z=f.usuario)==null?void 0:Z.persona)==null?void 0:U.ci)&&e.jsxs("p",{className:"text-sm text-gray-500",children:["CI: ",f.usuario.persona.ci]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tabla"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((ee=f.tabla)==null?void 0:ee.replace(/_/g," "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ID Registro"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-mono",children:f.codTabla||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transaccin / Accin"}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:e.jsx("p",{className:"text-gray-900 dark:text-gray-100 whitespace-pre-wrap",children:f.transaccion||"N/A"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Creado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 text-sm",children:ae(f.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actualizado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 text-sm",children:ae(f.updated_at)})]})]})]})})]})},Ta={async getDocentes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",especializacion:s.especializacion||""};t.search||delete t.search,t.especializacion||delete t.especializacion;const n=await ye("/admin/docentes",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching docentes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getSiguienteRegistro(){var s,r;try{const a=await ye("/admin/docentes/siguiente-registro");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching siguiente registro:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async getDocenteById(s){var r,a;try{const t=await ye(`/admin/docentes/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching docente:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createDocente(s){var r,a,t,n;try{const o=await Me("/admin/docentes",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating docente:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateDocente(s,r){var a,t,n,o;try{const i=await Ze(`/admin/docentes/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating docente:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeDocente(s){var r,a;try{const t=await ts(`/admin/docentes/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing docente:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},Gn={async getHorarios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",dias:s.dias||"",turno:s.turno||""};t.search||delete t.search,t.dias||delete t.dias,t.turno||delete t.turno;const n=await ye("/admin/horarios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching horarios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getHorarioById(s){var r,a;try{const t=await ye(`/admin/horarios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching horario:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createHorario(s){var r,a,t,n;try{const o=await Me("/admin/horarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating horario:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateHorario(s,r){var a,t,n,o;try{const i=await Ze(`/admin/horarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating horario:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeHorario(s){var r,a;try{const t=await ts(`/admin/horarios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing horario:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},mx=()=>{var D,ie,xe,Ee,he,Ne,ue,J,L;const{canView:s,canCreate:r,canEdit:a,canDelete:t}=sm(),[n,o]=u.useState([]),[i,l]=u.useState(!0),[c,d]=u.useState(""),[g,x]=u.useState(""),[y,w]=u.useState(1),[k,S]=u.useState(1),[C,N]=u.useState(10),[p,_]=u.useState(!1),[E,b]=u.useState(!1),[f,P]=u.useState(null),[R,q]=u.useState(null),[I,$]=u.useState(""),[G,V]=u.useState({total:0,conGrupos:0}),{register:F,handleSubmit:ae,reset:ne,formState:{errors:ce},watch:H,setValue:K,trigger:te}=We({mode:"onChange"});u.useEffect(()=>{W()},[y,C,c,g]),u.useEffect(()=>{p&&!f&&O()},[p,f]);const W=async()=>{var j;try{l(!0);const B=await Ta.getDocentes({page:y,per_page:C,search:c,especializacion:g});B.success&&B.data?(o(B.data.data||[]),S(B.data.last_page||1),V({total:B.data.total||0,conGrupos:((j=B.data.data)==null?void 0:j.filter(h=>h.grupos_count>0).length)||0})):m.error(B.message||"Error al cargar docentes")}catch{m.error("Error al cargar docentes")}finally{l(!1)}},O=async()=>{try{const j=await Ta.getSiguienteRegistro();j.success&&j.data&&$(j.data.siguiente_registro||"")}catch(j){console.error("Error al obtener siguiente registro:",j)}},z=async j=>{var B,h,v,T;if(!j.ci||j.ci.trim()===""){m.error("El CI es obligatorio");return}if(!/^\d+$/.test(j.ci.trim())){m.error("El CI solo debe contener nmeros");return}if(!j.nombre||j.nombre.trim()===""){m.error("El nombre es obligatorio");return}if(!/^[a-zA-Z\s]+$/.test(j.nombre.trim())){m.error("El nombre solo debe contener letras");return}if(!j.apellido||j.apellido.trim()===""){m.error("El apellido es obligatorio");return}if(!/^[a-zA-Z\s]+$/.test(j.apellido.trim())){m.error("El apellido solo debe contener letras");return}if(j.celular&&j.celular.trim()!==""){if(!/^\d+$/.test(j.celular.trim())){m.error("El celular solo debe contener nmeros");return}if(j.celular.trim().length<7){m.error("El celular debe tener al menos 7 dgitos");return}}if(j.fecha_nacimiento){const A=new Date(j.fecha_nacimiento),Q=new Date;if(Q.setHours(0,0,0,0),A>=Q){m.error("La fecha de nacimiento debe ser anterior a hoy");return}const re=Q.getFullYear()-A.getFullYear(),de=Q.getMonth()-A.getMonth(),ve=Q.getDate()-A.getDate(),je=de<0||de===0&&ve<0?re-1:re;if(je<18){m.error("El docente debe tener al menos 18 aos");return}if(je>100){m.error("La fecha de nacimiento no es vlida (edad mayor a 100 aos)");return}}if(j.direccion&&j.direccion.trim()!==""&&j.direccion.trim().length>255){m.error("La direccin no puede tener ms de 255 caracteres");return}if(j.cargo&&j.cargo.trim()!==""&&j.cargo.trim().length>100){m.error("El cargo no puede tener ms de 100 caracteres");return}if(j.modalidad_de_contratacion&&j.modalidad_de_contratacion.trim()!==""&&j.modalidad_de_contratacion.trim().length>100){m.error("La modalidad de contratacin no puede tener ms de 100 caracteres");return}if(j.area_de_especializacion&&j.area_de_especializacion.trim()!==""&&j.area_de_especializacion.trim().length>200){m.error("El rea de especializacin no puede tener ms de 200 caracteres");return}if(j.sexo&&j.sexo!==""&&!["M","F"].includes(j.sexo)){m.error("El sexo debe ser M o F");return}try{l(!0);const A={ci:j.ci.trim(),nombre:j.nombre.trim(),apellido:j.apellido.trim(),celular:j.celular&&j.celular.trim()!==""?j.celular.trim():null,sexo:j.sexo||null,fecha_nacimiento:j.fecha_nacimiento||null,direccion:j.direccion?j.direccion.trim():null,cargo:j.cargo?j.cargo.trim():null,area_de_especializacion:j.area_de_especializacion?j.area_de_especializacion.trim():null,modalidad_de_contratacion:j.modalidad_de_contratacion?j.modalidad_de_contratacion.trim():null};let Q;if(f){const re=f.id;if(!re){m.error("No se pudo identificar el docente. Por favor, recarga la pgina."),l(!1);return}console.log(" Actualizando docente con ID:",re),console.log(" Datos a enviar:",A),Q=await Ta.updateDocente(re,A)}else Q=await Ta.createDocente(A);Q.success?(m.success(Q.message||(f?"Docente actualizado exitosamente":"Docente creado exitosamente")),_(!1),ne(),P(null),$(""),await W()):(m.error(Q.message||"Error al guardar docente"),Q.errors&&(Array.isArray(Q.errors)?Q.errors:Object.values(Q.errors).flat()).forEach(de=>{typeof de=="string"&&de.trim()?m.error(de,{duration:4e3}):Array.isArray(de)&&de.length>0&&m.error(de[0],{duration:4e3})}))}catch(A){const Q=((h=(B=A.response)==null?void 0:B.data)==null?void 0:h.message)||A.message||"Error al guardar docente";if(m.error(Q),(T=(v=A.response)==null?void 0:v.data)!=null&&T.errors){const re=A.response.data.errors;(Array.isArray(re)?re:Object.values(re).flat()).forEach(ve=>{typeof ve=="string"&&ve.trim()?m.error(ve,{duration:4e3}):Array.isArray(ve)&&ve.length>0&&m.error(ve[0],{duration:4e3})})}}finally{l(!1)}},Y=j=>{P(j),ne({ci:j.ci,nombre:j.nombre,apellido:j.apellido,celular:j.celular||"",sexo:j.sexo||"",fecha_nacimiento:j.fecha_nacimiento||"",direccion:j.direccion||"",cargo:j.cargo||"",area_de_especializacion:j.area_de_especializacion||"",modalidad_de_contratacion:j.modalidad_de_contratacion||""}),_(!0)},Z=async j=>{const B=j.id;if(!B){m.error("No se pudo identificar el docente");return}console.log(" Obteniendo docente con ID:",B);const h=await Ta.getDocenteById(B);h.success?(q(h.data),b(!0)):m.error(h.message||"Error al cargar detalles del docente")},U=async j=>{if(!window.confirm(`Est seguro de eliminar al docente "${j.nombre} ${j.apellido}"?`))return;const B=j.id;if(!B){m.error("No se pudo identificar el docente");return}try{const h=await Ta.removeDocente(B);h.success?(m.success(h.message),W()):m.error(h.message)}catch{m.error("Error al eliminar docente")}},ee=async()=>{P(null),ne({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",cargo:"",area_de_especializacion:"",modalidad_de_contratacion:""}),await O(),_(!0)},oe=[{key:"docente",label:"Docente",sortable:!0,render:j=>{var B;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((B=j.nombre)==null?void 0:B.charAt(0))||"D"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[j.nombre," ",j.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",j.ci]})]})]})}},{key:"registro_docente",label:"Registro",sortable:!0,render:j=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:j.registro_docente||"N/A"})},{key:"cargo",label:"Cargo",render:j=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:j.cargo||"N/A"})},{key:"area_de_especializacion",label:"Especializacin",render:j=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:j.area_de_especializacion||"N/A"})},{key:"grupos_count",label:"Grupos",sortable:!0,render:j=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.grupos_count>0?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:j.grupos_count||0})},{key:"actions",label:"Acciones",render:j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[s("docentes")&&e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),Z(j)},className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),a("docentes")&&e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),Y(j)},className:"p-2 rounded-xl text-warning-600 hover:bg-warning-50 dark:hover:bg-warning-900/20 transition-colors duration-200",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),t("docentes")&&e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),U(j)},className:"p-2 rounded-xl text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar",disabled:j.grupos_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ta,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Docentes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los docentes del sistema"})]})]}),r("docentes")&&e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:ee,children:"Nuevo Docente"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:G.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ta,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Con Grupos Asignados"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:G.conGrupos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{type:"text",placeholder:"Buscar por nombre, CI o registro...",value:c,onChange:j=>{d(j.target.value),w(1)},className:"pl-10"})]}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsx(me,{type:"text",placeholder:"Filtrar por especializacin...",value:g,onChange:j=>{x(j.target.value),w(1)}})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsx(es,{columns:oe,data:n,loading:i,emptyMessage:"No se encontraron docentes",hover:!0,striped:!0})}),e.jsx(Pe,{isOpen:p,onClose:()=>{_(!1),P(null),$(""),ne()},title:f?"Editar Docente":"Nuevo Docente",size:"xl",children:e.jsxs("form",{onSubmit:ae(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CI *"}),e.jsx(me,{type:"text",...F("ci",{required:"El CI es requerido",pattern:{value:/^\d+$/,message:"El CI solo debe contener nmeros"},maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 12345678",error:(D=ce.ci)==null?void 0:D.message,disabled:!!f,onInput:j=>{j.target.value=j.target.value.replace(/\D/g,""),te("ci")}})]}),!f&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registro Docente"}),e.jsx(me,{type:"text",value:I,placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),I&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este nmero se asignar automticamente al crear el docente"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),e.jsx(me,{type:"text",...F("nombre",{required:"El nombre es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El nombre solo debe contener letras"},maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Juan",error:(ie=ce.nombre)==null?void 0:ie.message,onInput:j=>{j.target.value=j.target.value.replace(/[^a-zA-Z\s]/g,""),te("nombre")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apellido *"}),e.jsx(me,{type:"text",...F("apellido",{required:"El apellido es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El apellido solo debe contener letras"},maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Prez",error:(xe=ce.apellido)==null?void 0:xe.message,onInput:j=>{j.target.value=j.target.value.replace(/[^a-zA-Z\s]/g,""),te("apellido")}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Celular"}),e.jsx(me,{type:"text",...F("celular",{pattern:{value:/^\d+$/,message:"El celular solo debe contener nmeros"},maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 70012345",error:(Ee=ce.celular)==null?void 0:Ee.message,onInput:j=>{j.target.value=j.target.value.replace(/\D/g,""),te("celular")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...F("sexo",{validate:j=>j&&!["M","F"].includes(j)?"El sexo debe ser M o F":!0}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),ce.sexo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ce.sexo.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Nacimiento"}),e.jsx(me,{type:"date",...F("fecha_nacimiento",{validate:j=>{if(j){const B=new Date(j),h=new Date;if(h.setHours(0,0,0,0),B>=h)return"La fecha de nacimiento debe ser anterior a hoy";const v=h.getFullYear()-B.getFullYear(),T=h.getMonth()-B.getMonth(),A=h.getDate()-B.getDate(),Q=T<0||T===0&&A<0?v-1:v;if(Q<18)return"El docente debe tener al menos 18 aos";if(Q>100)return"La fecha de nacimiento no es vlida (edad mayor a 100 aos)"}return!0}}),error:(he=ce.fecha_nacimiento)==null?void 0:he.message,max:new Date().toISOString().split("T")[0],min:new Date(new Date().setFullYear(new Date().getFullYear()-100)).toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx(me,{type:"text",...F("direccion",{maxLength:{value:255,message:"La direccin no puede tener ms de 255 caracteres"},validate:j=>j&&j.trim()!==""&&j.trim().length<5?"La direccin debe tener al menos 5 caracteres":!0}),placeholder:"Ej: Av. Principal #123",error:(Ne=ce.direccion)==null?void 0:Ne.message,onBlur:()=>te("direccion")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cargo"}),e.jsx(me,{type:"text",...F("cargo",{maxLength:{value:100,message:"El cargo no puede tener ms de 100 caracteres"},validate:j=>j&&j.trim()!==""&&j.trim().length<3?"El cargo debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Profesor Titular",error:(ue=ce.cargo)==null?void 0:ue.message,onBlur:()=>te("cargo")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Modalidad de Contratacin"}),e.jsx(me,{type:"text",...F("modalidad_de_contratacion",{maxLength:{value:100,message:"La modalidad no puede tener ms de 100 caracteres"},validate:j=>j&&j.trim()!==""&&j.trim().length<3?"La modalidad debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Tiempo Completo",error:(J=ce.modalidad_de_contratacion)==null?void 0:J.message,onBlur:()=>te("modalidad_de_contratacion")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"rea de Especializacin"}),e.jsx(me,{type:"text",...F("area_de_especializacion",{maxLength:{value:200,message:"El rea de especializacin no puede tener ms de 200 caracteres"},validate:j=>j&&j.trim()!==""&&j.trim().length<3?"El rea de especializacin debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Ciencias de la Educacin",error:(L=ce.area_de_especializacion)==null?void 0:L.message,onBlur:()=>te("area_de_especializacion")})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{_(!1),P(null),ne()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",children:[f?"Actualizar":"Crear"," Docente"]})]})]})}),e.jsx(Pe,{isOpen:E,onClose:()=>{b(!1),q(null)},title:"Detalles del Docente",size:"xl",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[R.nombre," ",R.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.ci})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Docente"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.registro_docente})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Cargo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.cargo||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"rea de Especializacin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.area_de_especializacion||"N/A"})]}),R.grupos&&R.grupos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Grupos Asignados (",R.grupos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.grupos.map(j=>{var B;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((B=j.programa)==null?void 0:B.nombre)||"Sin programa"}),j.modulo&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mdulo: ",j.modulo.nombre]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.fecha_ini," - ",j.fecha_fin]})]},j.grupo_id)})})]})]})})]})},Oc=()=>{var ee,oe;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(1),[y,w]=u.useState(1),[k,S]=u.useState(10),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),[R,q]=u.useState({total:0,conGrupos:0}),I=[{value:"lunes",label:"Lunes"},{value:"martes",label:"Martes"},{value:"mircoles",label:"Mircoles"},{value:"jueves",label:"Jueves"},{value:"viernes",label:"Viernes"},{value:"sbado",label:"Sbado"}],{register:$,handleSubmit:G,reset:V,formState:{errors:F},trigger:ae,watch:ne,setValue:ce}=We({mode:"onChange",defaultValues:{dias:[]}}),H=ne("dias")||[];u.useEffect(()=>{K()},[g,k,n,i,c]);const K=async()=>{var D;try{t(!0);const ie=await Gn.getHorarios({page:g,per_page:k,search:n,dias:i,turno:c});ie.success&&ie.data?(r(ie.data.data||[]),w(ie.data.last_page||1),q({total:ie.data.total||0,conGrupos:((D=ie.data.data)==null?void 0:D.filter(xe=>xe.grupos_count>0).length)||0})):m.error(ie.message||"Error al cargar horarios")}catch{m.error("Error al cargar horarios")}finally{t(!1)}},te=async D=>{var xe,Ee,he,Ne;let ie="";if(Array.isArray(D.dias)&&D.dias.length>0)ie=D.dias.join(", ");else if(typeof D.dias=="string"&&D.dias.trim()!=="")ie=D.dias.trim();else{m.error("Debes seleccionar al menos un da");return}if(!ie||ie.trim()===""){m.error("Los das son obligatorios");return}if(!D.hora_ini){m.error("La hora de inicio es obligatoria");return}if(!D.hora_fin){m.error("La hora de fin es obligatoria");return}if(D.hora_fin<=D.hora_ini){m.error("La hora de fin debe ser mayor a la hora de inicio");return}try{t(!0);const ue={dias:ie,hora_ini:D.hora_ini,hora_fin:D.hora_fin};let J;if(E){const L=E.horario_id||E.id;if(!L){m.error("No se pudo identificar el horario. Por favor, recarga la pgina."),t(!1);return}J=await Gn.updateHorario(L,ue)}else J=await Gn.createHorario(ue);J.success?(m.success(J.message||(E?"Horario actualizado exitosamente":"Horario creado exitosamente")),N(!1),V(),b(null),await K()):(m.error(J.message||"Error al guardar horario"),J.errors&&(Array.isArray(J.errors)?J.errors:Object.values(J.errors).flat()).forEach(j=>{typeof j=="string"&&j.trim()?m.error(j,{duration:4e3}):Array.isArray(j)&&j.length>0&&m.error(j[0],{duration:4e3})}))}catch(ue){const J=((Ee=(xe=ue.response)==null?void 0:xe.data)==null?void 0:Ee.message)||ue.message||"Error al guardar horario";if(m.error(J),(Ne=(he=ue.response)==null?void 0:he.data)!=null&&Ne.errors){const L=ue.response.data.errors;(Array.isArray(L)?L:Object.values(L).flat()).forEach(B=>{typeof B=="string"&&B.trim()?m.error(B,{duration:4e3}):Array.isArray(B)&&B.length>0&&m.error(B[0],{duration:4e3})})}}finally{t(!1)}},W=D=>{if(!(D.horario_id||D.id)){m.error("No se pudo identificar el horario");return}b(D);let xe=D.hora_ini_formatted||"",Ee=D.hora_fin_formatted||"";if(!xe&&D.hora_ini&&typeof D.hora_ini=="string")if(D.hora_ini.includes("T")){const Ne=D.hora_ini.split("T");Ne[1]&&(xe=Ne[1].substring(0,5))}else D.hora_ini.match(/^\d{2}:\d{2}/)&&(xe=D.hora_ini.substring(0,5));if(!Ee&&D.hora_fin&&typeof D.hora_fin=="string")if(D.hora_fin.includes("T")){const Ne=D.hora_fin.split("T");Ne[1]&&(Ee=Ne[1].substring(0,5))}else D.hora_fin.match(/^\d{2}:\d{2}/)&&(Ee=D.hora_fin.substring(0,5));let he=[];D.dias&&(typeof D.dias=="string"?he=D.dias.split(",").map(ue=>ue.trim().toLowerCase()).map(ue=>{const J=ue.toLowerCase();return J.includes("lunes")?"lunes":J.includes("martes")?"martes":J.includes("mircoles")||J.includes("miercoles")?"mircoles":J.includes("jueves")?"jueves":J.includes("viernes")?"viernes":J.includes("sbado")||J.includes("sabado")?"sbado":J}).filter(ue=>ue&&I.some(J=>J.value===ue)):Array.isArray(D.dias)&&(he=D.dias.map(Ne=>{const ue=typeof Ne=="string"?Ne.trim().toLowerCase():String(Ne).toLowerCase();return ue.includes("lunes")?"lunes":ue.includes("martes")?"martes":ue.includes("mircoles")||ue.includes("miercoles")?"mircoles":ue.includes("jueves")?"jueves":ue.includes("viernes")?"viernes":ue.includes("sbado")||ue.includes("sabado")?"sbado":ue}).filter(Ne=>Ne&&I.some(ue=>ue.value===Ne)))),V({dias:he,hora_ini:xe,hora_fin:Ee}),N(!0)},O=async D=>{const ie=D.horario_id||D.id;if(!ie){m.error("No se pudo identificar el horario");return}const xe=await Gn.getHorarioById(ie);xe.success?(P(xe.data),_(!0)):m.error(xe.message||"Error al cargar detalles del horario")},z=async D=>{const ie=D.horario_id||D.id;if(!ie){m.error("No se pudo identificar el horario");return}let xe=D.hora_ini_formatted||"N/A",Ee=D.hora_fin_formatted||"N/A";if(xe==="N/A"&&D.hora_ini&&typeof D.hora_ini=="string")if(D.hora_ini.includes("T")){const he=D.hora_ini.split("T");he[1]&&(xe=he[1].substring(0,5))}else D.hora_ini.match(/^\d{2}:\d{2}/)&&(xe=D.hora_ini.substring(0,5));if(Ee==="N/A"&&D.hora_fin&&typeof D.hora_fin=="string")if(D.hora_fin.includes("T")){const he=D.hora_fin.split("T");he[1]&&(Ee=he[1].substring(0,5))}else D.hora_fin.match(/^\d{2}:\d{2}/)&&(Ee=D.hora_fin.substring(0,5));if(window.confirm(`Est seguro de eliminar el horario "${D.dias||"N/A"} ${xe}-${Ee}"?`))try{const he=await Gn.removeHorario(ie);he.success?(m.success(he.message),K()):m.error(he.message)}catch{m.error("Error al eliminar horario")}},Y=()=>{b(null),V({dias:[],hora_ini:"",hora_fin:""}),N(!0)},Z=D=>{const ie=Array.from(D.target.selectedOptions,xe=>xe.value);ce("dias",ie,{shouldValidate:!0}),ae("dias")},U=[{key:"dias",label:"Das",render:D=>D.dias||"-"},{key:"hora_ini",label:"Hora Inicio",render:D=>{if(D.hora_ini_formatted)return D.hora_ini_formatted;const ie=D.hora_ini;if(ie&&typeof ie=="string"){if(ie.includes("T")){const xe=ie.split("T");if(xe[1])return xe[1].substring(0,5)}if(ie.match(/^\d{2}:\d{2}/))return ie.substring(0,5)}return"N/A"}},{key:"hora_fin",label:"Hora Fin",render:D=>{if(D.hora_fin_formatted)return D.hora_fin_formatted;const ie=D.hora_fin;if(ie&&typeof ie=="string"){if(ie.includes("T")){const xe=ie.split("T");if(xe[1])return xe[1].substring(0,5)}if(ie.match(/^\d{2}:\d{2}/))return ie.substring(0,5)}return"N/A"}},{key:"duracion_horas",label:"Duracin",render:D=>{var Ee,he;if(D.duracion_horas!==void 0&&D.duracion_horas!==null)return`${D.duracion_horas} horas`;const ie=D.hora_ini_formatted||(D.hora_ini&&typeof D.hora_ini=="string"?D.hora_ini.includes("T")?(Ee=D.hora_ini.split("T")[1])==null?void 0:Ee.substring(0,5):D.hora_ini.substring(0,5):null),xe=D.hora_fin_formatted||(D.hora_fin&&typeof D.hora_fin=="string"?D.hora_fin.includes("T")?(he=D.hora_fin.split("T")[1])==null?void 0:he.substring(0,5):D.hora_fin.substring(0,5):null);if(ie&&xe)try{const[Ne,ue]=ie.split(":").map(Number),[J,L]=xe.split(":").map(Number),j=Ne*60+ue,B=J*60+L;return`${((B>=j?B-j:24*60-j+B)/60).toFixed(1)} horas`}catch{return"N/A"}return"N/A"}},{key:"grupos_count",label:"Grupos",render:D=>D.grupos_count||0},{key:"actions",label:"Acciones",render:D=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:ie=>{ie.preventDefault(),ie.stopPropagation(),O(D)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ie=>{ie.preventDefault(),ie.stopPropagation(),W(D)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ie=>{ie.preventDefault(),ie.stopPropagation(),z(D)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:D.grupos_count>0,children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Horarios"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de horarios disponibles para grupos"})]}),e.jsx(X,{onClick:Y,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Horario"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Horarios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:R.total})]}),e.jsx(Xe,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Grupos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:R.conGrupos})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por das...",value:n,onChange:D=>{o(D.target.value),x(1)},icon:Je})}),e.jsx("div",{className:"w-48",children:e.jsx(me,{type:"text",placeholder:"Filtrar por das...",value:i,onChange:D=>{l(D.target.value),x(1)}})}),e.jsx("div",{className:"w-48",children:e.jsxs("select",{value:c,onChange:D=>{d(D.target.value),x(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los turnos"}),e.jsx("option",{value:"maana",children:"Maana"}),e.jsx("option",{value:"tarde",children:"Tarde"}),e.jsx("option",{value:"noche",children:"Noche"})]})})]})}),e.jsx(ge,{children:e.jsx(es,{columns:U,data:s,loading:a,currentPage:g,totalPages:y,onPageChange:x,perPage:k,onPerPageChange:S})}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),b(null),V()},title:E?"Editar Horario":"Nuevo Horario",children:e.jsxs("form",{onSubmit:G(te),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das * (Selecciona uno o ms das)"}),e.jsx("select",{multiple:!0,...$("dias",{required:"Debes seleccionar al menos un da",validate:D=>!Array.isArray(D)||D.length===0?"Debes seleccionar al menos un da":!0}),onChange:Z,value:H,className:`w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 min-h-[120px] ${F.dias?"border-error-500 focus:border-error-500":"border-gray-300 dark:border-gray-700 focus:border-primary-500"}`,children:I.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),F.dias&&e.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:F.dias.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Mantn presionada la tecla Ctrl (o Cmd en Mac) para seleccionar mltiples das"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora Inicio *"}),e.jsx(me,{type:"time",...$("hora_ini",{required:"La hora de inicio es requerida"}),error:(ee=F.hora_ini)==null?void 0:ee.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora Fin *"}),e.jsx(me,{type:"time",...$("hora_fin",{required:"La hora de fin es requerida",validate:D=>{const ie=ne("hora_ini");return ie&&D&&D<=ie?"La hora de fin debe ser mayor a la hora de inicio":!0}}),error:(oe=F.hora_fin)==null?void 0:oe.message,onBlur:()=>ae("hora_fin")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{N(!1),b(null),V()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:E?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:p,onClose:()=>{_(!1),P(null)},title:"Detalles del Horario",children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Das"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f.dias})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{var xe,Ee;if(f.duracion_horas!==void 0&&f.duracion_horas!==null)return`${f.duracion_horas} horas`;const D=f.hora_ini_formatted||(f.hora_ini&&typeof f.hora_ini=="string"?f.hora_ini.includes("T")?(xe=f.hora_ini.split("T")[1])==null?void 0:xe.substring(0,5):f.hora_ini.substring(0,5):null),ie=f.hora_fin_formatted||(f.hora_fin&&typeof f.hora_fin=="string"?f.hora_fin.includes("T")?(Ee=f.hora_fin.split("T")[1])==null?void 0:Ee.substring(0,5):f.hora_fin.substring(0,5):null);if(D&&ie)try{const[he,Ne]=D.split(":").map(Number),[ue,J]=ie.split(":").map(Number),L=he*60+Ne,j=ue*60+J;return`${((j>=L?j-L:24*60-L+j)/60).toFixed(1)} horas`}catch{return"N/A"}return"N/A"})()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hora Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{if(f.hora_ini_formatted)return f.hora_ini_formatted;const D=f.hora_ini;if(D&&typeof D=="string"){if(D.includes("T")){const ie=D.split("T");if(ie[1])return ie[1].substring(0,5)}if(D.match(/^\d{2}:\d{2}/))return D.substring(0,5)}return"N/A"})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hora Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{if(f.hora_fin_formatted)return f.hora_fin_formatted;const D=f.hora_fin;if(D&&typeof D=="string"){if(D.includes("T")){const ie=D.split("T");if(ie[1])return ie[1].substring(0,5)}if(D.match(/^\d{2}:\d{2}/))return D.substring(0,5)}return"N/A"})()})]})]}),f.grupos&&f.grupos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Grupos Asociados (",f.grupos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:f.grupos.map(D=>{var ie,xe;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((ie=D.programa)==null?void 0:ie.nombre)||"Sin programa"}),D.modulo&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mdulo: ",D.modulo.nombre]}),((xe=D.pivot)==null?void 0:xe.aula)&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Aula: ",D.pivot.aula]})]},D.grupo_id)})})]})]})})]})},Fr={async getEstudiantes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/estudiantes",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiantes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getEstudianteById(s){var r,a;try{const t=await ye(`/admin/estudiantes/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async createEstudiante(s){var r,a,t,n;try{const o=await Me("/admin/estudiantes",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating estudiante:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateEstudiante(s,r){var a,t,n,o;try{const i=await Ze(`/admin/estudiantes/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating estudiante:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async activarEstudiante(s){var r,a;try{const t=await Me(`/admin/estudiantes/${s}/activar`);return t.data.success?{success:!0,message:t.data.message||"Estudiante activado exitosamente"}:{success:!1,message:t.data.message||"Error al activar estudiante"}}catch(t){return console.error("Error activating estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al activar estudiante"}}},async desactivarEstudiante(s){var r,a;try{const t=await Me(`/admin/estudiantes/${s}/desactivar`);return t.data.success?{success:!0,message:t.data.message||"Estudiante desactivado exitosamente"}:{success:!1,message:t.data.message||"Error al desactivar estudiante"}}catch(t){return console.error("Error deactivating estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al desactivar estudiante"}}},async removeEstudiante(s){var r,a;try{const t=await ts(`/admin/estudiantes/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error removing estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},D1=()=>{var K,te,W,O,z,Y,Z;_r();const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(null),[c,d]=u.useState(!1),[g,x]=u.useState(!1),[y,w]=u.useState(null),[k,S]=u.useState(null),[C,N]=u.useState({total:0,activos:0,inactivos:0}),[p,_]=u.useState(!1),[E,b]=u.useState({estado:"",provincia:"",sexo:""}),{register:f,handleSubmit:P,reset:R,formState:{errors:q},trigger:I}=We({mode:"onChange"});u.useEffect(()=>{$()},[n,E]);const $=async()=>{try{t(!0);const U={};n&&(U.search=n),E.estado!==""&&(U.estado=E.estado),E.provincia&&(U.provincia=E.provincia),E.sexo!==""&&(U.sexo=E.sexo);const ee=await Fr.getEstudiantes(U);if(ee.success){const oe=ee.data;let D=[];oe.data&&Array.isArray(oe.data)?D=oe.data:Array.isArray(oe)&&(D=oe),r(D),N({total:D.length,activos:D.filter(ie=>ie.activo!==!1&&ie.estado!=="Inactivo").length,inactivos:D.filter(ie=>ie.activo===!1||ie.estado==="Inactivo").length})}else l("No se pudieron cargar los estudiantes"),m.error(ee.message||"Error al cargar estudiantes")}catch(U){console.error("Error cargando estudiantes:",U),l("Error al cargar los estudiantes"),m.error("Error de conexin al cargar estudiantes")}finally{t(!1)}},G=async U=>{var ee,oe;try{const D=U.registro_estudiante||U.id;if(!D){m.error("No se pudo identificar el estudiante");return}const ie=await Fr.getEstudianteById(D);ie.success?(S(ie.data),x(!0)):m.error(ie.message||"Error al cargar detalles del estudiante")}catch(D){const ie=((oe=(ee=D.response)==null?void 0:ee.data)==null?void 0:oe.message)||D.message||"Error al cargar el estudiante";m.error(ie)}},V=async U=>{var ee,oe;try{const D=U.registro_estudiante||U.id;if(!D){m.error("No se pudo identificar el estudiante");return}const ie=await Fr.getEstudianteById(D);if(ie.success){const xe=ie.data;w(xe),R({ci:xe.ci||"",nombre:xe.nombre||"",apellido:xe.apellido||"",celular:xe.celular||"",sexo:xe.sexo||"",fecha_nacimiento:xe.fecha_nacimiento||"",direccion:xe.direccion||"",provincia:xe.provincia||""}),d(!0)}else m.error(ie.message||"Error al cargar datos del estudiante")}catch(D){const ie=((oe=(ee=D.response)==null?void 0:ee.data)==null?void 0:oe.message)||D.message||"Error al cargar el estudiante";m.error(ie)}},F=()=>{w(null),R({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",provincia:""}),d(!0)},ae=async U=>{var ee,oe,D,ie;try{t(!0);const xe=[];if(!U.ci||U.ci.trim()===""?xe.push("El CI es obligatorio"):/^\d+$/.test(U.ci.trim())?U.ci.trim().length>20&&xe.push("El CI no puede tener ms de 20 caracteres"):xe.push("El CI solo debe contener nmeros"),!U.nombre||U.nombre.trim()===""?xe.push("El nombre es obligatorio"):/^[a-zA-Z\s]+$/.test(U.nombre.trim())?U.nombre.trim().length>100&&xe.push("El nombre no puede tener ms de 100 caracteres"):xe.push("El nombre solo debe contener letras"),!U.apellido||U.apellido.trim()===""?xe.push("El apellido es obligatorio"):/^[a-zA-Z\s]+$/.test(U.apellido.trim())?U.apellido.trim().length>100&&xe.push("El apellido no puede tener ms de 100 caracteres"):xe.push("El apellido solo debe contener letras"),!U.celular||U.celular.trim()===""?xe.push("El celular es obligatorio"):/^\d+$/.test(U.celular.trim())?U.celular.trim().length>20?xe.push("El celular no puede tener ms de 20 caracteres"):U.celular.trim().length<7&&xe.push("El celular debe tener al menos 7 dgitos"):xe.push("El celular solo debe contener nmeros"),U.sexo&&!["M","F"].includes(U.sexo)&&xe.push("El sexo debe ser Masculino (M) o Femenino (F)"),U.fecha_nacimiento){const Ne=new Date(U.fecha_nacimiento),ue=new Date;Ne>ue&&xe.push("La fecha de nacimiento no puede ser mayor a la fecha actual"),ue.getFullYear()-Ne.getFullYear()<10&&xe.push("La fecha de nacimiento no es vlida (el estudiante debe tener al menos 10 aos)")}if(U.provincia&&U.provincia.trim().length>50&&xe.push("La provincia no puede tener ms de 50 caracteres"),U.direccion&&U.direccion.trim().length>255&&xe.push("La direccin no puede tener ms de 255 caracteres"),xe.length>0){xe.forEach(Ne=>{m.error(Ne,{duration:4e3})}),t(!1);return}const Ee={ci:U.ci.trim(),nombre:U.nombre.trim(),apellido:U.apellido.trim(),celular:U.celular.trim(),sexo:U.sexo||null,fecha_nacimiento:U.fecha_nacimiento||null,direccion:U.direccion?U.direccion.trim():null,provincia:U.provincia?U.provincia.trim():null};let he;if(y){const Ne=y.registro_estudiante||y.id;he=await Fr.updateEstudiante(Ne,Ee)}else he=await Fr.createEstudiante(Ee);he.success?(m.success(he.message||(y?"Estudiante actualizado exitosamente":"Estudiante creado exitosamente")),d(!1),R(),w(null),await $()):(m.error(he.message||"Error al guardar estudiante"),he.errors&&(Array.isArray(he.errors)?he.errors:Object.values(he.errors).flat()).forEach(ue=>{typeof ue=="string"&&ue.trim()?m.error(ue,{duration:4e3}):Array.isArray(ue)&&ue.length>0&&m.error(ue[0],{duration:4e3})}))}catch(xe){const Ee=((oe=(ee=xe.response)==null?void 0:ee.data)==null?void 0:oe.message)||xe.message||"Error al guardar estudiante";if(m.error(Ee),(ie=(D=xe.response)==null?void 0:D.data)!=null&&ie.errors){const he=xe.response.data.errors;(Array.isArray(he)?he:Object.values(he).flat()).forEach(ue=>{typeof ue=="string"&&ue.trim()?m.error(ue,{duration:4e3}):Array.isArray(ue)&&ue.length>0&&m.error(ue[0],{duration:4e3})})}}finally{t(!1)}},ne=async U=>{var ee,oe;if(window.confirm(`Ests seguro de eliminar a ${U.nombre} ${U.apellido}?`))try{t(!0);const D=U.registro_estudiante||U.id;if(!D){m.error("No se pudo identificar el estudiante");return}const ie=await Fr.removeEstudiante(D);ie.success?(m.success(ie.message||"Estudiante eliminado exitosamente"),await $()):m.error(ie.message||"Error al eliminar estudiante")}catch(D){const ie=((oe=(ee=D.response)==null?void 0:ee.data)==null?void 0:oe.message)||D.message||"Error al eliminar estudiante";m.error(ie)}finally{t(!1)}},ce=async()=>{var U,ee;try{t(!0);const oe={};n&&(oe.search=n),E.estado!==""&&(oe.estado=E.estado),E.provincia&&(oe.provincia=E.provincia),E.sexo!==""&&(oe.sexo=E.sexo),oe.per_page=1e4,oe.page=1;const D=await Fr.getEstudiantes(oe);if(D.success&&D.data){let ie=[];if(D.data.data&&Array.isArray(D.data.data)?ie=D.data.data:Array.isArray(D.data)&&(ie=D.data),ie.length===0){m.error("No hay estudiantes para exportar");return}const xe=ie.map(Ee=>({Registro:Ee.registro_estudiante||Ee.id||"",CI:Ee.ci||"",Nombre:Ee.nombre||"",Apellido:Ee.apellido||"",Email:Ee.email||"N/A",Celular:Ee.celular||"N/A",Sexo:Ee.sexo==="M"?"Masculino":Ee.sexo==="F"?"Femenino":"N/A","Fecha Nacimiento":Ee.fecha_nacimiento?new Date(Ee.fecha_nacimiento).toLocaleDateString("es-ES"):"N/A",Provincia:Ee.provincia||"N/A",Direccin:Ee.direccion||"N/A",Estado:Ee.activo!==!1&&Ee.estado!=="Inactivo"?"Activo":"Inactivo","Fecha Inscripcin":Ee.fecha_inscripcion?new Date(Ee.fecha_inscripcion).toLocaleDateString("es-ES"):"N/A"}));Mt(xe,`estudiantes_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${xe.length} estudiantes exitosamente`)}else m.error(D.message||"Error al exportar estudiantes: No se recibieron datos vlidos"),console.error("Error en exportacin:",D)}catch(oe){console.error("Error al exportar estudiantes:",oe),m.error(((ee=(U=oe.response)==null?void 0:U.data)==null?void 0:ee.message)||oe.message||"Error al exportar estudiantes")}finally{t(!1)}},H=[{key:"estudiante",label:"Estudiante",sortable:!0,render:U=>{var ee;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((ee=U.nombre)==null?void 0:ee.charAt(0))||"E"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[U.nombre," ",U.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",U.ci]})]})]})}},{key:"registro_estudiante",label:"Registro",sortable:!0,render:U=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:U.registro_estudiante||U.id})},{key:"email",label:"Email",sortable:!0,render:U=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:U.email||"N/A"})},{key:"celular",label:"Telfono",render:U=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:U.celular||"N/A"})},{key:"estado",label:"Estado",sortable:!0,render:U=>{const ee=U.activo!==!1&&U.estado!=="Inactivo",oe=U.registro_estudiante||U.id;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:async D=>{D.stopPropagation();try{t(!0);const ie=ee?await Fr.desactivarEstudiante(oe):await Fr.activarEstudiante(oe);ie.success?(m.success(ie.message),await $()):m.error(ie.message||"Error al cambiar el estado")}catch{m.error("Error al cambiar el estado del estudiante")}finally{t(!1)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${ee?"bg-success-500":"bg-gray-300 dark:bg-gray-600"}`,title:ee?"Desactivar estudiante":"Activar estudiante",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ee?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-xs font-medium ${ee?"text-success-600 dark:text-success-400":"text-gray-600 dark:text-gray-400"}`,children:ee?"Activo":"Inactivo"})]})}},{key:"acciones",label:"Acciones",render:U=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>G(U),className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(U),className:"p-2 rounded-xl text-warning-600 hover:bg-warning-50 dark:hover:bg-warning-900/20 transition-colors duration-200",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ne(U),className:"p-2 rounded-xl text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors duration-200",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Estudiantes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y gestiona todos los estudiantes del sistema"})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:F,children:"Nuevo Estudiante"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Estudiantes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:C.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Estudiantes Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:C.activos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ta,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Estudiantes Inactivos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:C.inactivos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-error-500 to-error-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Vw,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar por CI, nombre, apellido o registro...",value:n,onChange:U=>o(U.target.value),className:"pl-10"})]}),e.jsx(X,{variant:"outline",icon:e.jsx(oa,{className:"h-5 w-5"}),onClick:()=>_(!p),children:"Filtros"}),e.jsx(X,{variant:"outline",icon:e.jsx(qs,{className:"h-5 w-5"}),onClick:ce,disabled:a,children:"Exportar"})]}),p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:E.estado,onChange:U=>b(ee=>({...ee,estado:U.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"activo",children:"Activos"}),e.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{value:E.sexo,onChange:U=>b(ee=>({...ee,sexo:U.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx(me,{type:"text",placeholder:"Filtrar por provincia...",value:E.provincia,onChange:U=>b(ee=>({...ee,provincia:U.target.value}))})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(X,{variant:"outline",size:"sm",onClick:()=>{b({estado:"",provincia:"",sexo:""}),$()},children:"Limpiar Filtros"})})]})]}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsx(es,{columns:H,data:s,loading:a,emptyMessage:"No se encontraron estudiantes",hover:!0,striped:!0})}),e.jsx(Pe,{isOpen:c,onClose:()=>{d(!1),w(null),R()},title:y?"Editar Estudiante":"Nuevo Estudiante",size:"xl",children:e.jsxs("form",{onSubmit:P(ae),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["CI ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(me,{type:"text",...f("ci",{required:"El CI es requerido",pattern:{value:/^\d+$/,message:"El CI solo debe contener nmeros"},maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 12345678",error:(K=q.ci)==null?void 0:K.message,disabled:!!y,onInput:U=>{U.target.value=U.target.value.replace(/\D/g,""),I("ci")}})]}),!y&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registro Estudiante"}),e.jsx(me,{type:"text",value:"Se generar automticamente",placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este cdigo se asignar automticamente al crear el estudiante"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nombre ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(me,{type:"text",...f("nombre",{required:"El nombre es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El nombre solo debe contener letras"},maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Juan",error:(te=q.nombre)==null?void 0:te.message,onInput:U=>{U.target.value=U.target.value.replace(/[^a-zA-Z\s]/g,""),I("nombre")}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Apellido ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(me,{type:"text",...f("apellido",{required:"El apellido es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El apellido solo debe contener letras"},maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Prez",error:(W=q.apellido)==null?void 0:W.message,onInput:U=>{U.target.value=U.target.value.replace(/[^a-zA-Z\s]/g,""),I("apellido")}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Celular ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(me,{type:"text",...f("celular",{required:"El celular es requerido",pattern:{value:/^\d+$/,message:"El celular solo debe contener nmeros"},minLength:{value:7,message:"El celular debe tener al menos 7 dgitos"},maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 70012345",error:(O=q.celular)==null?void 0:O.message,onInput:U=>{U.target.value=U.target.value.replace(/\D/g,""),I("celular")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...f("sexo",{validate:U=>U&&!["M","F"].includes(U)?"El sexo debe ser M o F":!0}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),q.sexo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:q.sexo.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Nacimiento"}),e.jsx(me,{type:"date",...f("fecha_nacimiento",{validate:U=>{if(U){const ee=new Date(U),oe=new Date;if(ee>oe)return"La fecha de nacimiento no puede ser mayor a la fecha actual";const D=oe.getFullYear()-ee.getFullYear(),ie=oe.getMonth()-ee.getMonth(),xe=oe.getDate()-ee.getDate();if((ie<0||ie===0&&xe<0?D-1:D)<10)return"El estudiante debe tener al menos 10 aos"}return!0}}),error:(z=q.fecha_nacimiento)==null?void 0:z.message,max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx(me,{type:"text",...f("provincia",{maxLength:{value:50,message:"La provincia no puede tener ms de 50 caracteres"}}),placeholder:"Ej: La Paz",error:(Y=q.provincia)==null?void 0:Y.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx(me,{type:"text",...f("direccion",{maxLength:{value:255,message:"La direccin no puede tener ms de 255 caracteres"}}),placeholder:"Ej: Av. Principal #123",error:(Z=q.direccion)==null?void 0:Z.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{d(!1),w(null),R()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",disabled:a,children:[y?"Actualizar":"Crear"," Estudiante"]})]})]})}),e.jsx(Pe,{isOpen:g,onClose:()=>{x(!1),S(null)},title:"Detalles del Estudiante",size:"xl",children:k&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[k.nombre," ",k.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.ci})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.registro_estudiante||k.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.celular||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Sexo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.sexo==="M"?"Masculino":k.sexo==="F"?"Femenino":"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.fecha_nacimiento?new Date(k.fecha_nacimiento).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Provincia"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.provincia||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Direccin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.direccion||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.activo!==!1&&k.estado!=="Inactivo"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:k.activo!==!1&&k.estado!=="Inactivo"?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})]}),k.fecha_inscripcion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Inscripcin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:k.fecha_inscripcion})]})]})})]})},gx=()=>{var h,v,T,A,Q,re,de,ve,je;const[s,r]=u.useState([]),[a,t]=u.useState({ramas_academicas:[],versiones:[],tipos_programa:[],instituciones:[],modulos:[]}),[n,o]=u.useState(!0),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(""),[y,w]=u.useState(""),[k,S]=u.useState(""),[C,N]=u.useState(1),[p,_]=u.useState(1),[E,b]=u.useState(10),[f,P]=u.useState(!1),[R,q]=u.useState(!1),[I,$]=u.useState(null),[G,V]=u.useState(null),[F,ae]=u.useState([]),[ne,ce]=u.useState([]),[H,K]=u.useState({total:0,activos:0}),{register:te,handleSubmit:W,reset:O,formState:{errors:z},watch:Y,setValue:Z}=We();u.useEffect(()=>{U(),ee()},[C,E,i,c,g,y,k]);const U=async()=>{try{const le=await Ca.getDatosFormulario();le.success&&le.data&&t(le.data)}catch(le){console.error("Error al cargar datos del formulario:",le)}},ee=async()=>{var le;try{o(!0);const se=await Ca.getProgramas({page:C,per_page:E,search:i,rama_academica_id:c||void 0,tipo_programa_id:g||void 0,version_id:y||void 0,institucion_id:k||void 0});se.success&&se.data?(r(se.data.data||[]),_(se.data.last_page||1),K({total:se.data.total||0,activos:((le=se.data.data)==null?void 0:le.length)||0})):m.error(se.message||"Error al cargar programas")}catch{m.error("Error al cargar programas")}finally{o(!1)}},oe=()=>{ae([...F,{id:"",edicion:""}])},D=le=>{ae(F.filter((se,pe)=>pe!==le))},ie=(le,se,pe)=>{const ke=[...F];se==="id"?ke[le][se]=pe&&pe!==""?pe.toString():"":ke[le][se]=pe,ae(ke)},xe=()=>{ce([...ne,""])},Ee=le=>{ce(ne.filter((se,pe)=>pe!==le))},he=(le,se)=>{const pe=[...ne];pe[le]=se,ce(pe)},Ne=async le=>{var pe,ke,_e,Ce;if(!le.nombre||le.nombre.trim()===""){m.error("El nombre del programa es obligatorio");return}if(!le.duracion_meses||parseInt(le.duracion_meses)<1){m.error("La duracin debe ser al menos 1 mes");return}const se=F.filter($e=>!$e.id||$e.id===""||$e.id===null);if(F.length>0&&se.length>0){m.error("Por favor, seleccione un mdulo vlido para todos los mdulos agregados");return}try{o(!0);const $e=F.filter(be=>{var Ae;const Se=(Ae=be.id)==null?void 0:Ae.toString().trim();return Se&&Se!==""&&Se!=="null"&&Se!=="undefined"}).map(be=>{const Se=parseInt(be.id);if(isNaN(Se)||Se<=0)throw new Error(`ID de mdulo invlido: ${be.id}`);return{id:Se,edicion:be.edicion&&be.edicion.trim()!==""?parseInt(be.edicion):null}}),ss={nombre:le.nombre.trim(),duracion_meses:parseInt(le.duracion_meses),total_modulos:le.total_modulos?parseInt(le.total_modulos):null,costo:le.costo?parseFloat(le.costo):null,version_id:parseInt(le.version_id),rama_academica_id:parseInt(le.rama_academica_id),tipo_programa_id:parseInt(le.tipo_programa_id),institucion_id:parseInt(le.institucion_id),modulos:$e,subprogramas:ne.filter(be=>be).map(be=>parseInt(be))};let we;if(I){const be=I.id||I.programa_id;if(!be){m.error("No se pudo identificar el ID del programa para actualizar"),o(!1);return}we=await Ca.updatePrograma(be,ss)}else we=await Ca.createPrograma(ss);we.success?(m.success(we.message||(I?"Programa actualizado exitosamente":"Programa creado exitosamente")),P(!1),O(),$(null),ae([]),ce([]),await ee()):(m.error(we.message||"Error al guardar programa"),we.errors&&(Array.isArray(we.errors)?we.errors:Object.values(we.errors).flat()).forEach(Se=>{typeof Se=="string"&&Se.trim()?m.error(Se,{duration:4e3}):Array.isArray(Se)&&Se.length>0&&m.error(Se[0],{duration:4e3})}))}catch($e){const ss=((ke=(pe=$e.response)==null?void 0:pe.data)==null?void 0:ke.message)||$e.message||"Error al guardar programa";if(m.error(ss),(Ce=(_e=$e.response)==null?void 0:_e.data)!=null&&Ce.errors){const we=$e.response.data.errors;(Array.isArray(we)?we:Object.values(we).flat()).forEach(Se=>{typeof Se=="string"&&Se.trim()?m.error(Se,{duration:4e3}):Array.isArray(Se)&&Se.length>0&&m.error(Se[0],{duration:4e3})})}}finally{o(!1)}},ue=async le=>{var pe,ke;const se=le.id||le.programa_id;if(!se){m.error("No se pudo identificar el ID del programa");return}try{const _e=await Ca.getProgramaById(se);if(_e.success){const Ce=_e.data;$(Ce),O({nombre:Ce.nombre,duracion_meses:Ce.duracion_meses,total_modulos:Ce.total_modulos||"",costo:Ce.costo||"",version_id:Ce.version_id,rama_academica_id:Ce.rama_academica_id,tipo_programa_id:Ce.tipo_programa_id,institucion_id:Ce.institucion_id}),Ce.modulos&&Ce.modulos.length>0?ae(Ce.modulos.map($e=>{var we,be,Se,Ae;return{id:((we=$e.modulo_id)==null?void 0:we.toString())||((be=$e.id)==null?void 0:be.toString())||"",edicion:((Ae=(Se=$e.pivot)==null?void 0:Se.edicion)==null?void 0:Ae.toString())||""}})):ae([]),Ce.subprogramas&&Ce.subprogramas.length>0?ce(Ce.subprogramas.map($e=>$e.id.toString())):ce([]),P(!0)}else m.error(_e.message||"Error al cargar datos del programa")}catch(_e){const Ce=((ke=(pe=_e.response)==null?void 0:pe.data)==null?void 0:ke.message)||_e.message||"Error al cargar datos del programa";m.error(Ce)}},J=async le=>{var pe,ke;const se=le.id||le.programa_id;if(!se){m.error("No se pudo identificar el ID del programa");return}try{const _e=await Ca.getProgramaById(se);_e.success?(V(_e.data),q(!0)):m.error(_e.message||"Error al cargar detalles del programa")}catch(_e){const Ce=((ke=(pe=_e.response)==null?void 0:pe.data)==null?void 0:ke.message)||_e.message||"Error al cargar detalles del programa";m.error(Ce)}},L=async le=>{var pe,ke;const se=le.id||le.programa_id;if(!se){m.error("No se pudo identificar el ID del programa");return}if(window.confirm(`Est seguro de eliminar el programa "${le.nombre}"?`))try{const _e=await Ca.removePrograma(se);_e.success?(m.success(_e.message||"Programa eliminado exitosamente"),await ee()):m.error(_e.message||"Error al eliminar programa")}catch(_e){const Ce=((ke=(pe=_e.response)==null?void 0:pe.data)==null?void 0:ke.message)||_e.message||"Error al eliminar programa";m.error(Ce)}},j=()=>{$(null),O({nombre:"",duracion_meses:"",total_modulos:"",costo:"",version_id:"",rama_academica_id:"",tipo_programa_id:"",institucion_id:""}),ae([]),ce([]),P(!0)},B=[{key:"nombre",label:"Nombre",render:le=>le.nombre||"-"},{key:"tipo_programa",label:"Tipo",render:le=>{var se;return((se=le.tipo_programa)==null?void 0:se.nombre)||"N/A"}},{key:"rama_academica",label:"Rama",render:le=>{var se;return((se=le.rama_academica)==null?void 0:se.nombre)||"N/A"}},{key:"version",label:"Versin",render:le=>{var se;return((se=le.version)==null?void 0:se.nombre)||"N/A"}},{key:"institucion",label:"Institucin",render:le=>{var se;return((se=le.institucion)==null?void 0:se.nombre)||"N/A"}},{key:"duracion_meses",label:"Duracin (meses)",render:le=>le.duracion_meses||"N/A"},{key:"costo",label:"Costo",render:le=>le.costo?`$${le.costo}`:"N/A"},{key:"actions",label:"Acciones",render:le=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:se=>{se.preventDefault(),se.stopPropagation(),J(le)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:se=>{se.preventDefault(),se.stopPropagation(),ue(le)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:se=>{se.preventDefault(),se.stopPropagation(),L(le)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Programas Acadmicos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de programas y asociacin con mdulos y subprogramas"})]}),e.jsx(X,{onClick:j,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Programa"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:H.total})]}),e.jsx(Ts,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Programas Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:H.activos})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre...",value:i,onChange:le=>{l(le.target.value),N(1)},icon:Je})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:le=>{d(le.target.value),N(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todas las ramas"}),a.ramas_academicas.map(le=>e.jsx("option",{value:le.id,children:le.nombre},le.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:g,onChange:le=>{x(le.target.value),N(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),a.tipos_programa.map(le=>e.jsx("option",{value:le.id,children:le.nombre},le.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:le=>{w(le.target.value),N(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todas las versiones"}),a.versiones.map(le=>e.jsxs("option",{value:le.id,children:[le.nombre," (",le.ao,")"]},le.id))]})})]})}),e.jsx(ge,{children:e.jsx(es,{columns:B,data:s,loading:n,currentPage:C,totalPages:p,onPageChange:N,perPage:E,onPerPageChange:b})}),e.jsx(Pe,{isOpen:f,onClose:()=>{P(!1),$(null),ae([]),ce([]),O()},title:I?"Editar Programa":"Nuevo Programa",size:"xl",children:e.jsxs("form",{onSubmit:W(Ne),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Programa *"}),e.jsx(me,{...te("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Maestra en Educacin",error:(h=z.nombre)==null?void 0:h.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rama Acadmica *"}),e.jsxs("select",{...te("rama_academica_id",{required:"La rama acadmica es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar rama..."}),a.ramas_academicas.map(le=>e.jsx("option",{value:le.id,children:le.nombre},le.id))]}),z.rama_academica_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:z.rama_academica_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Programa *"}),e.jsxs("select",{...te("tipo_programa_id",{required:"El tipo de programa es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),a.tipos_programa.map(le=>e.jsx("option",{value:le.id,children:le.nombre},le.id))]}),z.tipo_programa_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:z.tipo_programa_id.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Versin *"}),e.jsxs("select",{...te("version_id",{required:"La versin es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar versin..."}),a.versiones.map(le=>e.jsxs("option",{value:le.id,children:[le.nombre," (",le.ao,")"]},le.id))]}),z.version_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:z.version_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Institucin *"}),e.jsxs("select",{...te("institucion_id",{required:"La institucin es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar institucin..."}),a.instituciones.map(le=>e.jsx("option",{value:le.id,children:le.nombre},le.id))]}),z.institucion_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:z.institucion_id.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Duracin (meses) *"}),e.jsx(me,{type:"number",...te("duracion_meses",{required:"La duracin es requerida",min:{value:1,message:"Mnimo 1 mes"}}),placeholder:"Ej: 24",error:(v=z.duracion_meses)==null?void 0:v.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total Mdulos"}),e.jsx(me,{type:"number",...te("total_modulos",{min:{value:0,message:"Mnimo 0"}}),placeholder:"Ej: 12",error:(T=z.total_modulos)==null?void 0:T.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Costo"}),e.jsx(me,{type:"number",step:"0.01",...te("costo",{min:{value:0,message:"Mnimo 0"}}),placeholder:"Ej: 5000.00",error:(A=z.costo)==null?void 0:A.message})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mdulos del Programa"}),e.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:oe,icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Agregar Mdulo"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[F.map((le,se)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Mdulo ",se+1]}),e.jsx("button",{type:"button",onClick:()=>D(se),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(nr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("select",{value:le.id||"",onChange:pe=>{const ke=pe.target.value;ie(se,"id",ke)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar mdulo..."}),a.modulos&&Array.isArray(a.modulos)&&a.modulos.filter(pe=>{var _e,Ce;const ke=((_e=pe.id)==null?void 0:_e.toString())||((Ce=pe.modulo_id)==null?void 0:Ce.toString());return!F.some(($e,ss)=>{var be;const we=(be=$e.id)==null?void 0:be.toString();return ss!==se&&we&&we===ke})}).map(pe=>{var _e,Ce;const ke=((_e=pe.id)==null?void 0:_e.toString())||((Ce=pe.modulo_id)==null?void 0:Ce.toString())||"";return e.jsxs("option",{value:ke,children:[pe.nombre," (",pe.credito||0," crditos)"]},ke)})]})}),e.jsx("div",{children:e.jsx(me,{type:"number",value:le.edicion||"",onChange:pe=>ie(se,"edicion",pe.target.value),placeholder:"Edicin (opcional)",min:"1",className:"w-full"})})]})]},se)),F.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay mdulos agregados. Haga clic en "Agregar Mdulo" para comenzar.'})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subprogramas (Opcional)"}),e.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:xe,icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Agregar Subprograma"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[ne.map((le,se)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Subprograma ",se+1]}),e.jsx("button",{type:"button",onClick:()=>Ee(se),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(nr,{className:"h-4 w-4"})})]}),e.jsx("div",{children:e.jsxs("select",{value:le,onChange:pe=>he(se,pe.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar subprograma..."}),s.filter(pe=>!I||pe.id!==I.id).filter(pe=>!ne.some((ke,_e)=>_e!==se&&ke===pe.id.toString())).map(pe=>{var ke;return e.jsxs("option",{value:pe.id,children:[pe.nombre," - ",((ke=pe.tipo_programa)==null?void 0:ke.nombre)||""]},pe.id)})]})})]},se)),ne.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay subprogramas agregados. Haga clic en "Agregar Subprograma" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{P(!1),$(null),ae([]),ce([]),O()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:I?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:R,onClose:()=>{q(!1),V(null)},title:"Detalles del Programa",size:"xl",children:G&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:G.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((Q=G.tipo_programa)==null?void 0:Q.nombre)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((re=G.rama_academica)==null?void 0:re.nombre)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Versin"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[((de=G.version)==null?void 0:de.nombre)||"N/A"," ",(ve=G.version)!=null&&ve.ao?`(${G.version.ao})`:""]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((je=G.institucion)==null?void 0:je.nombre)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin (meses)"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:G.duracion_meses||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Total Mdulos"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:G.total_modulos||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:G.costo?`$${G.costo}`:"N/A"})]})]}),G.modulos&&G.modulos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Mdulos Asociados (",G.modulos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:G.modulos.map(le=>{var se;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:le.nombre}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Crditos: ",le.credito]}),e.jsxs("span",{children:["Horas: ",le.horas_academicas]}),((se=le.pivot)==null?void 0:se.edicion)!==void 0&&le.pivot.edicion!==null&&e.jsxs("span",{children:["Edicin: ",le.pivot.edicion]})]})]},le.modulo_id||le.id)})})]}),G.subprogramas&&G.subprogramas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Subprogramas (",G.subprogramas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:G.subprogramas.map(le=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:le.nombre}),le.tipo_programa&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:le.tipo_programa.nombre})]},le.id))})]})]})})]})},ci={async getInscripciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",programa_id:s.programa_id||"",estudiante_id:s.estudiante_id||"",fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||"",sort_by:s.sort_by||"fecha",sort_direction:s.sort_direction||"desc"};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null||t[o]===void 0)&&delete t[o]});const n=await ye("/admin/inscripciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripciones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getInscripcionById(s){var r,a;try{const t=await ye(`/admin/inscripciones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripcion:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getEstadisticas(){var s,r;try{const a=await ye("/admin/inscripciones/estadisticas");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching estadisticas:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}}},O1=()=>{var ne,ce,H,K,te,W,O,z,Y,Z,U,ee,oe,D,ie,xe,Ee,he,Ne,ue,J;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(null),[c,d]=u.useState(!1),[g,x]=u.useState(!1),[y,w]=u.useState(null),[k,S]=u.useState([]),[C,N]=u.useState([]),[p,_]=u.useState({fecha_inicio:"",fecha_fin:"",programa_id:"",estudiante_id:""}),[E,b]=u.useState({total:0,este_mes:0,este_anio:0});u.useEffect(()=>{f(),P()},[]),u.useEffect(()=>{const L=setTimeout(()=>{R()},500);return()=>clearTimeout(L)},[n,p]),u.useEffect(()=>{q()},[]);const f=async()=>{try{const L=await Ca.getProgramas({per_page:100});if(L.success&&L.data){const j=L.data.data||L.data;S(Array.isArray(j)?j:[])}}catch(L){console.error("Error cargando programas:",L)}},P=async()=>{try{const L=await Fr.getEstudiantes({per_page:100});if(L.success&&L.data){const j=L.data.data||L.data;N(Array.isArray(j)?j:[])}}catch(L){console.error("Error cargando estudiantes:",L)}},R=async()=>{try{t(!0),l(null);const L={};n&&n.trim()!==""&&(L.search=n.trim()),p.fecha_inicio&&(L.fecha_inicio=p.fecha_inicio),p.fecha_fin&&(L.fecha_fin=p.fecha_fin),p.programa_id&&(L.programa_id=p.programa_id),p.estudiante_id&&(L.estudiante_id=p.estudiante_id);const j=await ci.getInscripciones(L);if(j.success){const B=j.data;let h=[];B.data&&Array.isArray(B.data)?h=B.data:Array.isArray(B)&&(h=B),r(h)}else l("No se pudieron cargar las inscripciones"),m.error(j.message||"Error al cargar inscripciones")}catch(L){console.error("Error cargando inscripciones:",L),l("Error al cargar las inscripciones"),m.error("Error de conexin al cargar inscripciones")}finally{t(!1)}},q=async()=>{try{const L=await ci.getEstadisticas();L.success&&b({total:L.data.total||0,este_mes:L.data.este_mes||0,este_anio:L.data.este_anio||0})}catch(L){console.error("Error cargando estadsticas:",L)}},I=async L=>{var j,B;try{const h=await ci.getInscripcionById(L.id);h.success?(w(h.data),d(!0)):m.error(h.message||"Error al cargar detalles de la inscripcin")}catch(h){const v=((B=(j=h.response)==null?void 0:j.data)==null?void 0:B.message)||h.message||"Error al cargar la inscripcin";m.error(v)}},$=()=>{x(!1),R()},G=()=>{_({fecha_inicio:"",fecha_fin:"",programa_id:"",estudiante_id:""}),x(!1)},V=()=>p.fecha_inicio||p.fecha_fin||p.programa_id||p.estudiante_id,F=async()=>{var L,j;try{t(!0);const B={};n&&n.trim()!==""&&(B.search=n.trim()),p.fecha_inicio&&(B.fecha_inicio=p.fecha_inicio),p.fecha_fin&&(B.fecha_fin=p.fecha_fin),p.programa_id&&(B.programa_id=p.programa_id),p.estudiante_id&&(B.estudiante_id=p.estudiante_id),B.per_page=1e4,B.page=1;const h=await ci.getInscripciones(B);if(h.success&&h.data){let v=[];if(h.data.data&&Array.isArray(h.data.data)?v=h.data.data:Array.isArray(h.data)&&(v=h.data),v.length===0){m.error("No hay inscripciones para exportar");return}const T=v.map(A=>{var Q,re,de,ve,je,le,se,pe,ke,_e,Ce,$e,ss,we,be,Se,Ae,Fe;return{ID:A.id||"",Fecha:A.fecha_formatted||(A.fecha?new Date(A.fecha).toLocaleDateString("es-ES"):"N/A"),"Registro Estudiante":((Q=A.estudiante)==null?void 0:Q.registro_estudiante)||"N/A","CI Estudiante":((re=A.estudiante)==null?void 0:re.ci)||"N/A","Nombre Estudiante":((de=A.estudiante)==null?void 0:de.nombre)||"N/A","Apellido Estudiante":((ve=A.estudiante)==null?void 0:ve.apellido)||"N/A","Email Estudiante":((je=A.estudiante)==null?void 0:je.email)||"N/A","Celular Estudiante":((le=A.estudiante)==null?void 0:le.celular)||"N/A",Programa:((se=A.programa)==null?void 0:se.nombre)||"N/A",Institucin:((pe=A.programa)==null?void 0:pe.institucion)||"N/A","Rama Acadmica":((ke=A.programa)==null?void 0:ke.rama_academica)||"N/A","Tipo Programa":((_e=A.programa)==null?void 0:_e.tipo_programa)||"N/A","Costo Programa":(Ce=A.programa)!=null&&Ce.costo?`$${A.programa.costo.toLocaleString("es-ES")}`:"N/A","Duracin (meses)":(($e=A.programa)==null?void 0:$e.duracion_meses)||"N/A","Monto Total Plan":(ss=A.plan_pago)!=null&&ss.monto_total?`$${A.plan_pago.monto_total.toLocaleString("es-ES")}`:"N/A","Monto Pagado":(we=A.plan_pago)!=null&&we.monto_pagado?`$${A.plan_pago.monto_pagado.toLocaleString("es-ES")}`:"N/A","Monto Pendiente":(be=A.plan_pago)!=null&&be.monto_pendiente?`$${A.plan_pago.monto_pendiente.toLocaleString("es-ES")}`:"N/A","Total Cuotas":((Se=A.plan_pago)==null?void 0:Se.total_cuotas)||"N/A","Cuotas Pagadas":((Ae=A.estado_pagos)==null?void 0:Ae.cuotas_pagadas)||0,"Porcentaje Pagado":(Fe=A.estado_pagos)!=null&&Fe.porcentaje_pagado?`${A.estado_pagos.porcentaje_pagado.toFixed(2)}%`:"0%",Descuento:A.descuento?`${A.descuento.nombre} (${A.descuento.descuento}%)`:"Sin descuento"}});Mt(T,`inscripciones_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${T.length} inscripciones exitosamente`)}else m.error(h.message||"Error al exportar inscripciones: No se recibieron datos vlidos"),console.error("Error en exportacin:",h)}catch(B){console.error("Error al exportar inscripciones:",B),m.error(((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al exportar inscripciones")}finally{t(!1)}},ae=[{key:"fecha",label:"Fecha",sortable:!0,render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:L.fecha_formatted||(L.fecha?new Date(L.fecha).toLocaleDateString("es-ES"):"N/A")})]})},{key:"estudiante",label:"Estudiante",sortable:!0,render:L=>{var j,B,h,v,T,A;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((B=(j=L.estudiante)==null?void 0:j.nombre)==null?void 0:B.charAt(0))||"E"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(h=L.estudiante)==null?void 0:h.nombre," ",(v=L.estudiante)==null?void 0:v.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",(T=L.estudiante)==null?void 0:T.ci," | Reg: ",(A=L.estudiante)==null?void 0:A.registro_estudiante]})]})]})}},{key:"programa",label:"Programa",sortable:!0,render:L=>{var j,B,h,v;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((j=L.programa)==null?void 0:j.nombre)||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(B=L.programa)==null?void 0:B.tipo_programa," - ",(h=L.programa)==null?void 0:h.rama_academica]}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:(v=L.programa)==null?void 0:v.institucion})]})}},{key:"plan_pago",label:"Plan de Pago",render:L=>{var B,h,v;const j=L.plan_pago;return j?e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[j.total_cuotas," cuotas"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: $",((B=j.monto_total)==null?void 0:B.toLocaleString("es-ES"))||"0"]}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Pagado: $",((h=j.monto_pagado)==null?void 0:h.toLocaleString("es-ES"))||"0"," | Pendiente: $",((v=j.monto_pendiente)==null?void 0:v.toLocaleString("es-ES"))||"0"]})]}):e.jsx("span",{className:"text-gray-400",children:"Sin plan de pago"})}},{key:"estado_pagos",label:"Estado Pagos",render:L=>{const j=L.estado_pagos;if(!j)return e.jsx("span",{className:"text-gray-400",children:"N/A"});const B=j.porcentaje_pagado||0,h=B>=100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${h?"bg-success-500":B>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(B,100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:[B.toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[j.cuotas_pagadas,"/",j.total_cuotas," cuotas pagadas"]})]})}},{key:"descuento",label:"Descuento",render:L=>L.descuento?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-success-600 dark:text-success-400",children:L.descuento.nombre}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[L.descuento.descuento,"%"]})]}):e.jsx("span",{className:"text-gray-400",children:"Sin descuento"})},{key:"acciones",label:"Acciones",render:L=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>I(L),className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})})})}];return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(_t,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Inscripciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra todas las inscripciones de estudiantes a programas"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:E.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(us,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Este Mes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:E.este_mes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Ul,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Este Ao"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:E.este_anio})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Bs,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar por estudiante, CI, programa...",value:n,onChange:L=>o(L.target.value),className:"pl-10"})]}),e.jsxs(X,{variant:"outline",icon:e.jsx(oa,{className:"h-5 w-5"}),onClick:()=>x(!0),className:V()?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"",children:["Filtros ",V()&&`(${Object.values(p).filter(L=>L).length})`]}),e.jsx(X,{variant:"outline",icon:e.jsx(qs,{className:"h-5 w-5"}),onClick:F,disabled:a,children:"Exportar"})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsx(es,{columns:ae,data:s,loading:a,emptyMessage:"No se encontraron inscripciones",hover:!0,striped:!0})}),e.jsx(Pe,{isOpen:c,onClose:()=>{d(!1),w(null)},title:"Detalles de la Inscripcin",size:"xl",children:y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[(ne=y.estudiante)==null?void 0:ne.nombre," ",(ce=y.estudiante)==null?void 0:ce.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(H=y.estudiante)==null?void 0:H.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(K=y.estudiante)==null?void 0:K.registro_estudiante})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(te=y.estudiante)==null?void 0:te.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((W=y.estudiante)==null?void 0:W.celular)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Direccin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((O=y.estudiante)==null?void 0:O.direccion)||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:(z=y.programa)==null?void 0:z.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(Y=y.programa)==null?void 0:Y.institucion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(Z=y.programa)==null?void 0:Z.rama_academica})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(U=y.programa)==null?void 0:U.tipo_programa})]}),((ee=y.programa)==null?void 0:ee.duracion_meses)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[y.programa.duracion_meses," meses"]})]}),((oe=y.programa)==null?void 0:oe.costo)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["$",y.programa.costo.toLocaleString("es-ES")]})]})]})]}),y.plan_pago&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(aa,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin de Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Total"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",((D=y.plan_pago.monto_total)==null?void 0:D.toLocaleString("es-ES"))||"0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pagado"}),e.jsxs("p",{className:"text-lg font-bold text-success-600 dark:text-success-400",children:["$",((ie=y.plan_pago.monto_pagado)==null?void 0:ie.toLocaleString("es-ES"))||"0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pendiente"}),e.jsxs("p",{className:"text-lg font-bold text-error-600 dark:text-error-400",children:["$",((xe=y.plan_pago.monto_pendiente)==null?void 0:xe.toLocaleString("es-ES"))||"0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Progreso"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[((he=(Ee=y.estado_pagos)==null?void 0:Ee.porcentaje_pagado)==null?void 0:he.toFixed(1))||"0","%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Cuotas: ",y.plan_pago.cuotas_pagadas,"/",y.plan_pago.total_cuotas," pagadas"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${((Ne=y.estado_pagos)==null?void 0:Ne.porcentaje_pagado)>=100?"bg-success-500":((ue=y.estado_pagos)==null?void 0:ue.porcentaje_pagado)>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(((J=y.estado_pagos)==null?void 0:J.porcentaje_pagado)||0,100)}%`}})})]}),y.plan_pago.cuotas&&y.plan_pago.cuotas.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Detalle de Cuotas"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:y.plan_pago.cuotas.map((L,j)=>{var B;return e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Cuota ",j+1]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[L.fecha_ini?new Date(L.fecha_ini).toLocaleDateString("es-ES"):"N/A"," -",L.fecha_fin?new Date(L.fecha_fin).toLocaleDateString("es-ES"):"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",((B=L.monto)==null?void 0:B.toLocaleString("es-ES"))||"0"]}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${L.estado==="Pagado"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":L.estado==="Retrasado"?"bg-error-100 text-error-800 dark:bg-error-900/20 dark:text-error-400":"bg-warning-100 text-warning-800 dark:bg-warning-900/20 dark:text-warning-400"}`,children:[L.estado,L.estado==="Retrasado"&&L.dias_retraso>0&&e.jsxs("span",{className:"ml-1",children:["(",L.dias_retraso," das)"]})]})]})]}),L.pagos&&L.pagos.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagos realizados:"}),L.pagos.map(h=>{var v;return e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["$",(v=h.monto)==null?void 0:v.toLocaleString("es-ES")," - ",h.fecha?new Date(h.fecha).toLocaleDateString("es-ES"):"N/A",h.metodo&&` (${h.metodo})`,h.verificado&&e.jsx("span",{className:"ml-2 text-success-600",children:" Verificado"})]},h.id)})]})]},L.id)})})]})]})]}),y.descuento&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Descuento Aplicado"}),e.jsxs("div",{className:"bg-success-50 dark:bg-success-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"font-medium text-success-900 dark:text-success-400",children:y.descuento.nombre}),e.jsxs("p",{className:"text-sm text-success-700 dark:text-success-500",children:["Descuento: ",y.descuento.descuento,"%"]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha de Inscripcin:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:y.fecha_formatted||(y.fecha?new Date(y.fecha).toLocaleDateString("es-ES"):"N/A")})]})})]})}),e.jsx(Pe,{isOpen:g,onClose:()=>x(!1),title:"Filtros Avanzados",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio"}),e.jsx(me,{type:"date",value:p.fecha_inicio,onChange:L=>_({...p,fecha_inicio:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin"}),e.jsx(me,{type:"date",value:p.fecha_fin,onChange:L=>_({...p,fecha_fin:L.target.value}),min:p.fecha_inicio||void 0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsxs("select",{value:p.programa_id,onChange:L=>_({...p,programa_id:L.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos los programas"}),k.map(L=>e.jsx("option",{value:L.id,children:L.nombre},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("select",{value:p.estudiante_id,onChange:L=>_({...p,estudiante_id:L.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos los estudiantes"}),C.map(L=>{const j=L.id||L.persona_id;return e.jsxs("option",{value:j,children:[L.nombre," ",L.apellido," - ",L.ci," ",L.registro_estudiante?`(Reg: ${L.registro_estudiante})`:""]},j||L.registro_estudiante)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:G,icon:e.jsx(nr,{className:"h-4 w-4"}),children:"Limpiar Filtros"}),e.jsx(X,{type:"button",variant:"primary",onClick:$,children:"Aplicar Filtros"})]})]})})]})},di={async listar(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||15,search:s.search||"",metodo:s.metodo||"",estudiante_id:s.estudiante_id||""};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null||t[o]===void 0)&&delete t[o]});const n=await ye("/admin/pagos/verificacion",t);return n.data.success?{success:!0,data:n.data.data,resumen:n.data.resumen,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener pagos"}}catch(t){return console.error("Error fetching pagos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener pagos"}}},async obtener(s){var r,a;try{const t=await ye(`/admin/pagos/verificacion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||"Error al obtener pago"}}catch(t){return console.error("Error fetching pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener pago"}}},async aprobar(s,r=""){var a,t;try{const n=await Me(`/admin/pagos/verificacion/${s}/aprobar`,{observaciones:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Pago aprobado exitosamente"}:{success:!1,message:n.data.message||"Error al aprobar pago"}}catch(n){return console.error("Error aprobando pago:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al aprobar pago"}}},async rechazar(s,r){var a,t,n,o;try{const i=await Me(`/admin/pagos/verificacion/${s}/rechazar`,{motivo:r});return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Pago rechazado exitosamente"}:{success:!1,message:i.data.message||"Error al rechazar pago"}}catch(i){return console.error("Error rechazando pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al rechazar pago",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async obtenerResumenVerificados(s={}){var r,a;try{const t={fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||""};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await ye("/admin/pagos/verificacion/resumen/verificados",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener resumen"}}catch(t){return console.error("Error fetching resumen:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener resumen"}}}};function I1(s,r=500){const[a,t]=u.useState(s||"");return u.useEffect(()=>{const n=setTimeout(()=>{t(s||"")},r);return()=>{clearTimeout(n)}},[s,r]),a}const M1=()=>{var xe,Ee;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i]=I1(n,500),[l,c]=u.useState(1),[d,g]=u.useState(1),[x,y]=u.useState(15),[w,k]=u.useState(null),[S,C]=u.useState(!1),[N,p]=u.useState(!1),[_,E]=u.useState(!1),[b,f]=u.useState(null),[P,R]=u.useState(""),[q,I]=u.useState(""),[$,G]=u.useState(""),[V,F]=u.useState(""),[ae,ne]=u.useState([]),[ce,H]=u.useState(!1);u.useEffect(()=>{K()},[]),u.useEffect(()=>{te()},[l,x,i,$,V]);const K=async()=>{try{const he=await Fr.getEstudiantes({per_page:1e3});if(he.success&&he.data){const Ne=he.data.data||he.data;ne(Array.isArray(Ne)?Ne:[])}}catch(he){console.error("Error cargando estudiantes:",he)}},te=async()=>{try{t(!0);const he={page:l,per_page:x,search:i&&typeof i=="string"&&i.trim()?i.trim():void 0,metodo:$||void 0,estudiante_id:V?String(V):void 0};V&&console.log("Filtrando por estudiante_id:",V,"Tipo:",typeof V);const Ne=await di.listar(he);if(Ne.success){const ue=Ne.data;ue&&ue.data?(r(ue.data),g(ue.last_page||1)):(r([]),g(1)),Ne.resumen&&k(Ne.resumen)}else m.error(Ne.message||"Error al cargar los pagos"),r([])}catch(he){console.error("Error cargando pagos:",he),m.error("Error de conexin"),r([])}finally{t(!1)}},W=async he=>{try{t(!0);const Ne=await di.obtener(he.id);Ne.success?(f(Ne.data),C(!0)):m.error(Ne.message||"Error al cargar el pago")}catch{m.error("Error al cargar el pago")}finally{t(!1)}},O=he=>{f(he),I(""),p(!0)},z=async()=>{if(b)try{t(!0);const he=await di.aprobar(b.id,q);he.success?(m.success(he.message||"Pago aprobado exitosamente"),p(!1),f(null),I(""),await te()):m.error(he.message||"Error al aprobar el pago")}catch{m.error("Error al aprobar el pago")}finally{t(!1)}},Y=he=>{f(he),R(""),E(!0)},Z=async()=>{if(!b||!P.trim()){m.error("Debe proporcionar un motivo para rechazar el pago");return}if(P.trim().length<10){m.error("El motivo debe tener al menos 10 caracteres");return}try{t(!0);const he=await di.rechazar(b.id,P.trim());he.success?(m.success(he.message||"Pago rechazado exitosamente"),E(!1),f(null),R(""),await te()):(m.error(he.message||"Error al rechazar el pago"),he.errors&&Object.keys(he.errors).forEach(Ne=>{(Array.isArray(he.errors[Ne])?he.errors[Ne]:[he.errors[Ne]]).forEach(J=>m.error(J))}))}catch{m.error("Error al rechazar el pago")}finally{t(!1)}},U=he=>he?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(Le,{className:"h-4 w-4"}),"Verificado"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:[e.jsx(ls,{className:"h-4 w-4"}),"Pendiente"]}),ee=he=>{const Ne={QR:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",TRANSFERENCIA:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",EFECTIVO:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Transferencia:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",Efectivo:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Tarjeta:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Ne[he]||"bg-gray-100 text-gray-800"}`,children:he||"N/A"})},oe=()=>$!==""||V!=="",D=()=>{G(""),F(""),c(1)},ie=[{key:"fecha",label:"Fecha",render:he=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:he.fecha?new Date(he.fecha).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"})},{key:"estudiante",label:"Estudiante",render:he=>{var Ne,ue;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((Ne=he.estudiante)==null?void 0:Ne.nombre_completo)||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",((ue=he.estudiante)==null?void 0:ue.ci)||"N/A"]})]})}},{key:"programa",label:"Programa",render:he=>{var Ne;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((Ne=he.programa)==null?void 0:Ne.nombre)||he.programa||"N/A"})}},{key:"monto",label:"Monto",render:he=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(he.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"metodo",label:"Mtodo",render:he=>ee(he.metodo)},{key:"verificado",label:"Estado",render:he=>U(he.verificado)},{key:"actions",label:"Acciones",render:he=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>W(he),title:"Ver detalles"}),!he.verificado&&e.jsxs(e.Fragment,{children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ha,{className:"h-4 w-4 text-green-600"}),onClick:()=>O(he),title:"Aprobar pago"}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(nr,{className:"h-4 w-4 text-red-600"}),onClick:()=>Y(he),title:"Rechazar pago"})]})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Tr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Pagos Realizados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verifica y gestiona los pagos de estudiantes"})]})]})}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ge,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total_pendientes||0})]}),e.jsx(ls,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx(ge,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total_verificados||0})]}),e.jsx(Le,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(ge,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Pendiente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(w.total_monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(aa,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx(ge,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Verificado"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(w.total_monto_verificado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(aa,{className:"h-8 w-8 text-green-500"})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Pagos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar pagos...",value:n,onChange:he=>{o(he.target.value),c(1)},className:"pl-10 w-full sm:w-64"})]}),e.jsxs(X,{variant:"outline",icon:e.jsx(oa,{className:"h-4 w-4"}),onClick:()=>H(!0),className:oe()?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"",children:["Filtros",oe()&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary-500 text-white rounded-full text-xs",children:[$,V].filter(he=>he).length})]})]})]}),e.jsx(es,{columns:ie,data:s,loading:a,pagination:{currentPage:l,totalPages:d,perPage:x,onPageChange:c,onPerPageChange:y}})]}),e.jsx(Pe,{isOpen:S,onClose:()=>{C(!1),f(null)},title:"Detalles del Pago",size:"xl",children:b&&e.jsxs("div",{className:"space-y-6",children:[b.estudiante&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[b.estudiante.nombre_completo||b.estudiante.nombre," ",b.estudiante.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.estudiante.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.estudiante.registro_estudiante||b.estudiante.registro||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.estudiante.email||"N/A"})]}),b.estudiante.celular&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.estudiante.celular})]})]})]}),b.programa&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:typeof b.programa=="string"?b.programa:b.programa.nombre})]}),b.programa.institucion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:typeof b.programa.institucion=="string"?b.programa.institucion:b.programa.institucion.nombre})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(aa,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:parseFloat(b.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Mtodo"}),e.jsx("div",{className:"mt-1",children:ee(b.metodo)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:b.fecha?new Date(b.fecha).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Estado"}),e.jsx("div",{className:"mt-1",children:U(b.verificado)})]})]}),b.verificado&&b.fecha_verificacion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Verificacin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:new Date(b.fecha_verificacion).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),b.verificado_por&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Verificado por"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:typeof b.verificado_por=="string"?b.verificado_por:`${b.verificado_por.nombre||""} ${b.verificado_por.apellido||""}`.trim()||"N/A"})]}),b.comprobante_url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Comprobante"}),e.jsxs("a",{href:b.comprobante_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 dark:text-primary-400",children:[e.jsx(us,{className:"h-4 w-4"}),"Ver comprobante"]})]}),b.observaciones&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:b.observaciones})]}),b.cuota&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Informacin de la Cuota"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:b.cuota.fecha_ini?new Date(b.cuota.fecha_ini).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:b.cuota.fecha_fin?new Date(b.cuota.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]})]})]})]})]})]})}),e.jsx(Pe,{isOpen:N,onClose:()=>{p(!1),f(null),I("")},title:"Aprobar Pago",size:"md",children:b&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Le,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Est seguro de aprobar este pago?"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Estudiante: ",((xe=b.estudiante)==null?void 0:xe.nombre_completo)||"N/A"]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Monto: ",parseFloat(b.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones (opcional)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:q,onChange:he=>I(he.target.value),placeholder:"Agregar observaciones sobre la aprobacin..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{p(!1),f(null),I("")},children:"Cancelar"}),e.jsx(X,{variant:"primary",icon:e.jsx(ha,{className:"h-4 w-4"}),onClick:z,children:"Aprobar Pago"})]})]})}),e.jsx(Pe,{isOpen:_,onClose:()=>{E(!1),f(null),R("")},title:"Rechazar Pago",size:"md",children:b&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nr,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900 dark:text-red-100",children:"Est seguro de rechazar este pago?"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"El pago ser eliminado y el estudiante deber registrar un nuevo pago."}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["Estudiante: ",((Ee=b.estudiante)==null?void 0:Ee.nombre_completo)||"N/A"]}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Monto: ",parseFloat(b.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo del rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:P,onChange:he=>R(he.target.value),placeholder:"Explique el motivo del rechazo (mnimo 10 caracteres)...",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[P.length,"/10 caracteres mnimos"]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{E(!1),f(null),R("")},children:"Cancelar"}),e.jsx(X,{variant:"danger",icon:e.jsx(nr,{className:"h-4 w-4"}),onClick:Z,disabled:P.trim().length<10,children:"Rechazar Pago"})]})]})}),e.jsx(Pe,{isOpen:ce,onClose:()=>H(!1),title:"Filtros",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mtodo de Pago"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:$,onChange:he=>{G(he.target.value),c(1)},children:[e.jsx("option",{value:"",children:"Todos los mtodos"}),e.jsx("option",{value:"Transferencia",children:"Transferencia"}),e.jsx("option",{value:"Efectivo",children:"Efectivo"}),e.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"QR",children:"QR"}),e.jsx("option",{value:"TRANSFERENCIA",children:"TRANSFERENCIA"}),e.jsx("option",{value:"EFECTIVO",children:"EFECTIVO"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:V,onChange:he=>{F(he.target.value),c(1)},children:[e.jsx("option",{value:"",children:"Todos los estudiantes"}),ae.map(he=>{const Ne=he.id;return Ne?e.jsxs("option",{value:Ne,children:[he.nombre," ",he.apellido," - CI: ",he.ci," ",he.registro_estudiante?`(Reg: ${he.registro_estudiante})`:""]},Ne):null})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:D,children:"Limpiar Filtros"}),e.jsx(X,{variant:"primary",onClick:()=>H(!1),children:"Aplicar"})]})]})})]})},lt={async getMaterias(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc",gestion_id:s.gestion_id||"",estado:s.estado||""},a=await ye("/materias",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener materias"}}catch(r){return{success:!1,message:r.message||"Error al obtener materias"}}},async getMateria(s){try{const r=await ye(`/materias/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Materia no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener materia"}}},async createMateria(s){var r,a,t,n;try{const o=await Me("/materias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateMateria(s,r){var a,t,n,o;try{const i=await Ze(`/materias/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteMateria(s){var r,a;try{const t=await ts(`/materias/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async searchMaterias(s){try{const r=await ye("/materias/search",{q:s});return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error en la bsqueda"}}catch(r){return{success:!1,message:r.message||"Error en la bsqueda"}}},async exportarMaterias(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",nivel:s.nivel||"",semestre:s.semestre||"",activa:s.activa||""};n.search||delete n.search,n.nivel||delete n.nivel,n.semestre||delete n.semestre,n.activa===""&&delete n.activa;const o=await ye("/materias",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Materias exportadas exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar materias"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar materias"}}},async importarMaterias(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await $o("/materias/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Materias importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar materias",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar materias",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},F1=()=>{var D,ie,xe,Ee,he,Ne,ue,J,L,j,B,h,v,T,A,Q,re,de,ve,je,le,se,pe,ke,_e,Ce,$e,ss,we;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),[R,q]=u.useState(!1),[I,$]=u.useState(null),G=Be.useRef(null),[V,F]=u.useState({nivel:"",semestre:"",activa:""}),{register:ae,handleSubmit:ne,reset:ce,formState:{errors:H}}=We();u.useEffect(()=>{K()},[i,g,n,V]);const K=async()=>{var be,Se;try{t(!0);const Ae={page:i,per_page:g,search:n};V.nivel&&(Ae.nivel=V.nivel),V.semestre&&(Ae.semestre=V.semestre),V.activa!==""&&(Ae.activa=V.activa);const Fe=await lt.getMaterias(Ae);Fe.success&&Fe.data?(r(Fe.data.data||[]),d(Fe.data.last_page||1)):(m.error(Fe.message||"Error al cargar materias"),r([]),d(1))}catch(Ae){const Fe=((Se=(be=Ae.response)==null?void 0:be.data)==null?void 0:Se.message)||Ae.message||"Error de conexin: No se pudo cargar las materias";m.error(Fe),console.error("Error al cargar materias:",Ae),r([]),d(1)}finally{t(!1)}},te=()=>{b(null),ce({codigo_materia:"",nombre:"",sigla:"",horas_teoricas:0,horas_practicas:0,nivel:1,semestre:1}),w(!0)},W=be=>{b(be),ce(be),w(!0)},O=async be=>{var Se,Ae;try{const Fe=await lt.getMateria(be.id);P(Fe.data),S(!0)}catch(Fe){const ze=((Ae=(Se=Fe.response)==null?void 0:Se.data)==null?void 0:Ae.message)||Fe.message||"Error al cargar los detalles de la materia";m.error(ze)}},z=async be=>{var Se,Ae;if(window.confirm("Est seguro de eliminar esta materia?"))try{const Fe=await lt.deleteMateria(be);Fe.success?(m.success(Fe.message||"Materia eliminada exitosamente"),K()):m.error(Fe.message||"Error al eliminar la materia")}catch(Fe){const ze=((Ae=(Se=Fe.response)==null?void 0:Se.data)==null?void 0:Ae.message)||Fe.message||"Error al eliminar la materia";m.error(ze)}},Y=async()=>{var be,Se;try{t(!0);const Ae=await lt.exportarMaterias({search:n,...V});if(Ae.success&&Ae.data&&Array.isArray(Ae.data)){if(Ae.data.length===0){m.error("No hay materias para exportar");return}const Fe=Ae.data.map(ze=>({Cdigo:ze.codigo_materia||"",Nombre:ze.nombre||"",Sigla:ze.sigla||"","Horas Tericas":ze.horas_teoricas||0,"Horas Prcticas":ze.horas_practicas||0,Nivel:ze.nivel||"",Semestre:ze.semestre||"",Estado:ze.activa!==!1?"Activa":"Inactiva"}));Mt(Fe,`materias_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${Fe.length} materias exitosamente`)}else m.error(Ae.message||"Error al exportar materias: No se recibieron datos vlidos"),console.error("Error en exportacin:",Ae)}catch(Ae){console.error("Error al exportar materias:",Ae),m.error(((Se=(be=Ae.response)==null?void 0:be.data)==null?void 0:Se.message)||Ae.message||"Error al exportar materias")}finally{t(!1)}},Z=async be=>{var Ae,Fe;const Se=be.target.files[0];if(Se){if(!Se.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}q(!0),$(null);try{const ze=await lt.importarMaterias(Se);ze.success?($(ze.data),m.success(ze.message||"Materias importadas exitosamente"),await K(),setTimeout(()=>{N(!1),$(null),G.current&&(G.current.value="")},3e3)):(m.error(ze.message||"Error al importar materias"),ze.errors&&$({errores:Array.isArray(ze.errors)?ze.errors:[ze.errors]}))}catch(ze){const is=((Fe=(Ae=ze.response)==null?void 0:Ae.data)==null?void 0:Fe.message)||ze.message||"Error al importar materias";m.error(is)}finally{q(!1)}}},U=()=>{const be=`codigo_materia,nombre,sigla,horas_teoricas,horas_practicas,nivel,semestre
MAT001,Matemticas I,MATE1,4,2,1,1
MAT002,Matemticas II,MATE2,4,2,1,2
`,Se=new Blob([be],{type:"text/csv;charset=utf-8;"}),Ae=document.createElement("a");Ae.href=URL.createObjectURL(Se),Ae.download="template_materias.csv",Ae.click()},ee=async be=>{var Se,Ae,Fe,ze;try{const is={...be,horas_teoricas:parseInt(be.horas_teoricas),horas_practicas:parseInt(be.horas_practicas),nivel:parseInt(be.nivel),semestre:parseInt(be.semestre)};let Os;E?Os=await lt.updateMateria(E.id,is):Os=await lt.createMateria(is),Os.success?(m.success(Os.message||(E?"Materia actualizada exitosamente":"Materia creada exitosamente")),w(!1),K(),ce()):(m.error(Os.message||"Error al guardar la materia"),Os.errors&&Object.keys(Os.errors).forEach(wa=>{m.error(`${wa}: ${Os.errors[wa]}`)}))}catch(is){const Os=((Ae=(Se=is.response)==null?void 0:Se.data)==null?void 0:Ae.message)||is.message||"Error al guardar la materia";m.error(Os),(ze=(Fe=is.response)==null?void 0:Fe.data)!=null&&ze.errors&&Object.keys(is.response.data.errors).forEach(wa=>{m.error(`${wa}: ${is.response.data.errors[wa]}`)})}},oe=[{key:"codigo_materia",label:"Cdigo",sortable:!0,render:be=>e.jsx("span",{className:"font-mono font-semibold text-green-600",children:be.codigo_materia})},{key:"nombre",label:"Materia",sortable:!0,render:be=>{var Se;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white font-semibold",children:((Se=be.sigla)==null?void 0:Se.substring(0,2))||"M"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:be.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Sigla: ",be.sigla]})]})]})}},{key:"nivel",label:"Nivel",sortable:!0,render:be=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Nivel ",be.nivel]})},{key:"semestre",label:"Semestre",sortable:!0,render:be=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[be.semestre," Semestre"]})},{key:"horas",label:"Horas",render:be=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[be.horas_teoricas+be.horas_practicas,"h"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["T: ",be.horas_teoricas,"h | P: ",be.horas_practicas,"h"]})]})},{key:"actions",label:"Acciones",render:be=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(be),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>W(be),className:"p-1.5 text-yellow-600 hover:bg-yellow-50 rounded-md transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(be.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ts,{className:"h-8 w-8 mr-3 text-green-600"}),"Gestin de Materias"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Administra el catlogo de materias del sistema"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(X,{variant:"outline",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>N(!0),children:"Importar"}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:te,children:"Nueva Materia"})]})]})}),e.jsxs(ge,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por nombre, cdigo o sigla...",value:n,onChange:be=>o(be.target.value),icon:e.jsx(Je,{className:"h-5 w-5 text-gray-400"})})}),e.jsx(X,{variant:"outline",icon:e.jsx(oa,{className:"h-4 w-4"}),onClick:()=>_(!p),children:"Filtros"}),e.jsx(X,{variant:"outline",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>N(!0),children:"Importar"}),e.jsx(X,{variant:"outline",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:Y,disabled:a,children:"Exportar"})]}),p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nivel"}),e.jsx(me,{type:"number",placeholder:"Filtrar por nivel...",value:V.nivel,onChange:be=>F(Se=>({...Se,nivel:be.target.value})),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Semestre"}),e.jsx(me,{type:"number",placeholder:"Filtrar por semestre...",value:V.semestre,onChange:be=>F(Se=>({...Se,semestre:be.target.value})),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:V.activa,onChange:be=>F(Se=>({...Se,activa:be.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"true",children:"Activas"}),e.jsx("option",{value:"false",children:"Inactivas"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(X,{variant:"outline",size:"sm",onClick:()=>{F({nivel:"",semestre:"",activa:""}),K()},children:"Limpiar Filtros"})})]})]}),e.jsxs(ge,{children:[e.jsx(es,{columns:oe,data:s,loading:a,emptyMessage:"No hay materias registradas"}),c>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar"}),e.jsxs("select",{value:g,onChange:be=>x(Number(be.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"por pgina"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",size:"sm",onClick:()=>l(be=>Math.max(1,be-1)),disabled:i===1,children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Pgina ",i," de ",c]}),e.jsx(X,{variant:"outline",size:"sm",onClick:()=>l(be=>Math.min(c,be+1)),disabled:i===c,children:"Siguiente"})]})]})]}),e.jsx(Pe,{isOpen:y,onClose:()=>w(!1),title:E?"Editar Materia":"Nueva Materia",size:"lg",children:e.jsxs("form",{onSubmit:ne(ee),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Cdigo de Materia",...ae("codigo_materia",{required:"El cdigo es obligatorio"}),error:(D=H.codigo_materia)==null?void 0:D.message,placeholder:"Ej: INF-101"}),e.jsx(me,{label:"Sigla",...ae("sigla",{required:"La sigla es obligatoria"}),error:(ie=H.sigla)==null?void 0:ie.message,placeholder:"Ej: PROG1"})]}),e.jsx(me,{label:"Nombre de la Materia",...ae("nombre",{required:"El nombre es obligatorio"}),error:(xe=H.nombre)==null?void 0:xe.message,placeholder:"Ej: Programacin I"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Horas Tericas",type:"number",min:"0",max:"10",...ae("horas_teoricas",{required:"Las horas tericas son obligatorias",min:0,max:10}),error:(Ee=H.horas_teoricas)==null?void 0:Ee.message}),e.jsx(me,{label:"Horas Prcticas",type:"number",min:"0",max:"10",...ae("horas_practicas",{required:"Las horas prcticas son obligatorias",min:0,max:10}),error:(he=H.horas_practicas)==null?void 0:he.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Nivel",type:"number",min:"1",max:"5",...ae("nivel",{required:"El nivel es obligatorio",min:1,max:5}),error:(Ne=H.nivel)==null?void 0:Ne.message}),e.jsx(me,{label:"Semestre",type:"number",min:"1",max:"10",...ae("semestre",{required:"El semestre es obligatorio",min:1,max:10}),error:(ue=H.semestre)==null?void 0:ue.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",children:E?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles de la Materia",size:"lg",children:f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white text-2xl font-bold",children:((j=(L=(J=f.data)==null?void 0:J.materia)==null?void 0:L.sigla)==null?void 0:j.substring(0,2))||"M"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:(h=(B=f.data)==null?void 0:B.materia)==null?void 0:h.nombre}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(T=(v=f.data)==null?void 0:v.materia)==null?void 0:T.codigo_materia," - ",(Q=(A=f.data)==null?void 0:A.materia)==null?void 0:Q.sigla]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Nivel"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2 text-gray-400"}),"Nivel ",(de=(re=f.data)==null?void 0:re.materia)==null?void 0:de.nivel]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Semestre"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Tw,{className:"h-4 w-4 mr-2 text-gray-400"}),(je=(ve=f.data)==null?void 0:ve.materia)==null?void 0:je.semestre," Semestre"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horas Tericas"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2 text-gray-400"}),(se=(le=f.data)==null?void 0:le.materia)==null?void 0:se.horas_teoricas," horas"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horas Prcticas"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2 text-gray-400"}),(ke=(pe=f.data)==null?void 0:pe.materia)==null?void 0:ke.horas_practicas," horas"]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total de Horas"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(((Ce=(_e=f.data)==null?void 0:_e.materia)==null?void 0:Ce.horas_teoricas)||0)+(((ss=($e=f.data)==null?void 0:$e.materia)==null?void 0:ss.horas_practicas)||0)," horas semanales"]})]}),((we=f.data)==null?void 0:we.estadisticas)&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.data.estadisticas.total_grupos}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Grupos"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.data.estadisticas.grupos_activos}),e.jsx("p",{className:"text-xs text-gray-600",children:"Grupos Activos"})]})]})]})]})}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),$(null),G.current&&(G.current.value="")},title:"Importar Materias",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-info-900 dark:text-info-100 mb-2",children:"Formato del archivo"}),e.jsx("p",{className:"text-sm text-info-700 dark:text-info-300 mb-2",children:"El archivo debe ser Excel (.xlsx, .xls) o CSV con las siguientes columnas:"}),e.jsxs("ul",{className:"text-sm text-info-700 dark:text-info-300 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"codigo_materia"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"nombre"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"sigla"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"horas_teoricas"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"horas_practicas"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"nivel"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"semestre"})," (opcional)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar archivo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{ref:G,type:"file",accept:".xlsx,.xls,.csv",onChange:Z,disabled:R,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),e.jsx(X,{type:"button",variant:"outline",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:U,children:"Template"})]})]}),R&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando materias..."})]}),I&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Resultado de la importacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-success-600",children:"Creados:"})," ",I.creados||0]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-info-600",children:"Actualizados:"})," ",I.actualizados||0]}),I.errores&&I.errores.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-semibold text-error-600 mb-2",children:"Errores:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:I.errores.map((be,Se)=>e.jsx("p",{className:"text-xs text-error-600",children:be},Se))})]})]})]})]})})]})},ct={async getAulas(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};s.search&&s.search.trim()!==""&&(r.search=s.search.trim()),s.tipo&&s.tipo!==""&&(r.tipo=s.tipo),s.edificio&&s.edificio.trim()!==""&&(r.edificio=s.edificio.trim()),s.activa!==void 0&&s.activa!==null&&s.activa!==""&&(r.activa=s.activa);const a=await ye("/aulas",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener aulas"}}catch(r){return{success:!1,message:r.message||"Error al obtener aulas"}}},async getAula(s){try{const r=await ye(`/aulas/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Aula no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener aula"}}},async createAula(s){var r,a,t,n;try{const o=await Me("/aulas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateAula(s,r){var a,t,n,o;try{const i=await Ze(`/aulas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteAula(s){var r,a;try{const t=await ts(`/aulas/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async getAulasDisponibles(s){try{const r=await ye("/aulas/disponibles",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener aulas disponibles"}}catch(r){return{success:!1,message:r.message||"Error al obtener aulas disponibles"}}},async getOcupacion(s,r={}){try{const a=await ye(`/aulas/${s}/ocupacion`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener ocupacin del aula"}}catch(a){return{success:!1,message:a.message||"Error al obtener ocupacin del aula"}}},async exportarAulas(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",tipo:s.tipo||"",edificio:s.edificio||"",activa:s.activa||""};n.search||delete n.search,n.tipo||delete n.tipo,n.edificio||delete n.edificio,n.activa===""&&delete n.activa;const o=await ye("/aulas",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Aulas exportadas exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar aulas"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar aulas"}}},async importarAulas(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await $o("/aulas/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Aulas importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar aulas",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar aulas",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},L1=()=>{var xe,Ee,he,Ne,ue,J,L,j,B,h,v,T,A,Q,re,de,ve,je,le,se,pe,ke,_e,Ce,$e,ss;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),[R,q]=u.useState(!1),[I,$]=u.useState(null),G=Be.useRef(null),[V,F]=u.useState({tipo:"",edificio:"",activa:""}),{register:ae,handleSubmit:ne,reset:ce,formState:{errors:H}}=We();u.useEffect(()=>{K()},[i,g,n,V]);const K=async()=>{var we,be;try{t(!0);const Se={page:i,per_page:g,search:n};V.tipo&&(Se.tipo=V.tipo),V.edificio&&(Se.edificio=V.edificio),V.activa!==""&&(Se.activa=V.activa);const Ae=await ct.getAulas(Se);Ae.success&&Ae.data?(r(Ae.data.data||[]),d(Ae.data.last_page||1)):(m.error(Ae.message||"Error al cargar aulas"),r([]),d(1))}catch(Se){const Ae=((be=(we=Se.response)==null?void 0:we.data)==null?void 0:be.message)||Se.message||"Error de conexin: No se pudo cargar las aulas";m.error(Ae),console.error("Error al cargar aulas:",Se),r([]),d(1)}finally{t(!1)}},te=()=>{b(null),ce({codigo_aula:"",nombre:"",capacidad:30,edificio:"",piso:1,tipo:"aula",activa:!0}),w(!0)},W=we=>{b(we),ce(we),w(!0)},O=async we=>{var be,Se;try{const Ae=await ct.getAula(we.id);P(Ae.data),S(!0)}catch(Ae){const Fe=((Se=(be=Ae.response)==null?void 0:be.data)==null?void 0:Se.message)||Ae.message||"Error al cargar los detalles del aula";m.error(Fe)}},z=async we=>{var be,Se;if(window.confirm("Est seguro de eliminar esta aula?"))try{const Ae=await ct.deleteAula(we);Ae.success?(m.success(Ae.message||"Aula eliminada exitosamente"),K()):m.error(Ae.message||"Error al eliminar el aula")}catch(Ae){const Fe=((Se=(be=Ae.response)==null?void 0:be.data)==null?void 0:Se.message)||Ae.message||"Error al eliminar el aula";m.error(Fe)}},Y=async()=>{var we,be;try{t(!0);const Se=await ct.exportarAulas({search:n,...V});if(Se.success&&Se.data&&Array.isArray(Se.data)){if(Se.data.length===0){m.error("No hay aulas para exportar");return}const Ae=Se.data.map(Fe=>({Cdigo:Fe.codigo_aula||"",Nombre:Fe.nombre||"",Edificio:Fe.edificio||"",Piso:Fe.piso||"",Capacidad:Fe.capacidad||0,Tipo:Fe.tipo||"",Estado:Fe.activa!==!1?"Activa":"Inactiva"}));Mt(Ae,`aulas_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${Ae.length} aulas exitosamente`)}else m.error(Se.message||"Error al exportar aulas: No se recibieron datos vlidos"),console.error("Error en exportacin:",Se)}catch(Se){console.error("Error al exportar aulas:",Se),m.error(((be=(we=Se.response)==null?void 0:we.data)==null?void 0:be.message)||Se.message||"Error al exportar aulas")}finally{t(!1)}},Z=async()=>{var be,Se,Ae,Fe;const we=(Se=(be=G.current)==null?void 0:be.files)==null?void 0:Se[0];if(!we){m.error("Por favor selecciona un archivo");return}if(!we.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}try{q(!0),$(null);const ze=await ct.importarAulas(we);ze.success?($({success:!0,message:ze.message||"Aulas importadas exitosamente",data:ze.data}),m.success(ze.message||"Aulas importadas exitosamente"),await K(),setTimeout(()=>{N(!1),$(null),G.current&&(G.current.value="")},2e3)):($({success:!1,message:ze.message||"Error al importar aulas",errors:ze.errors}),m.error(ze.message||"Error al importar aulas"))}catch(ze){const is=((Fe=(Ae=ze.response)==null?void 0:Ae.data)==null?void 0:Fe.message)||ze.message||"Error al importar aulas";$({success:!1,message:is}),m.error(is)}finally{q(!1)}},U=()=>{const we=`codigo_aula,nombre,edificio,piso,capacidad,tipo,activa
A-101,Aula 101,Edificio A,1,40,aula,true
LAB-201,Laboratorio 201,Edificio B,2,25,laboratorio,true
`,be=new Blob([we],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a");Se.href=URL.createObjectURL(be),Se.download="template_aulas.csv",Se.click()},ee=async we=>{var be,Se,Ae,Fe;try{const ze={...we,activa:we.activa==="true"||we.activa===!0||we.activa==="1"||we.activa===1,capacidad:parseInt(we.capacidad),piso:parseInt(we.piso)};let is;E?is=await ct.updateAula(E.id,ze):is=await ct.createAula(ze),is.success?(m.success(is.message||(E?"Aula actualizada exitosamente":"Aula creada exitosamente")),w(!1),K(),ce()):(m.error(is.message||"Error al guardar el aula"),is.errors&&Object.keys(is.errors).forEach(Os=>{m.error(`${Os}: ${is.errors[Os]}`)}))}catch(ze){const is=((Se=(be=ze.response)==null?void 0:be.data)==null?void 0:Se.message)||ze.message||"Error al guardar el aula";m.error(is),(Fe=(Ae=ze.response)==null?void 0:Ae.data)!=null&&Fe.errors&&Object.keys(ze.response.data.errors).forEach(Os=>{m.error(`${Os}: ${ze.response.data.errors[Os]}`)})}},oe=we=>{switch(we){case"laboratorio":return"bg-blue-100 text-blue-800";case"auditorio":return"bg-purple-100 text-purple-800";default:return"bg-green-100 text-green-800"}},D=we=>{switch(we){case"laboratorio":return"Laboratorio";case"auditorio":return"Auditorio";default:return"Aula"}},ie=[{key:"codigo_aula",label:"Cdigo",sortable:!0,render:we=>e.jsx("span",{className:"font-mono font-semibold text-purple-600",children:we.codigo_aula})},{key:"nombre",label:"Aula",sortable:!0,render:we=>{var be;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:((be=we.codigo_aula)==null?void 0:be.substring(0,1))||"A"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:we.nombre}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Dr,{className:"h-3 w-3 mr-1"}),"Edificio ",we.edificio," - Piso ",we.piso]})]})]})}},{key:"tipo",label:"Tipo",sortable:!0,render:we=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${oe(we.tipo)}`,children:D(we.tipo)})},{key:"capacidad",label:"Capacidad",sortable:!0,render:we=>e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[we.capacidad," personas"]})]})},{key:"activa",label:"Estado",render:we=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:we.activa?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:we=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(we),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>W(we),className:"p-1.5 text-yellow-600 hover:bg-yellow-50 rounded-md transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>z(we.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Dt,{className:"h-8 w-8 mr-3 text-purple-600"}),"Gestin de Aulas"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Administra las aulas y espacios fsicos del sistema"})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:te,children:"Nueva Aula"})]})}),e.jsxs(ge,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{type:"text",placeholder:"Buscar por cdigo, nombre o edificio...",value:n,onChange:we=>o(we.target.value),icon:e.jsx(Je,{className:"h-5 w-5 text-gray-400"})})}),e.jsx(X,{variant:"outline",icon:e.jsx(oa,{className:"h-4 w-4"}),onClick:()=>_(!p),children:"Filtros"}),e.jsx(X,{variant:"outline",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>N(!0),children:"Importar"}),e.jsx(X,{variant:"outline",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:Y,disabled:a,children:"Exportar"})]}),p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo"}),e.jsxs("select",{value:V.tipo,onChange:we=>F(be=>({...be,tipo:we.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"aula",children:"Aula"}),e.jsx("option",{value:"laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"auditorio",children:"Auditorio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Edificio"}),e.jsx(me,{type:"text",placeholder:"Filtrar por edificio...",value:V.edificio,onChange:we=>F(be=>({...be,edificio:we.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:V.activa,onChange:we=>F(be=>({...be,activa:we.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"true",children:"Activas"}),e.jsx("option",{value:"false",children:"Inactivas"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(X,{variant:"outline",size:"sm",onClick:()=>{F({tipo:"",edificio:"",activa:""}),K()},children:"Limpiar Filtros"})})]})]}),e.jsxs(ge,{children:[e.jsx(es,{columns:ie,data:s,loading:a,emptyMessage:"No hay aulas registradas"}),c>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar"}),e.jsxs("select",{value:g,onChange:we=>x(Number(we.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"por pgina"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",size:"sm",onClick:()=>l(we=>Math.max(1,we-1)),disabled:i===1,children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Pgina ",i," de ",c]}),e.jsx(X,{variant:"outline",size:"sm",onClick:()=>l(we=>Math.min(c,we+1)),disabled:i===c,children:"Siguiente"})]})]})]}),e.jsx(Pe,{isOpen:y,onClose:()=>w(!1),title:E?"Editar Aula":"Nueva Aula",size:"lg",children:e.jsxs("form",{onSubmit:ne(ee),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Cdigo de Aula",...ae("codigo_aula",{required:"El cdigo es obligatorio"}),error:(xe=H.codigo_aula)==null?void 0:xe.message,placeholder:"Ej: A-101"}),e.jsx(me,{label:"Nombre",...ae("nombre",{required:"El nombre es obligatorio"}),error:(Ee=H.nombre)==null?void 0:Ee.message,placeholder:"Ej: Aula 101"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(me,{label:"Edificio",...ae("edificio",{required:"El edificio es obligatorio"}),error:(he=H.edificio)==null?void 0:he.message,placeholder:"Ej: A"}),e.jsx(me,{label:"Piso",type:"number",min:"1",max:"10",...ae("piso",{required:"El piso es obligatorio",min:1,max:10}),error:(Ne=H.piso)==null?void 0:Ne.message}),e.jsx(me,{label:"Capacidad",type:"number",min:"1",max:"500",...ae("capacidad",{required:"La capacidad es obligatoria",min:1,max:500}),error:(ue=H.capacidad)==null?void 0:ue.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Aula"}),e.jsxs("select",{...ae("tipo",{required:"El tipo es obligatorio"}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"aula",children:"Aula"}),e.jsx("option",{value:"laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"auditorio",children:"Auditorio"})]}),H.tipo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.tipo.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{...ae("activa",{setValueAs:we=>we==="true"||we===!0||we==="1"||we===1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"true",children:"Activa"}),e.jsx("option",{value:"false",children:"Inactiva"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",children:E?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Aula",size:"lg",children:f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:((j=(L=(J=f.data)==null?void 0:J.aula)==null?void 0:L.codigo_aula)==null?void 0:j.substring(0,1))||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:(h=(B=f.data)==null?void 0:B.aula)==null?void 0:h.nombre}),e.jsx("p",{className:"text-sm text-gray-500",children:(T=(v=f.data)==null?void 0:v.aula)==null?void 0:T.codigo_aula})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Edificio"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2 text-gray-400"}),"Edificio ",(Q=(A=f.data)==null?void 0:A.aula)==null?void 0:Q.edificio]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Piso"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Iw,{className:"h-4 w-4 mr-2 text-gray-400"}),"Piso ",(de=(re=f.data)==null?void 0:re.aula)==null?void 0:de.piso]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Capacidad"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2 text-gray-400"}),(je=(ve=f.data)==null?void 0:ve.aula)==null?void 0:je.capacidad," personas"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tipo"}),e.jsx("p",{className:"font-medium",children:D((se=(le=f.data)==null?void 0:le.aula)==null?void 0:se.tipo)})]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${(ke=(pe=f.data)==null?void 0:pe.aula)!=null&&ke.activa?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),e.jsx("p",{className:`text-lg font-bold ${(Ce=(_e=f.data)==null?void 0:_e.aula)!=null&&Ce.activa?"text-green-600":"text-red-600"}`,children:(ss=($e=f.data)==null?void 0:$e.aula)!=null&&ss.activa?"Activa":"Inactiva"})]})]})}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),$(null),G.current&&(G.current.value="")},title:"Importar Aulas",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Selecciona un archivo CSV o Excel con las aulas. Puedes descargar el template para ver el formato requerido."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Archivo (CSV o Excel)"}),e.jsx("input",{ref:G,type:"file",accept:".csv,.xlsx,.xls",className:`block w-full text-sm text-gray-500 dark:text-gray-400
                file:mr-4 file:py-2 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary-500 file:text-white
                hover:file:bg-primary-600
                file:cursor-pointer
                border border-gray-300 dark:border-gray-600 rounded-lg`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(X,{variant:"outline",size:"sm",onClick:U,children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Descargar Template"]})}),R&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando aulas..."})]}),I&&e.jsxs("div",{className:`p-4 rounded-lg ${I.success?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("p",{className:`text-sm ${I.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:I.message}),I.errors&&e.jsx("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside",children:Object.entries(I.errors).map(([we,be])=>e.jsxs("li",{children:[we,": ",Array.isArray(be)?be.join(", "):be]},we))}),I.data&&e.jsxs("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:["Creados: ",I.data.creados||0]}),e.jsxs("p",{children:["Actualizados: ",I.data.actualizados||0]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{N(!1),$(null),G.current&&(G.current.value="")},children:"Cancelar"}),e.jsx(X,{variant:"primary",onClick:Z,disabled:R,children:R?"Importando...":"Importar"})]})]})})]})},dt={async getGrupos(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,sort_by:s.sort_by||"codigo",sort_direction:s.sort_direction||"asc"};s.search&&s.search.trim()!==""&&(r.search=s.search.trim()),s.gestion_id&&s.gestion_id!==""&&(r.gestion_id=s.gestion_id),s.materia_id&&s.materia_id!==""&&(r.materia_id=s.materia_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(r.activo=s.activo);const a=await ye("/admin/grupos",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener grupos"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupos"}}},async getGrupo(s){try{const r=await ye(`/admin/grupos/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Grupo no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupo"}}},async createGrupo(s){var r,a,t,n;try{const o=await Me("/admin/grupos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateGrupo(s,r){var a,t,n,o;try{const i=await Ze(`/admin/grupos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteGrupo(s){var r,a;try{const t=await ts(`/admin/grupos/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async getDatosFormulario(){var s,r;try{const a=await ye("/admin/grupos/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener datos del formulario"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener datos del formulario"}}},async getGruposPorGestion(s){try{const r=await ye("/admin/grupos",{gestion_id:s});return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener grupos de la gestin"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupos de la gestin"}}},async exportarGrupos(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",gestion_id:s.gestion_id||"",materia_id:s.materia_id||"",activo:s.activo||""};n.search||delete n.search,n.gestion_id||delete n.gestion_id,n.materia_id||delete n.materia_id,n.activo===""&&delete n.activo;const o=await ye("/admin/grupos",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Grupos exportados exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar grupos"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar grupos"}}},async importarGrupos(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await $o("/admin/grupos/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Grupos importados exitosamente"}:{success:!1,message:i.data.message||"Error al importar grupos",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar grupos",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},xx=()=>{var Ne,ue,J,L;const[s,r]=u.useState([]),[a,t]=u.useState({programas:[],modulos:[],docentes:[],horarios:[]}),[n,o]=u.useState(!0),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(""),[y,w]=u.useState(""),[k,S]=u.useState(1),[C,N]=u.useState(1),[p,_]=u.useState(10),[E,b]=u.useState(!1),[f,P]=u.useState(!1),[R,q]=u.useState(null),[I,$]=u.useState(null),[G,V]=u.useState([]),[F,ae]=u.useState({total:0,activos:0}),{register:ne,handleSubmit:ce,reset:H,formState:{errors:K},watch:te,trigger:W}=We({mode:"onChange"}),O=te("programa_id");u.useEffect(()=>{z()},[]),u.useEffect(()=>{Y()},[k,p,i,c,g,y]),u.useEffect(()=>{O&&a.programas.length>0},[O,a]);const z=async()=>{var j,B,h,v,T,A,Q,re;try{console.log(" Iniciando carga de datos del formulario...");const de=await dt.getDatosFormulario();console.log(" Respuesta completa del servicio:",de),de.success&&de.data?(console.log(" Datos del formulario cargados:",de.data),console.log(" Programas:",((j=de.data.programas)==null?void 0:j.length)||0),console.log(" Mdulos:",((B=de.data.modulos)==null?void 0:B.length)||0),console.log(" Docentes:",((h=de.data.docentes)==null?void 0:h.length)||0),console.log(" Horarios:",((v=de.data.horarios)==null?void 0:v.length)||0),t({programas:Array.isArray(de.data.programas)?de.data.programas:[],modulos:Array.isArray(de.data.modulos)?de.data.modulos:[],docentes:Array.isArray(de.data.docentes)?de.data.docentes:[],horarios:Array.isArray(de.data.horarios)?de.data.horarios:[]})):(console.error(" Error en respuesta:",de),m.error(de.message||"Error al cargar datos del formulario"))}catch(de){console.error(" Error al cargar datos del formulario:",de),console.error(" Detalles del error:",{message:de.message,response:(T=de.response)==null?void 0:T.data,status:(A=de.response)==null?void 0:A.status});const ve=((re=(Q=de.response)==null?void 0:Q.data)==null?void 0:re.message)||de.message||"Error al cargar datos del formulario";m.error(ve)}},Y=async()=>{var j;try{o(!0);const B=await dt.getGrupos({page:k,per_page:p,search:i,programa_id:c||void 0,modulo_id:g||void 0,docente_id:y||void 0});B.success&&B.data?(r(B.data.data||[]),N(B.data.last_page||1),ae({total:B.data.total||0,activos:((j=B.data.data)==null?void 0:j.filter(h=>h.fecha_fin?new Date(h.fecha_fin)>=new Date:!1).length)||0})):m.error(B.message||"Error al cargar grupos")}catch{m.error("Error al cargar grupos")}finally{o(!1)}},Z=()=>{V([...G,{horario_id:"",aula:""}])},U=j=>{V(G.filter((B,h)=>h!==j))},ee=(j,B,h)=>{const v=[...G];v[j][B]=h,V(v)},oe=async j=>{var B,h,v,T;if(!j.fecha_ini){m.error("La fecha de inicio es obligatoria");return}if(!j.fecha_fin){m.error("La fecha de fin es obligatoria");return}if(j.fecha_fin<=j.fecha_ini){m.error("La fecha de fin debe ser mayor a la fecha de inicio");return}if(!j.programa_id){m.error("El programa es obligatorio");return}if(!j.modulo_id){m.error("El mdulo es obligatorio");return}if(!j.docente_id){m.error("El docente es obligatorio");return}try{o(!0);const A={fecha_ini:j.fecha_ini,fecha_fin:j.fecha_fin,programa_id:parseInt(j.programa_id),modulo_id:parseInt(j.modulo_id),docente_id:parseInt(j.docente_id),horarios:G.filter(re=>re.horario_id).map(re=>({horario_id:parseInt(re.horario_id),aula:re.aula&&re.aula.trim()!==""?re.aula.trim():null}))};let Q;if(R){const re=R.grupo_id||R.id;if(!re){m.error("No se pudo identificar el grupo. Por favor, recarga la pgina."),o(!1);return}Q=await dt.updateGrupo(re,A)}else Q=await dt.createGrupo(A);Q.success?(m.success(Q.message||(R?"Grupo actualizado exitosamente":"Grupo creado exitosamente")),b(!1),H(),q(null),V([]),await Y()):(m.error(Q.message||"Error al guardar grupo"),Q.errors&&(Array.isArray(Q.errors)?Q.errors:Object.values(Q.errors).flat()).forEach(de=>{typeof de=="string"&&de.trim()?m.error(de,{duration:4e3}):Array.isArray(de)&&de.length>0&&m.error(de[0],{duration:4e3})}))}catch(A){const Q=((h=(B=A.response)==null?void 0:B.data)==null?void 0:h.message)||A.message||"Error al guardar grupo";if(m.error(Q),(T=(v=A.response)==null?void 0:v.data)!=null&&T.errors){const re=A.response.data.errors;(Array.isArray(re)?re:Object.values(re).flat()).forEach(ve=>{typeof ve=="string"&&ve.trim()?m.error(ve,{duration:4e3}):Array.isArray(ve)&&ve.length>0&&m.error(ve[0],{duration:4e3})})}}finally{o(!1)}},D=async j=>{var h,v,T,A,Q;const B=j.grupo_id||j.id;if(!B){m.error("No se pudo identificar el grupo");return}try{o(!0);const re=await dt.getGrupo(B);if(re.success){const de=re.data;q(de);const ve=de.fecha_ini?typeof de.fecha_ini=="string"?de.fecha_ini.split("T")[0]:de.fecha_ini:"",je=de.fecha_fin?typeof de.fecha_fin=="string"?de.fecha_fin.split("T")[0]:de.fecha_fin:"";H({fecha_ini:ve,fecha_fin:je,programa_id:((h=de.programa_id)==null?void 0:h.toString())||"",modulo_id:((v=de.modulo_id)==null?void 0:v.toString())||"",docente_id:((T=de.docente_id)==null?void 0:T.toString())||""}),de.horarios&&de.horarios.length>0?V(de.horarios.map(le=>{var se,pe;return{horario_id:((se=le.horario_id||le.id)==null?void 0:se.toString())||"",aula:((pe=le.pivot)==null?void 0:pe.aula)||""}})):V([]),b(!0)}else m.error(re.message||"Error al cargar datos del grupo")}catch(re){const de=((Q=(A=re.response)==null?void 0:A.data)==null?void 0:Q.message)||re.message||"Error al cargar datos del grupo";m.error(de)}finally{o(!1)}},ie=async j=>{var h,v;const B=j.grupo_id||j.id;if(!B){m.error("No se pudo identificar el grupo");return}try{const T=await dt.getGrupo(B);T.success?($(T.data),P(!0)):m.error(T.message||"Error al cargar detalles del grupo")}catch(T){const A=((v=(h=T.response)==null?void 0:h.data)==null?void 0:v.message)||T.message||"Error al cargar detalles del grupo";m.error(A)}},xe=async j=>{var T,A,Q,re;const B=j.grupo_id||j.id;if(!B){m.error("No se pudo identificar el grupo");return}const h=((T=j.programa)==null?void 0:T.nombre)||"N/A",v=((A=j.modulo)==null?void 0:A.nombre)||"N/A";if(window.confirm(`Est seguro de eliminar el grupo "${h} - ${v}"?`))try{const de=await dt.deleteGrupo(B);de.success?(m.success(de.message),Y()):m.error(de.message)}catch(de){const ve=((re=(Q=de.response)==null?void 0:Q.data)==null?void 0:re.message)||de.message||"Error al eliminar grupo";m.error(ve)}},Ee=()=>{q(null),H({fecha_ini:"",fecha_fin:"",programa_id:"",modulo_id:"",docente_id:""}),V([]),b(!0)},he=[{key:"programa",label:"Programa",render:j=>{var B;return((B=j.programa)==null?void 0:B.nombre)||"N/A"}},{key:"modulo",label:"Mdulo",render:j=>{var B;return((B=j.modulo)==null?void 0:B.nombre)||"N/A"}},{key:"docente",label:"Docente",render:j=>j.docente&&`${j.docente.nombre||""} ${j.docente.apellido||""}`.trim()||"N/A"},{key:"fecha_ini",label:"Fecha Inicio",render:j=>j.fecha_ini?new Date(j.fecha_ini).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"},{key:"fecha_fin",label:"Fecha Fin",render:j=>j.fecha_fin?new Date(j.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"},{key:"estudiantes_count",label:"Estudiantes",render:j=>j.estudiantes_count||0},{key:"actions",label:"Acciones",render:j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),ie(j)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),D(j)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),xe(j)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(fs,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Grupos de Enseanza"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de grupos con asignacin de programa, mdulo, docente y horarios"})]}),e.jsx(X,{onClick:Ee,icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Nuevo Grupo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Grupos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:F.total})]}),e.jsx(Cs,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ge,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Grupos Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:F.activos})]}),e.jsx(Le,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ge,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(me,{type:"text",placeholder:"Buscar por programa, mdulo o docente...",value:i,onChange:j=>{l(j.target.value),S(1)},icon:Je})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:j=>{d(j.target.value),S(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los programas"}),a.programas&&a.programas.length>0&&a.programas.map(j=>e.jsx("option",{value:j.id,children:j.nombre},j.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:j=>{w(j.target.value),S(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los docentes"}),a.docentes&&a.docentes.length>0&&a.docentes.map(j=>e.jsx("option",{value:j.id,children:j.nombre_completo},j.id))]})})]})}),e.jsx(ge,{children:e.jsx(es,{columns:he,data:s,loading:n,currentPage:k,totalPages:C,onPageChange:S,perPage:p,onPerPageChange:_})}),e.jsx(Pe,{isOpen:E,onClose:()=>{b(!1),q(null),V([]),H()},title:R?"Editar Grupo":"Nuevo Grupo",size:"xl",children:e.jsxs("form",{onSubmit:ce(oe),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa *"}),e.jsxs("select",{...ne("programa_id",{required:"El programa es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar programa..."}),Array.isArray(a.programas)&&a.programas.length>0?a.programas.map(j=>e.jsx("option",{value:j.id||j.programa_id,children:j.nombre||"Sin nombre"},j.id||j.programa_id)):e.jsx("option",{value:"",disabled:!0,children:n?"Cargando programas...":"No hay programas disponibles"})]}),K.programa_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.programa_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mdulo *"}),e.jsxs("select",{...ne("modulo_id",{required:"El mdulo es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar mdulo..."}),Array.isArray(a.modulos)&&a.modulos.length>0?a.modulos.map(j=>{const B=j.id||j.modulo_id;return e.jsxs("option",{value:B,children:[j.nombre||"Sin nombre"," (",j.credito||0," crditos)"]},B)}):e.jsx("option",{value:"",disabled:!0,children:n?"Cargando mdulos...":"No hay mdulos disponibles"})]}),K.modulo_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.modulo_id.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente Responsable *"}),e.jsxs("select",{...ne("docente_id",{required:"El docente es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),Array.isArray(a.docentes)&&a.docentes.length>0?a.docentes.map(j=>e.jsxs("option",{value:j.id,children:[j.nombre_completo||`${j.nombre||""} ${j.apellido||""}`.trim()," - CI: ",j.ci||"N/A"]},j.id)):e.jsx("option",{value:"",disabled:!0,children:n?"Cargando docentes...":"No hay docentes disponibles"})]}),K.docente_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.docente_id.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio *"}),e.jsx(me,{type:"date",...ne("fecha_ini",{required:"La fecha de inicio es requerida"}),error:(Ne=K.fecha_ini)==null?void 0:Ne.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin *"}),e.jsx(me,{type:"date",...ne("fecha_fin",{required:"La fecha de fin es requerida",validate:j=>{const B=te("fecha_ini");return B&&j&&j<=B?"La fecha de fin debe ser mayor a la fecha de inicio":!0}}),error:(ue=K.fecha_fin)==null?void 0:ue.message,onBlur:()=>W("fecha_fin")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Horarios del Grupo"}),e.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:Z,icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Agregar Horario"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[G.map((j,B)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Horario ",B+1]}),e.jsx("button",{type:"button",onClick:()=>U(B),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(nr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("select",{value:j.horario_id,onChange:h=>ee(B,"horario_id",h.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),a.horarios&&a.horarios.length>0?a.horarios.filter(h=>!G.some((v,T)=>T!==B&&v.horario_id===h.id.toString())).map(h=>{var re,de;const v=h.hora_ini_formatted||h.hora_ini||"N/A",T=h.hora_fin_formatted||h.hora_fin||"N/A",A=typeof v=="string"&&v.includes("T")?(re=v.split("T")[1])==null?void 0:re.substring(0,5):typeof v=="string"?v.substring(0,5):"N/A",Q=typeof T=="string"&&T.includes("T")?(de=T.split("T")[1])==null?void 0:de.substring(0,5):typeof T=="string"?T.substring(0,5):"N/A";return e.jsxs("option",{value:h.id,children:[h.dias," - ",A," a ",Q]},h.id)}):e.jsx("option",{value:"",disabled:!0,children:"Cargando horarios..."})]})}),e.jsx("div",{children:e.jsx(me,{type:"text",placeholder:"Aula (opcional)",value:j.aula,onChange:h=>ee(B,"aula",h.target.value)})})]})]},B)),G.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay horarios agregados. Haga clic en "Agregar Horario" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{b(!1),q(null),V([]),H()},children:"Cancelar"}),e.jsx(X,{type:"submit",children:R?"Actualizar":"Crear"})]})]})}),e.jsx(Pe,{isOpen:f,onClose:()=>{P(!1),$(null)},title:"Detalles del Grupo",size:"xl",children:I&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((J=I.programa)==null?void 0:J.nombre)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Mdulo"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((L=I.modulo)==null?void 0:L.nombre)||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Docente Responsable"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:I.docente?`${I.docente.nombre} ${I.docente.apellido}`:"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:I.fecha_ini||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:I.fecha_fin||"N/A"})]})]}),I.horarios&&I.horarios.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Horarios Asociados (",I.horarios.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:I.horarios.map(j=>{var B;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:j.dias}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:(()=>{var Q,re;const h=j.hora_ini_formatted||j.hora_ini,v=j.hora_fin_formatted||j.hora_fin;let T="N/A",A="N/A";return h&&typeof h=="string"&&(h.includes("T")?T=((Q=h.split("T")[1])==null?void 0:Q.substring(0,5))||h.substring(0,5):T=h.substring(0,5)),v&&typeof v=="string"&&(v.includes("T")?A=((re=v.split("T")[1])==null?void 0:re.substring(0,5))||v.substring(0,5):A=v.substring(0,5)),`${T} - ${A}`})()}),((B=j.pivot)==null?void 0:B.aula)&&e.jsxs("span",{children:["Aula: ",j.pivot.aula]})]})]},j.horario_id||j.id)})})]}),I.estudiantes&&I.estudiantes.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Estudiantes Asignados (",I.estudiantes.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:I.estudiantes.map(j=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[j.nombre," ",j.apellido]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["CI: ",j.ci]})]},j.registro_estudiante||j.id))})]})]})})]})},hx={async getHorarios(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"dia",sort_direction:s.sort_direction||"asc",gestion_id:s.gestion_id||"",docente_id:s.docente_id||"",grupo_id:s.grupo_id||"",aula_id:s.aula_id||"",dia:s.dia||"",estado:s.estado||""},a=await ye("/horarios",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener horarios"}}catch(r){return{success:!1,message:r.message||"Error al obtener horarios"}}},async getHorario(s){try{const r=await ye(`/horarios/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Horario no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener horario"}}},async createHorario(s){var r,a,t,n;try{const o=await Me("/horarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateHorario(s,r){var a,t,n,o;try{const i=await Ze(`/horarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteHorario(s){var r,a;try{const t=await ts(`/horarios/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async validarHorario(s){try{const r=await Me("/horarios/validar",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error en la validacin"}}catch(r){return{success:!1,message:r.message||"Error en la validacin"}}},async getHorarioSemanal(s={}){try{const r=await ye("/horarios/semanal",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener horario semanal"}}catch(r){return{success:!1,message:r.message||"Error al obtener horario semanal"}}},async getHorariosDocente(s,r={}){try{const a=await ye(`/horarios/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del docente"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del docente"}}},async getHorariosGrupo(s,r={}){try{const a=await ye(`/horarios/grupo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del grupo"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del grupo"}}},async getHorariosAula(s,r={}){try{const a=await ye(`/horarios/aula/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del aula"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del aula"}}},async verificarConflictos(s){try{const r=await Me("/horarios/verificar-conflictos",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al verificar conflictos"}}catch(r){return{success:!1,message:r.message||"Error al verificar conflictos"}}},async getDisponibilidadDocente(s,r){try{const a=await Me(`/horarios/disponibilidad/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar disponibilidad"}}catch(a){return{success:!1,message:a.message||"Error al verificar disponibilidad"}}},async getDisponibilidadAula(s,r){try{const a=await Me(`/horarios/disponibilidad/aula/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar disponibilidad"}}catch(a){return{success:!1,message:a.message||"Error al verificar disponibilidad"}}},async duplicarHorarios(s){try{const r=await Me("/horarios/duplicar",s);return r.data.success?{success:!0,data:r.data.data,message:"Horarios duplicados exitosamente"}:{success:!1,message:r.data.message||"Error al duplicar horarios"}}catch(r){return{success:!1,message:r.message||"Error al duplicar horarios"}}},async exportarHorarios(s={}){try{const r=await ye("/horarios/export",s,{responseType:"blob"});return r.data?{success:!0,data:r.data,message:M.SUCCESS.EXPORT}:{success:!1,message:"Error al exportar horarios"}}catch(r){return{success:!1,message:r.message||M.ERROR.EXPORT}}},async getEstadisticas(s={}){try{const r=await ye("/horarios/estadisticas",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener estadsticas"}}catch(r){return{success:!1,message:r.message||"Error al obtener estadsticas"}}},async generarAutomatico(s={}){try{const r=await Me("/horarios/generar-automatico",s);return r.data.success?{success:!0,data:r.data.data,message:r.data.message||"Horarios generados exitosamente"}:{success:!1,message:r.data.message||"Error al generar horarios automticamente"}}catch(r){return{success:!1,message:r.message||"Error al generar horarios automticamente"}}}},Da={async registrarAsistencia(s){var r,a,t,n;try{const o=await Me("/asistencias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Asistencia registrada exitosamente"}:{success:!1,message:o.data.message||"Error al registrar asistencia",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al registrar asistencia",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async registrarConGeolocalizacion(s){var r,a;try{const t=await Me("/asistencias/geolocalizacion",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Asistencia registrada exitosamente mediante geolocalizacin"}:{success:!1,message:t.data.message||"Error al registrar asistencia con geolocalizacin"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al registrar asistencia con geolocalizacin"}}},async registrarConQR(s,r={}){try{const a=await Me("/asistencias/qr",{codigo_qr:s,...r});return a.data.success?{success:!0,data:a.data.data,message:"Asistencia registrada exitosamente"}:{success:!1,message:a.data.message||"Error al registrar asistencia"}}catch(a){return{success:!1,message:a.message||"Error al registrar asistencia"}}},async generarQR(s,r){var a,t;try{const n=await ye(`/asistencias/generar-qr/${s}`);return n.data.success?{success:!0,data:n.data.data,message:"Cdigo QR generado exitosamente"}:{success:!1,message:n.data.message||"Error al generar cdigo QR"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al generar cdigo QR"}}},async getAsistencias(s={}){try{const r={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"fecha",sort_direction:s.sort_direction||"desc",gestion_id:s.gestion_id||"",docente_id:s.docente_id||"",grupo_id:s.grupo_id||"",materia_id:s.materia_id||"",fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||"",estado:s.estado||""},a=await ye("/asistencias",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener asistencias"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencias"}}},async getAsistencia(s){try{const r=await ye(`/asistencias/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Asistencia no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencia"}}},async updateAsistencia(s,r){try{const a=await Ze(`/asistencias/${s}`,r);return a.data.success?{success:!0,data:a.data.data,message:M.SUCCESS.UPDATE}:{success:!1,message:a.data.message||M.ERROR.UPDATE}}catch(a){return{success:!1,message:a.message||M.ERROR.UPDATE}}},async deleteAsistencia(s){try{const r=await ts(`/asistencias/${s}`);return r.data.success?{success:!0,message:M.SUCCESS.DELETE}:{success:!1,message:r.data.message||M.ERROR.DELETE}}catch(r){return{success:!1,message:r.message||M.ERROR.DELETE}}},async getEstadisticas(s={}){try{const r=await ye("/asistencias/estadisticas",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener estadsticas"}}catch(r){return{success:!1,message:r.message||"Error al obtener estadsticas"}}},async getAsistenciasDocente(s,r={}){try{const a=await ye(`/asistencias/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias del docente"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias del docente"}}},async getAsistenciasGrupo(s,r={}){try{const a=await ye(`/asistencias/grupo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias del grupo"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias del grupo"}}},async getAsistenciasMateria(s,r={}){try{const a=await ye(`/asistencias/materia/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias de la materia"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias de la materia"}}},async getAsistenciasHoy(s={}){try{const r=await ye("/asistencias/hoy",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener asistencias del da"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencias del da"}}},async verificarAsistenciaExistente(s,r){try{const a=await ye(`/asistencias/verificar/${s}/${r}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar asistencia"}}catch(a){return{success:!1,message:a.message||"Error al verificar asistencia"}}},async getResumenAsistencias(s={}){try{const r=await ye("/asistencias/resumen",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener resumen"}}catch(r){return{success:!1,message:r.message||"Error al obtener resumen"}}},async exportarAsistencias(s={}){try{const r=await ye("/asistencias/export",s,{responseType:"blob"});return r.data?{success:!0,data:r.data,message:M.SUCCESS.EXPORT}:{success:!1,message:"Error al exportar asistencias"}}catch(r){return{success:!1,message:r.message||M.ERROR.EXPORT}}},async getQRActivos(s={}){try{const r=await ye("/asistencias/qr-activos",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener cdigos QR activos"}}catch(r){return{success:!1,message:r.message||"Error al obtener cdigos QR activos"}}},async invalidarQR(s){try{const r=await Me("/asistencias/invalidar-qr",{codigo_qr:s});return r.data.success?{success:!0,message:"Cdigo QR invalidado exitosamente"}:{success:!1,message:r.data.message||"Error al invalidar cdigo QR"}}catch(r){return{success:!1,message:r.message||"Error al invalidar cdigo QR"}}}},z1=({isOpen:s,onClose:r,horario:a,docente:t,docenteId:n,fecha:o,onSuccess:i})=>{var $,G,V,F;const[l,c]=u.useState(null),[d,g]=u.useState(!1),[x,y]=u.useState(!1),[w,k]=u.useState(null),[S,C]=u.useState(null),[N,p]=u.useState(""),[_,E]=u.useState(!1),[b,f]=u.useState({latitud:"",longitud:""});u.useEffect(()=>{s&&a&&P()},[s,a]);const P=()=>{if(g(!0),k(null),E(!1),!navigator.geolocation){k("La geolocalizacin no est disponible en tu dispositivo. Por favor, ingresa las coordenadas manualmente."),g(!1),E(!0);return}if(!(window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1")){k("La geolocalizacin solo funciona en conexiones HTTPS o en localhost. Por favor, ingresa las coordenadas manualmente o accede desde localhost."),g(!1),E(!0);return}navigator.geolocation.getCurrentPosition(ne=>{const ce={latitud:ne.coords.latitude,longitud:ne.coords.longitude,precision:ne.coords.accuracy};c(ce),g(!1),E(!1)},ne=>{let ce="Error al obtener ubicacin";switch(ne.code){case ne.PERMISSION_DENIED:ce="Permiso de geolocalizacin denegado. Por favor, ingresa las coordenadas manualmente.";break;case ne.POSITION_UNAVAILABLE:ce="La informacin de ubicacin no est disponible. Por favor, ingresa las coordenadas manualmente.";break;case ne.TIMEOUT:ce="Tiempo de espera agotado. Por favor, intenta nuevamente o ingresa las coordenadas manualmente.";break;default:ne.message&&ne.message.includes("secure")?ce="La geolocalizacin requiere HTTPS o localhost. Por favor, ingresa las coordenadas manualmente.":ce=`Error: ${ne.message}. Por favor, ingresa las coordenadas manualmente.`}k(ce),g(!1),E(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},R=async()=>{const ae=(t==null?void 0:t.id)||n||(a==null?void 0:a.docente_id);if(!a||!ae){m.error("Faltan datos para registrar la asistencia. Por favor, selecciona un horario.");return}let ne,ce;if(_&&b.latitud&&b.longitud){if(ne=parseFloat(b.latitud),ce=parseFloat(b.longitud),isNaN(ne)||isNaN(ce)){m.error("Las coordenadas deben ser nmeros vlidos");return}if(ne<-90||ne>90){m.error("La latitud debe estar entre -90 y 90");return}if(ce<-180||ce>180){m.error("La longitud debe estar entre -180 y 180");return}}else if(l)ne=l.latitud,ce=l.longitud;else{m.error("Debes proporcionar las coordenadas (automticas o manuales)");return}y(!0);try{const H={horario_id:a.id,docente_id:ae,fecha:o||new Date().toISOString().split("T")[0],latitud:ne,longitud:ce,observaciones:N+(_?" (Coordenadas ingresadas manualmente)":"")},K=await Da.registrarConGeolocalizacion(H);K.success?(m.success("Asistencia registrada exitosamente con geolocalizacin"),i&&i(K.data),r(),q()):m.error(K.message||"Error al registrar asistencia")}catch{m.error("Error al registrar asistencia con geolocalizacin")}finally{y(!1)}},q=()=>{c(null),k(null),C(null),p(""),E(!1),f({latitud:"",longitud:""})},I=()=>{q(),r()};return e.jsx(Pe,{isOpen:s,onClose:I,title:"Registrar Asistencia con Geolocalizacin",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[w&&e.jsxs("div",{className:"p-4 bg-error-50 dark:bg-error-900/20 border border-error-200 dark:border-error-800 rounded-xl flex items-start space-x-3",children:[e.jsx(Nr,{className:"h-5 w-5 text-error-600 dark:text-error-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-error-900 dark:text-error-100",children:"Error de geolocalizacin"}),e.jsx("p",{className:"text-sm text-error-700 dark:text-error-300 mt-1",children:w})]})]}),a&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Informacin del Horario"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Materia:"})," ",((G=($=a.grupo)==null?void 0:$.materia)==null?void 0:G.nombre)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Grupo:"})," ",((V=a.grupo)==null?void 0:V.numero_grupo)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Aula:"})," ",((F=a.aula)==null?void 0:F.nombre)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Hora:"})," ",a.hora_inicio," - ",a.hora_fin]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ubicacin Actual"}),d?e.jsxs("div",{className:"flex items-center justify-center p-8 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Obteniendo ubicacin..."})]}):l?e.jsx("div",{className:"p-4 bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-800 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Dr,{className:"h-5 w-5 text-success-600 dark:text-success-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-success-900 dark:text-success-100",children:"Ubicacin obtenida"}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-success-700 dark:text-success-300",children:[e.jsxs("p",{children:["Latitud: ",l.latitud.toFixed(6)]}),e.jsxs("p",{children:["Longitud: ",l.longitud.toFixed(6)]}),e.jsxs("p",{children:["Precisin: ",l.precision.toFixed(0)," metros"]})]})]})]})}):e.jsx("div",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-xl",children:e.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-300",children:"No se pudo obtener la ubicacin. Por favor, intenta nuevamente."})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{onClick:P,variant:"outline",size:"sm",icon:e.jsx(Dr,{className:"h-4 w-4"}),disabled:d,children:"Intentar Obtener Ubicacin"}),e.jsx(X,{onClick:()=>{E(!0),k(null)},variant:"outline",size:"sm",icon:e.jsx(D0,{className:"h-4 w-4"}),children:"Ingresar Manualmente"})]}),_&&e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 border border-info-200 dark:border-info-800 rounded-xl space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Nr,{className:"h-5 w-5 text-info-600 dark:text-info-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-info-900 dark:text-info-100 mb-2",children:"Ingreso Manual de Coordenadas"}),e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300 mb-4",children:"Ingresa las coordenadas GPS del aula. Puedes obtenerlas usando una aplicacin de mapas o GPS."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{label:"Latitud",type:"number",step:"any",value:b.latitud,onChange:ae=>f(ne=>({...ne,latitud:ae.target.value})),placeholder:"Ej: -17.8321",error:b.latitud&&(parseFloat(b.latitud)<-90||parseFloat(b.latitud)>90)?"La latitud debe estar entre -90 y 90":""}),e.jsx(me,{label:"Longitud",type:"number",step:"any",value:b.longitud,onChange:ae=>f(ne=>({...ne,longitud:ae.target.value})),placeholder:"Ej: -63.1528",error:b.longitud&&(parseFloat(b.longitud)<-180||parseFloat(b.longitud)>180)?"La longitud debe estar entre -180 y 180":""})]}),(a==null?void 0:a.aula)&&a.aula.latitud&&a.aula.longitud&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Coordenadas del Aula (referencia):"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Lat: ",a.aula.latitud,", Lon: ",a.aula.longitud]}),e.jsx(X,{onClick:()=>{f({latitud:a.aula.latitud.toString(),longitud:a.aula.longitud.toString()})},variant:"ghost",size:"sm",className:"mt-2 text-xs",children:"Usar coordenadas del aula"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones (opcional)"}),e.jsx("textarea",{value:N,onChange:ae=>p(ae.target.value),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Ingresa cualquier observacin relevante..."})]}),S&&e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-info-700 dark:text-info-300",children:["Distancia al aula: ",S.toFixed(2)," metros"]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:I,disabled:x,children:"Cancelar"}),e.jsx(X,{variant:"primary",onClick:R,disabled:!l&&!_||_&&(!b.latitud||!b.longitud)||x,loading:x,icon:e.jsx(ha,{className:"h-4 w-4"}),children:"Registrar Asistencia"})]})]})})},U1=({onScan:s,onClose:r})=>{const[a,t]=u.useState(!1),[n,o]=u.useState(null),[i,l]=u.useState(""),c=u.useRef(null),d=u.useRef(null),{user:g}=Es();u.useEffect(()=>()=>{d.current&&d.current.getTracks().forEach(S=>S.stop())},[]);const x=async()=>{try{if(o(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){o("Tu navegador no soporta el acceso a la cmara. Puedes ingresar el cdigo manualmente.");return}const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});d.current=S,c.current&&(c.current.srcObject=S,t(!0))}catch(S){console.error("Error al acceder a la cmara:",S),o("No se pudo acceder a la cmara. Puedes ingresar el cdigo manualmente.")}},y=()=>{d.current&&(d.current.getTracks().forEach(S=>S.stop()),d.current=null),t(!1),c.current&&(c.current.srcObject=null)},w=()=>{if(!i.trim()){m.error("Ingresa el cdigo QR");return}k(i.trim())},k=async S=>{try{const C=await Da.registrarConQR(S,{observaciones:"Registrado mediante escner QR"});C.success?(m.success("Asistencia registrada exitosamente mediante QR"),s&&s(S),y()):m.error(C.message||"Error al registrar asistencia")}catch(C){m.error("Error al procesar el cdigo QR"),console.error("Error al escanear QR:",C)}};return e.jsxs("div",{className:"space-y-4",children:[n&&e.jsx("div",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-xl",children:e.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-300",children:n})}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden",style:{aspectRatio:"1"},children:[e.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"border-4 border-primary-500 rounded-lg",style:{width:"70%",height:"70%"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-primary-500"}),e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-primary-500"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-primary-500"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-primary-500"})]})})]}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300 text-center",children:"Apunta la cmara hacia el cdigo QR. El escaneo es automtico."})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{onClick:y,variant:"outline",fullWidth:!0,icon:e.jsx(nr,{className:"h-5 w-5"}),children:"Detener Escner"}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:i,onChange:S=>l(S.target.value),placeholder:"O ingresa cdigo manualmente...",className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onKeyPress:S=>{S.key==="Enter"&&w()}})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx(gn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Inicia el escner para leer el cdigo QR"}),e.jsx(X,{onClick:x,variant:"primary",icon:e.jsx(Cw,{className:"h-5 w-5"}),children:"Iniciar Escner"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center",children:"O ingresa el cdigo manualmente"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:i,onChange:S=>l(S.target.value),placeholder:"Pega el cdigo QR aqu...",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onKeyPress:S=>{S.key==="Enter"&&w()}}),e.jsx(X,{onClick:w,variant:"primary",icon:e.jsx(ha,{className:"h-5 w-5"}),disabled:!i.trim(),children:"Registrar"})]})]})]})]})},fx=()=>{var h,v,T,A,Q,re,de,ve,je,le;const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState(!0),[o,i]=u.useState(""),[l,c]=u.useState(1),[d,g]=u.useState(1),[x,y]=u.useState(10),[w,k]=u.useState(!1),[S,C]=u.useState(!1),[N,p]=u.useState(!1),[_,E]=u.useState(!1),[b,f]=u.useState(!1),[P,R]=u.useState(null),[q,I]=u.useState(null),[$,G]=u.useState(null),[V,F]=u.useState(null),[ae,ne]=u.useState([]),[ce,H]=u.useState([]),[K,te]=u.useState(!1),[W,O]=u.useState(null),{register:z,handleSubmit:Y,reset:Z,formState:{errors:U},getValues:ee}=We();u.useEffect(()=>{oe(),(s==null?void 0:s.rol)==="docente"?D():(ie(),xe())},[l,x,o,s]);const oe=async()=>{var se,pe;try{n(!0);const ke=await Da.getAsistencias({page:l,per_page:x,search:o});if(ke.success&&ke.data){const _e=ke.data.data||[];a(_e),g(ke.data.last_page||1)}else m.error(ke.message||"Error al cargar asistencias"),a([])}catch(ke){const _e=((pe=(se=ke.response)==null?void 0:se.data)==null?void 0:pe.message)||ke.message||"Error de conexin: No se pudo cargar las asistencias";m.error(_e),console.error("Error al cargar asistencias:",ke),a([])}finally{n(!1)}},D=async()=>{var se,pe,ke;try{const _e=await Ta.getDocentes({search:s.email});if(_e.success&&((pe=(se=_e.data)==null?void 0:se.data)==null?void 0:pe.length)>0){const Ce=_e.data.data[0];F(Ce);const $e=await hx.getHorarios({docente_id:Ce.id});$e.success&&ne(((ke=$e.data)==null?void 0:ke.data)||[])}}catch(_e){console.error("Error al obtener docente:",_e)}},ie=async()=>{var se;try{const pe=await Ta.getDocentes({per_page:100});pe.success&&H(((se=pe.data)==null?void 0:se.data)||[])}catch(pe){console.error("Error al cargar docentes:",pe)}},xe=async(se=null)=>{var pe;try{te(!0);const ke={};se&&(ke.docente_id=se);const _e=await hx.getHorarios({...ke,per_page:100});_e.success&&ne(((pe=_e.data)==null?void 0:pe.data)||[])}catch(ke){console.error("Error al cargar horarios:",ke),m.error("Error al cargar horarios")}finally{te(!1)}},Ee=async()=>{try{(s==null?void 0:s.rol)==="docente"?(V||await D(),V&&ae.length>0?(G(ae[0]),F(V),p(!0)):V&&ae.length===0?m.error("No tienes horarios asignados para registrar asistencia"):m.error("No se pudo obtener tu informacin de docente")):p(!0)}catch(se){console.error("Error al abrir modal de geolocalizacin:",se),m.error("Error al abrir el modal de geolocalizacin")}},he=async se=>{var pe,ke,_e;try{let Ce=se.horario_id;if(!Ce&&se.horario&&(Ce=se.horario.id||se.horario),!Ce&&se.horario_id===void 0&&(pe=se.horario)!=null&&pe.id&&(Ce=se.horario.id),Ce=parseInt(Ce),!Ce||isNaN(Ce)||Ce<=0){if(m.error("No se pudo obtener un horario vlido para generar el cdigo QR. Por favor, selecciona un horario primero."),console.error("Horario ID invlido:",se),(s==null?void 0:s.rol)==="docente"&&ae.length>0){const ss=ae[0];if(ss&&ss.id){const we=await Da.generarQR(ss.id);we.success&&(O(we.data),E(!0),m.success("Cdigo QR generado usando tu prximo horario"))}}return}const $e=await Da.generarQR(Ce);$e.success?(O($e.data),E(!0),m.success("Cdigo QR generado exitosamente")):m.error($e.message||"Error al generar cdigo QR")}catch(Ce){console.error("Error al generar QR:",Ce),console.error("Asistencia recibida:",se);const $e=((_e=(ke=Ce.response)==null?void 0:ke.data)==null?void 0:_e.message)||Ce.message||"Error al generar cdigo QR";m.error($e)}},Ne=[{key:"docente",label:"Docente",sortable:!0,render:se=>{var _e,Ce,$e,ss,we,be,Se,Ae;const pe=((Ce=(_e=se.docente)==null?void 0:_e.user)==null?void 0:Ce.name)||se.docente||((we=(ss=($e=se.horario)==null?void 0:$e.docente)==null?void 0:ss.user)==null?void 0:we.name)||"N/A",ke=((Ae=(Se=(be=se.horario)==null?void 0:be.grupo)==null?void 0:Se.materia)==null?void 0:Ae.nombre)||se.materia||"N/A";return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Ye,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:pe}),e.jsx("div",{className:"text-sm text-gray-500",children:ke})]})]})}},{key:"grupo",label:"Grupo",sortable:!0,render:se=>{var ke,_e;const pe=((_e=(ke=se.horario)==null?void 0:ke.grupo)==null?void 0:_e.numero_grupo)||se.grupo||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ta,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:pe})]})}},{key:"aula",label:"Aula",sortable:!0,render:se=>{var ke,_e;const pe=((_e=(ke=se.horario)==null?void 0:ke.aula)==null?void 0:_e.nombre)||se.aula||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:pe})]})}},{key:"fecha",label:"Fecha",sortable:!0,render:se=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:se.fecha})]})},{key:"hora_inicio",label:"Horario",sortable:!0,render:se=>{var _e,Ce;const pe=((_e=se.horario)==null?void 0:_e.hora_inicio)||se.hora_inicio||"N/A",ke=((Ce=se.horario)==null?void 0:Ce.hora_fin)||se.hora_fin||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-900",children:[pe," - ",ke]})]})}},{key:"estado",label:"Estado",sortable:!0,render:se=>e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${se.estado==="presente"?"bg-success-100 text-success-800":se.estado==="tardanza"?"bg-warning-100 text-warning-800":"bg-error-100 text-error-800"}`,children:[se.estado==="presente"?e.jsx(Le,{className:"h-3 w-3 mr-1"}):se.estado==="tardanza"?e.jsx(Xe,{className:"h-3 w-3 mr-1"}):e.jsx(ls,{className:"h-3 w-3 mr-1"}),se.estado]})},{key:"porcentaje_asistencia",label:"Asistencia",sortable:!0,render:se=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[se.porcentaje_asistencia,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[se.estudiantes_presentes,"/",se.estudiantes_totales]})]})},{key:"actions",label:"Acciones",render:se=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ue(se)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(gn,{className:"h-4 w-4"}),onClick:()=>he(se),title:"Generar cdigo QR para este horario"}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>J(se)})]})}],ue=se=>{I(se),C(!0)},J=se=>{R(se),Z(se),k(!0)},L=async()=>{var se,pe;try{n(!0);const ke=await Da.exportarAsistencias({search:o,docente_id:V==null?void 0:V.id});if(ke.success&&ke.data)if(ke.data instanceof Blob){const _e=window.URL.createObjectURL(ke.data),Ce=document.createElement("a");Ce.href=_e,Ce.download=`asistencias_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce),window.URL.revokeObjectURL(_e),m.success("Asistencias exportadas exitosamente")}else{const _e=ke.data.map(Ce=>{var $e,ss,we,be,Se,Ae,Fe,ze,is,Os,wa,im;return{Fecha:Ce.fecha||"",Docente:Ce.docente||((we=(ss=($e=Ce.horario)==null?void 0:$e.docente)==null?void 0:ss.user)==null?void 0:we.name)||"",Materia:((Ae=(Se=(be=Ce.horario)==null?void 0:be.grupo)==null?void 0:Se.materia)==null?void 0:Ae.nombre)||Ce.materia||"",Grupo:((ze=(Fe=Ce.horario)==null?void 0:Fe.grupo)==null?void 0:ze.numero_grupo)||Ce.grupo||"",Aula:((Os=(is=Ce.horario)==null?void 0:is.aula)==null?void 0:Os.nombre)||Ce.aula||"",Estado:Ce.estado||"","Hora Inicio":((wa=Ce.horario)==null?void 0:wa.hora_inicio)||"","Hora Fin":((im=Ce.horario)==null?void 0:im.hora_fin)||""}});Mt(_e,`asistencias_${new Date().toISOString().split("T")[0]}.csv`),m.success("Asistencias exportadas exitosamente")}else m.error(ke.message||"Error al exportar asistencias")}catch(ke){m.error(((pe=(se=ke.response)==null?void 0:se.data)==null?void 0:pe.message)||ke.message||"Error al exportar asistencias")}finally{n(!1)}},j=async se=>{var pe,ke;try{if(n(!0),P){const _e=await Da.updateAsistencia(P.id,{horario_id:se.horario_id||P.horario_id,docente_id:se.docente_id||P.docente_id,fecha:se.fecha,estado:se.estado||"presente",observaciones:se.observaciones});_e.success?(m.success("Asistencia actualizada exitosamente"),await oe(),k(!1),R(null),Z()):m.error(_e.message||"Error al actualizar asistencia")}else{if(!se.horario_id||!se.docente_id){m.error("Debes seleccionar un horario y docente");return}const _e=await Da.registrarAsistencia({horario_id:se.horario_id,docente_id:se.docente_id,fecha:se.fecha,estado:se.estado||"presente",observaciones:se.observaciones,latitud:se.latitud,longitud:se.longitud});_e.success?(m.success("Asistencia registrada exitosamente"),await oe(),k(!1),R(null),Z()):(m.error(_e.message||"Error al registrar asistencia"),_e.errors&&console.error("Errores de validacin:",_e.errors))}}catch(_e){const Ce=((ke=(pe=_e.response)==null?void 0:pe.data)==null?void 0:ke.message)||_e.message||"Error al guardar asistencia";m.error(Ce),console.error("Error al guardar asistencia:",_e)}finally{n(!1)}},B=()=>{k(!1),R(null),Z()};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(_t,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Control de Asistencias"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registra y gestiona las asistencias"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:()=>k(!0),children:"Nueva Asistencia"}),e.jsx(X,{variant:"success",icon:e.jsx(Dr,{className:"h-5 w-5"}),onClick:Ee,children:"Geolocalizacin"}),e.jsx(X,{variant:"info",icon:e.jsx(gn,{className:"h-5 w-5"}),onClick:()=>f(!0),children:"Escanear QR"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(_t,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Presentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(se=>se.estado==="presente").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tardanzas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(se=>se.estado==="tardanza").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Xe,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Promedio Asistencia"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[r.length>0?Math.round(r.reduce((se,pe)=>se+pe.porcentaje_asistencia,0)/r.length):0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ta,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Registro de Asistencias"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar asistencias...",value:o,onChange:se=>i(se.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[(s==null?void 0:s.rol)==="docente"&&ae.length>0&&e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(gn,{className:"h-4 w-4"}),onClick:()=>he({horario_id:ae[0].id}),children:"Generar QR"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:L,disabled:t,children:"Exportar"})]})]})]}),e.jsx(es,{columns:Ne,data:r,loading:t,pagination:{currentPage:l,totalPages:d,perPage:x,onPageChange:c,onPerPageChange:y}})]}),e.jsx(Pe,{isOpen:w,onClose:B,title:P?"Editar Asistencia":"Nueva Asistencia",size:"lg",children:e.jsxs("form",{onSubmit:Y(j),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente *"}),e.jsxs("select",{...z("docente_id",{required:"El docente es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),ce.map(se=>{var pe;return e.jsx("option",{value:se.id,children:((pe=se.user)==null?void 0:pe.name)||se.codigo_docente},se.id)})]}),U.docente_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:U.docente_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario *"}),e.jsxs("select",{...z("horario_id",{required:"El horario es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onChange:se=>{const pe=se.target.value;if(pe){const ke=ae.find(_e=>_e.id==pe);ke&&!P&&Z({...ee(),horario_id:pe,docente_id:ke.docente_id||ee("docente_id")})}},children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),ae.map(se=>{var pe,ke,_e,Ce;return e.jsxs("option",{value:se.id,children:[((ke=(pe=se.grupo)==null?void 0:pe.materia)==null?void 0:ke.nombre)||"N/A"," - ",((_e=se.grupo)==null?void 0:_e.numero_grupo)||"N/A"," - ",((Ce=se.aula)==null?void 0:Ce.nombre)||"N/A"," (",se.hora_inicio," - ",se.hora_fin,")"]},se.id)})]}),U.horario_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:U.horario_id.message})]}),e.jsx(me,{label:"Fecha",type:"date",error:(h=U.fecha)==null?void 0:h.message,...z("fecha",{required:"La fecha es obligatoria"}),defaultValue:new Date().toISOString().split("T")[0]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado *"}),e.jsxs("select",{...z("estado",{required:"El estado es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"presente",children:"Presente"}),e.jsx("option",{value:"ausente",children:"Ausente"}),e.jsx("option",{value:"tardanza",children:"Tardanza"}),e.jsx("option",{value:"justificado",children:"Justificado"})]}),U.estado&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:U.estado.message})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones"}),e.jsx("textarea",{...z("observaciones"),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Observaciones adicionales (opcional)"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:B,children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[P?"Actualizar":"Registrar"," Asistencia"]})]})]})}),e.jsx(Pe,{isOpen:S,onClose:()=>C(!1),title:"Detalles de la Asistencia",size:"lg",children:q&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:q.docente})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Materia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:q.materia})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grupo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:q.grupo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Aula"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:q.aula})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:q.fecha})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[q.hora_inicio," - ",q.hora_fin]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.estado==="presente"?"bg-success-100 text-success-800":q.estado==="tardanza"?"bg-warning-100 text-warning-800":"bg-error-100 text-error-800"}`,children:q.estado})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asistencia"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[q.estudiantes_presentes,"/",q.estudiantes_totales," (",q.porcentaje_asistencia,"%)"]})]})]})})}),e.jsx(Pe,{isOpen:N&&!$&&(s==null?void 0:s.rol)!=="docente",onClose:()=>{p(!1),G(null),F(null)},title:"Seleccionar Horario para Registro con Geolocalizacin",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[(s==null?void 0:s.rol)!=="docente"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente"}),e.jsxs("select",{value:(V==null?void 0:V.id)||"",onChange:se=>{const pe=se.target.value,ke=ce.find(_e=>_e.id==pe);F(ke),pe&&xe(pe)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),ce.map(se=>{var pe;return e.jsx("option",{value:se.id,children:((pe=se.user)==null?void 0:pe.name)||se.codigo_docente},se.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario"}),e.jsxs("select",{value:($==null?void 0:$.id)||"",onChange:se=>{const pe=se.target.value,ke=ae.find(_e=>_e.id==pe);G(ke)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",disabled:K||!V&&(s==null?void 0:s.rol)!=="docente",children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),ae.map(se=>{var pe,ke,_e,Ce;return e.jsxs("option",{value:se.id,children:[((ke=(pe=se.grupo)==null?void 0:pe.materia)==null?void 0:ke.nombre)||"N/A"," - ",((_e=se.grupo)==null?void 0:_e.numero_grupo)||"N/A"," - ",((Ce=se.aula)==null?void 0:Ce.nombre)||"N/A"," (",se.hora_inicio," - ",se.hora_fin,")"]},se.id)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{p(!1),G(null),F(null)},children:"Cancelar"}),e.jsx(X,{variant:"primary",onClick:()=>{$?p(!0):m.error("Selecciona un horario primero")},disabled:!$,children:"Continuar"})]})]})}),e.jsx(z1,{isOpen:N&&($||(s==null?void 0:s.rol)==="docente"),onClose:()=>{p(!1),G(null),F(null)},horario:$||ae.length>0&&ae[0],docente:V,docenteId:(V==null?void 0:V.id)||($==null?void 0:$.docente_id),fecha:new Date().toISOString().split("T")[0],onSuccess:se=>{oe(),p(!1),G(null)}}),e.jsx(Pe,{isOpen:_,onClose:()=>{E(!1),O(null)},title:"Cdigo QR para Asistencia",size:"md",children:W&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[((A=(T=(v=W.horario)==null?void 0:v.grupo)==null?void 0:T.materia)==null?void 0:A.nombre)||"N/A"," - Grupo ",((re=(Q=W.horario)==null?void 0:Q.grupo)==null?void 0:re.numero_grupo)||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[((ve=(de=W.horario)==null?void 0:de.aula)==null?void 0:ve.nombre)||"N/A"," - ",(je=W.horario)==null?void 0:je.hora_inicio," - ",(le=W.horario)==null?void 0:le.hora_fin]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Fecha: ",W.fecha]})]}),W.qr_image&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:W.qr_image,alt:"Cdigo QR",className:"border-4 border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-white"})}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300",children:"Presenta este cdigo QR al inicio de la clase para registrar la asistencia"})})]})}),e.jsx(Pe,{isOpen:b,onClose:()=>f(!1),title:"Escanear Cdigo QR",size:"lg",children:e.jsx(U1,{onScan:se=>{oe(),f(!1)},onClose:()=>f(!1)})})]})},zr=u.forwardRef(({label:s,error:r,helperText:a,required:t=!1,disabled:n=!1,readOnly:o=!1,className:i,containerClassName:l,labelClassName:c,errorClassName:d,helperClassName:g,leftIcon:x,rightIcon:y,size:w="md",variant:k="default",options:S=[],placeholder:C,...N},p)=>{const _="select",E={default:"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-primary-500",error:"border-error-300 dark:border-error-600 focus:border-error-500 focus:ring-error-500",success:"border-success-300 dark:border-success-600 focus:border-success-500 focus:ring-success-500"},b={sm:"h-9 px-3 text-sm rounded-lg",md:"h-11 px-4 text-sm rounded-xl",lg:"h-12 px-4 text-base rounded-xl"},f=He(_,"w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","border transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-opacity-20",E[r?"error":k],b[w],n&&"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed",o&&"bg-gray-50 dark:bg-gray-800",x&&"pl-10",y&&"pr-10",i);return e.jsxs("div",{className:He("space-y-1",l),children:[s&&e.jsx("label",{className:He("block text-sm font-medium text-gray-700 dark:text-gray-300",t&&"after:content-['*'] after:ml-1 after:text-error-500",c),children:s}),e.jsxs("div",{className:"relative",children:[x&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500",children:x}),e.jsxs("select",{ref:p,className:f,disabled:n,readOnly:o,...N,children:[C&&e.jsx("option",{value:"",disabled:!0,children:C}),S.map((P,R)=>typeof P=="string"?e.jsx("option",{value:P,children:P},R):e.jsx("option",{value:P.value,children:P.label},P.value??R))]}),y&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",children:y})]}),r&&e.jsx("p",{className:He("text-sm text-error-500 dark:text-error-400",d),children:r}),a&&!r&&e.jsx("p",{className:He("text-sm text-gray-500 dark:text-gray-400",g),children:a})]})});zr.displayName="Select";const ut={async getConveniosActivos(s={}){var r,a;try{const t=await ye("/admin/reportes/convenios-activos",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getProgramasOfrecidos(s={}){var r,a;try{const t=await ye("/admin/reportes/programas-ofrecidos",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getEstadoAcademicoEstudiantes(s={}){var r,a;try{const t=await ye("/admin/reportes/estado-academico-estudiantes",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getMovimientosFinancieros(s={}){var r,a;try{const t=await ye("/admin/reportes/movimientos-financieros",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getActividadPorUsuario(s={}){var r,a;try{const t=await ye("/admin/reportes/actividad-usuario",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getActividadPorInstitucion(s={}){var r,a;try{const t=await ye("/admin/reportes/actividad-institucion",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await ye("/admin/reportes/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||M.ERROR_FETCH}}}},$1=()=>{const[s,r]=u.useState("convenios-activos"),[a,t]=u.useState(!1),[n,o]=u.useState(null),[i,l]=u.useState(null),[c,d]=u.useState({}),{register:g,handleSubmit:x,watch:y,reset:w}=We(),k=b=>{if(!b)return"N/A";try{const f=new Date(b);return isNaN(f.getTime())?"N/A":f.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"N/A"}};u.useEffect(()=>{S()},[]),u.useEffect(()=>{s&&(w(),o(null))},[s]);const S=async()=>{try{const b=await ut.getDatosFormulario();b.success&&l(b.data)}catch(b){console.error("Error al cargar datos del formulario:",b)}},C=async b=>{try{t(!0),d(b);let f;switch(s){case"convenios-activos":f=await ut.getConveniosActivos(b);break;case"programas-ofrecidos":f=await ut.getProgramasOfrecidos(b);break;case"estado-academico":f=await ut.getEstadoAcademicoEstudiantes(b);break;case"movimientos-financieros":f=await ut.getMovimientosFinancieros(b);break;case"actividad-usuario":f=await ut.getActividadPorUsuario(b);break;case"actividad-institucion":f=await ut.getActividadPorInstitucion(b);break;default:return}f.success?(o(f.data),m.success("Reporte generado exitosamente")):m.error(f.message||"Error al generar reporte")}catch{m.error("Error de conexin")}finally{t(!1)}},N=()=>{if(!n){m.error("Debe generar un reporte primero");return}let b="",f=[],P=[];switch(s){case"convenios-activos":f=["ID","Nmero Convenio","Tipo","Fecha Inicio","Fecha Fin","Monto Total","Estado"],P=(n.convenios||[]).map($=>[$.id,$.numero_convenio,$.tipo,k($.fecha_inicio),k($.fecha_fin),$.monto_total,$.estado]);break;case"programas-ofrecidos":f=["ID","Nombre","Rama Acadmica","Tipo","Institucin","Costo","Duracin (meses)","Inscripciones","Grupos Activos"],P=(n.programas||[]).map($=>[$.id,$.nombre,$.rama_academica,$.tipo_programa,$.institucion,$.costo,$.duracion_meses,$.total_inscripciones,$.grupos_activos]);break;case"estado-academico":f=["Registro","Nombre","Apellido","CI","Estado","Inscripciones","Grupos","Aprobados","Reprobados","Promedio","Tasa Aprobacin"],P=(n.estudiantes||[]).map($=>[$.registro_estudiante,$.nombre,$.apellido,$.ci,$.estado,$.total_inscripciones,$.rendimiento.total_grupos,$.rendimiento.aprobados,$.rendimiento.reprobados,$.rendimiento.promedio_notas||"N/A",$.rendimiento.tasa_aprobacion+"%"]);break;case"movimientos-financieros":f=["ID","Fecha","Monto","Verificado","Estudiante","Programa","Token"],P=(n.pagos||[]).map($=>[$.id,k($.fecha),$.monto,$.verificado?"S":"No",$.estudiante,$.programa,$.token]);break;case"actividad-usuario":f=["Usuario ID","Nombre","Apellido","Email","CI","Total Acciones","Acciones por Tabla"],P=(n.actividad_por_usuario||[]).map($=>{const G=$.usuario||{},V=($.acciones_por_tabla||[]).map(F=>`${F.tabla}: ${F.cantidad}`).join("; ");return[G.id||"N/A",G.nombre||"N/A",G.apellido||"N/A",G.email||"N/A",G.ci||"N/A",$.total_acciones||0,V||"N/A"]});break;case"actividad-institucion":f=["Institucin ID","Nombre","Estado","Total Inscripciones","Convenios Activos","Programas Activos","Total Programas"],P=(n.actividad_por_institucion||[]).map($=>{const G=$.actividad||{};return[$.institucion_id||"N/A",$.nombre||"N/A",$.estado||"N/A",G.total_inscripciones||0,G.convenios_activos||0,G.programas_activos||0,G.total_programas||0]});break;default:m.error("Tipo de reporte no soportado para exportacin");return}b=f.join(",")+`
`,P.forEach($=>{b+=$.map(G=>`"${G}"`).join(",")+`
`});const R=new Blob([b],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),I=URL.createObjectURL(R);q.setAttribute("href",I),q.setAttribute("download",`reporte-${s}-${new Date().toISOString().split("T")[0]}.csv`),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q),m.success("Reporte exportado exitosamente")},p=()=>{switch(s){case"convenios-activos":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(me,{label:"Fecha Desde",type:"date",...g("fecha_desde")}),e.jsx(me,{label:"Fecha Hasta",type:"date",...g("fecha_hasta")}),i&&e.jsx(zr,{label:"Tipo de Convenio",name:"tipo_convenio_id",options:[{value:"",label:"Todos"},...i.tipos_convenio.map(b=>({value:b.id,label:b.nombre}))],...g("tipo_convenio_id")})]});case"programas-ofrecidos":return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i&&e.jsxs(e.Fragment,{children:[e.jsx(zr,{label:"Rama Acadmica",name:"rama_academica_id",options:[{value:"",label:"Todas"},...i.ramas_academicas.map(b=>({value:b.id,label:b.nombre}))],...g("rama_academica_id")}),e.jsx(zr,{label:"Tipo de Programa",name:"tipo_programa_id",options:[{value:"",label:"Todos"},...i.tipos_programa.map(b=>({value:b.id,label:b.nombre}))],...g("tipo_programa_id")}),e.jsx(zr,{label:"Institucin",name:"institucion_id",options:[{value:"",label:"Todas"},...i.instituciones.map(b=>({value:b.id,label:b.nombre}))],...g("institucion_id")})]})});case"estado-academico":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsxs(e.Fragment,{children:[e.jsx(zr,{label:"Programa",name:"programa_id",options:[{value:"",label:"Todos"}],...g("programa_id")}),e.jsx(zr,{label:"Estado del Estudiante",name:"estado_id",options:[{value:"",label:"Todos"},...i.estados_estudiante.map(b=>({value:b.id,label:b.nombre}))],...g("estado_id")})]}),e.jsx(me,{label:"Fecha Desde",type:"date",...g("fecha_desde")}),e.jsx(me,{label:"Fecha Hasta",type:"date",...g("fecha_hasta")})]});case"movimientos-financieros":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{label:"Fecha Desde",type:"date",defaultValue:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(me,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});case"actividad-usuario":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsx(zr,{label:"Usuario",name:"usuario_id",options:[{value:"",label:"Todos"},...i.usuarios.map(b=>({value:b.id,label:`${b.email} (${b.ci})`}))],...g("usuario_id")}),e.jsx(me,{label:"Fecha Desde",type:"date",defaultValue:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(me,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});case"actividad-institucion":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsx(zr,{label:"Institucin",name:"institucion_id",options:[{value:"",label:"Todas"},...i.instituciones.map(b=>({value:b.id,label:b.nombre}))],...g("institucion_id")}),e.jsx(me,{label:"Fecha Desde",type:"date",defaultValue:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(me,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});default:return null}},_=()=>{var b;if(!n)return null;switch(s){case"convenios-activos":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Convenios"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_convenios})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instituciones Participantes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.instituciones_participantes})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:parseFloat(n.estadisticas.monto_total_convenios||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Convenios Activos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Nmero"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Fechas"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Monto"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Instituciones"})]})}),e.jsx("tbody",{children:n.convenios&&n.convenios.length>0?n.convenios.map((f,P)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:f.numero_convenio}),e.jsx("td",{className:"py-3 px-4",children:f.tipo}),e.jsxs("td",{className:"py-3 px-4",children:[k(f.fecha_inicio)," - ",k(f.fecha_fin)]}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(f.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:f.instituciones.map(R=>R.nombre).join(", ")})]},P)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay convenios activos para mostrar"})})})]})})]})]});case"programas-ofrecidos":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Programas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_programas})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grupos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_grupos_activos})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Programas Ofrecidos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Nombre"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Rama"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Institucin"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Costo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Inscripciones"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Grupos Activos"})]})}),e.jsx("tbody",{children:n.programas&&n.programas.length>0?n.programas.map((f,P)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:f.nombre}),e.jsx("td",{className:"py-3 px-4",children:f.rama_academica}),e.jsx("td",{className:"py-3 px-4",children:f.tipo_programa}),e.jsx("td",{className:"py-3 px-4",children:f.institucion}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(f.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:f.total_inscripciones}),e.jsx("td",{className:"py-3 px-4",children:f.grupos_activos})]},P)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay programas para mostrar"})})})]})})]})]});case"estado-academico":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Estudiantes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_estudiantes})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Promedio Aprobacin"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[((b=n.estadisticas.promedio_aprobacion)==null?void 0:b.toFixed(1))||0,"%"]})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Estado Acadmico de Estudiantes"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"CI"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Inscripciones"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Grupos"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Aprobados"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Promedio"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tasa Aprobacin"})]})}),e.jsx("tbody",{children:n.estudiantes&&n.estudiantes.length>0?n.estudiantes.map((f,P)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("td",{className:"py-3 px-4",children:[f.nombre," ",f.apellido]}),e.jsx("td",{className:"py-3 px-4",children:f.ci}),e.jsx("td",{className:"py-3 px-4",children:f.estado}),e.jsx("td",{className:"py-3 px-4",children:f.total_inscripciones}),e.jsx("td",{className:"py-3 px-4",children:f.rendimiento.total_grupos}),e.jsx("td",{className:"py-3 px-4",children:f.rendimiento.aprobados}),e.jsx("td",{className:"py-3 px-4",children:f.rendimiento.promedio_notas||"N/A"}),e.jsxs("td",{className:"py-3 px-4",children:[f.rendimiento.tasa_aprobacion,"%"]})]},P)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay estudiantes para mostrar"})})})]})})]})]});case"movimientos-financieros":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&n.estadisticas.ingresos&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingresos Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:parseFloat(n.estadisticas.ingresos.total_verificado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingresos Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:parseFloat(n.estadisticas.ingresos.total_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Ingresos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:parseFloat(n.estadisticas.ingresos.total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cantidad Pagos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.ingresos.cantidad_pagos||0})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Movimientos Financieros"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Monto"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Verificado"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Programa"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Token"})]})}),e.jsx("tbody",{children:n.pagos&&n.pagos.length>0?n.pagos.map((f,P)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:k(f.fecha)}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(f.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.verificado?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:f.verificado?"S":"No"})}),e.jsx("td",{className:"py-3 px-4",children:f.estudiante}),e.jsx("td",{className:"py-3 px-4",children:f.programa}),e.jsx("td",{className:"py-3 px-4",children:f.token||"N/A"})]},P)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay pagos para mostrar"})})})]})})]})]});case"actividad-usuario":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_registros})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.usuarios_activos})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Actividad por Usuario"}),e.jsx("div",{className:"space-y-4",children:n.actividad_por_usuario&&n.actividad_por_usuario.length>0?n.actividad_por_usuario.map((f,P)=>{var R;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:f.usuario?`${f.usuario.nombre} ${f.usuario.apellido}`:"Usuario Desconocido"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[((R=f.usuario)==null?void 0:R.email)||"N/A"," - ",f.total_acciones," acciones"]})]})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Acciones por tabla:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.acciones_por_tabla.map((q,I)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs",children:[q.tabla,": ",q.cantidad]},I))})]})]},P)}):e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay actividad de usuarios para mostrar"})})]})]});case"actividad-institucion":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Instituciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_instituciones})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Convenios Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_convenios_activos})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Programas Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_programas_activos})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Actividad por Institucin"}),e.jsx("div",{className:"space-y-4",children:n.actividad_por_institucion&&n.actividad_por_institucion.length>0?n.actividad_por_institucion.map((f,P)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:f.nombre}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Estado: ",f.estado]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inscripciones"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:f.actividad.total_inscripciones})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Convenios Activos"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:f.actividad.convenios_activos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Programas Activos"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:f.actividad.programas_activos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Programas"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:f.actividad.total_programas})]})]})]},P)):e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay actividad de instituciones para mostrar"})})]})]});default:return null}},E=[{value:"convenios-activos",label:"Convenios Activos",icon:Dt},{value:"programas-ofrecidos",label:"Programas Ofrecidos",icon:Ts},{value:"estado-academico",label:"Estado Acadmico Estudiantes",icon:Ye},{value:"movimientos-financieros",label:"Movimientos Financieros",icon:aa},{value:"actividad-usuario",label:"Actividad por Usuario",icon:Cs},{value:"actividad-institucion",label:"Actividad por Institucin",icon:Dt}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(us,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Reportes y Bitcora"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Genera reportes detallados del sistema"})]})]}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Reporte"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:E.map(b=>{const f=b.icon;return e.jsxs("button",{type:"button",onClick:()=>r(b.value),className:`p-4 border-2 rounded-lg transition-all ${s===b.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-primary-300"}`,children:[e.jsx(f,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-center",children:b.label})]},b.value)})})]}),e.jsxs("form",{onSubmit:x(C),className:"space-y-4",children:[p(),e.jsx("div",{className:"flex justify-end space-x-4",children:e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(oa,{className:"h-5 w-5"}),disabled:a,children:a?"Generando...":"Generar Reporte"})})]})]})}),a&&e.jsx(Xs,{}),n&&!a&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(X,{variant:"secondary",icon:e.jsx(qs,{className:"h-5 w-5"}),onClick:N,children:"Exportar CSV"})}),_()]})]})},Ic=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(0),[n,o]=u.useState(!0),[i,l]=u.useState("todas"),[c,d]=u.useState("todas"),[g,x]=u.useState(1),[y,w]=u.useState(0),[k,S]=u.useState(1);u.useEffect(()=>{C(),N()},[i,c,g]);const C=async()=>{var R,q,I,$;o(!0);try{const G={page:g,per_page:15};i==="leidas"?G.leida="true":i==="no_leidas"&&(G.leida="false"),c!=="todas"&&(G.tipo=c);const V=await ua.getNotificaciones(G);if(V.success){const F=((R=V.data)==null?void 0:R.data)||V.data;r((F==null?void 0:F.data)||F||[]),w((F==null?void 0:F.total)||((q=V.data)==null?void 0:q.total)||0),S((F==null?void 0:F.last_page)||((I=V.data)==null?void 0:I.last_page)||1),t((($=V.data)==null?void 0:$.no_leidas)||V.noLeidas||0)}}catch{m.error("Error al cargar notificaciones")}finally{o(!1)}},N=async()=>{const R=await ua.contarNoLeidas();R.success&&t(R.count)},p=async R=>{(await ua.marcarLeida(R)).success&&(r(I=>I.map($=>$.id===R?{...$,leida:!0,leida_at:new Date().toISOString()}:$)),t(I=>Math.max(0,I-1)),m.success("Notificacin marcada como leda"))},_=async()=>{(await ua.marcarTodasLeidas()).success&&(r(q=>q.map(I=>({...I,leida:!0}))),t(0),m.success("Todas las notificaciones marcadas como ledas"),C())},E=async R=>{window.confirm("Ests seguro de eliminar esta notificacin?")&&(await ua.eliminarNotificacion(R)).success&&(r(I=>I.filter($=>$.id!==R)),m.success("Notificacin eliminada"),C())},b=R=>{switch(R){case"horario_cambio":return e.jsx(Bs,{className:"h-5 w-5"});case"asistencia":return e.jsx(ha,{className:"h-5 w-5"});case"alerta":return e.jsx(Nr,{className:"h-5 w-5"});default:return e.jsx(Ja,{className:"h-5 w-5"})}},f=R=>{switch(R){case"horario_cambio":return"text-primary-500 bg-primary-100 dark:bg-primary-900/30";case"asistencia":return"text-success-500 bg-success-100 dark:bg-success-900/30";case"alerta":return"text-warning-500 bg-warning-100 dark:bg-warning-900/30";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}},P=R=>{switch(R){case"horario_cambio":return"Cambio de Horario";case"asistencia":return"Asistencia";case"alerta":return"Alerta";default:return R}};return n&&s.length===0?e.jsx("div",{className:"p-8",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Notificaciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a>0?`${a} no ledas`:"Todas las notificaciones ledas"})]}),a>0&&e.jsx(X,{onClick:_,variant:"primary",icon:e.jsx(Rw,{className:"h-4 w-4"}),children:"Marcar todas como ledas"})]}),e.jsx(ge,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oa,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),e.jsxs("select",{value:i,onChange:R=>{l(R.target.value),x(1)},className:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"todas",children:"Todas"}),e.jsx("option",{value:"no_leidas",children:"No ledas"}),e.jsx("option",{value:"leidas",children:"Ledas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo:"}),e.jsxs("select",{value:c,onChange:R=>{d(R.target.value),x(1)},className:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"todas",children:"Todos"}),e.jsx("option",{value:"horario_cambio",children:"Cambios de Horario"}),e.jsx("option",{value:"asistencia",children:"Asistencias"}),e.jsx("option",{value:"alerta",children:"Alertas"})]})]})]})}),s.length===0?e.jsx(ge,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ja,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tienes notificaciones que coincidan con los filtros seleccionados"})]})}):e.jsx("div",{className:"space-y-4",children:s.map(R=>e.jsx(ge,{className:R.leida?"":"border-l-4 border-l-primary-500",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ${f(R.tipo)}`,children:b(R.tipo)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:`text-lg font-semibold ${R.leida?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-gray-100"}`,children:R.titulo}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",children:P(R.tipo)}),!R.leida&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300",children:"Nueva"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:R.mensaje}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),ux(R.created_at)]}),R.leida_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ha,{className:"h-4 w-4 mr-1"}),"Leda ",ux(R.leida_at)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!R.leida&&e.jsx(X,{onClick:()=>p(R.id),variant:"ghost",size:"sm",icon:e.jsx(ha,{className:"h-4 w-4"}),title:"Marcar como leda"}),e.jsx(X,{onClick:()=>E(R.id),variant:"ghost",size:"sm",icon:e.jsx(nr,{className:"h-4 w-4"}),title:"Eliminar"})]})]})})]})},R.id))}),k>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(X,{onClick:()=>x(R=>Math.max(1,R-1)),disabled:g===1,variant:"outline",size:"sm",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pgina ",g," de ",k]}),e.jsx(X,{onClick:()=>x(R=>Math.min(k,R+1)),disabled:g===k,variant:"outline",size:"sm",children:"Siguiente"})]})]})},V1={async getAuditoria(s={}){try{const r=await ye("/auditoria",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener auditora"}}catch(r){return{success:!1,message:r.message||"Error al obtener auditora"}}},async getAuditoriaPorModelo(s,r={}){try{const a=await ye(`/auditoria/modelo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener auditora"}}catch(a){return{success:!1,message:a.message||"Error al obtener auditora"}}}},B1=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState({modelo:"",accion:"",user_id:"",fecha_inicio:"",fecha_fin:""}),[i,l]=u.useState(1),[c,d]=u.useState(0),[g,x]=u.useState(1),[y,w]=u.useState("");u.useEffect(()=>{k()},[n,i]);const k=async()=>{var b,f,P;t(!0);try{const R={page:i,per_page:20,...n};Object.keys(R).forEach(I=>{(R[I]===""||R[I]===null)&&delete R[I]});const q=await V1.getAuditoria(R);q.success?(r(((b=q.data)==null?void 0:b.data)||[]),d(((f=q.data)==null?void 0:f.total)||0),x(((P=q.data)==null?void 0:P.last_page)||1)):m.error(q.message||"Error al cargar auditora")}catch{m.error("Error al cargar registros de auditora")}finally{t(!1)}},S=(b,f)=>{o(P=>({...P,[b]:f})),l(1)},C=()=>{o({modelo:"",accion:"",user_id:"",fecha_inicio:"",fecha_fin:""}),w(""),l(1)},N=b=>{switch(b){case"create":return e.jsx(Ve,{className:"h-4 w-4 text-success-500"});case"update":return e.jsx(D0,{className:"h-4 w-4 text-primary-500"});case"delete":return e.jsx(Uw,{className:"h-4 w-4 text-error-500"});case"view":return e.jsx(Ge,{className:"h-4 w-4 text-info-500"});default:return e.jsx(cl,{className:"h-4 w-4 text-gray-500"})}},p=b=>{switch(b){case"create":return"bg-success-100 dark:bg-success-900/30 text-success-700 dark:text-success-300";case"update":return"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300";case"delete":return"bg-error-100 dark:bg-error-900/30 text-error-700 dark:text-error-300";case"view":return"bg-info-100 dark:bg-info-900/30 text-info-700 dark:text-info-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}},_=b=>({create:"Crear",update:"Actualizar",delete:"Eliminar",view:"Ver",export:"Exportar",import:"Importar"})[b]||b,E=y?s.filter(b=>{var f,P,R,q;return((f=b.descripcion)==null?void 0:f.toLowerCase().includes(y.toLowerCase()))||((P=b.modelo)==null?void 0:P.toLowerCase().includes(y.toLowerCase()))||((q=(R=b.user)==null?void 0:R.name)==null?void 0:q.toLowerCase().includes(y.toLowerCase()))}):s;return a&&s.length===0?e.jsx("div",{className:"p-8",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Auditora del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registro de todas las acciones realizadas en el sistema"})]})}),e.jsx(ge,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar en descripcin, modelo o usuario...",value:y,onChange:b=>w(b.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Modelo"}),e.jsxs("select",{value:n.modelo,onChange:b=>S("modelo",b.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"Docente",children:"Docente"}),e.jsx("option",{value:"Horario",children:"Horario"}),e.jsx("option",{value:"Asistencia",children:"Asistencia"}),e.jsx("option",{value:"Aula",children:"Aula"}),e.jsx("option",{value:"Grupo",children:"Grupo"}),e.jsx("option",{value:"Materia",children:"Materia"}),e.jsx("option",{value:"User",children:"Usuario"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Accin"}),e.jsxs("select",{value:n.accion,onChange:b=>S("accion",b.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"create",children:"Crear"}),e.jsx("option",{value:"update",children:"Actualizar"}),e.jsx("option",{value:"delete",children:"Eliminar"}),e.jsx("option",{value:"view",children:"Ver"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha Inicio"}),e.jsx("input",{type:"date",value:n.fecha_inicio,onChange:b=>S("fecha_inicio",b.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha Fin"}),e.jsx("input",{type:"date",value:n.fecha_fin,onChange:b=>S("fecha_fin",b.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(X,{onClick:C,variant:"outline",fullWidth:!0,icon:e.jsx(oa,{className:"h-4 w-4"}),children:"Limpiar"})})]})]})}),e.jsx(ge,{children:E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay registros"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron registros de auditora con los filtros seleccionados"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha/Hora"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Accin"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Modelo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map(b=>{var f;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:j1(b.created_at)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(tr,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((f=b.user)==null?void 0:f.name)||"Sistema"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(b.accion)}`,children:[N(b.accion),e.jsx("span",{className:"ml-1",children:_(b.accion)})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:[b.modelo,b.modelo_id&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["(#",b.modelo_id,")"]})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:b.descripcion}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:b.ip_address||"-"})]},b.id)})})]})}),g>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",E.length," de ",c," registros"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{onClick:()=>l(b=>Math.max(1,b-1)),disabled:i===1,variant:"outline",size:"sm",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pgina ",i," de ",g]}),e.jsx(X,{onClick:()=>l(b=>Math.min(g,b+1)),disabled:i===g,variant:"outline",size:"sm",children:"Siguiente"})]})]})]})})]})},Sa={async getGestiones(s={}){var r,a,t,n,o,i,l;try{const c={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"ao",sort_order:s.sort_order||"desc",ao:s.ao||"",periodo:s.periodo||"",activa:s.activa||""},d=await ye("/gestiones-academicas",c);if(console.log(" gestionAcademicaService.getGestiones - Response completa:",d),console.log(" gestionAcademicaService.getGestiones - response.data:",d.data),console.log(" gestionAcademicaService.getGestiones - response.data.success:",(r=d.data)==null?void 0:r.success),console.log(" gestionAcademicaService.getGestiones - response.data.data:",(a=d.data)==null?void 0:a.data),d.data&&d.data.success){const g=d.data.data;return console.log(" gestionAcademicaService.getGestiones - Datos paginados:",g),console.log(" gestionAcademicaService.getGestiones - Total items:",g==null?void 0:g.total),console.log(" gestionAcademicaService.getGestiones - Array data:",g==null?void 0:g.data),{success:!0,data:g,message:d.data.message}}else return console.error(" gestionAcademicaService.getGestiones - Response sin success:",d.data),{success:!1,message:((t=d.data)==null?void 0:t.message)||"Error al obtener gestiones acadmicas",data:null}}catch(c){return console.error(" Error en gestionAcademicaService.getGestiones:",c),console.error(" Response error:",(n=c.response)==null?void 0:n.data),console.error(" Status:",(o=c.response)==null?void 0:o.status),{success:!1,message:((l=(i=c.response)==null?void 0:i.data)==null?void 0:l.message)||c.message||"Error al obtener gestiones acadmicas",data:null}}},async getGestionActiva(){try{const s=await ye("/gestiones-academicas/activa");return s.data.success?{success:!0,data:s.data.data}:{success:!1,message:s.data.message||"No hay gestin acadmica activa"}}catch(s){return{success:!1,message:s.message||"Error al obtener gestin acadmica activa"}}},async getGestion(s){try{const r=await ye(`/gestiones-academicas/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Gestin acadmica no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener gestin acadmica"}}},async createGestion(s){var r,a,t,n;try{const o=await Me("/gestiones-academicas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS.SAVE}:{success:!1,message:o.data.message||M.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateGestion(s,r){var a,t,n,o;try{const i=await Ze(`/gestiones-academicas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS.UPDATE}:{success:!1,message:i.data.message||M.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||M.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteGestion(s){var r,a;try{const t=await ts(`/gestiones-academicas/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS.DELETE}:{success:!1,message:t.data.message||M.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR.DELETE}}},async activarGestion(s){try{const r=await Ze(`/gestiones-academicas/${s}/activar`);return r.data.success?{success:!0,data:r.data.data,message:"Gestin acadmica activada exitosamente"}:{success:!1,message:r.data.message||"Error al activar la gestin acadmica"}}catch(r){return{success:!1,message:r.message||"Error al activar la gestin acadmica"}}},async exportarGestiones(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",ao:s.ao||"",periodo:s.periodo||"",activa:s.activa||""},o=await ye("/gestiones-academicas",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[]}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar gestiones acadmicas"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar gestiones acadmicas"}}},async importarGestiones(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await Me("/gestiones-academicas/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Gestiones acadmicas importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar gestiones acadmicas",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar gestiones acadmicas",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},q1=()=>{var xe,Ee,he,Ne,ue;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState(!1),[f,P]=u.useState(!1),[R,q]=u.useState(!1),[I,$]=u.useState(null),G=u.useRef(null),[V,F]=u.useState({ao:"",periodo:"",activa:""}),{register:ae,handleSubmit:ne,reset:ce,formState:{errors:H}}=We();u.useEffect(()=>{K()},[i,g,n,V]);const K=async()=>{var J,L;try{t(!0);const j=await Sa.getGestiones({page:i,per_page:g,search:n,...V});if(console.log(" GestionesAcademicas.jsx - Response recibida:",j),console.log(" GestionesAcademicas.jsx - response.success:",j.success),console.log(" GestionesAcademicas.jsx - response.data:",j.data),j.success&&j.data){const B=j.data.data||[],h=j.data.last_page||1;console.log(" GestionesAcademicas.jsx - Gestiones array:",B),console.log(" GestionesAcademicas.jsx - Total gestiones:",B.length),console.log(" GestionesAcademicas.jsx - Last page:",h),r(B),d(h)}else console.error(" GestionesAcademicas.jsx - Response sin xito:",j),m.error(j.message||"Error al cargar gestiones acadmicas"),r([]),d(1)}catch(j){const B=((L=(J=j.response)==null?void 0:J.data)==null?void 0:L.message)||j.message||"Error de conexin: No se pudo cargar las gestiones acadmicas";m.error(B),console.error("Error al cargar gestiones acadmicas:",j),r([]),d(1)}finally{t(!1)}},te=()=>{N(null),ce({nombre:"",ao:new Date().getFullYear(),periodo:1,fecha_inicio:"",fecha_fin:"",activa:!1}),w(!0)},W=J=>{N(J),ce({nombre:J.nombre,ao:J.ao||J.anio,periodo:J.periodo,fecha_inicio:J.fecha_inicio?J.fecha_inicio.split("T")[0]:"",fecha_fin:J.fecha_fin?J.fecha_fin.split("T")[0]:"",activa:J.activa||!1}),w(!0)},O=async J=>{var L,j;try{const B=await Sa.getGestion(J.id);B.success?(_(B.data),S(!0)):m.error(B.message||"Error al cargar los detalles de la gestin")}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al cargar los detalles de la gestin";m.error(h)}},z=async J=>{var L,j;if(window.confirm("Ests seguro de que quieres eliminar esta gestin acadmica?"))try{t(!0);const B=await Sa.deleteGestion(J);B.success?(m.success(B.message||"Gestin acadmica eliminada exitosamente"),await K()):m.error(B.message||"Error al eliminar la gestin acadmica")}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al eliminar la gestin acadmica";m.error(h),console.error("Error al eliminar gestin acadmica:",B)}finally{t(!1)}},Y=async J=>{var L,j;try{const B=await Sa.activarGestion(J);B.success?(m.success("Gestin acadmica activada exitosamente"),await K()):m.error(B.message||"Error al activar la gestin acadmica")}catch(B){const h=((j=(L=B.response)==null?void 0:L.data)==null?void 0:j.message)||B.message||"Error al activar la gestin acadmica";m.error(h)}},Z=async J=>{var L,j,B,h;try{t(!0);const v={nombre:J.nombre,ao:parseInt(J.ao),periodo:parseInt(J.periodo),fecha_inicio:J.fecha_inicio,fecha_fin:J.fecha_fin,activa:J.activa==="true"||J.activa===!0||J.activa==="1"||J.activa===1};let T;C?T=await Sa.updateGestion(C.id,v):T=await Sa.createGestion(v),T.success?(m.success(T.message||(C?"Gestin acadmica actualizada exitosamente":"Gestin acadmica creada exitosamente")),w(!1),N(null),ce(),await K()):(m.error(T.message||"Error al guardar la gestin acadmica"),T.errors&&Object.keys(T.errors).forEach(A=>{m.error(`${A}: ${T.errors[A]}`)}))}catch(v){const T=((j=(L=v.response)==null?void 0:L.data)==null?void 0:j.message)||v.message||"Error al guardar la gestin acadmica";m.error(T),console.error("Error al guardar gestin acadmica:",v),(h=(B=v.response)==null?void 0:B.data)!=null&&h.errors&&Object.keys(v.response.data.errors).forEach(A=>{m.error(`${A}: ${v.response.data.errors[A]}`)})}finally{t(!1)}},U=()=>{w(!1),N(null),ce()},ee=async()=>{var J,L;try{t(!0);const j=await Sa.exportarGestiones({search:n,...V});if(j.success&&j.data){const B=j.data.map(h=>({Nombre:h.nombre||"",Ao:h.ao||h.anio||"",Periodo:h.periodo||"","Fecha Inicio":h.fecha_inicio||"","Fecha Fin":h.fecha_fin||"",Activa:h.activa?"S":"No",Creado:h.created_at||""}));Mt(B,`gestiones_academicas_${new Date().toISOString().split("T")[0]}.csv`),m.success("Gestiones acadmicas exportadas exitosamente")}else m.error(j.message||"Error al exportar gestiones acadmicas")}catch(j){m.error(((L=(J=j.response)==null?void 0:J.data)==null?void 0:L.message)||j.message||"Error al exportar gestiones acadmicas")}finally{t(!1)}},oe=async()=>{var L,j,B,h;const J=(j=(L=G.current)==null?void 0:L.files)==null?void 0:j[0];if(!J){m.error("Por favor selecciona un archivo");return}try{q(!0),$(null);const v=await Sa.importarGestiones(J);v.success?($({success:!0,message:v.message||"Gestiones acadmicas importadas exitosamente",data:v.data}),m.success(v.message||"Gestiones acadmicas importadas exitosamente"),await K(),setTimeout(()=>{P(!1),$(null),G.current&&(G.current.value="")},2e3)):($({success:!1,message:v.message||"Error al importar gestiones acadmicas",errors:v.errors}),m.error(v.message||"Error al importar gestiones acadmicas"))}catch(v){const T=((h=(B=v.response)==null?void 0:B.data)==null?void 0:h.message)||v.message||"Error al importar gestiones acadmicas";$({success:!1,message:T}),m.error(T)}finally{q(!1)}},D=()=>{const J=`nombre,ao,periodo,fecha_inicio,fecha_fin,activa
Gestin 2024,2024,1,2024-01-01,2024-06-30,0
Gestin 2024-2,2024,2,2024-07-01,2024-12-31,0
`,L=new Blob([J],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(L),j.download="template_gestiones_academicas.csv",j.click()},ie=[{key:"nombre",label:"Nombre",sortable:!0,render:J=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(io,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:J.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[J.ao||J.anio," - Periodo ",J.periodo]})]})]})},{key:"periodo",label:"Ao/Periodo",sortable:!0,render:J=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-900 dark:text-gray-100",children:[J.ao||J.anio," - P",J.periodo]})]})},{key:"fecha_inicio",label:"Fecha Inicio",sortable:!0,render:J=>{const L=J.fecha_inicio?new Date(J.fecha_inicio).toLocaleDateString("es-ES"):"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:L})]})}},{key:"fecha_fin",label:"Fecha Fin",sortable:!0,render:J=>{const L=J.fecha_fin?new Date(J.fecha_fin).toLocaleDateString("es-ES"):"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:L})]})}},{key:"activa",label:"Estado",sortable:!0,render:J=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J.activa?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:J.activa?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:J=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>O(J)}),!J.activa&&e.jsx(X,{variant:"success",size:"sm",icon:e.jsx(Le,{className:"h-4 w-4"}),onClick:()=>Y(J.id),title:"Activar gestin"}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>W(J)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>z(J.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(io,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin Acadmica"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los periodos acadmicos"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:te,children:"Nueva Gestin"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Gestiones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(io,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Gestiones Activas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(J=>J.activa).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Ao Actual"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:new Date().getFullYear()})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Ul,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Gestin Activa"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:((xe=s.find(J=>J.activa))==null?void 0:xe.nombre)||"Ninguna"})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Dt,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Gestiones Acadmicas"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar gestiones...",value:n,onChange:J=>o(J.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(oa,{className:"h-4 w-4"}),onClick:()=>b(!E),children:"Filtros"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:ee,disabled:a,children:"Exportar"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>P(!0),children:"Importar"})]})]})]}),E&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Filtros Avanzados"}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(nr,{className:"h-4 w-4"}),onClick:()=>{b(!1),F({ao:"",periodo:"",activa:""})},children:"Limpiar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ao"}),e.jsx(me,{type:"number",placeholder:"Ej: 2024",value:V.ao,onChange:J=>F({...V,ao:J.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Periodo"}),e.jsx(me,{type:"number",placeholder:"Ej: 1",value:V.periodo,onChange:J=>F({...V,periodo:J.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:V.activa,onChange:J=>F({...V,activa:J.target.value}),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]})]})]})]}),e.jsx(es,{columns:ie,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:U,title:C?"Editar Gestin Acadmica":"Nueva Gestin Acadmica",size:"lg",children:e.jsxs("form",{onSubmit:ne(Z),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(me,{label:"Nombre *",placeholder:"Ej: Gestin 2024-I",error:(Ee=H.nombre)==null?void 0:Ee.message,...ae("nombre",{required:"El nombre es obligatorio"})}),e.jsx(me,{label:"Ao *",type:"number",min:"2000",max:"2100",placeholder:"Ej: 2024",error:(he=H.ao)==null?void 0:he.message,...ae("ao",{required:"El ao es obligatorio",min:{value:2e3,message:"El ao mnimo es 2000"},max:{value:2100,message:"El ao mximo es 2100"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Perodo *"}),e.jsxs("select",{...ae("periodo",{required:"El perodo es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar perodo"}),e.jsx("option",{value:"1",children:"Primer Semestre (I)"}),e.jsx("option",{value:"2",children:"Segundo Semestre (II)"})]}),H.periodo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:H.periodo.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{...ae("activa",{setValueAs:J=>J==="true"||J===!0||J==="1"||J===1}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"false",children:"Inactiva"}),e.jsx("option",{value:"true",children:"Activa"})]})]}),e.jsx(me,{label:"Fecha Inicio *",type:"date",error:(Ne=H.fecha_inicio)==null?void 0:Ne.message,...ae("fecha_inicio",{required:"La fecha de inicio es obligatoria"})}),e.jsx(me,{label:"Fecha Fin *",type:"date",error:(ue=H.fecha_fin)==null?void 0:ue.message,...ae("fecha_fin",{required:"La fecha de fin es obligatoria",validate:J=>{var j;const L=(j=document.querySelector('input[name="fecha_inicio"]'))==null?void 0:j.value;return L&&J<=L?"La fecha de fin debe ser posterior a la fecha de inicio":!0}})})]}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300",children:"Nota: Si marcas esta gestin como activa, las dems gestiones se desactivarn automticamente."})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:U,children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Gestin"]})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles de la Gestin Acadmica",size:"lg",children:p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ao"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.ao||p.anio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Perodo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.periodo===1?"Primer Semestre (I)":"Segundo Semestre (II)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.activa?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:p.activa?"Activa":"Inactiva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.fecha_inicio?new Date(p.fecha_inicio).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.fecha_fin?new Date(p.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]})]}),p.grupos&&p.grupos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grupos Asociados"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[p.grupos.length," grupos"]})]})]})}),e.jsx(Pe,{isOpen:f,onClose:()=>{P(!1),$(null),G.current&&(G.current.value="")},title:"Importar Gestiones Acadmicas",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Selecciona un archivo CSV o Excel con las gestiones acadmicas. Puedes descargar el template para ver el formato requerido."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Archivo (CSV o Excel)"}),e.jsx("input",{ref:G,type:"file",accept:".csv,.xlsx,.xls",className:`block w-full text-sm text-gray-500 dark:text-gray-400
                file:mr-4 file:py-2 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary-500 file:text-white
                hover:file:bg-primary-600
                file:cursor-pointer
                border border-gray-300 dark:border-gray-600 rounded-lg`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(X,{variant:"outline",size:"sm",onClick:D,children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Descargar Template"]})}),I&&e.jsxs("div",{className:`p-4 rounded-lg ${I.success?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("p",{className:`text-sm ${I.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:I.message}),I.errors&&e.jsx("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside",children:Object.entries(I.errors).map(([J,L])=>e.jsxs("li",{children:[J,": ",Array.isArray(L)?L.join(", "):L]},J))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{P(!1),$(null),G.current&&(G.current.value="")},children:"Cancelar"}),e.jsx(X,{variant:"primary",onClick:oe,disabled:R,children:R?"Importando...":"Importar"})]})]})})]})},H1=()=>{var H,K,te;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),{register:E,handleSubmit:b,reset:f,formState:{errors:P},trigger:R,setValue:q,watch:I}=We({mode:"onChange",defaultValues:{nombre_pais:"",codigo_iso:"",codigo_telefono:""}});u.useEffect(()=>{$()},[i,g,n]);const $=async()=>{var W,O;try{t(!0);const z=await Bt.getPaises({page:i,per_page:g,search:n});if(z.success&&z.data)r(z.data.data||[]),d(z.data.last_page||1);else{const Y=z.message||"Error al cargar pases";m.error(Y),r([]),d(1)}}catch(z){const Y=((O=(W=z.response)==null?void 0:W.data)==null?void 0:O.message)||z.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(Y),r([]),d(1)}finally{t(!1)}},G=()=>{N(null),f({nombre_pais:"",codigo_iso:"",codigo_telefono:""}),w(!0)},V=W=>{N(W),f({nombre_pais:W.nombre_pais,codigo_iso:W.codigo_iso||"",codigo_telefono:W.codigo_telefono||""}),w(!0)},F=async W=>{var O,z;try{const Y=await Bt.getPais(W.id);Y.success?(_(Y.data),S(!0)):m.error(Y.message||"Error al cargar el pas")}catch(Y){const Z=((z=(O=Y.response)==null?void 0:O.data)==null?void 0:z.message)||Y.message||"Error al cargar el pas";m.error(Z)}},ae=async W=>{var O,z;if(window.confirm("Ests seguro de que quieres eliminar este pas?"))try{t(!0);const Y=await Bt.deletePais(W);Y.success?(m.success(Y.message||"Pas eliminado exitosamente"),await $()):m.error(Y.message||"Error al eliminar el pas")}catch(Y){m.error(((z=(O=Y.response)==null?void 0:O.data)==null?void 0:z.message)||Y.message||"Error al eliminar el pas")}finally{t(!1)}},ne=async W=>{var O,z,Y,Z;if(!W.nombre_pais||W.nombre_pais.trim()===""){m.error("El nombre del pas es obligatorio");return}if(W.nombre_pais.length>100){m.error("El nombre del pas no puede tener ms de 100 caracteres");return}if(W.codigo_iso&&W.codigo_iso.length>3){m.error("El cdigo ISO no puede tener ms de 3 caracteres");return}if(W.codigo_telefono&&W.codigo_telefono.length>10){m.error("El cdigo telefnico no puede tener ms de 10 caracteres");return}try{t(!0);const U={nombre_pais:W.nombre_pais.trim(),codigo_iso:W.codigo_iso?W.codigo_iso.trim().toUpperCase():null,codigo_telefono:W.codigo_telefono?W.codigo_telefono.trim():null};U.codigo_iso||delete U.codigo_iso,U.codigo_telefono||delete U.codigo_telefono;let ee;C?ee=await Bt.updatePais(C.id,U):ee=await Bt.createPais(U),ee.success?(m.success(ee.message||(C?"Pas actualizado exitosamente":"Pas creado exitosamente")),w(!1),N(null),f(),await $()):(m.error(ee.message||"Error al guardar el pas"),ee.errors&&(Array.isArray(ee.errors)?ee.errors:Object.values(ee.errors).flat()).forEach(D=>{typeof D=="string"&&D.trim()&&m.error(D,{duration:4e3})}))}catch(U){const ee=((z=(O=U.response)==null?void 0:O.data)==null?void 0:z.message)||U.message||"Error al guardar el pas";if(m.error(ee),(Z=(Y=U.response)==null?void 0:Y.data)!=null&&Z.errors){const oe=U.response.data.errors;(Array.isArray(oe)?oe:Object.values(oe).flat()).forEach(ie=>{typeof ie=="string"&&ie.trim()&&m.error(ie,{duration:4e3})})}}finally{t(!1)}},ce=[{key:"nombre_pais",label:"Pas",sortable:!0,render:W=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(lo,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:W.nombre_pais}),W.codigo_iso&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ISO: ",W.codigo_iso]})]})]})},{key:"codigo_telefono",label:"Cdigo Tel.",render:W=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:W.codigo_telefono||"-"})},{key:"actions",label:"Acciones",render:W=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>F(W)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>V(W)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>ae(W.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(lo,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Pases"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los pases del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:G,children:"Nuevo Pas"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Pases"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(lo,{className:"h-6 w-6 text-white"})})]})})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Pases"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar pases...",value:n,onChange:W=>o(W.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:ce,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),f()},title:C?"Editar Pas":"Nuevo Pas",size:"lg",children:e.jsxs("form",{onSubmit:b(ne),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(me,{label:"Nombre del Pas *",placeholder:"Ej: Bolivia",error:(H=P.nombre_pais)==null?void 0:H.message,...E("nombre_pais",{required:"El nombre del pas es obligatorio",maxLength:{value:100,message:"El nombre del pas no puede tener ms de 100 caracteres"},validate:W=>W&&W.trim().length===0?"El nombre del pas no puede estar vaco":!0}),onBlur:()=>R("nombre_pais")}),e.jsx(me,{label:"Cdigo ISO",placeholder:"Ej: BOL",error:(K=P.codigo_iso)==null?void 0:K.message,...E("codigo_iso",{maxLength:{value:3,message:"El cdigo ISO no puede tener ms de 3 caracteres"},pattern:{value:/^[A-Za-z]*$/,message:"El cdigo ISO solo puede contener letras"}}),onBlur:()=>R("codigo_iso"),onChange:W=>{const O=W.target.value.toUpperCase().replace(/[^A-Za-z]/g,"");q("codigo_iso",O,{shouldValidate:!0})}}),e.jsx(me,{label:"Cdigo Telefnico",placeholder:"Ej: +591",error:(te=P.codigo_telefono)==null?void 0:te.message,...E("codigo_telefono",{maxLength:{value:10,message:"El cdigo telefnico no puede tener ms de 10 caracteres"},pattern:{value:/^[+]?[0-9]*$/,message:"El cdigo telefnico solo puede contener nmeros y el smbolo +"}}),onBlur:()=>R("codigo_telefono")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),f()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Pas"]})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Pas",size:"lg",children:p&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre_pais})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo ISO"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.codigo_iso||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Telefnico"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.codigo_telefono||"-"})]}),p.provincias&&p.provincias.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincias"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[p.provincias.length," provincias"]})]})]})})})]})},G1=()=>{var W,O,z;const[s,r]=u.useState([]),[a,t]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(1),[y,w]=u.useState(1),[k,S]=u.useState(10),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),{register:R,handleSubmit:q,reset:I,formState:{errors:$},watch:G}=We();u.useEffect(()=>{V()},[]),u.useEffect(()=>{F()},[g,k,i,c]);const V=async()=>{try{const Y=await Bt.getPaises({per_page:1e3});Y.success&&Y.data&&t(Y.data.data||[])}catch(Y){console.error("Error al cargar pases:",Y)}},F=async()=>{var Y,Z;try{o(!0);const U=await qt.getProvincias({page:g,per_page:k,search:i,pais_id:c||void 0});U.success&&U.data?(r(U.data.data||[]),w(U.data.last_page||1)):(m.error(U.message||"Error al cargar provincias"),r([]),w(1))}catch(U){m.error(((Z=(Y=U.response)==null?void 0:Y.data)==null?void 0:Z.message)||U.message||"Error de conexin"),r([]),w(1)}finally{o(!1)}},ae=()=>{b(null),I({nombre_provincia:"",codigo_provincia:"",pais_id:""}),N(!0)},ne=Y=>{var Z;b(Y),I({nombre_provincia:Y.nombre_provincia,codigo_provincia:Y.codigo_provincia||"",pais_id:Y.pais_id||((Z=Y.pais)==null?void 0:Z.id)||""}),N(!0)},ce=async Y=>{try{const Z=await qt.getProvincia(Y.id);Z.success&&(P(Z.data),_(!0))}catch{m.error("Error al cargar la provincia")}},H=async Y=>{var Z,U;if(window.confirm("Ests seguro de que quieres eliminar esta provincia?"))try{o(!0);const ee=await qt.deleteProvincia(Y);ee.success?(m.success(ee.message||"Provincia eliminada exitosamente"),await F()):m.error(ee.message||"Error al eliminar la provincia")}catch(ee){m.error(((U=(Z=ee.response)==null?void 0:Z.data)==null?void 0:U.message)||ee.message||"Error al eliminar la provincia")}finally{o(!1)}},K=async Y=>{var Z,U,ee,oe;try{o(!0);let D;E?D=await qt.updateProvincia(E.id,Y):D=await qt.createProvincia(Y),D.success?(m.success(D.message||(E?"Provincia actualizada exitosamente":"Provincia creada exitosamente")),N(!1),b(null),I(),await F()):(m.error(D.message||"Error al guardar la provincia"),D.errors&&Object.keys(D.errors).forEach(ie=>{m.error(`${ie}: ${D.errors[ie]}`)}))}catch(D){m.error(((U=(Z=D.response)==null?void 0:Z.data)==null?void 0:U.message)||D.message||"Error al guardar la provincia"),(oe=(ee=D.response)==null?void 0:ee.data)!=null&&oe.errors&&Object.keys(D.response.data.errors).forEach(ie=>{m.error(`${ie}: ${D.response.data.errors[ie]}`)})}finally{o(!1)}},te=[{key:"nombre_provincia",label:"Provincia",sortable:!0,render:Y=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-accent-500 to-primary-500 flex items-center justify-center text-white font-semibold",children:e.jsx(co,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:Y.nombre_provincia}),Y.pais&&e.jsx("div",{className:"text-sm text-gray-500",children:Y.pais.nombre_pais})]})]})},{key:"codigo_provincia",label:"Cdigo",render:Y=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:Y.codigo_provincia||"-"})},{key:"actions",label:"Acciones",render:Y=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ce(Y)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>ne(Y)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>H(Y.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-primary-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(co,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Provincias"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las provincias del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:ae,children:"Nueva Provincia"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Provincias"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(co,{className:"h-6 w-6 text-white"})})]})})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Provincias"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar provincias...",value:i,onChange:Y=>l(Y.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los pases"}),a.map(Y=>e.jsx("option",{value:Y.id,children:Y.nombre_pais},Y.id))]})]})]}),e.jsx(es,{columns:te,data:s,loading:n,pagination:{currentPage:g,totalPages:y,perPage:k,onPageChange:x,onPerPageChange:S}})]}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),b(null),I()},title:E?"Editar Provincia":"Nueva Provincia",size:"lg",children:e.jsxs("form",{onSubmit:q(K),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas *"}),e.jsxs("select",{...R("pais_id",{required:"El pas es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar pas..."}),a.map(Y=>e.jsx("option",{value:Y.id,children:Y.nombre_pais},Y.id))]}),$.pais_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:$.pais_id.message})]}),e.jsx(me,{label:"Nombre de la Provincia *",placeholder:"Ej: La Paz",error:(W=$.nombre_provincia)==null?void 0:W.message,...R("nombre_provincia",{required:"El nombre de la provincia es obligatorio"})}),e.jsx(me,{label:"Cdigo de la Provincia",placeholder:"Ej: LP",error:(O=$.codigo_provincia)==null?void 0:O.message,...R("codigo_provincia")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{N(!1),b(null),I()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[E?"Actualizar":"Crear"," Provincia"]})]})]})}),e.jsx(Pe,{isOpen:p,onClose:()=>_(!1),title:"Detalles de la Provincia",size:"lg",children:f&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Provincia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:f.nombre_provincia})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((z=f.pais)==null?void 0:z.nombre_pais)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:f.codigo_provincia||"-"})]}),f.ciudades&&f.ciudades.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudades"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[f.ciudades.length," ciudades"]})]})]})})})]})},Q1=()=>{var te,W,O,z,Y;const[s,r]=u.useState([]),[a,t]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(1),[y,w]=u.useState(1),[k,S]=u.useState(10),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),{register:R,handleSubmit:q,reset:I,formState:{errors:$}}=We();u.useEffect(()=>{G()},[]),u.useEffect(()=>{V()},[g,k,i,c]);const G=async()=>{try{const Z=await qt.getProvincias({per_page:1e3});Z.success&&Z.data&&t(Z.data.data||[])}catch(Z){console.error("Error al cargar provincias:",Z)}},V=async()=>{var Z,U;try{o(!0);const ee=await Ht.getCiudades({page:g,per_page:k,search:i,provincia_id:c||void 0});ee.success&&ee.data?(r(ee.data.data||[]),w(ee.data.last_page||1)):(m.error(ee.message||"Error al cargar ciudades"),r([]),w(1))}catch(ee){m.error(((U=(Z=ee.response)==null?void 0:Z.data)==null?void 0:U.message)||ee.message||"Error de conexin"),r([]),w(1)}finally{o(!1)}},F=()=>{b(null),I({nombre_ciudad:"",codigo_postal:"",provincia_id:""}),N(!0)},ae=Z=>{var U;b(Z),I({nombre_ciudad:Z.nombre_ciudad,codigo_postal:Z.codigo_postal||"",provincia_id:Z.provincia_id||((U=Z.provincia)==null?void 0:U.id)||""}),N(!0)},ne=async Z=>{try{const U=await Ht.getCiudad(Z.id);U.success&&(P(U.data),_(!0))}catch{m.error("Error al cargar la ciudad")}},ce=async Z=>{var U,ee;if(window.confirm("Ests seguro de que quieres eliminar esta ciudad?"))try{o(!0);const oe=await Ht.deleteCiudad(Z);oe.success?(m.success(oe.message||"Ciudad eliminada exitosamente"),await V()):m.error(oe.message||"Error al eliminar la ciudad")}catch(oe){m.error(((ee=(U=oe.response)==null?void 0:U.data)==null?void 0:ee.message)||oe.message||"Error al eliminar la ciudad")}finally{o(!1)}},H=async Z=>{var U,ee,oe,D;try{o(!0);let ie;E?ie=await Ht.updateCiudad(E.id,Z):ie=await Ht.createCiudad(Z),ie.success?(m.success(ie.message||(E?"Ciudad actualizada exitosamente":"Ciudad creada exitosamente")),N(!1),b(null),I(),await V()):(m.error(ie.message||"Error al guardar la ciudad"),ie.errors&&Object.keys(ie.errors).forEach(xe=>{m.error(`${xe}: ${ie.errors[xe]}`)}))}catch(ie){m.error(((ee=(U=ie.response)==null?void 0:U.data)==null?void 0:ee.message)||ie.message||"Error al guardar la ciudad"),(D=(oe=ie.response)==null?void 0:oe.data)!=null&&D.errors&&Object.keys(ie.response.data.errors).forEach(xe=>{m.error(`${xe}: ${ie.response.data.errors[xe]}`)})}finally{o(!1)}},K=[{key:"nombre_ciudad",label:"Ciudad",sortable:!0,render:Z=>{var U;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-info-500 to-primary-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Dr,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:Z.nombre_ciudad}),Z.provincia&&e.jsxs("div",{className:"text-sm text-gray-500",children:[Z.provincia.nombre_provincia," - ",(U=Z.provincia.pais)==null?void 0:U.nombre_pais]})]})]})}},{key:"codigo_postal",label:"Cdigo Postal",render:Z=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:Z.codigo_postal||"-"})},{key:"actions",label:"Acciones",render:Z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ne(Z)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>ae(Z)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>ce(Z.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-primary-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Dr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Ciudades"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las ciudades del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:F,children:"Nueva Ciudad"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Ciudades"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Dr,{className:"h-6 w-6 text-white"})})]})})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Ciudades"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar ciudades...",value:i,onChange:Z=>l(Z.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:c,onChange:Z=>d(Z.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las provincias"}),a.map(Z=>e.jsx("option",{value:Z.id,children:Z.nombre_provincia},Z.id))]})]})]}),e.jsx(es,{columns:K,data:s,loading:n,pagination:{currentPage:g,totalPages:y,perPage:k,onPageChange:x,onPerPageChange:S}})]}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),b(null),I()},title:E?"Editar Ciudad":"Nueva Ciudad",size:"lg",children:e.jsxs("form",{onSubmit:q(H),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia *"}),e.jsxs("select",{...R("provincia_id",{required:"La provincia es obligatoria"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar provincia..."}),a.map(Z=>e.jsx("option",{value:Z.id,children:Z.nombre_provincia},Z.id))]}),$.provincia_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:$.provincia_id.message})]}),e.jsx(me,{label:"Nombre de la Ciudad *",placeholder:"Ej: La Paz",error:(te=$.nombre_ciudad)==null?void 0:te.message,...R("nombre_ciudad",{required:"El nombre de la ciudad es obligatorio"})}),e.jsx(me,{label:"Cdigo Postal",placeholder:"Ej: 0000",error:(W=$.codigo_postal)==null?void 0:W.message,...R("codigo_postal")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{N(!1),b(null),I()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[E?"Actualizar":"Crear"," Ciudad"]})]})]})}),e.jsx(Pe,{isOpen:p,onClose:()=>_(!1),title:"Detalles de la Ciudad",size:"lg",children:f&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Ciudad"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:f.nombre_ciudad})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((O=f.provincia)==null?void 0:O.nombre_provincia)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((Y=(z=f.provincia)==null?void 0:z.pais)==null?void 0:Y.nombre_pais)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Postal"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:f.codigo_postal||"-"})]}),f.instituciones&&f.instituciones.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instituciones"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[f.instituciones.length," instituciones"]})]})]})})})]})},W1=()=>{var O,z,Y,Z,U,ee,oe;const[s,r]=u.useState([]),[a,t]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(""),[c,d]=u.useState(""),[g,x]=u.useState(""),[y,w]=u.useState(1),[k,S]=u.useState(1),[C,N]=u.useState(10),[p,_]=u.useState(!1),[E,b]=u.useState(!1),[f,P]=u.useState(null),[R,q]=u.useState(null),{register:I,handleSubmit:$,reset:G,formState:{errors:V}}=We();u.useEffect(()=>{F()},[]),u.useEffect(()=>{ae()},[y,C,i,c,g]);const F=async()=>{try{const D=await Ht.getCiudades({per_page:1e3});D.success&&D.data&&t(D.data.data||[])}catch(D){console.error("Error al cargar ciudades:",D)}},ae=async()=>{var D,ie;try{o(!0);const xe=await Un.getInstituciones({page:y,per_page:C,search:i,ciudad_id:c||void 0,estado:g!==""?g:void 0});xe.success&&xe.data?(r(xe.data.data||[]),S(xe.data.last_page||1)):(m.error(xe.message||"Error al cargar instituciones"),r([]),S(1))}catch(xe){m.error(((ie=(D=xe.response)==null?void 0:D.data)==null?void 0:ie.message)||xe.message||"Error de conexin"),r([]),S(1)}finally{o(!1)}},ne=()=>{P(null),G({nombre:"",direccion:"",telefono:"",email:"",sitio_web:"",fecha_fundacion:"",estado:1,ciudad_id:""}),_(!0)},ce=D=>{var ie;P(D),G({nombre:D.nombre,direccion:D.direccion||"",telefono:D.telefono||"",email:D.email||"",sitio_web:D.sitio_web||"",fecha_fundacion:D.fecha_fundacion?D.fecha_fundacion.split("T")[0]:"",estado:D.estado,ciudad_id:D.ciudad_id||((ie=D.ciudad)==null?void 0:ie.id)||""}),_(!0)},H=async D=>{try{const ie=await Un.getInstitucion(D.id);ie.success&&(q(ie.data),b(!0))}catch{m.error("Error al cargar la institucin")}},K=async D=>{var ie,xe;if(window.confirm("Ests seguro de que quieres eliminar esta institucin?"))try{o(!0);const Ee=await Un.deleteInstitucion(D);Ee.success?(m.success(Ee.message||"Institucin eliminada exitosamente"),await ae()):m.error(Ee.message||"Error al eliminar la institucin")}catch(Ee){m.error(((xe=(ie=Ee.response)==null?void 0:ie.data)==null?void 0:xe.message)||Ee.message||"Error al eliminar la institucin")}finally{o(!1)}},te=async D=>{var ie,xe,Ee,he;try{o(!0);const Ne={...D,estado:parseInt(D.estado),ciudad_id:parseInt(D.ciudad_id)};let ue;f?ue=await Un.updateInstitucion(f.id,Ne):ue=await Un.createInstitucion(Ne),ue.success?(m.success(ue.message||(f?"Institucin actualizada exitosamente":"Institucin creada exitosamente")),_(!1),P(null),G(),await ae()):(m.error(ue.message||"Error al guardar la institucin"),ue.errors&&Object.keys(ue.errors).forEach(J=>{m.error(`${J}: ${ue.errors[J]}`)}))}catch(Ne){m.error(((xe=(ie=Ne.response)==null?void 0:ie.data)==null?void 0:xe.message)||Ne.message||"Error al guardar la institucin"),(he=(Ee=Ne.response)==null?void 0:Ee.data)!=null&&he.errors&&Object.keys(Ne.response.data.errors).forEach(ue=>{m.error(`${ue}: ${Ne.response.data.errors[ue]}`)})}finally{o(!1)}},W=[{key:"nombre",label:"Institucin",sortable:!0,render:D=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-warning-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(mn,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:D.nombre}),D.ciudad&&e.jsx("div",{className:"text-sm text-gray-500",children:D.ciudad.nombre_ciudad})]})]})},{key:"estado",label:"Estado",render:D=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.estado===1||D.estado==="1"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:D.estado===1||D.estado==="1"?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:D=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>H(D)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>ce(D)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>K(D.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(mn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Instituciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las instituciones del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:ne,children:"Nueva Institucin"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Instituciones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(mn,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Instituciones Activas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(D=>D.estado===1||D.estado==="1").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Instituciones"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar instituciones...",value:i,onChange:D=>l(D.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:c,onChange:D=>d(D.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las ciudades"}),a.map(D=>e.jsx("option",{value:D.id,children:D.nombre_ciudad},D.id))]}),e.jsxs("select",{value:g,onChange:D=>x(D.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"1",children:"Activas"}),e.jsx("option",{value:"0",children:"Inactivas"})]})]})]}),e.jsx(es,{columns:W,data:s,loading:n,pagination:{currentPage:y,totalPages:k,perPage:C,onPageChange:w,onPerPageChange:N}})]}),e.jsx(Pe,{isOpen:p,onClose:()=>{_(!1),P(null),G()},title:f?"Editar Institucin":"Nueva Institucin",size:"lg",children:e.jsxs("form",{onSubmit:$(te),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(me,{label:"Nombre de la Institucin *",placeholder:"Ej: Universidad Mayor de San Andrs",error:(O=V.nombre)==null?void 0:O.message,...I("nombre",{required:"El nombre es obligatorio"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad *"}),e.jsxs("select",{...I("ciudad_id",{required:"La ciudad es obligatoria"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar ciudad..."}),a.map(D=>e.jsx("option",{value:D.id,children:D.nombre_ciudad},D.id))]}),V.ciudad_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:V.ciudad_id.message})]}),e.jsx(me,{label:"Direccin",placeholder:"Ej: Av. Villazn N 1995",error:(z=V.direccion)==null?void 0:z.message,...I("direccion")}),e.jsx(me,{label:"Telfono",placeholder:"Ej: +591 2 2440000",error:(Y=V.telefono)==null?void 0:Y.message,...I("telefono")}),e.jsx(me,{label:"Email",type:"email",placeholder:"Ej: contacto@umsa.edu.bo",error:(Z=V.email)==null?void 0:Z.message,...I("email")}),e.jsx(me,{label:"Sitio Web",type:"url",placeholder:"Ej: https://www.umsa.edu.bo",error:(U=V.sitio_web)==null?void 0:U.message,...I("sitio_web")}),e.jsx(me,{label:"Fecha de Fundacin",type:"date",error:(ee=V.fecha_fundacion)==null?void 0:ee.message,...I("fecha_fundacion")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado *"}),e.jsxs("select",{...I("estado",{required:"El estado es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]}),V.estado&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:V.estado.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{_(!1),P(null),G()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[f?"Actualizar":"Crear"," Institucin"]})]})]})}),e.jsx(Pe,{isOpen:E,onClose:()=>b(!1),title:"Detalles de la Institucin",size:"lg",children:R&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((oe=R.ciudad)==null?void 0:oe.nombre_ciudad)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.direccion||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telfono"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.telefono||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.email||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sitio Web"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.sitio_web||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.estado===1||R.estado==="1"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:R.estado===1||R.estado==="1"?"Activa":"Inactiva"})]})]})})})]})},Qn={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/tipos-documento",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await ye(`/admin/tipos-documento/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Me("/admin/tipos-documento",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS_CREATE}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo documento:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await Ze(`/admin/tipos-documento/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS_UPDATE}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo documento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await ts(`/admin/tipos-documento/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS_DELETE}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error deleting tipo documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},Ut={async getEstudiantesPendientes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/documentos/validacion",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiantes pendientes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getDocumentosEstudiante(s){var r,a;try{const t=await ye(`/admin/documentos/validacion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching documentos estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async aprobarDocumento(s,r=""){var a,t;try{const n=await Me(`/admin/documentos/validacion/${s}/aprobar`,{observaciones:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Documento aprobado exitosamente"}:{success:!1,message:n.data.message||"Error al aprobar documento"}}catch(n){return console.error("Error aprobando documento:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al aprobar documento"}}},async rechazarDocumento(s,r){var a,t;try{const n=await Me("/admin/documentos/validacion/rechazar",{documento_id:s,motivo:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Documento rechazado exitosamente"}:{success:!1,message:n.data.message||"Error al rechazar documento"}}catch(n){return console.error("Error rechazando documento:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al rechazar documento"}}},async aprobarTodos(s){var r,a;try{const t=await Me(`/admin/documentos/validacion/${s}/aprobar-todos`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Todos los documentos aprobados exitosamente"}:{success:!1,message:t.data.message||"Error al aprobar documentos"}}catch(t){return console.error("Error aprobando todos los documentos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al aprobar documentos"}}}},px={async getMisDocumentos(){var s,r;try{const a=await ye("/estudiante/documentos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching mis documentos:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async subirDocumento(s,r){var a,t,n,o;try{const i=new FormData;i.append("tipo_documento_id",s),i.append("archivo",r);const l=await $o("/estudiante/documentos/subir",i);return l.data.success?{success:!0,data:l.data.data,message:l.data.message||"Documento subido exitosamente"}:{success:!1,message:l.data.message||"Error al subir documento",errors:l.data.errors}}catch(i){return console.error("Error subiendo documento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al subir documento",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}}},K1=()=>{var ae;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),{register:E,handleSubmit:b,reset:f,formState:{errors:P}}=We();u.useEffect(()=>{R()},[i,g,n]);const R=async()=>{try{t(!0);const ne=await Qn.get({page:i,per_page:g,search:n});ne.success&&ne.data?(r(ne.data.data||[]),d(ne.data.last_page||1)):(m.error(ne.message||"Error al cargar tipos de documento"),r([]),d(1))}catch{m.error("Error de conexin"),r([]),d(1)}finally{t(!1)}},q=()=>{N(null),f({nombre_entidad:""}),w(!0)},I=ne=>{N(ne),f({nombre_entidad:ne.nombre_entidad}),w(!0)},$=async ne=>{try{const ce=await Qn.getById(ne.tipo_documento_id);ce.success&&(_(ce.data),S(!0))}catch{m.error("Error al cargar el tipo de documento")}},G=async ne=>{if(window.confirm("Ests seguro de que quieres eliminar este tipo de documento?"))try{t(!0);const ce=await Qn.remove(ne);ce.success?(m.success(ce.message||"Tipo de documento eliminado exitosamente"),await R()):m.error(ce.message||"Error al eliminar el tipo de documento")}catch{m.error("Error al eliminar el tipo de documento")}finally{t(!1)}},V=async ne=>{try{t(!0);let ce;C?ce=await Qn.update(C.tipo_documento_id,ne):ce=await Qn.create(ne),ce.success?(m.success(ce.message||(C?"Tipo de documento actualizado exitosamente":"Tipo de documento creado exitosamente")),w(!1),N(null),f(),await R()):(m.error(ce.message||"Error al guardar el tipo de documento"),ce.errors&&Object.keys(ce.errors).forEach(H=>{m.error(`${H}: ${ce.errors[H]}`)}))}catch{m.error("Error al guardar el tipo de documento")}finally{t(!1)}},F=[{key:"nombre_entidad",label:"Nombre",sortable:!0,render:ne=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(us,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ne.nombre_entidad}),ne.documentos_count!==void 0&&e.jsxs("div",{className:"text-sm text-gray-500",children:[ne.documentos_count," documentos"]})]})]})},{key:"actions",label:"Acciones",render:ne=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>$(ne)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>I(ne)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>G(ne.tipo_documento_id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(us,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Documento"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los tipos de documento del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:q,children:"Nuevo Tipo"})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Tipos"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar tipos...",value:n,onChange:ne=>o(ne.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:F,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),f()},title:C?"Editar Tipo de Documento":"Nuevo Tipo de Documento",size:"lg",children:e.jsxs("form",{onSubmit:b(V),className:"space-y-6",children:[e.jsx(me,{label:"Nombre del Tipo *",placeholder:"Ej: Estudiante, Docente, etc.",error:(ae=P.nombre_entidad)==null?void 0:ae.message,...E("nombre_entidad",{required:"El nombre es obligatorio"})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),f()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Tipo"]})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Tipo de Documento",size:"lg",children:p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre_entidad})]}),p.documentos&&p.documentos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Documentos Asociados"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[p.documentos.length," documentos"]})]})]})})]})},Z1=({isOpen:s,onClose:r,documento:a,estudiante:t,onAprobar:n,onRechazar:o,loading:i=!1})=>{const[l,c]=u.useState(!1),[d,g]=u.useState(!1),[x,y]=u.useState(!1),[w,k]=u.useState("");if(!a||!s)return null;let S=a.url_descarga||a.path;if(S&&!S.startsWith("http://")&&!S.startsWith("https://")){const R=R0.apiUrl.replace("/api","");S.startsWith("/storage/")?S=`${R}${S}`:S.startsWith("/")?S=`${R}/storage${S}`:S=`${R}/storage/${S}`}const C=S&&/\.(jpg|jpeg|png|gif|webp)$/i.test(S),N=S&&/\.pdf$/i.test(S),p=a.nombre_documento||a.nombre||"Documento",_=async()=>{n&&await n(a.id||a.documento_id)},E=async()=>{if(!w||w.trim().length<10){m.error("El motivo del rechazo debe tener al menos 10 caracteres");return}o&&(await o(a.id||a.documento_id,w),y(!1),k(""))},b=()=>{if(S){const P=document.createElement("a");P.href=S,P.download=p,P.target="_blank",P.rel="noopener noreferrer",document.body.appendChild(P),P.click(),document.body.removeChild(P)}},f=a.estado==="0"||a.estado===0;return e.jsx(Pe,{isOpen:s,onClose:r,title:`Vista Previa: ${p}`,size:"xl",className:"max-w-6xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Estudiante:"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[t.nombre," ",t.apellido]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"CI:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:t.ci})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Versin:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.version||"1.0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.estado==="0"||a.estado===0?"Pendiente":a.estado==="1"||a.estado===1?"Aprobado":a.estado==="2"||a.estado===2?"Rechazado":"Desconocido"})]}),a.fecha_subida&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Fecha de subida:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:new Date(a.fecha_subida).toLocaleDateString()})]}),a.observaciones&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Observaciones:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.observaciones})]})]})}),e.jsx("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:S?C?e.jsx("div",{className:"relative bg-white dark:bg-gray-800",children:l?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(Nr,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar la imagen"}),e.jsx(X,{variant:"outline",size:"sm",onClick:()=>{c(!1),window.open(S,"_blank")},children:"Abrir en nueva pestaa"})]}):e.jsxs("div",{className:"relative w-full",style:{minHeight:"400px",maxHeight:"70vh"},children:[e.jsx("img",{src:S,alt:p,className:"w-full h-auto object-contain",style:{maxHeight:"70vh"},onError:()=>c(!0),onLoad:()=>c(!1)}),i&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx(em,{className:"h-8 w-8 animate-spin text-white"})})]})}):N?e.jsx("div",{className:"relative w-full",style:{minHeight:"600px",maxHeight:"70vh"},children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(Nr,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar el PDF. Puede que el navegador no soporte la visualizacin."}),e.jsx(X,{variant:"outline",size:"sm",onClick:()=>window.open(S,"_blank"),children:"Abrir en nueva pestaa"})]}):e.jsx("iframe",{src:S,className:"w-full h-full",style:{minHeight:"600px",maxHeight:"70vh"},title:p,onError:()=>g(!0)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(us,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Tipo de archivo no soportado para vista previa"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:b,children:"Descargar archivo"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(us,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"No hay archivo disponible para este documento"})]})}),x&&e.jsxs("div",{className:"border-2 border-red-200 dark:border-red-800 rounded-lg p-4 bg-red-50 dark:bg-red-900/20",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3",children:"Motivo del Rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:w,onChange:P=>k(P.target.value),placeholder:"Describe el motivo del rechazo (mnimo 10 caracteres)..."}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[w.length,"/500 caracteres"]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx(X,{variant:"outline",size:"sm",onClick:()=>{y(!1),k("")},children:"Cancelar"}),e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:E,disabled:i||!w||w.trim().length<10,children:"Confirmar Rechazo"})]})]}),f&&!x&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:b,children:"Descargar"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:()=>y(!0),className:"border-red-300 text-red-700 hover:bg-red-50",children:"Rechazar"}),e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Le,{className:"h-4 w-4"}),onClick:_,disabled:i,children:i?"Procesando...":"Aprobar"})]})]}),!f&&e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:b,children:"Descargar"})})]})})},yx=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(null),[C,N]=u.useState([]),[p,_]=u.useState(!1),[E,b]=u.useState(!1),[f,P]=u.useState(null),[R,q]=u.useState(""),[I,$]=u.useState(!1),[G,V]=u.useState(null);u.useEffect(()=>{F()},[i,g,n]);const F=async()=>{try{t(!0);const z=await Ut.getEstudiantesPendientes({page:i,per_page:g,search:n});z.success&&z.data?(r(z.data.data||[]),d(z.data.last_page||1)):(m.error(z.message||"Error al cargar estudiantes"),r([]),d(1))}catch{m.error("Error de conexin"),r([]),d(1)}finally{t(!1)}},ae=async z=>{try{_(!0),S(z);const Y=await Ut.getDocumentosEstudiante(z.id);Y.success?(N(Y.data.documentos||[]),w(!0)):m.error(Y.message||"Error al cargar documentos")}catch{m.error("Error al cargar documentos")}finally{_(!1)}},ne=async(z,Y="")=>{try{_(!0);const Z=await Ut.aprobarDocumento(z,Y);Z.success?(m.success(Z.message||"Documento aprobado exitosamente"),$(!1),V(null),k&&await ae(k),await F()):m.error(Z.message||"Error al aprobar documento")}catch{m.error("Error al aprobar documento")}finally{_(!1)}},ce=async(z,Y)=>{try{_(!0);const Z=await Ut.rechazarDocumento(z,Y);Z.success?(m.success(Z.message||"Documento rechazado exitosamente"),$(!1),V(null),k&&await ae(k),await F()):m.error(Z.message||"Error al rechazar documento")}catch{m.error("Error al rechazar documento")}finally{_(!1)}},H=z=>{V(z),$(!0)},K=async()=>{if(!R||R.length<10){m.error("El motivo del rechazo debe tener al menos 10 caracteres");return}try{_(!0);const z=await Ut.rechazarDocumento(f.id,R);z.success?(m.success(z.message||"Documento rechazado exitosamente"),b(!1),q(""),P(null),k&&await ae(k),await F()):m.error(z.message||"Error al rechazar documento")}catch{m.error("Error al rechazar documento")}finally{_(!1)}},te=async z=>{if(window.confirm("Ests seguro de aprobar todos los documentos de este estudiante?"))try{t(!0);const Y=await Ut.aprobarTodos(z);Y.success?(m.success(Y.message||"Todos los documentos aprobados exitosamente"),await F(),k&&k.id===z&&w(!1)):m.error(Y.message||"Error al aprobar documentos")}catch{m.error("Error al aprobar documentos")}finally{t(!1)}},W=z=>{const Y={0:{label:"Pendiente",color:"bg-yellow-100 text-yellow-800",icon:us},1:{label:"Aprobado",color:"bg-green-100 text-green-800",icon:Le},2:{label:"Rechazado",color:"bg-red-100 text-red-800",icon:ls}},Z=Y[z]||Y[0],U=Z.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Z.color}`,children:[e.jsx(U,{className:"h-3 w-3"}),Z.label]})},O=[{key:"nombre",label:"Estudiante",render:z=>e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[z.nombre," ",z.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",z.ci]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Registro: ",z.registro_estudiante]})]})},{key:"documentos_pendientes",label:"Documentos Pendientes",render:z=>e.jsx("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:z.documentos_pendientes||0})},{key:"actions",label:"Acciones",render:z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ae(z),children:"Ver Documentos"}),e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Le,{className:"h-4 w-4"}),onClick:()=>te(z.id),children:"Aprobar Todos"})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(T0,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Validacin de Documentos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Revisa y aprueba documentos de estudiantes"})]})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Estudiantes con Documentos Pendientes"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar estudiantes...",value:n,onChange:z=>o(z.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:O,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),S(null),N([])},title:k?`Documentos de ${k.nombre} ${k.apellido}`:"Documentos",size:"xl",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Xs,{})}):e.jsx("div",{className:"space-y-6",children:C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(us,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No hay documentos para este estudiante"})]}):C.map((z,Y)=>{var Z,U;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-4",children:((Z=z.tipo_documento)==null?void 0:Z.nombre_entidad)||"Documento"}),e.jsx("div",{className:"space-y-3",children:(U=z.versiones)==null?void 0:U.map((ee,oe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[W(ee.estado),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Versin ",ee.version]})]}),ee.observaciones&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:ee.observaciones}),ee.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Subido: ",new Date(ee.fecha_subida).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ee.url_descarga&&e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>H(ee),title:"Ver documento en vista previa",children:"Ver"}),ee.estado==="0"&&e.jsxs(e.Fragment,{children:[e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Le,{className:"h-4 w-4"}),onClick:()=>ne(ee.id),title:"Aprobar documento",children:"Aprobar"}),e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:()=>{P(ee),b(!0)},title:"Rechazar documento",children:"Rechazar"})]})]})]},oe))})]},Y)})})}),e.jsx(Pe,{isOpen:E,onClose:()=>{b(!1),P(null),q("")},title:"Rechazar Documento",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo del Rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:R,onChange:z=>q(z.target.value),placeholder:"Describe el motivo del rechazo (mnimo 10 caracteres)..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.length,"/500 caracteres"]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{variant:"outline",onClick:()=>{b(!1),P(null),q("")},children:"Cancelar"}),e.jsx(X,{variant:"primary",icon:e.jsx(ls,{className:"h-5 w-5"}),onClick:K,children:"Rechazar Documento"})]})]})}),e.jsx(Z1,{isOpen:I,onClose:()=>{$(!1),V(null)},documento:G,estudiante:k,onAprobar:ne,onRechazar:ce,loading:p})]})},mt={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",programa_id:s.programa_id||""};t.search||delete t.search,t.programa_id||delete t.programa_id;const n=await ye("/admin/planes-pago",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching planes pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await ye(`/admin/planes-pago/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching plan pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await ye("/admin/planes-pago/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Me("/admin/planes-pago",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS_CREATE}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating plan pago:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await Ze(`/admin/planes-pago/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS_UPDATE}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating plan pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await ts(`/admin/planes-pago/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS_DELETE}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error deleting plan pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},$t={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await ye("/admin/descuentos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching descuentos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getInscripcionesSinDescuento(){var s,r;try{const a=await ye("/admin/descuentos/inscripciones-sin-descuento");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching inscripciones sin descuento:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await ye(`/admin/descuentos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching descuento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Me("/admin/descuentos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||M.SUCCESS_CREATE}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating descuento:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await Ze(`/admin/descuentos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||M.SUCCESS_UPDATE}:{success:!1,message:i.data.message||M.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating descuento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||M.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await ts(`/admin/descuentos/${s}`);return t.data.success?{success:!0,message:t.data.message||M.SUCCESS_DELETE}:{success:!1,message:t.data.message||M.ERROR_DELETE}}catch(t){return console.error("Error deleting descuento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_DELETE}}}},bx={async getMisCuotas(){var s,r;try{const a=await ye("/estudiante/pagos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching mis cuotas:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async getCuotaById(s){var r,a;try{const t=await ye(`/estudiante/pagos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching cuota:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async registrarPago(s,r,a,t,n=null){var o,i,l,c;try{const d=new FormData;d.append("cuota_id",s),d.append("monto",r),d.append("metodo",a),d.append("comprobante",t),n&&d.append("token",n);const g=await $o("/estudiante/pagos",d);return g.data.success?{success:!0,data:g.data.data,message:g.data.message||"Pago registrado exitosamente"}:{success:!1,message:g.data.message||"Error al registrar pago",errors:g.data.errors}}catch(d){return console.error("Error registrando pago:",d),{success:!1,message:((i=(o=d.response)==null?void 0:o.data)==null?void 0:i.message)||"Error al registrar pago",errors:(c=(l=d.response)==null?void 0:l.data)==null?void 0:c.errors}}},async getInfoQR(s){var r,a;try{const t=await ye(`/estudiante/pagos/${s}/info-qr`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching QR info:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}}},J1=()=>{var U,ee,oe,D,ie,xe,Ee,he,Ne,ue,J,L,j,B,h,v,T;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState({inscripciones:[],programas:[]}),[f,P]=u.useState(null),{register:R,handleSubmit:q,reset:I,control:$,watch:G,formState:{errors:V}}=We({defaultValues:{inscripcion_id:"",monto_total:"",total_cuotas:1,cuotas:[{fecha_ini:"",fecha_fin:"",monto:""}]}}),{fields:F,append:ae,remove:ne}=h1({control:$,name:"cuotas"});G("monto_total");const ce=G("total_cuotas");u.useEffect(()=>{H(),K()},[i,g,n]),u.useEffect(()=>{const A=F.length;if(ce&&ce>A)for(let Q=A;Q<ce;Q++)ae({fecha_ini:"",fecha_fin:"",monto:""});else if(ce&&ce<A)for(let Q=A-1;Q>=ce;Q--)ne(Q)},[ce]);const H=async()=>{try{t(!0);const A=await mt.get({page:i,per_page:g,search:n});A.success&&A.data?(r(A.data.data||[]),d(A.data.last_page||1)):(m.error(A.message||"Error al cargar planes de pago"),r([]),d(1))}catch{m.error("Error de conexin"),r([]),d(1)}finally{t(!1)}},K=async()=>{try{const A=await mt.getDatosFormulario();A.success&&b(A.data)}catch(A){console.error("Error fetching datos formulario:",A)}},te=()=>{N(null),P(null),I({inscripcion_id:"",monto_total:"",total_cuotas:1,cuotas:[{fecha_ini:"",fecha_fin:"",monto:""}]}),w(!0)},W=async A=>{var Q;try{t(!0);const re=await mt.getById(A.id);if(re.success){const de=re.data;N(de),de.inscripcion&&P({id:de.inscripcion.id,estudiante:de.inscripcion.estudiante,programa:de.inscripcion.programa,fecha_formatted:de.inscripcion.fecha_formatted});const ve=je=>{if(!je)return"";const le=new Date(je);return isNaN(le.getTime())?"":le.toISOString().split("T")[0]};I({inscripcion_id:de.inscripcion_id||((Q=de.inscripcion)==null?void 0:Q.id)||"",monto_total:de.monto_total||"",total_cuotas:de.total_cuotas||1,cuotas:de.cuotas&&de.cuotas.length>0?de.cuotas.map(je=>({fecha_ini:ve(je.fecha_ini),fecha_fin:ve(je.fecha_fin),monto:je.monto||""})):[{fecha_ini:"",fecha_fin:"",monto:""}]}),w(!0)}else m.error(re.message||"Error al cargar los datos del plan de pago")}catch(re){console.error("Error al cargar plan para editar:",re),m.error("Error al cargar los datos del plan de pago")}finally{t(!1)}},O=async A=>{try{const Q=await mt.getById(A.id);Q.success&&(_(Q.data),S(!0))}catch{m.error("Error al cargar el plan de pago")}},z=async A=>{if(window.confirm("Ests seguro de que quieres eliminar este plan de pago?"))try{t(!0);const Q=await mt.remove(A);Q.success?(m.success(Q.message||"Plan de pago eliminado exitosamente"),await H()):m.error(Q.message||"Error al eliminar el plan de pago")}catch{m.error("Error al eliminar el plan de pago")}finally{t(!1)}},Y=async A=>{try{t(!0);const Q=A.cuotas.reduce((de,ve)=>de+parseFloat(ve.monto||0),0);if(Math.abs(Q-parseFloat(A.monto_total))>.01){m.error("El monto total debe coincidir con la suma de las cuotas");return}if(A.cuotas.length!==parseInt(A.total_cuotas)){m.error("El nmero de cuotas debe coincidir con el total de cuotas");return}let re;C?re=await mt.update(C.id,A):re=await mt.create(A),re.success?(m.success(re.message||(C?"Plan de pago actualizado exitosamente":"Plan de pago creado exitosamente")),w(!1),N(null),I(),await H()):(m.error(re.message||"Error al guardar el plan de pago"),re.errors&&Object.keys(re.errors).forEach(de=>{(Array.isArray(re.errors[de])?re.errors[de]:[re.errors[de]]).forEach(je=>{let le=de;if(de.includes("cuotas.")){const se=de.match(/cuotas\.(\d+)\.(.+)/);if(se){const pe=parseInt(se[1])+1,ke=se[2];le=`Cuota ${pe} - ${{fecha_ini:"Fecha de inicio",fecha_fin:"Fecha de fin",monto:"Monto"}[ke]||ke}`}}else le={inscripcion_id:"Inscripcin",monto_total:"Monto total",total_cuotas:"Total de cuotas"}[de]||de;m.error(`${le}: ${je}`,{duration:5e3})})}))}catch{m.error("Error al guardar el plan de pago")}finally{t(!1)}},Z=[{key:"estudiante",label:"Estudiante",render:A=>{var Q,re,de,ve,je,le;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(re=(Q=A.inscripcion)==null?void 0:Q.estudiante)==null?void 0:re.nombre," ",(ve=(de=A.inscripcion)==null?void 0:de.estudiante)==null?void 0:ve.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",(le=(je=A.inscripcion)==null?void 0:je.estudiante)==null?void 0:le.ci]})]})}},{key:"programa",label:"Programa",render:A=>{var Q,re;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((re=(Q=A.inscripcion)==null?void 0:Q.programa)==null?void 0:re.nombre)||"-"})}},{key:"monto_total",label:"Monto Total",render:A=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(A.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"total_cuotas",label:"Cuotas",render:A=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:A.total_cuotas||0})},{key:"estado",label:"Estado",render:A=>{const Q=A.monto_pagado||0,re=parseFloat(A.monto_total||0),de=re>0?Q/re*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[de.toFixed(0),"% Pagado"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(de,100)}%`}})})]})}},{key:"actions",label:"Acciones",render:A=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>O(A)}),!A.esta_completo&&e.jsxs(e.Fragment,{children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>W(A)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>z(A.id)})]})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(aa,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Planes de Pago"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los planes de pago del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:te,children:"Nuevo Plan"})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Planes"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar planes...",value:n,onChange:A=>o(A.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:Z,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),P(null),I()},title:C?"Editar Plan de Pago":"Nuevo Plan de Pago",size:"xl",children:e.jsxs("form",{onSubmit:q(Y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inscripcin *"}),C&&f?e.jsxs("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"font-medium",children:[(U=f.estudiante)==null?void 0:U.nombre," ",(ee=f.estudiante)==null?void 0:ee.apellido," (CI: ",(oe=f.estudiante)==null?void 0:oe.ci,")"]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(D=f.programa)==null?void 0:D.nombre," - ",f.fecha_formatted]}),e.jsx("input",{type:"hidden",...R("inscripcion_id"),value:f.id})]}):e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",...R("inscripcion_id",{required:"La inscripcin es obligatoria"}),children:[e.jsx("option",{value:"",children:"Seleccionar inscripcin"}),((ie=E.inscripciones)==null?void 0:ie.length)>0?E.inscripciones.map(A=>{var Q,re,de,ve;return e.jsxs("option",{value:A.id,children:[(Q=A.estudiante)==null?void 0:Q.nombre," ",(re=A.estudiante)==null?void 0:re.apellido," (CI: ",(de=A.estudiante)==null?void 0:de.ci,") - ",(ve=A.programa)==null?void 0:ve.nombre," - ",A.fecha_formatted||A.fecha]},A.id)}):e.jsx("option",{value:"",disabled:!0,children:"No hay inscripciones sin plan de pago"})]}),V.inscripcion_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:V.inscripcion_id.message})]}),e.jsx(me,{label:"Monto Total *",type:"number",step:"0.01",placeholder:"0.00",error:(xe=V.monto_total)==null?void 0:xe.message,...R("monto_total",{required:"El monto total es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})}),e.jsx(me,{label:"Total de Cuotas *",type:"number",min:"1",placeholder:"1",error:(Ee=V.total_cuotas)==null?void 0:Ee.message,...R("total_cuotas",{required:"El total de cuotas es obligatorio",min:{value:1,message:"Debe haber al menos 1 cuota"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Cuotas *"}),e.jsx("div",{className:"space-y-4",children:F.map((A,Q)=>{var re,de,ve,je,le,se,pe,ke,_e;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Cuota ",Q+1]}),F.length>1&&e.jsx(X,{type:"button",variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>ne(Q),children:"Eliminar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(me,{label:"Fecha Inicio *",type:"date",error:(ve=(de=(re=V.cuotas)==null?void 0:re[Q])==null?void 0:de.fecha_ini)==null?void 0:ve.message,...R(`cuotas.${Q}.fecha_ini`,{required:"La fecha de inicio es obligatoria"})}),e.jsx(me,{label:"Fecha Fin *",type:"date",error:(se=(le=(je=V.cuotas)==null?void 0:je[Q])==null?void 0:le.fecha_fin)==null?void 0:se.message,...R(`cuotas.${Q}.fecha_fin`,{required:"La fecha de fin es obligatoria"})}),e.jsx(me,{label:"Monto *",type:"number",step:"0.01",placeholder:"0.00",error:(_e=(ke=(pe=V.cuotas)==null?void 0:pe[Q])==null?void 0:ke.monto)==null?void 0:_e.message,...R(`cuotas.${Q}.monto`,{required:"El monto es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})})]})]},A.id)})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),P(null),I()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Plan"]})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Plan de Pago",size:"xl",children:p&&e.jsxs("div",{className:"space-y-6",children:[((he=p.inscripcion)==null?void 0:he.estudiante)&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[p.inscripcion.estudiante.nombre," ",p.inscripcion.estudiante.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.estudiante.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.estudiante.registro_estudiante})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.estudiante.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.estudiante.celular||"N/A"})]})]})]}),((Ne=p.inscripcion)==null?void 0:Ne.programa)&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:p.inscripcion.programa.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.programa.institucion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.programa.rama_academica})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.inscripcion.programa.tipo_programa})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(aa,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin de Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:parseFloat(p.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pagado"}),e.jsx("p",{className:"text-lg font-bold text-success-600 dark:text-success-400",children:parseFloat(p.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-error-600 dark:text-error-400",children:parseFloat(p.monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Progreso"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[((ue=p.porcentaje_pagado)==null?void 0:ue.toFixed(1))||((L=(J=p.estado_pagos)==null?void 0:J.porcentaje_pagado)==null?void 0:L.toFixed(1))||"0","%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Cuotas: ",((j=p.estado_pagos)==null?void 0:j.cuotas_pagadas)||0,"/",p.total_cuotas||0," pagadas"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${(p.porcentaje_pagado||((B=p.estado_pagos)==null?void 0:B.porcentaje_pagado)||0)>=100?"bg-success-500":(p.porcentaje_pagado||((h=p.estado_pagos)==null?void 0:h.porcentaje_pagado)||0)>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(p.porcentaje_pagado||((v=p.estado_pagos)==null?void 0:v.porcentaje_pagado)||0,100)}%`}})})]})]})]}),p.cuotas&&p.cuotas.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Detalle de Cuotas"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:p.cuotas.map((A,Q)=>e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Cuota ",Q+1]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[A.fecha_ini?new Date(A.fecha_ini).toLocaleDateString("es-ES"):"N/A"," -",A.fecha_fin?new Date(A.fecha_fin).toLocaleDateString("es-ES"):"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:parseFloat(A.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${A.estado==="Pagado"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":A.estado==="Retrasado"?"bg-error-100 text-error-800 dark:bg-error-900/20 dark:text-error-400":"bg-warning-100 text-warning-800 dark:bg-warning-900/20 dark:text-warning-400"}`,children:[A.estado,A.estado==="Retrasado"&&A.dias_retraso>0&&e.jsxs("span",{className:"ml-1",children:["(",A.dias_retraso," das)"]})]})]})]}),A.pagos&&A.pagos.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagos realizados:"}),A.pagos.map(re=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[parseFloat(re.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})," - ",re.fecha?new Date(re.fecha).toLocaleDateString("es-ES"):"N/A",re.metodo&&` (${re.metodo})`,re.verificado&&e.jsx("span",{className:"ml-2 text-success-600",children:" Verificado"})]},re.id))]})]},A.id||Q))})]}),((T=p.inscripcion)==null?void 0:T.fecha_formatted)&&e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha de Inscripcin:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:p.inscripcion.fecha_formatted})]})})]})})]})},Y1=()=>{var H,K,te,W,O,z,Y,Z;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(1),[c,d]=u.useState(1),[g,x]=u.useState(10),[y,w]=u.useState(!1),[k,S]=u.useState(!1),[C,N]=u.useState(null),[p,_]=u.useState(null),[E,b]=u.useState([]),{register:f,handleSubmit:P,reset:R,formState:{errors:q}}=We();u.useEffect(()=>{I(),$()},[i,g,n]);const I=async()=>{try{t(!0);const U=await $t.get({page:i,per_page:g,search:n});U.success&&U.data?(r(U.data.data||[]),d(U.data.last_page||1)):(m.error(U.message||"Error al cargar descuentos"),r([]),d(1))}catch{m.error("Error de conexin"),r([]),d(1)}finally{t(!1)}},$=async()=>{try{const U=await $t.getInscripcionesSinDescuento();U.success&&b(U.data||[])}catch(U){console.error("Error fetching inscripciones sin descuento:",U)}},G=()=>{N(null),R({inscripcion_id:"",nombre:"",descuento:""}),w(!0)},V=U=>{N(U),R({nombre:U.nombre,descuento:U.descuento}),w(!0)},F=async U=>{try{const ee=await $t.getById(U.id);ee.success&&(_(ee.data),S(!0))}catch{m.error("Error al cargar el descuento")}},ae=async U=>{if(window.confirm("Ests seguro de que quieres eliminar este descuento?"))try{t(!0);const ee=await $t.remove(U);ee.success?(m.success(ee.message||"Descuento eliminado exitosamente"),await I()):m.error(ee.message||"Error al eliminar el descuento")}catch{m.error("Error al eliminar el descuento")}finally{t(!1)}},ne=async U=>{try{t(!0);let ee;C?ee=await $t.update(C.id,U):ee=await $t.create(U),ee.success?(m.success(ee.message||(C?"Descuento actualizado exitosamente":"Descuento creado exitosamente")),w(!1),N(null),R(),await I(),await $()):(m.error(ee.message||"Error al guardar el descuento"),ee.errors&&Object.keys(ee.errors).forEach(oe=>{m.error(`${oe}: ${ee.errors[oe]}`)}))}catch{m.error("Error al guardar el descuento")}finally{t(!1)}},ce=[{key:"nombre",label:"Nombre",sortable:!0,render:U=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Bd,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:U.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[U.descuento,"% de descuento"]})]})]})},{key:"estudiante",label:"Estudiante",render:U=>{var ee,oe,D,ie,xe,Ee;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(oe=(ee=U.inscripcion)==null?void 0:ee.estudiante)==null?void 0:oe.nombre," ",(ie=(D=U.inscripcion)==null?void 0:D.estudiante)==null?void 0:ie.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",(Ee=(xe=U.inscripcion)==null?void 0:xe.estudiante)==null?void 0:Ee.ci]})]})}},{key:"programa",label:"Programa",render:U=>{var ee,oe;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((oe=(ee=U.inscripcion)==null?void 0:ee.programa)==null?void 0:oe.nombre)||"-"})}},{key:"descuento",label:"Descuento",render:U=>e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[U.descuento,"%"]})},{key:"actions",label:"Acciones",render:U=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>F(U)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(ps,{className:"h-4 w-4"}),onClick:()=>V(U)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(fs,{className:"h-4 w-4"}),onClick:()=>ae(U.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Bd,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Descuentos y Becas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los descuentos y becas del sistema"})]})]}),e.jsx(X,{variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),onClick:G,children:"Nuevo Descuento"})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Descuentos"}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar descuentos...",value:n,onChange:U=>o(U.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(es,{columns:ce,data:s,loading:a,pagination:{currentPage:i,totalPages:c,perPage:g,onPageChange:l,onPerPageChange:x}})]}),e.jsx(Pe,{isOpen:y,onClose:()=>{w(!1),N(null),R()},title:C?"Editar Descuento":"Nuevo Descuento",size:"lg",children:e.jsxs("form",{onSubmit:P(ne),className:"space-y-6",children:[!C&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inscripcin *"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",...f("inscripcion_id",{required:"La inscripcin es obligatoria"}),children:[e.jsx("option",{value:"",children:"Seleccionar inscripcin"}),E.map(U=>{var ee,oe,D;return e.jsxs("option",{value:U.id,children:[(ee=U.estudiante)==null?void 0:ee.nombre," ",(oe=U.estudiante)==null?void 0:oe.apellido," - ",(D=U.programa)==null?void 0:D.nombre]},U.id)})]}),q.inscripcion_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:q.inscripcion_id.message})]}),e.jsx(me,{label:"Nombre del Descuento *",placeholder:"Ej: Beca Acadmica, Descuento por Convenio, etc.",error:(H=q.nombre)==null?void 0:H.message,...f("nombre",{required:"El nombre es obligatorio"})}),e.jsx(me,{label:"Porcentaje de Descuento *",type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",error:(K=q.descuento)==null?void 0:K.message,...f("descuento",{required:"El porcentaje es obligatorio",min:{value:0,message:"El porcentaje debe ser mayor o igual a 0"},max:{value:100,message:"El porcentaje no puede ser mayor a 100"}})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null),R()},children:"Cancelar"}),e.jsxs(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Descuento"]})]})]})}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Descuento",size:"lg",children:p&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Porcentaje"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-green-600",children:[p.descuento,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[(W=(te=p.inscripcion)==null?void 0:te.estudiante)==null?void 0:W.nombre," ",(z=(O=p.inscripcion)==null?void 0:O.estudiante)==null?void 0:z.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((Z=(Y=p.inscripcion)==null?void 0:Y.programa)==null?void 0:Z.nombre)||"-"})]})]})})})]})},ui={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||ns.DEFAULT_PAGE_SIZE,search:s.search||"",estado:s.estado||"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||""};t.search||delete t.search,t.estado||delete t.estado,t.fecha_desde||delete t.fecha_desde,t.fecha_hasta||delete t.fecha_hasta;const n=await ye("/admin/pagos/gestion",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching planes de pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await ye(`/admin/pagos/gestion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching plan de pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async registrarPago(s){var r,a,t,n;try{const o=await Me("/admin/pagos/gestion/registrar",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Pago registrado exitosamente"}:{success:!1,message:o.data.message||"Error al registrar pago",errors:o.data.errors}}catch(o){return console.error("Error registrando pago:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al registrar pago",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async actualizarPago(s,r){var a,t,n,o;try{const i=await Ze(`/admin/pagos/gestion/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Pago actualizado exitosamente"}:{success:!1,message:i.data.message||"Error al actualizar pago",errors:i.data.errors}}catch(i){return console.error("Error actualizando pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al actualizar pago",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async eliminarPago(s){var r,a;try{const t=await ts(`/admin/pagos/gestion/${s}`);return t.data.success?{success:!0,message:t.data.message||"Pago eliminado exitosamente"}:{success:!1,message:t.data.message||"Error al eliminar pago"}}catch(t){return console.error("Error eliminando pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al eliminar pago"}}},async aplicarPenalidad(s){var r,a,t,n;try{const o=await Me("/admin/pagos/gestion/aplicar-penalidad",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Penalidad aplicada exitosamente"}:{success:!1,message:o.data.message||"Error al aplicar penalidad",errors:o.data.errors}}catch(o){return console.error("Error aplicando penalidad:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al aplicar penalidad",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},X1=()=>{var z,Y,Z,U,ee,oe,D,ie,xe,Ee,he,Ne,ue;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState(1),[g,x]=u.useState(1),[y,w]=u.useState(10),[k,S]=u.useState(!1),[C,N]=u.useState(!1),[p,_]=u.useState(!1),[E,b]=u.useState(null),[f,P]=u.useState(null),{register:R,handleSubmit:q,reset:I,formState:{errors:$}}=We(),{register:G,handleSubmit:V,reset:F,formState:{errors:ae}}=We();u.useEffect(()=>{ne()},[c,y,n,i]);const ne=async()=>{try{t(!0);const J=await ui.get({page:c,per_page:y,search:n,estado:i});J.success&&J.data?(r(J.data.data||[]),x(J.data.last_page||1)):(m.error(J.message||"Error al cargar planes de pago"),r([]),x(1))}catch{m.error("Error de conexin"),r([]),x(1)}finally{t(!1)}},ce=async J=>{try{const L=await ui.getById(J.id);L.success&&(b(L.data),S(!0))}catch{m.error("Error al cargar el plan de pago")}},H=J=>{P(J),I({cuota_id:J.id,monto:J.saldo_pendiente||J.monto,token:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),N(!0)},K=J=>{P(J),F({cuota_id:J.id,monto_penalidad:"",motivo:""}),_(!0)},te=async J=>{try{t(!0);const L=await ui.registrarPago(J);L.success?(m.success(L.message||"Pago registrado exitosamente"),N(!1),P(null),I(),await ne()):(m.error(L.message||"Error al registrar pago"),L.errors&&Object.keys(L.errors).forEach(j=>{m.error(`${j}: ${L.errors[j]}`)}))}catch{m.error("Error al registrar pago")}finally{t(!1)}},W=async J=>{try{t(!0);const L=await ui.aplicarPenalidad(J);L.success?(m.success(L.message||"Penalidad aplicada exitosamente"),_(!1),P(null),F(),await ne()):(m.error(L.message||"Error al aplicar penalidad"),L.errors&&Object.keys(L.errors).forEach(j=>{m.error(`${j}: ${L.errors[j]}`)}))}catch{m.error("Error al aplicar penalidad")}finally{t(!1)}},O=[{key:"estudiante",label:"Estudiante",render:J=>{var L,j,B,h,v,T;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(j=(L=J.inscripcion)==null?void 0:L.estudiante)==null?void 0:j.nombre," ",(h=(B=J.inscripcion)==null?void 0:B.estudiante)==null?void 0:h.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",(T=(v=J.inscripcion)==null?void 0:v.estudiante)==null?void 0:T.ci]})]})}},{key:"programa",label:"Programa",render:J=>{var L,j;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((j=(L=J.inscripcion)==null?void 0:L.programa)==null?void 0:j.nombre)||"-"})}},{key:"monto",label:"Monto Total",render:J=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(J.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"estado",label:"Estado",render:J=>{const L=J.estado_plan||{},j=L.porcentaje_pagado||0;return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:L.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-3 w-3"}),"Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-3 w-3"}),"Pendiente"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:`${Math.min(j,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[j.toFixed(1),"% pagado"]})]})}},{key:"cuotas",label:"Cuotas",render:J=>{const L=J.estado_plan||{};return e.jsxs("span",{className:"text-gray-900 dark:text-gray-100",children:[L.cuotas_pagadas||0,"/",L.total_cuotas||0]})}},{key:"actions",label:"Acciones",render:J=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>ce(J)})})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(aa,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Pagos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y controla los pagos de los estudiantes"})]})]})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Planes de Pago"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Buscar estudiantes...",value:n,onChange:J=>o(J.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:i,onChange:J=>l(J.target.value),children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"completo",children:"Completos"}),e.jsx("option",{value:"pendiente",children:"Pendientes"})]})]})]}),e.jsx(es,{columns:O,data:s,loading:a,pagination:{currentPage:c,totalPages:g,perPage:y,onPageChange:d,onPerPageChange:w}})]}),e.jsx(Pe,{isOpen:k,onClose:()=>S(!1),title:"Detalles del Plan de Pago",size:"xl",children:E&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[(Y=(z=E.inscripcion)==null?void 0:z.estudiante)==null?void 0:Y.nombre," ",(U=(Z=E.inscripcion)==null?void 0:Z.estudiante)==null?void 0:U.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((oe=(ee=E.inscripcion)==null?void 0:ee.programa)==null?void 0:oe.nombre)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monto Total"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:parseFloat(E.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),(D=E.estado_plan)!=null&&D.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Pendiente"]})]})]}),E.cuotas&&E.cuotas.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Cuotas"}),e.jsx("div",{className:"space-y-3",children:E.cuotas.map((J,L)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Cuota ",L+1]}),J.monto_pagado>=J.monto?e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-3 w-3"}),"Pagada"]}):J.esta_vencida?e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-3 w-3"}),"Vencida"]}):e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-3 w-3"}),"Pendiente"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:parseFloat(J.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),J.monto_pagado<J.monto&&e.jsxs(e.Fragment,{children:[e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Ve,{className:"h-4 w-4"}),onClick:()=>H(J)}),e.jsx(X,{variant:"ghost",size:"sm",icon:e.jsx(Pi,{className:"h-4 w-4"}),onClick:()=>K(J)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vencimiento"}),e.jsx("p",{className:"font-medium",children:new Date(J.fecha_fin).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Pagado"}),e.jsx("p",{className:"font-medium text-green-600",children:parseFloat(J.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Pendiente"}),e.jsx("p",{className:"font-medium text-yellow-600",children:parseFloat(J.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),J.pagos&&J.pagos.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos:"}),e.jsx("div",{className:"space-y-1",children:J.pagos.map((j,B)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{children:parseFloat(j.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"text-gray-500",children:[new Date(j.fecha).toLocaleDateString()," ",j.token&&`- ${j.token}`]})]},B))})]})]},L))})]})]})}),e.jsx(Pe,{isOpen:C,onClose:()=>{N(!1),P(null),I()},title:"Registrar Pago Manual",size:"md",children:f&&e.jsxs("form",{onSubmit:q(te),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:parseFloat(f.saldo_pendiente||f.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(me,{label:"Monto a Pagar *",type:"number",step:"0.01",placeholder:"0.00",error:(ie=$.monto)==null?void 0:ie.message,...R("monto",{required:"El monto es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"},max:{value:f.saldo_pendiente||f.monto||0,message:"El monto no puede exceder el saldo pendiente"}})}),e.jsx(me,{label:"Fecha del Pago *",type:"date",error:(xe=$.fecha)==null?void 0:xe.message,...R("fecha",{required:"La fecha es obligatoria"})}),e.jsx(me,{label:"Token/Nmero de Transaccin",placeholder:"Opcional",error:(Ee=$.token)==null?void 0:Ee.message,...R("token")}),e.jsx(me,{label:"Observaciones",placeholder:"Opcional",error:(he=$.observaciones)==null?void 0:he.message,...R("observaciones")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{N(!1),P(null),I()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Ve,{className:"h-5 w-5"}),children:"Registrar Pago"})]})]})}),e.jsx(Pe,{isOpen:p,onClose:()=>{_(!1),P(null),F()},title:"Aplicar Penalidad",size:"md",children:f&&e.jsxs("form",{onSubmit:V(W),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pi,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"font-semibold text-red-900 dark:text-red-100",children:"Atencin"})]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"La penalidad aumentar el monto de la cuota. Esta accin quedar registrada en la bitcora."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Monto Actual de la Cuota"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:parseFloat(f.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(me,{label:"Monto de Penalidad *",type:"number",step:"0.01",placeholder:"0.00",error:(Ne=ae.monto_penalidad)==null?void 0:Ne.message,...G("monto_penalidad",{required:"El monto de penalidad es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo de la Penalidad *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",placeholder:"Describe el motivo de la penalidad...",error:(ue=ae.motivo)==null?void 0:ue.message,...G("motivo",{required:"El motivo es obligatorio",minLength:{value:10,message:"El motivo debe tener al menos 10 caracteres"}})}),ae.motivo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ae.motivo.message})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{_(!1),P(null),F()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Pi,{className:"h-5 w-5"}),children:"Aplicar Penalidad"})]})]})})]})},eE=()=>{const{user:s}=Es(),r=[{title:"Mis Grupos",value:"5",icon:e.jsx(Cs,{className:"h-8 w-8"}),color:"bg-blue-500",link:"/docente/grupos"},{title:"Estudiantes",value:"120",icon:e.jsx(Ye,{className:"h-8 w-8"}),color:"bg-green-500",link:"/docente/estudiantes"},{title:"Calificaciones Pendientes",value:"15",icon:e.jsx(Ts,{className:"h-8 w-8"}),color:"bg-yellow-500",link:"/docente/notas"},{title:"Asistencias",value:"Hoy",icon:e.jsx(Xe,{className:"h-8 w-8"}),color:"bg-purple-500",link:"/docente/asistencias"}];return e.jsx(Ti,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bienvenido, ",(s==null?void 0:s.nombre)||"Docente"]}),e.jsx("p",{className:"text-blue-100",children:"Portal del Docente - ICAP UAGRM"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((a,t)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>window.location.href=a.link,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${a.color} p-3 rounded-lg text-white`,children:a.icon}),e.jsx(Ul,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:a.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value})]},t))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ts,{className:"h-6 w-6 text-blue-600"}),"Accesos Rpidos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"/docente/grupos",className:"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Grupos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona tus grupos asignados"})]}),e.jsxs("a",{href:"/docente/notas",className:"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Registrar Calificaciones"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ingresa las notas de tus estudiantes"})]}),e.jsxs("a",{href:"/docente/asistencias",className:"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Control de Asistencias"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Registra y consulta asistencias"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(et,{className:"h-6 w-6 text-yellow-600"}),"Informacin"]}),e.jsxs("div",{className:"space-y-3 text-gray-700",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Rol:"})," Docente"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Email:"})," ",(s==null?void 0:s.email)||"No disponible"]}),e.jsx("p",{className:"text-sm",children:"Desde este portal puedes gestionar todos los aspectos relacionados con tus grupos y estudiantes asignados."})]})]})]})]})})},G0={async getMisGrupos(){var s,r;try{const a=await ye("/docente/grupos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||M.ERROR_FETCH}}},async getGrupoById(s){var r,a;try{const t=await ye(`/docente/grupos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||M.ERROR_FETCH}}}},Mc={async registrarNota(s){var r,a,t,n;try{const o=await Me("/docente/evaluaciones/nota",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async actualizarEstado(s){var r,a,t,n;try{const o=await Me("/docente/evaluaciones/estado",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_UPDATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR_UPDATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async registrarNotasMasivas(s){var r,a,t,n;try{const o=await Me("/docente/evaluaciones/notas-masivas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||M.ERROR_CREATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||M.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},sE=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(!0),n=_r();u.useEffect(()=>{o()},[]);const o=async()=>{try{t(!0);const l=await G0.getMisGrupos();l.success?r(l.data||[]):(m.error(l.message||"Error al cargar grupos"),r([]))}catch{m.error("Error de conexin"),r([])}finally{t(!1)}},i=l=>{n(`/docente/grupos/${l}`)};return a?e.jsx(Xs,{}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Cs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Grupos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Grupos asignados para evaluacin acadmica"})]})]}),s.length===0?e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes grupos asignados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para ms informacin"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(l=>{var c,d;return e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-2",children:((c=l.programa)==null?void 0:c.nombre)||"Sin programa"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Ts,{className:"h-4 w-4 inline mr-1"}),((d=l.modulo)==null?void 0:d.nombre)||"Sin mdulo"]})]}),l.esta_activo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-3 w-3"}),"Activo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(ls,{className:"h-3 w-3"}),"Finalizado"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[new Date(l.fecha_ini).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})," - ",new Date(l.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[l.numero_estudiantes," estudiantes"]})]}),l.horarios&&l.horarios.length>0&&e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.horarios.map((g,x)=>e.jsxs("span",{className:"text-xs",children:[g.dias," ",g.hora_ini,"-",g.hora_fin]},x))})]})]}),e.jsx(X,{variant:"primary",fullWidth:!0,icon:e.jsx(Ge,{className:"h-4 w-4"}),onClick:()=>i(l.grupo_id),children:"Ver Detalle y Evaluar"})]})},l.grupo_id)})})]})},rE=()=>{var ne,ce,H,K,te,W,O;const{grupoId:s}=Xb(),r=_r(),[a,t]=u.useState(null),[n,o]=u.useState([]),[i,l]=u.useState(!0),[c,d]=u.useState(!1),[g,x]=u.useState(!1),[y,w]=u.useState(null),[k,S]=u.useState({}),{register:C,handleSubmit:N,reset:p,formState:{errors:_}}=We(),{register:E,handleSubmit:b,reset:f,formState:{errors:P}}=We();u.useEffect(()=>{s&&R()},[s]);const R=async()=>{try{l(!0);const z=await G0.getGrupoById(s);z.success?(t(z.data.grupo),o(z.data.estudiantes||[])):(m.error(z.message||"Error al cargar el grupo"),r("/docente/grupos"))}catch{m.error("Error de conexin"),r("/docente/grupos")}finally{l(!1)}},q=z=>{w(z),p({grupo_id:s,estudiante_registro:z.registro_estudiante,nota:z.nota||"",estado:z.estado||""}),d(!0)},I=z=>{w(z),f({grupo_id:s,estudiante_registro:z.registro_estudiante,estado:z.estado||"EN_CURSO"}),x(!0)},$=async z=>{try{l(!0);const Y=await Mc.registrarNota(z);Y.success?(m.success(Y.message||"Nota registrada exitosamente"),d(!1),w(null),p(),await R()):(m.error(Y.message||"Error al registrar nota"),Y.errors&&Object.keys(Y.errors).forEach(Z=>{m.error(`${Z}: ${Y.errors[Z]}`)}))}catch{m.error("Error al registrar nota")}finally{l(!1)}},G=async z=>{try{l(!0);const Y=await Mc.actualizarEstado(z);Y.success?(m.success(Y.message||"Estado actualizado exitosamente"),x(!1),w(null),f(),await R()):(m.error(Y.message||"Error al actualizar estado"),Y.errors&&Object.keys(Y.errors).forEach(Z=>{m.error(`${Z}: ${Y.errors[Z]}`)}))}catch{m.error("Error al actualizar estado")}finally{l(!1)}},V=(z,Y,Z)=>{S(U=>({...U,[z]:{...U[z],[Y]:Z}}))},F=async()=>{try{l(!0);const z=Object.keys(k).map(Z=>({estudiante_registro:Z,nota:parseFloat(k[Z].nota)||null,estado:k[Z].estado||null})).filter(Z=>Z.nota!==null);if(z.length===0){m.error("Debe ingresar al menos una nota");return}const Y=await Mc.registrarNotasMasivas({grupo_id:s,notas:z});Y.success?(m.success(Y.message||"Notas registradas exitosamente"),S({}),await R()):m.error(Y.message||"Error al registrar notas")}catch{m.error("Error al registrar notas")}finally{l(!1)}},ae=z=>{const Y={APROBADO:{color:"bg-green-100 text-green-800",icon:Le,label:"Aprobado"},REPROBADO:{color:"bg-red-100 text-red-800",icon:ls,label:"Reprobado"},RETIRADO:{color:"bg-gray-100 text-gray-800",icon:Nr,label:"Retirado"},EN_CURSO:{color:"bg-yellow-100 text-yellow-800",icon:Xe,label:"En Curso"}},Z=Y[z]||Y.EN_CURSO,U=Z.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${Z.color}`,children:[e.jsx(U,{className:"h-3 w-3"}),Z.label]})};return i&&!a?e.jsx(Xs,{}):a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(X,{variant:"ghost",icon:e.jsx(zl,{className:"h-4 w-4"}),onClick:()=>r("/docente/grupos"),children:"Volver"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Evaluacin de Grupo"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[(ne=a.programa)==null?void 0:ne.nombre," - ",(ce=a.modulo)==null?void 0:ce.nombre]})]})]})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Programa"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:((H=a.programa)==null?void 0:H.nombre)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mdulo"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:((K=a.modulo)==null?void 0:K.nombre)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Perodo"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[new Date(a.fecha_ini).toLocaleDateString()," - ",new Date(a.fecha_fin).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold gradient-text",children:["Estudiantes (",n.length,")"]}),Object.keys(k).length>0&&e.jsx(X,{variant:"primary",icon:e.jsx(Nc,{className:"h-4 w-4"}),onClick:F,children:"Guardar Notas Masivas"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"CI"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Nota"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Estado"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Acciones"})]})}),e.jsx("tbody",{children:n.map((z,Y)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[z.nombre," ",z.apellido]})})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:z.ci}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(me,{type:"number",min:"0",max:"100",step:"0.01",className:"w-20",defaultValue:z.nota||"",onChange:Z=>V(z.registro_estudiante,"nota",Z.target.value),placeholder:"0-100"})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:ae(z.estado)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>q(z),children:"Editar"}),e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>I(z),children:"Estado"})]})})]},Y))})]})})]}),e.jsx(Pe,{isOpen:c,onClose:()=>{d(!1),w(null),p()},title:"Registrar Nota",size:"md",children:y&&e.jsxs("form",{onSubmit:N($),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[y.nombre," ",y.apellido]})]}),e.jsx(me,{label:"Nota (0-100) *",type:"number",step:"0.01",min:"0",max:"100",placeholder:"0-100",error:(te=_.nota)==null?void 0:te.message,...C("nota",{required:"La nota es obligatoria",min:{value:0,message:"La nota debe ser mayor o igual a 0"},max:{value:100,message:"La nota debe ser menor o igual a 100"}})}),e.jsx(zr,{label:"Estado Acadmico",name:"estado",options:[{value:"",label:"Automtico (segn nota)"},{value:"APROBADO",label:"Aprobado"},{value:"REPROBADO",label:"Reprobado"},{value:"RETIRADO",label:"Retirado"},{value:"EN_CURSO",label:"En Curso"}],...C("estado"),error:(W=_.estado)==null?void 0:W.message}),e.jsx("input",{type:"hidden",...C("grupo_id")}),e.jsx("input",{type:"hidden",...C("estudiante_registro")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{d(!1),w(null),p()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Nc,{className:"h-5 w-5"}),children:"Guardar Nota"})]})]})}),e.jsx(Pe,{isOpen:g,onClose:()=>{x(!1),w(null),f()},title:"Actualizar Estado Acadmico",size:"md",children:y&&e.jsxs("form",{onSubmit:b(G),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[y.nombre," ",y.apellido]}),y.nota&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Nota actual: ",y.nota]})]}),e.jsx(zr,{label:"Estado Acadmico *",name:"estado",options:[{value:"APROBADO",label:"Aprobado"},{value:"REPROBADO",label:"Reprobado"},{value:"RETIRADO",label:"Retirado"},{value:"EN_CURSO",label:"En Curso"}],...E("estado",{required:"El estado es obligatorio"}),error:(O=P.estado)==null?void 0:O.message}),e.jsx("input",{type:"hidden",...E("grupo_id")}),e.jsx("input",{type:"hidden",...E("estudiante_registro")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{x(!1),w(null),f()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Nc,{className:"h-5 w-5"}),children:"Actualizar Estado"})]})]})})]}):null},aE=(s,r=1920,a=1920,t=.8,n=2)=>new Promise((o,i)=>{if(!s.type.startsWith("image/")){o(s);return}if(s.type==="application/pdf"){o(s);return}const l=new FileReader;l.onload=c=>{const d=new Image;d.onload=()=>{let g=d.width,x=d.height;if(g>r||x>a){const k=Math.min(r/g,a/x);g=g*k,x=x*k}const y=document.createElement("canvas");y.width=g,y.height=x,y.getContext("2d").drawImage(d,0,0,g,x),y.toBlob(k=>{if(!k){i(new Error("Error al comprimir la imagen"));return}if(k.size/(1024*1024)>n)y.toBlob(C=>{if(!C){i(new Error("Error al comprimir la imagen"));return}const N=new File([C],s.name,{type:s.type,lastModified:Date.now()});o(N)},s.type,Math.max(.5,t-.2));else{const C=new File([k],s.name,{type:s.type,lastModified:Date.now()});o(C)}},s.type,t)},d.onerror=()=>i(new Error("Error al cargar la imagen")),d.src=c.target.result},l.onerror=()=>i(new Error("Error al leer el archivo")),l.readAsDataURL(s)}),gt=s=>{if(s===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(r));return Math.round(s/Math.pow(r,t)*100)/100+" "+a[t]},Q0=({isOpen:s,onClose:r,tiposDocumento:a,tipoDocumentoSeleccionado:t,onSuccess:n})=>{var P,R;const[o,i]=u.useState(t||""),[l,c]=u.useState(null),[d,g]=u.useState(null),[x,y]=u.useState(!1),[w,k]=u.useState(0),[S,C]=u.useState(0),N=u.useRef(null);u.useEffect(()=>{s&&t?i(t):s||(c(null),g(null),k(0),C(0),N.current&&(N.current.value=""))},[s,t]);const p=[{tipo_documento_id:1,nombre:"Carnet de Identidad - Anverso",requerido:!0},{tipo_documento_id:2,nombre:"Carnet de Identidad - Reverso",requerido:!0},{tipo_documento_id:3,nombre:"Certificado de Nacimiento",requerido:!0},{tipo_documento_id:4,nombre:"Ttulo de Bachiller",requerido:!1}],_=a&&a.length>0?a.map(q=>({tipo_documento_id:q.tipo_documento_id,nombre:q.nombre||q.nombre_entidad||"Documento",requerido:q.requerido!==!1})):p,E=async q=>{var V;const I=(V=q.target.files)==null?void 0:V[0];if(!I)return;if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(I.type)){m.error("Solo se permiten archivos JPG, PNG o PDF");return}const G=10*1024*1024;if(I.size>G){m.error("El archivo es muy grande. Mximo 10MB");return}if(k(I.size),c(I),I.type.startsWith("image/")){const F=new FileReader;F.onload=ae=>{g(ae.target.result)},F.readAsDataURL(I)}else g(null);if(I.type.startsWith("image/"))try{y(!0);const F=await aE(I,1920,1920,.8,2);C(F.size),c(F),m.success(`Imagen comprimida: ${gt(w)}  ${gt(F.size)}`)}catch(F){console.error("Error comprimiendo imagen:",F),m.error("Error al comprimir la imagen")}finally{y(!1)}else C(I.size)},b=async()=>{var $,G,V,F,ae,ne;if(!o){m.error("Selecciona un tipo de documento");return}if(!l){m.error("Selecciona un archivo");return}const q=_.find(ce=>ce.tipo_documento_id==o||String(ce.tipo_documento_id)===String(o));if(!q||!q.tipo_documento_id){m.error("Tipo de documento no vlido");return}const I=new FormData;I.append("archivo",l),I.append("tipo_documento_id",q.tipo_documento_id);try{y(!0);const ce=await Me("/estudiante/documentos/subir",I,{headers:{"Content-Type":"multipart/form-data"}});ce.data.success?(m.success("Documento subido exitosamente"),n==null||n(),f()):m.error(ce.data.message||"Error al subir el documento")}catch(ce){console.error("Error subiendo documento:",ce);const H=((G=($=ce.response)==null?void 0:$.data)==null?void 0:G.message)||((ne=(ae=(F=(V=ce.response)==null?void 0:V.data)==null?void 0:F.errors)==null?void 0:ae.archivo)==null?void 0:ne[0])||"Error al subir el documento";m.error(H)}finally{y(!1)}},f=()=>{t||i(""),c(null),g(null),k(0),C(0),N.current&&(N.current.value=""),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Hs,{className:"h-6 w-6"}),"Subir Documento"]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:x,children:e.jsx(nr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[(!t||_.length>1)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipo de Documento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:q=>i(q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:x||!!t,children:[e.jsx("option",{value:"",children:"Selecciona un tipo de documento"}),_.map(q=>e.jsxs("option",{value:q.tipo_documento_id,children:[q.nombre||q.nombre_entidad||"Documento",q.requerido===!1&&" (Opcional)"]},q.tipo_documento_id))]})]}),t&&_.length===1&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Subiendo: ",((P=_[0])==null?void 0:P.nombre)||((R=_[0])==null?void 0:R.nombre_entidad)||"Documento"]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Archivo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-green-500 transition-colors",children:e.jsx("div",{className:"space-y-1 text-center",children:d?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:d,alt:"Preview",className:"mx-auto max-h-48 rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-600",children:l==null?void 0:l.name}),w>0&&S>0&&w!==S&&e.jsxs("p",{className:"text-xs text-green-600",children:["Comprimido: ",gt(w),"  ",gt(S)]})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-2",children:[e.jsx(us,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:gt(l.size)})]}):e.jsxs(e.Fragment,{children:[e.jsx(Dw,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-green-600 hover:text-green-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-green-500",children:[e.jsx("span",{children:"Selecciona un archivo"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:E,ref:N,disabled:x})]}),e.jsx("p",{className:"pl-1",children:"o arrastra y suelta"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF hasta 10MB"})]})})})})]}),w>0&&S>0&&w!==S&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Le,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Imagen comprimida exitosamente"}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Tamao original: ",gt(w),"  Tamao comprimido: ",gt(S)," ","(",Math.round((1-S/w)*100),"% de reduccin)"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:x,children:"Cancelar"}),e.jsx("button",{onClick:b,disabled:!o||!l||x,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(em,{className:"h-4 w-4 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-4 w-4"}),"Subir Documento"]})})]})]})}):null},tE=({documento:s,onUploadSuccess:r})=>{var d,g,x,y;const[a,t]=u.useState(!1),o=(()=>{if(!s.subido)return{icon:e.jsx(Hs,{className:"h-5 w-5"}),color:"text-gray-400",bgColor:"bg-gray-50",borderColor:"border-gray-300",estado:"Pendiente",badge:"bg-gray-100 text-gray-600"};switch(s.estado){case"aprobado":case"1":return{icon:e.jsx(Le,{className:"h-5 w-5"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-300",estado:"Aprobado",badge:"bg-green-100 text-green-700"};case"rechazado":case"2":return{icon:e.jsx(ls,{className:"h-5 w-5"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-300",estado:"Rechazado",badge:"bg-red-100 text-red-700"};case"pendiente":case"0":default:return{icon:e.jsx(Xe,{className:"h-5 w-5"}),color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",estado:"En Revisin",badge:"bg-yellow-100 text-yellow-700"}}})(),i={Estudiante:"Documento","Carnet de Identidad - Anverso":"CI - Anverso","Carnet de Identidad - Reverso":"CI - Reverso","Certificado de Nacimiento":"Certificado de Nacimiento","Ttulo de Bachiller":"Ttulo de Bachiller","CI - Anverso":"CI - Anverso","CI - Reverso":"CI - Reverso"},l=((d=s.nombre)==null?void 0:d.toLowerCase().includes("ttulo"))||((g=s.nombre)==null?void 0:g.toLowerCase().includes("bachiller"))||((x=s.nombre_entidad)==null?void 0:x.toLowerCase().includes("ttulo"))||((y=s.nombre_entidad)==null?void 0:y.toLowerCase().includes("bachiller")),c=i[s.nombre]||i[s.nombre_entidad]||s.nombre||s.nombre_entidad||"Documento";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative border-2 rounded-lg p-4 transition-all ${s.subido?`${o.borderColor} ${o.bgColor}`:"border-dashed border-gray-300 bg-white hover:border-green-400 hover:bg-green-50"}`,children:[s.subido&&e.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ${o.badge} flex items-center gap-1`,children:[o.icon,o.estado]}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.subido?o.bgColor:"bg-gray-100"}`,children:s.subido?o.icon:e.jsx(us,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:c}),(!s.requerido||l)&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Opcional"}),s.requerido&&!l&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Requerido"}),s.subido&&e.jsxs("div",{className:"mt-2 space-y-1",children:[s.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Subido: ",new Date(s.fecha_subida).toLocaleDateString()]}),s.observaciones&&s.estado==="rechazado"&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"Observaciones:"}),e.jsx("p",{children:s.observaciones})]})]})]}),e.jsx("button",{onClick:()=>t(!0),className:`w-full py-2 px-4 rounded-lg font-medium text-sm transition-colors flex items-center justify-center gap-2 ${s.subido&&s.estado==="rechazado"?"bg-red-600 text-white hover:bg-red-700":s.subido?"bg-blue-600 text-white hover:bg-blue-700":"bg-green-600 text-white hover:bg-green-700"}`,children:s.subido&&s.estado==="rechazado"?e.jsxs(e.Fragment,{children:[e.jsx(O0,{className:"h-4 w-4"}),"Re-subir"]}):s.subido?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4"}),"Ver/Actualizar"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-4 w-4"}),"Subir"]})})]})]}),e.jsx(Q0,{isOpen:a,onClose:()=>t(!1),tiposDocumento:[s],tipoDocumentoSeleccionado:s.tipo_documento_id,onSuccess:()=>{t(!1),r==null||r()}})]})},nE=()=>{const{user:s}=Es(),r=_r(),[a,t]=u.useState({materias:0,notas:0,documentos:0,pagos:0}),[n,o]=u.useState(null),[i,l]=u.useState([]),[c,d]=u.useState(!0),[g,x]=u.useState(!1),[y,w]=u.useState([]),[k,S]=u.useState([]);u.useEffect(()=>{const E=async()=>{var f,P,R,q,I,$;try{const G=await ye("/estudiante/dashboard");if(G.data.success){const V=G.data.data||G.data;if(t({materias:((f=V.estadisticas)==null?void 0:f.grupos_activos)||0,notas:((P=V.estadisticas)==null?void 0:P.grupos_con_notas)||0,documentos:((R=V.estadisticas)==null?void 0:R.documentos_subidos)||0,pagos:((q=V.estadisticas)==null?void 0:q.pagos_pendientes)||0}),V.alert&&(o(V.alert),V.alert.documentos_faltantes?l(V.alert.documentos_faltantes):(I=V.documentos)!=null&&I.faltantes&&l(V.documentos.faltantes.map(F=>F.nombre))),($=V.documentos)!=null&&$.requeridos){const F=V.documentos.requeridos.map(ae=>{var ce,H;const ne=((ce=ae.nombre)==null?void 0:ce.toLowerCase().includes("ttulo"))||((H=ae.nombre)==null?void 0:H.toLowerCase().includes("bachiller"));return{tipo_documento_id:ae.tipo_documento_id,nombre:ae.nombre||"Documento",nombre_entidad:ae.nombre,requerido:!ne,subido:ae.subido||!1,estado:ae.estado||null,observaciones:ae.observaciones||null,fecha_subida:ae.fecha_subida||null}});S(F),w(F)}}}catch(G){console.error("Error cargando dashboard:",G)}finally{d(!1)}},b=async()=>{try{const f=await ye("/estudiante/documentos");if(f.data.success&&f.data.data){const P=Array.isArray(f.data.data)?f.data.data:[];w(P.map(R=>({tipo_documento_id:R.tipo_documento_id,nombre:R.nombre_entidad||R.nombre||"Documento",nombre_entidad:R.nombre_entidad||R.nombre,requerido:!0})))}}catch(f){console.error("Error cargando tipos de documento:",f)}};s&&(E(),b())},[s]);const C=async()=>{var E,b,f,P,R;try{const q=await ye("/estudiante/dashboard");if(q.data.success){const I=q.data.data||q.data;if(t({materias:((E=I.estadisticas)==null?void 0:E.grupos_activos)||0,notas:((b=I.estadisticas)==null?void 0:b.grupos_con_notas)||0,documentos:((f=I.estadisticas)==null?void 0:f.documentos_subidos)||0,pagos:((P=I.estadisticas)==null?void 0:P.pagos_pendientes)||0}),I.alert&&o(I.alert),(R=I.documentos)!=null&&R.requeridos){const $=I.documentos.requeridos.map(G=>{var F,ae;const V=((F=G.nombre)==null?void 0:F.toLowerCase().includes("ttulo"))||((ae=G.nombre)==null?void 0:ae.toLowerCase().includes("bachiller"));return{tipo_documento_id:G.tipo_documento_id,nombre:G.nombre||"Documento",nombre_entidad:G.nombre,requerido:!V,subido:G.subido||!1,estado:G.estado||null,observaciones:G.observaciones||null,fecha_subida:G.fecha_subida||null}});S($),w($)}}}catch(q){console.error("Error recargando dashboard:",q)}},N=E=>{switch(E){case"error":return e.jsx(Nr,{className:"h-6 w-6"});case"warning":return e.jsx(Nr,{className:"h-6 w-6"});case"success":return e.jsx(Le,{className:"h-6 w-6"});case"info":return e.jsx(Xe,{className:"h-6 w-6"});default:return e.jsx(Nr,{className:"h-6 w-6"})}},p=E=>{switch(E){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},_=[{title:"Mis Materias",value:a.materias||"0",icon:e.jsx(Ts,{className:"h-8 w-8"}),color:"bg-blue-500",link:"/estudiante/materias"},{title:"Calificaciones",value:a.notas>0?`${a.notas} disponibles`:"Sin notas",icon:e.jsx(et,{className:"h-8 w-8"}),color:"bg-green-500",link:"/estudiante/notas"},{title:"Documentos",value:a.documentos||"0",icon:e.jsx(us,{className:"h-8 w-8"}),color:"bg-yellow-500",link:"/estudiante/documentos"},{title:"Pagos",value:a.pagos>0?`${a.pagos} pendientes`:"Al da",icon:e.jsx(Tr,{className:"h-8 w-8"}),color:"bg-purple-500",link:"/estudiante/pagos"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bienvenido, ",(s==null?void 0:s.nombre)||(s==null?void 0:s.nombre_completo)||`${(s==null?void 0:s.nombre)||""} ${(s==null?void 0:s.apellido)||""}`.trim()||"Estudiante"]}),e.jsx("p",{className:"text-green-100",children:"Portal del Estudiante - ICAP UAGRM"})]}),n&&n.type!=="success"&&e.jsx("div",{className:`rounded-lg border-2 p-6 ${p(n.type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:N(n.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:n.title}),e.jsx("p",{className:"mb-4",children:n.message}),e.jsxs("div",{className:"mb-4 p-4 bg-white/50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Tu progreso:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:`flex-1 p-2 rounded ${n.type==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[e.jsx("div",{className:"font-medium",children:"1. Subir Documentos"}),e.jsx("div",{className:"text-xs opacity-75",children:"Completa la documentacin"})]}),e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"2. Verificacin"}),e.jsx("div",{className:"text-xs opacity-75",children:"Espera aprobacin"})]}),e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"3. Inscripcin"}),e.jsx("div",{className:"text-xs opacity-75",children:"Elige tu programa"})]}),e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"4. Pago"}),e.jsx("div",{className:"text-xs opacity-75",children:"Realiza el pago"})]})]})]}),i&&i.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Documentos que debes subir:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 mb-4",children:i.map((E,b)=>e.jsx("li",{className:"text-sm",children:E},b))}),n.edad_minima&&e.jsx("p",{className:"text-sm font-medium mb-3",children:n.edad_minima})]}),n.progress!==void 0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${n.type==="error"?"bg-red-600":"bg-yellow-600"}`,style:{width:`${n.progress}%`}})}),e.jsxs("p",{className:"text-xs mt-1",children:["Progreso: ",Math.round(n.progress),"%"]})]}),n.actions&&n.actions.includes("upload_documents")&&e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-white rounded-lg font-medium hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(Hs,{className:"h-5 w-5"}),"Subir Documentos"]})]})]})}),n&&n.type==="success"&&e.jsx("div",{className:`rounded-lg border-2 p-6 ${p(n.type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:N(n.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:n.title}),e.jsx("p",{className:"mb-3",children:n.message}),n.actions&&n.actions.includes("view_programs")&&e.jsxs("button",{onClick:()=>r("/estudiante/inscripciones"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-sm",children:["Ver Programas Disponibles",e.jsx(Fa,{className:"h-5 w-5"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map((E,b)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all cursor-pointer border border-gray-100",onClick:()=>r(E.link),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${E.color} p-3 rounded-lg text-white shadow-sm`,children:E.icon}),e.jsx(Fa,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:E.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?"...":E.value})]},b))}),n&&n.type!=="success"&&k.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(us,{className:"h-6 w-6 text-green-600"}),"Documentos Requeridos"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Sube cada documento individualmente. Las imgenes se comprimirn automticamente."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[k.filter(E=>E.subido&&E.requerido).length," / ",k.filter(E=>E.requerido).length," requeridos"]}),e.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full mt-2",children:e.jsx("div",{className:"h-2 bg-green-600 rounded-full transition-all",style:{width:`${k.filter(E=>E.subido&&E.requerido).length/k.filter(E=>E.requerido).length*100}%`}})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(E=>e.jsx(tE,{documento:E,onUploadSuccess:C},E.tipo_documento_id))}),k.filter(E=>E.requerido).length>0&&k.filter(E=>E.subido&&E.requerido).length===k.filter(E=>E.requerido).length&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsx("p",{className:"font-medium",children:"Todos los documentos requeridos han sido subidos! Tus documentos estn siendo revisados por el rea administrativa."})]}),e.jsx("p",{className:"text-sm text-green-700 mt-2",children:"Sers notificado cuando tus documentos sean validados. Mientras tanto, puedes subir el Ttulo de Bachiller si lo deseas (opcional)."})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ts,{className:"h-6 w-6 text-green-600"}),"Accesos Rpidos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>r("/estudiante/materias"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Materias"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulta tus materias inscritas"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/notas"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Calificaciones"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revisa tus notas y promedios"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/documentos"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Documentos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona tus documentos"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/pagos"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Pagos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulta y realiza pagos"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"h-6 w-6 text-blue-600"}),"Informacin"]}),e.jsxs("div",{className:"space-y-3 text-gray-700",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"CI:"})," ",(s==null?void 0:s.ci)||"No disponible"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Email:"})," ",(s==null?void 0:s.email)||"No disponible"]}),e.jsx("p",{className:"text-sm",children:"Desde este portal puedes consultar toda la informacin relacionada con tu proceso acadmico en ICAP."})]})]})]}),e.jsx(Q0,{isOpen:g,onClose:()=>x(!1),tiposDocumento:y,onSuccess:C})]})},oE=()=>{const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState(!0),[o,i]=u.useState(null);return u.useEffect(()=>{s&&(async()=>{try{n(!0);const c=await ye("/estudiante/inscripciones");if(console.log(" Respuesta de inscripciones:",c.data),c.data.success){let d=[];c.data.data?c.data.data.data&&Array.isArray(c.data.data.data)?d=c.data.data.data:Array.isArray(c.data.data)?d=c.data.data:c.data.data.inscripciones&&Array.isArray(c.data.data.inscripciones)&&(d=c.data.data.inscripciones):c.data.inscripciones&&Array.isArray(c.data.inscripciones)&&(d=c.data.inscripciones),Array.isArray(d)||(console.warn(" inscripcionesData no es un array:",d),d=[]),a(d)}else i("No se pudieron cargar las materias"),a([])}catch(c){console.error("Error cargando materias:",c),i("Error al cargar las materias"),a([])}finally{n(!1)}})()},[s]),t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(Ts,{className:"h-8 w-8"}),"Mis Materias"]}),e.jsx("p",{className:"text-green-100",children:"Consulta todas tus materias inscritas"})]}),!Array.isArray(r)||r.length===0?e.jsx(ge,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes materias inscritas"}),e.jsx("p",{className:"text-gray-600",children:"Contacta con la administracin para inscribirte en materias"})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((l,c)=>{var d,g,x;return e.jsx(ge,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:((d=l.programa)==null?void 0:d.nombre)||l.nombre||"Materia sin nombre"}),((g=l.programa)==null?void 0:g.descripcion)&&e.jsx("p",{className:"text-gray-600 text-sm",children:l.programa.descripcion})]}),l.estado&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${l.estado==="aprobada"?"bg-green-100 text-green-800":l.estado==="pendiente"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:l.estado})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-200",children:[l.fecha_inscripcion&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Bs,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Inscrito:"})," ",new Date(l.fecha_inscripcion).toLocaleDateString()]})]}),l.grupo&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(tr,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Grupo:"})," ",l.grupo.nombre||l.grupo.modulo||l.grupo.id]})]})]}),((x=l.grupo)==null?void 0:x.horarios)&&l.grupo.horarios.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Horarios:"]}),e.jsx("div",{className:"space-y-1",children:l.grupo.horarios.map((y,w)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[y.dias," ",y.hora_ini," - ",y.hora_fin,y.aula&&e.jsxs("span",{className:"text-gray-500",children:[" (",y.aula,")"]})]},w))})]})]})},c)})})]})},iE=()=>{const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState(!0),[o,i]=u.useState(null);u.useEffect(()=>{s&&(async()=>{try{n(!0);const g=await ye("/estudiante/notas");if(console.log(" Respuesta de notas:",g.data),g.data.success){let x=[];g.data.data?g.data.data.notas&&Array.isArray(g.data.data.notas)?x=g.data.data.notas:Array.isArray(g.data.data)&&(x=g.data.data):g.data.notas&&Array.isArray(g.data.notas)&&(x=g.data.notas),Array.isArray(x)||(console.warn(" notasData no es un array:",x),x=[]),a(x)}else i("No se pudieron cargar las notas"),a([])}catch(g){console.error("Error cargando notas:",g),i("Error al cargar las notas"),a([])}finally{n(!1)}})()},[s]);const l=d=>d?d>=70?"text-green-600":d>=51?"text-blue-600":"text-red-600":"text-gray-500",c=d=>d===null?null:d?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Aprobado"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Reprobado"]});return t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(et,{className:"h-8 w-8"}),"Mis Calificaciones"]}),e.jsx("p",{className:"text-green-100",children:"Consulta tus notas y promedios por materia"})]}),!Array.isArray(r)||r.length===0?e.jsx(ge,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes notas registradas"}),e.jsx("p",{className:"text-gray-600",children:"Las notas aparecern aqu una vez que los docentes las registren"})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((d,g)=>{var x;return e.jsx(ge,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:((x=d.programa)==null?void 0:x.nombre)||d.materia||"Materia"}),d.docente&&e.jsxs("p",{className:"text-gray-600 text-sm flex items-center gap-2",children:[e.jsx(tr,{className:"h-4 w-4"}),d.docente]})]}),e.jsxs("div",{className:"text-right",children:[d.nota!==null?e.jsx("div",{className:`text-4xl font-bold ${l(d.nota)}`,children:d.nota}):e.jsx("div",{className:"text-gray-400 text-sm",children:"Sin calificar"}),c(d.aprobado)]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[d.fecha_ini&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Bs,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Inicio:"})," ",new Date(d.fecha_ini).toLocaleDateString()]})]}),d.fecha_fin&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Bs,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Fin:"})," ",new Date(d.fecha_fin).toLocaleDateString()]})]}),d.estado&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ts,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Estado:"})," ",d.estado]})]})]})]})},g)})})]})},lE=()=>{const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState(!0),[o,i]=u.useState(null);u.useEffect(()=>{s&&(async()=>{try{n(!0);const d=await ye("/estudiante/documentos");if(console.log(" Respuesta de documentos:",d.data),d.data.success){let g=[];d.data.data?Array.isArray(d.data.data)?g=d.data.data:d.data.data.documentos&&Array.isArray(d.data.data.documentos)&&(g=d.data.data.documentos):d.data.documentos&&Array.isArray(d.data.documentos)&&(g=d.data.documentos),Array.isArray(g)||(console.warn(" documentosData no es un array:",g),g=[]),a(g)}else i("No se pudieron cargar los documentos"),a([])}catch(d){console.error("Error cargando documentos:",d),i("Error al cargar los documentos"),a([])}finally{n(!1)}})()},[s]);const l=c=>{switch(c==null?void 0:c.toLowerCase()){case"aprobado":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Aprobado"]});case"rechazado":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Rechazado"]});case"pendiente":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Pendiente"]});default:return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Sin estado"})}};return t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(us,{className:"h-8 w-8"}),"Mis Documentos"]}),e.jsx("p",{className:"text-green-100",children:"Gestiona y consulta tus documentos acadmicos"})]}),e.jsxs(X,{variant:"secondary",onClick:()=>{},className:"bg-white text-green-700 hover:bg-green-50",children:[e.jsx(Hs,{className:"h-5 w-5 mr-2"}),"Subir Documento"]})]})}),!Array.isArray(r)||r.length===0?e.jsx(ge,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(us,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes documentos subidos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Sube tus documentos acadmicos para que sean validados"}),e.jsxs(X,{variant:"primary",onClick:()=>{},children:[e.jsx(Hs,{className:"h-5 w-5 mr-2"}),"Subir Primer Documento"]})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((c,d)=>{var g;return e.jsx(ge,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:((g=c.tipo_documento)==null?void 0:g.nombre)||c.tipo||"Documento"}),c.descripcion&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:c.descripcion}),c.fecha_subida&&e.jsxs("p",{className:"text-gray-500 text-xs",children:["Subido el ",new Date(c.fecha_subida).toLocaleDateString()]})]}),l(c.estado)]}),c.observaciones&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Observaciones:"})," ",c.observaciones]})}),e.jsx("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-200",children:c.archivo_url&&e.jsxs(e.Fragment,{children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>window.open(c.archivo_url,"_blank"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Ver"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>{const x=document.createElement("a");x.href=c.archivo_url,x.download=c.nombre_archivo||"documento",x.click()},children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})})]})},d)})})]})},cE=()=>{const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState({});u.useEffect(()=>{i()},[]);const i=async()=>{try{t(!0);const d=await px.getMisDocumentos();d.success?r(d.data||[]):(m.error(d.message||"Error al cargar documentos"),r([]))}catch{m.error("Error de conexin"),r([])}finally{t(!1)}},l=async(d,g)=>{const x=g.target.files[0];if(!x)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(x.type)){m.error("Solo se permiten archivos PDF, JPG, JPEG o PNG");return}if(x.size>10*1024*1024){m.error("El archivo no debe exceder 10MB");return}try{o({...n,[d]:!0});const w=await px.subirDocumento(d,x);w.success?(m.success(w.message||"Documento subido exitosamente"),await i()):(m.error(w.message||"Error al subir documento"),w.errors&&Object.keys(w.errors).forEach(k=>{m.error(`${k}: ${w.errors[k]}`)}))}catch{m.error("Error al subir documento")}finally{o({...n,[d]:!1}),g.target.value=""}},c=d=>{const g={0:{label:"Pendiente de Revisin",color:"bg-yellow-100 text-yellow-800",icon:Xe},1:{label:"Aprobado",color:"bg-green-100 text-green-800",icon:Le},2:{label:"Rechazado",color:"bg-red-100 text-red-800",icon:ls},null:{label:"No Subido",color:"bg-gray-100 text-gray-800",icon:us}},x=g[d]||g[null],y=x.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${x.color}`,children:[e.jsx(y,{className:"h-4 w-4"}),x.label]})};return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(us,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Documentos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sube y gestiona tus documentos acadmicos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Documentos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(us,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Aprobados"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.filter(d=>d.estado==="1").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.filter(d=>d.estado==="0"||d.estado===null).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Xe,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-6",children:"Documentos Requeridos"}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(us,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay documentos requeridos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para ms informacin"})]}):s.map((d,g)=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:d.nombre_entidad}),c(d.estado)]}),d.version&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Versin: ",d.version]}),d.observaciones&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observaciones:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.observaciones})]}),d.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Subido: ",new Date(d.fecha_subida).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3 ml-4",children:[d.url_descarga&&e.jsx(X,{variant:"outline",size:"sm",icon:e.jsx(qs,{className:"h-4 w-4"}),onClick:()=>window.open(d.url_descarga,"_blank"),children:"Ver Documento"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:`file-${d.tipo_documento_id}`,accept:".pdf,.jpg,.jpeg,.png",onChange:x=>l(d.tipo_documento_id,x),className:"hidden",disabled:n[d.tipo_documento_id]}),e.jsx("label",{htmlFor:`file-${d.tipo_documento_id}`,children:e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Hs,{className:"h-4 w-4"}),disabled:n[d.tipo_documento_id],as:"span",children:n[d.tipo_documento_id]?"Subiendo...":d.documento_id?"Reemplazar":"Subir Documento"})})]})]})]})},g))})]}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Informacin Importante"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:" Los documentos deben estar en formato PDF, JPG, JPEG o PNG"}),e.jsx("li",{children:" El tamao mximo por archivo es de 10MB"}),e.jsx("li",{children:" Una vez subido, el documento ser revisado por el administrador"}),e.jsx("li",{children:" Si un documento es rechazado, podrs subir una nueva versin"}),e.jsx("li",{children:" Solo los estudiantes con todos los documentos aprobados podrn inscribirse"})]})]})]})},dE=({isOpen:s,onClose:r,cuotaId:a})=>{const[t,n]=u.useState(null),[o,i]=u.useState(!1),[l,c]=u.useState(!1);u.useEffect(()=>{s&&a?d():(n(null),c(!1))},[s,a]);const d=async()=>{try{i(!0);const y=await ye(`/estudiante/pagos/${a}/info-qr`);y.data.success?n(y.data.data):m.error(y.data.message||"Error al obtener informacin del QR")}catch(y){console.error("Error fetching QR info:",y),m.error("Error al obtener informacin del QR")}finally{i(!1)}},g=y=>{navigator.clipboard.writeText(y),c(!0),m.success("Copiado al portapapeles"),setTimeout(()=>c(!1),2e3)},x=y=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(y||0);return e.jsx(Pe,{isOpen:s,onClose:r,title:"Pago por QR",size:"md",children:o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(em,{className:"h-8 w-8 animate-spin text-green-600"})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Monto:"}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:x(t.monto)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Concepto:"}),e.jsx("span",{className:"text-gray-900",children:t.concepto})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Referencia:"}),e.jsx("span",{className:"text-gray-900 font-mono text-sm",children:t.referencia})]})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200 shadow-lg",children:e.jsx("div",{className:"w-64 h-64 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gn,{className:"h-32 w-32 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"QR Code"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"(Prximamente)"})]})})}),e.jsx("p",{className:"text-sm text-gray-600 text-center max-w-sm",children:"Escanea este cdigo QR con tu aplicacin bancaria para realizar el pago"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Instrucciones:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"Abre tu aplicacin bancaria"}),e.jsx("li",{children:"Selecciona la opcin de pago por QR"}),e.jsx("li",{children:"Escanea el cdigo QR mostrado arriba"}),e.jsx("li",{children:"Verifica el monto y confirma el pago"}),e.jsx("li",{children:"Guarda el comprobante y sbelo en el sistema"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia de pago:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:t.referencia,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"}),e.jsx("button",{onClick:()=>g(t.referencia),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-4 w-4"}),"Copiado"]}):e.jsxs(e.Fragment,{children:[e.jsx(Pw,{className:"h-4 w-4"}),"Copiar"]})})]})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No se pudo cargar la informacin del QR"})})})},uE=()=>{const{user:s}=Es(),[r,a]=u.useState([]),[t,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState(!1),[d,g]=u.useState(null);u.useEffect(()=>{s&&(async()=>{try{n(!0);const C=await ye("/estudiante/pagos");if(console.log(" Respuesta de pagos:",C.data),C.data.success){let N=[];C.data.data?C.data.data.cuotas&&Array.isArray(C.data.data.cuotas)?N=C.data.data.cuotas:C.data.data.pagos&&Array.isArray(C.data.data.pagos)?N=C.data.data.pagos:Array.isArray(C.data.data)&&(N=C.data.data):C.data.cuotas&&Array.isArray(C.data.cuotas)?N=C.data.cuotas:C.data.pagos&&Array.isArray(C.data.pagos)&&(N=C.data.pagos),Array.isArray(N)||(console.warn(" pagosData no es un array:",N),N=[]),a(N)}else i("No se pudieron cargar los pagos"),a([])}catch(C){console.error("Error cargando pagos:",C),i("Error al cargar los pagos"),a([])}finally{n(!1)}})()},[s]);const x=S=>{switch(S==null?void 0:S.toLowerCase()){case"pagado":case"verificado":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Pagado"]});case"pendiente":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Pendiente"]});case"rechazado":case"cancelado":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Rechazado"]});default:return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:S||"Sin estado"})}},y=S=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(S||0);if(t)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})});if(o)return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})});const w=Array.isArray(r)?r.filter(S=>{var C;return((C=S.estado)==null?void 0:C.toLowerCase())==="pendiente"}):[],k=w.reduce((S,C)=>S+(parseFloat(C.monto)||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(Tr,{className:"h-8 w-8"}),"Mis Pagos"]}),e.jsx("p",{className:"text-green-100",children:"Consulta y gestiona tus pagos y cuotas acadmicas"})]}),w.length>0&&e.jsx(ge,{className:"bg-yellow-50 border-yellow-200",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Pagos Pendientes"}),e.jsxs("p",{className:"text-gray-600",children:["Tienes ",w.length," ",w.length===1?"pago":"pagos"," pendiente",w.length>1?"s":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:y(k)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total pendiente"})]})]})})}),!Array.isArray(r)||r.length===0?e.jsx(ge,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Tr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes pagos registrados"}),e.jsx("p",{className:"text-gray-600",children:"Los pagos aparecern aqu cuando se generen cuotas acadmicas"})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((S,C)=>{var N;return e.jsx(ge,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:S.concepto||S.descripcion||"Pago acadmico"}),S.programa&&e.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["Programa: ",S.programa.nombre||S.programa]}),S.fecha_vencimiento&&e.jsxs("p",{className:"text-gray-500 text-xs flex items-center gap-1",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Vence: ",new Date(S.fecha_vencimiento).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-2",children:y(S.monto)}),x(S.estado)]})]}),S.fecha_pago&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Fecha de pago:"})," ",new Date(S.fecha_pago).toLocaleDateString()]})}),((N=S.estado)==null?void 0:N.toLowerCase())==="pendiente"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs(X,{variant:"primary",size:"sm",onClick:()=>{S.cuota_id||S.id?(g(S.cuota_id||S.id),c(!0)):m.error("No se pudo obtener la informacin de la cuota")},children:[e.jsx(gn,{className:"h-4 w-4 mr-2"}),"Pagar con QR"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>{m.info("Prximamente: Subir comprobante de pago")},children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Subir Comprobante"]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Nr,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Importante:"}),e.jsx("p",{children:"Despus de realizar el pago, sube el comprobante para que sea verificado. Tu inscripcin se validar una vez que el pago sea confirmado."})]})]})})]})]})},C)})}),e.jsx(dE,{isOpen:l,onClose:()=>{c(!1),g(null)},cuotaId:d})]})},mE=()=>{var E,b;const[s,r]=u.useState([]),[a,t]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(null),[g,x]=u.useState({total_cuotas:0,cuotas_pagadas:0,cuotas_pendientes:0,cuotas_vencidas:0,planes_completos:0,planes_pendientes:0}),{register:y,handleSubmit:w,reset:k,formState:{errors:S}}=We();u.useEffect(()=>{C()},[]);const C=async()=>{try{o(!0);const f=await bx.getMisCuotas();f.success?(r(f.data.cuotas||[]),t(f.data.planes||[]),x({total_cuotas:f.data.total_cuotas||0,cuotas_pagadas:f.data.cuotas_pagadas||0,cuotas_pendientes:f.data.cuotas_pendientes||0,cuotas_vencidas:f.data.cuotas_vencidas||0,planes_completos:f.data.planes_completos||0,planes_pendientes:f.data.planes_pendientes||0})):(m.error(f.message||"Error al cargar cuotas"),r([]))}catch{m.error("Error de conexin"),r([])}finally{o(!1)}},N=f=>{d(f),k({monto:f.saldo_pendiente||f.monto,token:""}),l(!0)},p=async f=>{try{o(!0);const P=await bx.registrarPago(c.id,parseFloat(f.monto),f.token);P.success?(m.success(P.message||"Pago registrado exitosamente"),l(!1),d(null),k(),await C()):(m.error(P.message||"Error al registrar pago"),P.errors&&Object.keys(P.errors).forEach(R=>{m.error(`${R}: ${P.errors[R]}`)}))}catch{m.error("Error al registrar pago")}finally{o(!1)}},_=f=>f.esta_pagada?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Pagada"]}):f.esta_vencida?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Vencida"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Pendiente"]});return n&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Tr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Pagos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona tus cuotas y pagos acadmicos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-6 gap-6",children:[e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Cuotas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:g.total_cuotas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Tr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pagadas"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:g.cuotas_pagadas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:g.cuotas_pendientes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Xe,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Vencidas"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:g.cuotas_vencidas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ls,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Planes Completos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:g.planes_completos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Le,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Planes Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:g.planes_pendientes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Xe,{className:"h-6 w-6 text-white"})})]})})]}),a.length>0&&e.jsx("div",{className:"space-y-6",children:a.map((f,P)=>{var R;return e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",children:f.programa}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Plan de Pago #",f.plan_id]})]}),f.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Le,{className:"h-4 w-4"}),"Plan Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Xe,{className:"h-4 w-4"}),"En Proceso"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Total"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(f.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Pagado"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:parseFloat(f.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:parseFloat(f.monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progreso"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(f.porcentaje_pagado||0,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((R=f.porcentaje_pagado)==null?void 0:R.toFixed(1))||0,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Cuotas (",f.cuotas_pagadas,"/",f.total_cuotas," pagadas)"]}),f.cuotas&&f.cuotas.map((q,I)=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h5",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Cuota ",I+1]}),_(q)]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monto"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(q.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vencimiento"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:new Date(q.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Saldo"}),e.jsx("p",{className:"font-semibold text-yellow-600",children:parseFloat(q.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),q.pagos&&q.pagos.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos Registrados:"}),e.jsx("div",{className:"space-y-1",children:q.pagos.map(($,G)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{className:"font-medium",children:parseFloat($.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"text-gray-500",children:[new Date($.fecha).toLocaleDateString()," ",$.token&&`- ${$.token}`]})]},G))})]})]}),!q.esta_pagada&&e.jsx("div",{className:"ml-4",children:e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>N(q),children:"Pagar"})})]})},I))]})]},P)})}),e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-6",children:"Todas mis Cuotas"}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Tr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes cuotas registradas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para ms informacin"})]}):s.map((f,P)=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:f.programa}),_(f)]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(f.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Vencimiento"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:new Date(f.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:parseFloat(f.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),f.pagos&&f.pagos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos Registrados:"}),e.jsx("div",{className:"space-y-2",children:f.pagos.map((R,q)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:parseFloat(R.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["- ",new Date(R.fecha).toLocaleDateString()]})]}),R.token&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Token: ",R.token]})]},q))})]})]}),!f.esta_pagada&&e.jsx("div",{className:"ml-4",children:e.jsx(X,{variant:"primary",size:"sm",icon:e.jsx(Hs,{className:"h-4 w-4"}),onClick:()=>N(f),children:"Registrar Pago"})})]})},P))})]}),e.jsx(Pe,{isOpen:i,onClose:()=>{l(!1),d(null),k()},title:"Registrar Pago",size:"md",children:c&&e.jsxs("form",{onSubmit:w(p),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Programa"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c.programa}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-1",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:parseFloat(c.saldo_pendiente||c.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(me,{label:"Monto a Pagar *",type:"number",step:"0.01",placeholder:"0.00",error:(E=S.monto)==null?void 0:E.message,...y("monto",{required:"El monto es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"},max:{value:c.saldo_pendiente||c.monto||0,message:"El monto no puede exceder el saldo pendiente"}})}),e.jsx(me,{label:"Token/Nmero de Transaccin *",placeholder:"Ingresa el nmero de transaccin o token del pago",error:(b=S.token)==null?void 0:b.message,...y("token",{required:"El token es obligatorio"})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{l(!1),d(null),k()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Hs,{className:"h-5 w-5"}),children:"Registrar Pago"})]})]})})]})},Fc={async getProgramasDisponibles(){var s,r;try{const a=await ye("/estudiante/inscripciones/programas-disponibles");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||M.ERROR_FETCH}}catch(a){return console.error("Error fetching programas disponibles:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||M.ERROR_FETCH}}},async verificarHorarios(s){var r,a;try{const t=await Me("/estudiante/inscripciones/verificar-horarios",{grupo_id:s});return t.data.success?{success:!0,tieneConflictos:t.data.tiene_conflictos,conflictos:t.data.conflictos||[],message:t.data.message}:{success:!1,message:t.data.message||"Error al verificar horarios"}}catch(t){return console.error("Error verificando horarios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al verificar horarios"}}},async getMisInscripciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||15},n=await ye("/estudiante/inscripciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching mis inscripciones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async getInscripcionById(s){var r,a;try{const t=await ye(`/estudiante/inscripciones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||M.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripcion:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||M.ERROR_FETCH}}},async crearInscripcion(s){var r,a,t,n;try{const o=await Me("/estudiante/inscripciones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Inscripcin realizada exitosamente"}:{success:!1,message:o.data.message||"Error al realizar inscripcin",errors:o.data.errors}}catch(o){return console.error("Error creando inscripcion:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al realizar inscripcin",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},gE=()=>{var R,q;const[s,r]=u.useState([]),[a,t]=u.useState(!0),[n,o]=u.useState(!1),[i,l]=u.useState(null),[c,d]=u.useState(null),[g,x]=u.useState([]),[y,w]=u.useState(!1),{register:k,handleSubmit:S,reset:C,watch:N,formState:{errors:p}}=We({defaultValues:{numero_cuotas:3}}),_=N("numero_cuotas");u.useEffect(()=>{E()},[]);const E=async()=>{var I,$,G,V;try{t(!0);const F=await Fc.getProgramasDisponibles();F.success?r(F.data||[]):((I=F.message)!=null&&I.includes("documentos aprobados")?m.error("Debes tener tus documentos aprobados para poder inscribirte. Completa la verificacin de documentos primero."):m.error(F.message||"Error al cargar programas"),r([]))}catch(F){(V=(G=($=F.response)==null?void 0:$.data)==null?void 0:G.message)!=null&&V.includes("documentos aprobados")?m.error("Debes tener tus documentos aprobados para poder inscribirte. Completa la verificacin de documentos primero."):m.error("Error de conexin"),r([])}finally{t(!1)}},b=async(I,$)=>{l(I),d($),x([]),C({programa_id:I.id,grupo_id:$.id,numero_cuotas:3}),w(!0);try{const G=await Fc.verificarHorarios($.id);G.success?(G.tieneConflictos&&(x(G.conflictos||[]),m.error("Se encontraron conflictos de horario. Revisa los detalles en el modal.")),o(!0)):m.error(G.message||"Error al verificar horarios")}catch(G){console.error("Error verificando horarios:",G),m.error("Error al verificar horarios. Intenta nuevamente.")}finally{w(!1)}},f=async I=>{if(g.length>0){m.error("No puede inscribirse debido a conflictos de horario");return}try{t(!0);const $=await Fc.crearInscripcion({programa_id:i.id,grupo_id:c.id,numero_cuotas:parseInt(I.numero_cuotas)});$.success?(m.success($.message||"Inscripcin realizada exitosamente"),o(!1),l(null),d(null),x([]),C(),await E()):(m.error($.message||"Error al realizar inscripcin"),$.errors&&Object.keys($.errors).forEach(G=>{m.error(`${G}: ${$.errors[G]}`)}))}catch{m.error("Error al realizar inscripcin")}finally{t(!1)}},P=I=>I?`${I.dias} ${I.hora_ini} - ${I.hora_fin}`:"-";return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Xs,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Inscripciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Inscrbete en los programas acadmicos disponibles"})]})]}),s.length===0?e.jsx(ge,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:a?"Cargando programas...":"No hay programas disponibles"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"Por favor espera...":"Actualmente no hay programas con grupos disponibles para inscripcin. Verifica que tus documentos estn aprobados."})]})}):e.jsx("div",{className:"space-y-6",children:s.map(I=>e.jsxs(ge,{className:"gradient",shadow:"glow-lg",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-2",children:I.nombre}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"h-4 w-4"}),e.jsxs("span",{children:["Costo: ",parseFloat(I.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Duracin: ",I.duracion_meses||0," meses"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsxs("span",{children:[I.total_grupos," grupo(s) disponible(s)"]})]})]}),I.institucion&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Institucin: ",I.institucion]})]})}),I.grupos_disponibles&&I.grupos_disponibles.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Grupos Disponibles:"}),I.grupos_disponibles.map($=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-gray-100",children:$.modulo||"Grupo"}),$.cupos_disponibles>0&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[$.cupos_disponibles," cupos disponibles"]})]}),$.docente&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Docente: ",$.docente]}),e.jsx("div",{className:"space-y-1",children:$.horarios&&$.horarios.length>0?$.horarios.map((G,V)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{children:P(G)}),G.aula&&e.jsxs("span",{className:"text-xs",children:["(",G.aula,")"]})]},V)):e.jsx("p",{className:"text-sm text-gray-500",children:"Sin horarios asignados"})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[new Date($.fecha_ini).toLocaleDateString()," - ",new Date($.fecha_fin).toLocaleDateString()]})]}),e.jsx(X,{variant:"primary",size:"sm",onClick:()=>b(I,$),children:"Inscribirse"})]})},$.id))]})]},I.id))}),e.jsx(Pe,{isOpen:n,onClose:()=>{o(!1),l(null),d(null),x([]),C()},title:"Confirmar Inscripcin",size:"lg",children:i&&c&&e.jsxs("form",{onSubmit:S(f),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:i.nombre}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Grupo: ",c.modulo||"Grupo"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Costo: ",parseFloat(i.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]}),g.length>0&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(Nr,{className:"h-6 w-6 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-lg text-red-900 dark:text-red-100 mb-1",children:" Conflictos de Horario Detectados"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:"El horario del grupo seleccionado entra en conflicto con otros grupos en los que ya est inscrito. No puedes inscribirte en este grupo."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Horario del grupo seleccionado:"}),(R=c==null?void 0:c.horarios)==null?void 0:R.map((I,$)=>e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[I.dias," ",I.hora_ini," - ",I.hora_fin]},$))]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-2",children:"Conflictos con tus grupos actuales:"}),e.jsx("ul",{className:"space-y-2",children:g.map((I,$)=>{var G,V,F,ae,ne;return e.jsx("li",{className:"bg-white dark:bg-gray-800 rounded p-2 border border-red-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ls,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[(G=I.grupo_conflicto)==null?void 0:G.programa," - ",(V=I.grupo_conflicto)==null?void 0:V.modulo]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(F=I.horario_conflicto)==null?void 0:F.dias," ",(ae=I.horario_conflicto)==null?void 0:ae.hora_ini," - ",(ne=I.horario_conflicto)==null?void 0:ne.hora_fin]})]})]})},$)})})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100",children:" Solucin: Selecciona otro grupo con un horario diferente o cancela una inscripcin existente."})})]}),g.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(me,{label:"Nmero de Cuotas *",type:"number",min:"1",max:"12",placeholder:"3",error:(q=p.numero_cuotas)==null?void 0:q.message,...k("numero_cuotas",{required:"El nmero de cuotas es obligatorio",min:{value:1,message:"Mnimo 1 cuota"},max:{value:12,message:"Mximo 12 cuotas"}})}),_&&i.costo&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Monto por cuota:"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:parseFloat(i.costo/_||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>{o(!1),l(null),d(null),x([]),C()},children:"Cancelar"}),e.jsx(X,{type:"submit",variant:"primary",icon:e.jsx(Le,{className:"h-5 w-5"}),disabled:a||y,children:a?"Procesando...":"Confirmar Inscripcin"})]})]})]})})]})};function mi({children:s,requiredRoles:r=[]}){const{isAuthenticated:a,loading:t,user:n}=Es(),o=nt(),[i,l]=Be.useState(!0);if(Be.useEffect(()=>{console.log(" ProtectedRoute:",{path:o.pathname,isAuthenticated:a,loading:t,user:n?{id:n.id,rol:n.rol}:null,requiredRoles:r,isInitialCheck:i})},[o.pathname,a,t,n,r,i]),Be.useEffect(()=>{const c=localStorage.getItem("token");l(!!(c&&!n&&!a))},[n,a]),t||i&&localStorage.getItem("token")&&!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Xs,{})});if(!a){let c="/login";if(r.length>0){const d=Js(r[0]);d===os.ESTUDIANTE?c="/estudiante/login":d===os.DOCENTE&&(c="/docente/login")}else o.pathname.startsWith("/estudiante")?c="/estudiante/login":o.pathname.startsWith("/docente")&&(c="/docente/login");return e.jsx(gs,{to:c,state:{from:o},replace:!0})}if(r.length>0){const c=Js(n==null?void 0:n.rol);if(!Xu(c,r))return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-error-100",children:e.jsx("svg",{className:"h-6 w-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"mt-4 text-lg font-medium text-gray-900",children:"Acceso denegado"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes permisos para acceder a esta pgina."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>window.history.back(),className:"btn btn-primary",children:"Volver"})})]})})}return s}const Ue=({allowedRoles:s=[],children:r})=>{const{user:a,isAuthenticated:t}=Es(),n=nt();if(!t){let i="/login";if(n.pathname.startsWith("/estudiante"))i="/estudiante/login";else if(n.pathname.startsWith("/docente"))i="/docente/login";else if(s.length>0){const l=Js(s[0]);l===os.ESTUDIANTE?i="/estudiante/login":l===os.DOCENTE&&(i="/docente/login")}return e.jsx(gs,{to:i,replace:!0})}if(!s||s.length===0)return r;if(!Xu(a==null?void 0:a.rol,s)){const i=Js(a==null?void 0:a.rol);let l="/dashboard";return i===os.ESTUDIANTE?l="/estudiante/dashboard":i===os.DOCENTE?l="/docente/dashboard":i===os.ADMIN&&(l="/admin/dashboard"),e.jsx(gs,{to:l,replace:!0})}return r},xE=()=>{const{isAuthenticated:s,user:r}=Es();return e.jsxs(fv,{children:[e.jsx(Te,{path:"/",element:e.jsx(Hw,{})}),e.jsx(Te,{path:"/portales",element:e.jsx(Gw,{})}),e.jsx(Te,{path:"/docente/login",element:s&&(r==null?void 0:r.rol)==="DOCENTE"?e.jsx(gs,{to:"/docente/dashboard",replace:!0}):e.jsx(f1,{})}),e.jsx(Te,{path:"/estudiante/login",element:s&&(r==null?void 0:r.rol)==="ESTUDIANTE"?e.jsx(gs,{to:"/estudiante/dashboard",replace:!0}):e.jsx(p1,{})}),e.jsx(Te,{path:"/estudiante/registro",element:s&&(r==null?void 0:r.rol)==="ESTUDIANTE"?e.jsx(gs,{to:"/estudiante/dashboard",replace:!0}):e.jsx(y1,{})}),e.jsx(Te,{path:"/login",element:s&&r?(()=>{const a=Js(r==null?void 0:r.rol);return a===os.ADMIN?e.jsx(gs,{to:"/admin/dashboard",replace:!0}):a===os.DOCENTE?e.jsx(gs,{to:"/docente/dashboard",replace:!0}):a===os.ESTUDIANTE?e.jsx(gs,{to:"/estudiante/dashboard",replace:!0}):e.jsx(dx,{})})():e.jsx(dx,{})}),e.jsx(Te,{path:"/notificaciones",element:s&&r?(()=>{const a=Js(r==null?void 0:r.rol);return a===os.ADMIN?e.jsx(gs,{to:"/admin/notificaciones",replace:!0}):a===os.DOCENTE?e.jsx(gs,{to:"/docente/notificaciones",replace:!0}):a===os.ESTUDIANTE?e.jsx(gs,{to:"/estudiante/notificaciones",replace:!0}):e.jsx(gs,{to:"/login",replace:!0})})():e.jsx(gs,{to:"/login",replace:!0})}),e.jsx(Te,{path:"/perfil",element:e.jsx(mi,{children:(()=>{if(!s||!r)return e.jsx(gs,{to:"/login",replace:!0});const a=Js(r==null?void 0:r.rol);return a===os.ADMIN?e.jsx(gs,{to:"/admin/perfil",replace:!0}):a===os.DOCENTE?e.jsx(gs,{to:"/docente/perfil",replace:!0}):a===os.ESTUDIANTE?e.jsx(gs,{to:"/estudiante/perfil",replace:!0}):e.jsx(gs,{to:"/login",replace:!0})})()})}),e.jsxs(Te,{path:"/admin",element:e.jsx(mi,{requiredRoles:["ADMIN"],children:e.jsx(Ti,{})}),children:[e.jsx(Te,{index:!0,element:e.jsx(gs,{to:"/admin/dashboard",replace:!0})}),e.jsx(Te,{path:"dashboard",element:e.jsx(v1,{})}),e.jsx(Te,{path:"usuarios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(N1,{})})}),e.jsx(Te,{path:"roles",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(P1,{})})}),e.jsx(Te,{path:"bitacora",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(T1,{})})}),e.jsx(Te,{path:"docentes",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(mx,{})})}),e.jsx(Te,{path:"estudiantes",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(D1,{})})}),e.jsx(Te,{path:"programas",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(gx,{})})}),e.jsx(Te,{path:"inscripciones",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(O1,{})})}),e.jsx(Te,{path:"pagos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(M1,{})})}),e.jsx(Te,{path:"planes-pago",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(J1,{})})}),e.jsx(Te,{path:"descuentos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(Y1,{})})}),e.jsx(Te,{path:"gestion-pagos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(X1,{})})}),e.jsx(Te,{path:"documentos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(yx,{})})}),e.jsx(Te,{path:"validacion-documentos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(yx,{})})}),e.jsx(Te,{path:"tipos-documento",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(K1,{})})}),e.jsx(Te,{path:"materias",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(F1,{})})}),e.jsx(Te,{path:"gestiones-academicas",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(q1,{})})}),e.jsx(Te,{path:"aulas",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(L1,{})})}),e.jsx(Te,{path:"grupos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(xx,{})})}),e.jsx(Te,{path:"horarios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(Oc,{})})}),e.jsx(Te,{path:"asistencias",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(fx,{})})}),e.jsx(Te,{path:"reportes",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx($1,{})})}),e.jsx(Te,{path:"notificaciones",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(Ic,{})})}),e.jsx(Te,{path:"auditoria",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(B1,{})})}),e.jsx(Te,{path:"paises",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(H1,{})})}),e.jsx(Te,{path:"provincias",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(G1,{})})}),e.jsx(Te,{path:"ciudades",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(Q1,{})})}),e.jsx(Te,{path:"instituciones",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(W1,{})})}),e.jsx(Te,{path:"sistema-usuarios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(w1,{})})}),e.jsx(Te,{path:"tipo-convenios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(E1,{})})}),e.jsx(Te,{path:"convenios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(k1,{})})}),e.jsx(Te,{path:"ramas-academicas",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(_1,{})})}),e.jsx(Te,{path:"versiones",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(S1,{})})}),e.jsx(Te,{path:"tipos-programa",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(C1,{})})}),e.jsx(Te,{path:"modulos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(R1,{})})}),e.jsx(Te,{path:"programas",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(gx,{})})}),e.jsx(Te,{path:"docentes",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(mx,{})})}),e.jsx(Te,{path:"horarios",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(Oc,{})})}),e.jsx(Te,{path:"grupos",element:e.jsx(Ue,{allowedRoles:["ADMIN"],children:e.jsx(xx,{})})}),e.jsx(Te,{path:"perfil",element:e.jsx(Tc,{})})]}),e.jsxs(Te,{path:"/docente",element:e.jsx(mi,{requiredRoles:["DOCENTE"],children:e.jsx(Ti,{})}),children:[e.jsx(Te,{index:!0,element:e.jsx(gs,{to:"/docente/dashboard",replace:!0})}),e.jsx(Te,{path:"dashboard",element:e.jsx(eE,{})}),e.jsx(Te,{path:"grupos",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx(sE,{})})}),e.jsx(Te,{path:"grupos/:grupoId",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx(rE,{})})}),e.jsx(Te,{path:"horarios",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx(Oc,{})})}),e.jsx(Te,{path:"asistencias",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx(fx,{})})}),e.jsx(Te,{path:"asistencias/registrar",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx("div",{children:"Registro de Asistencia - En desarrollo"})})}),e.jsx(Te,{path:"asistencias/escanear-qr",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx("div",{children:"Escner QR - En desarrollo"})})}),e.jsx(Te,{path:"notificaciones",element:e.jsx(Ue,{allowedRoles:["DOCENTE"],children:e.jsx(Ic,{})})}),e.jsx(Te,{path:"perfil",element:e.jsx(Tc,{})})]}),e.jsxs(Te,{path:"/estudiante",element:e.jsx(mi,{requiredRoles:["ESTUDIANTE"],children:e.jsx(Ti,{})}),children:[e.jsx(Te,{index:!0,element:e.jsx(gs,{to:"/estudiante/dashboard",replace:!0})}),e.jsx(Te,{path:"dashboard",element:e.jsx(nE,{})}),e.jsx(Te,{path:"materias",element:e.jsx(oE,{})}),e.jsx(Te,{path:"notas",element:e.jsx(iE,{})}),e.jsx(Te,{path:"documentos",element:e.jsx(lE,{})}),e.jsx(Te,{path:"mis-documentos",element:e.jsx(cE,{})}),e.jsx(Te,{path:"pagos",element:e.jsx(uE,{})}),e.jsx(Te,{path:"mis-pagos",element:e.jsx(mE,{})}),e.jsx(Te,{path:"inscripciones",element:e.jsx(gE,{})}),e.jsx(Te,{path:"notificaciones",element:e.jsx(Ue,{allowedRoles:["ESTUDIANTE"],children:e.jsx(Ic,{})})}),e.jsx(Te,{path:"perfil",element:e.jsx(Tc,{})})]}),e.jsx(Te,{path:"*",element:e.jsx(b1,{})})]})};function hE(){return e.jsx(ww,{children:e.jsx(bw,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-300",children:e.jsx(xE,{})})})})}const fE=new Gv({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});Lc.createRoot(document.getElementById("root")).render(e.jsx(Be.StrictMode,{children:e.jsx(Jv,{client:fE,children:e.jsxs(wv,{children:[e.jsx(hE,{}),e.jsx(zj,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
//# sourceMappingURL=index-Cmz3CyN2.js.map
