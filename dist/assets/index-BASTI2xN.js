function fp(s,r){for(var a=0;a<r.length;a++){const t=r[a];if(typeof t!="string"&&!Array.isArray(t)){for(const n in t)if(n!=="default"&&!(n in s)){const o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(s,n,o.get?o:{enumerable:!0,get:()=>t[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();function Ux(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Bx={exports:{}},El={},Vx={exports:{}},es={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),pp=Symbol.for("react.portal"),yp=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),jp=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Ep=Symbol.for("react.memo"),_p=Symbol.for("react.lazy"),Sm=Symbol.iterator;function Sp(s){return s===null||typeof s!="object"?null:(s=Sm&&s[Sm]||s["@@iterator"],typeof s=="function"?s:null)}var qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hx=Object.assign,Gx={};function In(s,r,a){this.props=s,this.context=r,this.refs=Gx,this.updater=a||qx}In.prototype.isReactComponent={};In.prototype.setState=function(s,r){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,r,"setState")};In.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Qx(){}Qx.prototype=In.prototype;function iu(s,r,a){this.props=s,this.context=r,this.refs=Gx,this.updater=a||qx}var lu=iu.prototype=new Qx;lu.constructor=iu;Hx(lu,In.prototype);lu.isPureReactComponent=!0;var Cm=Array.isArray,Wx=Object.prototype.hasOwnProperty,cu={current:null},Kx={key:!0,ref:!0,__self:!0,__source:!0};function Zx(s,r,a){var t,n={},o=null,i=null;if(r!=null)for(t in r.ref!==void 0&&(i=r.ref),r.key!==void 0&&(o=""+r.key),r)Wx.call(r,t)&&!Kx.hasOwnProperty(t)&&(n[t]=r[t]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];n.children=d}if(s&&s.defaultProps)for(t in l=s.defaultProps,l)n[t]===void 0&&(n[t]=l[t]);return{$$typeof:Ho,type:s,key:o,ref:i,props:n,_owner:cu.current}}function Cp(s,r){return{$$typeof:Ho,type:s.type,key:r,ref:s.ref,props:s.props,_owner:s._owner}}function du(s){return typeof s=="object"&&s!==null&&s.$$typeof===Ho}function Rp(s){var r={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(a){return r[a]})}var Rm=/\/+/g;function sc(s,r){return typeof s=="object"&&s!==null&&s.key!=null?Rp(""+s.key):r.toString(36)}function Si(s,r,a,t,n){var o=typeof s;(o==="undefined"||o==="boolean")&&(s=null);var i=!1;if(s===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(s.$$typeof){case Ho:case pp:i=!0}}if(i)return i=s,n=n(i),s=t===""?"."+sc(i,0):t,Cm(n)?(a="",s!=null&&(a=s.replace(Rm,"$&/")+"/"),Si(n,r,a,"",function(u){return u})):n!=null&&(du(n)&&(n=Cp(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Rm,"$&/")+"/")+s)),r.push(n)),1;if(i=0,t=t===""?".":t+":",Cm(s))for(var l=0;l<s.length;l++){o=s[l];var d=t+sc(o,l);i+=Si(o,r,a,d,n)}else if(d=Sp(s),typeof d=="function")for(s=d.call(s),l=0;!(o=s.next()).done;)o=o.value,d=t+sc(o,l++),i+=Si(o,r,a,d,n);else if(o==="object")throw r=String(s),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return i}function ri(s,r,a){if(s==null)return s;var t=[],n=0;return Si(s,t,"","",function(o){return r.call(a,o,n++)}),t}function Ap(s){if(s._status===-1){var r=s._result;r=r(),r.then(function(a){(s._status===0||s._status===-1)&&(s._status=1,s._result=a)},function(a){(s._status===0||s._status===-1)&&(s._status=2,s._result=a)}),s._status===-1&&(s._status=0,s._result=r)}if(s._status===1)return s._result.default;throw s._result}var hr={current:null},Ci={transition:null},Pp={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Ci,ReactCurrentOwner:cu};function Yx(){throw Error("act(...) is not supported in production builds of React.")}es.Children={map:ri,forEach:function(s,r,a){ri(s,function(){r.apply(this,arguments)},a)},count:function(s){var r=0;return ri(s,function(){r++}),r},toArray:function(s){return ri(s,function(r){return r})||[]},only:function(s){if(!du(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};es.Component=In;es.Fragment=yp;es.Profiler=jp;es.PureComponent=iu;es.StrictMode=bp;es.Suspense=kp;es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pp;es.act=Yx;es.cloneElement=function(s,r,a){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var t=Hx({},s.props),n=s.key,o=s.ref,i=s._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,i=cu.current),r.key!==void 0&&(n=""+r.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(d in r)Wx.call(r,d)&&!Kx.hasOwnProperty(d)&&(t[d]=r[d]===void 0&&l!==void 0?l[d]:r[d])}var d=arguments.length-2;if(d===1)t.children=a;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];t.children=l}return{$$typeof:Ho,type:s.type,key:n,ref:o,props:t,_owner:i}};es.createContext=function(s){return s={$$typeof:Np,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:vp,_context:s},s.Consumer=s};es.createElement=Zx;es.createFactory=function(s){var r=Zx.bind(null,s);return r.type=s,r};es.createRef=function(){return{current:null}};es.forwardRef=function(s){return{$$typeof:wp,render:s}};es.isValidElement=du;es.lazy=function(s){return{$$typeof:_p,_payload:{_status:-1,_result:s},_init:Ap}};es.memo=function(s,r){return{$$typeof:Ep,type:s,compare:r===void 0?null:r}};es.startTransition=function(s){var r=Ci.transition;Ci.transition={};try{s()}finally{Ci.transition=r}};es.unstable_act=Yx;es.useCallback=function(s,r){return hr.current.useCallback(s,r)};es.useContext=function(s){return hr.current.useContext(s)};es.useDebugValue=function(){};es.useDeferredValue=function(s){return hr.current.useDeferredValue(s)};es.useEffect=function(s,r){return hr.current.useEffect(s,r)};es.useId=function(){return hr.current.useId()};es.useImperativeHandle=function(s,r,a){return hr.current.useImperativeHandle(s,r,a)};es.useInsertionEffect=function(s,r){return hr.current.useInsertionEffect(s,r)};es.useLayoutEffect=function(s,r){return hr.current.useLayoutEffect(s,r)};es.useMemo=function(s,r){return hr.current.useMemo(s,r)};es.useReducer=function(s,r,a){return hr.current.useReducer(s,r,a)};es.useRef=function(s){return hr.current.useRef(s)};es.useState=function(s){return hr.current.useState(s)};es.useSyncExternalStore=function(s,r,a){return hr.current.useSyncExternalStore(s,r,a)};es.useTransition=function(){return hr.current.useTransition()};es.version="18.3.1";Vx.exports=es;var c=Vx.exports;const Ke=Ux(c),Dp=fp({__proto__:null,default:Ke},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp=c,Op=Symbol.for("react.element"),Ip=Symbol.for("react.fragment"),Fp=Object.prototype.hasOwnProperty,Mp=Tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lp={key:!0,ref:!0,__self:!0,__source:!0};function Jx(s,r,a){var t,n={},o=null,i=null;a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(i=r.ref);for(t in r)Fp.call(r,t)&&!Lp.hasOwnProperty(t)&&(n[t]=r[t]);if(s&&s.defaultProps)for(t in r=s.defaultProps,r)n[t]===void 0&&(n[t]=r[t]);return{$$typeof:Op,type:s,key:o,ref:i,props:n,_owner:Mp.current}}El.Fragment=Ip;El.jsx=Jx;El.jsxs=Jx;Bx.exports=El;var e=Bx.exports,Kc={},Xx={exports:{}},Ir={},e0={exports:{}},s0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function r(M,ne){var oe=M.length;M.push(ne);e:for(;0<oe;){var fe=oe-1>>>1,Q=M[fe];if(0<n(Q,ne))M[fe]=ne,M[oe]=Q,oe=fe;else break e}}function a(M){return M.length===0?null:M[0]}function t(M){if(M.length===0)return null;var ne=M[0],oe=M.pop();if(oe!==ne){M[0]=oe;e:for(var fe=0,Q=M.length,me=Q>>>1;fe<me;){var xe=2*(fe+1)-1,ie=M[xe],le=xe+1,Se=M[le];if(0>n(ie,oe))le<Q&&0>n(Se,ie)?(M[fe]=Se,M[le]=oe,fe=le):(M[fe]=ie,M[xe]=oe,fe=xe);else if(le<Q&&0>n(Se,oe))M[fe]=Se,M[le]=oe,fe=le;else break e}}return ne}function n(M,ne){var oe=M.sortIndex-ne.sortIndex;return oe!==0?oe:M.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();s.unstable_now=function(){return i.now()-l}}var d=[],u=[],g=1,h=null,y=3,k=!1,E=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(M){for(var ne=a(u);ne!==null;){if(ne.callback===null)t(u);else if(ne.startTime<=M)t(u),ne.sortIndex=ne.expirationTime,r(d,ne);else break;ne=a(u)}}function _(M){if(S=!1,N(M),!E)if(a(d)!==null)E=!0,L(x);else{var ne=a(u);ne!==null&&Y(_,ne.startTime-M)}}function x(M,ne){E=!1,S&&(S=!1,b(D),D=-1),k=!0;var oe=y;try{for(N(ne),h=a(d);h!==null&&(!(h.expirationTime>ne)||M&&!P());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,y=h.priorityLevel;var Q=fe(h.expirationTime<=ne);ne=s.unstable_now(),typeof Q=="function"?h.callback=Q:h===a(d)&&t(d),N(ne)}else t(d);h=a(d)}if(h!==null)var me=!0;else{var xe=a(u);xe!==null&&Y(_,xe.startTime-ne),me=!1}return me}finally{h=null,y=oe,k=!1}}var v=!1,j=null,D=-1,H=5,A=-1;function P(){return!(s.unstable_now()-A<H)}function R(){if(j!==null){var M=s.unstable_now();A=M;var ne=!0;try{ne=j(!0,M)}finally{ne?G():(v=!1,j=null)}}else v=!1}var G;if(typeof p=="function")G=function(){p(R)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,$=T.port2;T.port1.onmessage=R,G=function(){$.postMessage(null)}}else G=function(){C(R,0)};function L(M){j=M,v||(v=!0,G())}function Y(M,ne){D=C(function(){M(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_continueExecution=function(){E||k||(E=!0,L(x))},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return a(d)},s.unstable_next=function(M){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var oe=y;y=ne;try{return M()}finally{y=oe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(M,ne){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var oe=y;y=M;try{return ne()}finally{y=oe}},s.unstable_scheduleCallback=function(M,ne,oe){var fe=s.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?fe+oe:fe):oe=fe,M){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,M={id:g++,callback:ne,priorityLevel:M,startTime:oe,expirationTime:Q,sortIndex:-1},oe>fe?(M.sortIndex=oe,r(u,M),a(d)===null&&M===a(u)&&(S?(b(D),D=-1):S=!0,Y(_,oe-fe))):(M.sortIndex=Q,r(d,M),E||k||(E=!0,L(x))),M},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(M){var ne=y;return function(){var oe=y;y=ne;try{return M.apply(this,arguments)}finally{y=oe}}}})(s0);e0.exports=s0;var zp=e0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=c,Or=zp;function Oe(s){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r0=new Set,_o={};function Gt(s,r){kn(s,r),kn(s+"Capture",r)}function kn(s,r){for(_o[s]=r,s=0;s<r.length;s++)r0.add(r[s])}var Sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=Object.prototype.hasOwnProperty,Up=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Am={},Pm={};function Bp(s){return Zc.call(Pm,s)?!0:Zc.call(Am,s)?!1:Up.test(s)?Pm[s]=!0:(Am[s]=!0,!1)}function Vp(s,r,a,t){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return t?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qp(s,r,a,t){if(r===null||typeof r>"u"||Vp(s,r,a,t))return!0;if(t)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function fr(s,r,a,t,n,o,i){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=t,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=s,this.type=r,this.sanitizeURL=o,this.removeEmptyString=i}var Xs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Xs[s]=new fr(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var r=s[0];Xs[r]=new fr(r,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Xs[s]=new fr(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Xs[s]=new fr(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Xs[s]=new fr(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Xs[s]=new fr(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Xs[s]=new fr(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Xs[s]=new fr(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Xs[s]=new fr(s,5,!1,s.toLowerCase(),null,!1,!1)});var uu=/[\-:]([a-z])/g;function mu(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var r=s.replace(uu,mu);Xs[r]=new fr(r,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var r=s.replace(uu,mu);Xs[r]=new fr(r,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var r=s.replace(uu,mu);Xs[r]=new fr(r,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Xs[s]=new fr(s,1,!1,s.toLowerCase(),null,!1,!1)});Xs.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Xs[s]=new fr(s,1,!1,s.toLowerCase(),null,!0,!0)});function gu(s,r,a,t){var n=Xs.hasOwnProperty(r)?Xs[r]:null;(n!==null?n.type!==0:t||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(qp(r,a,n,t)&&(a=null),t||n===null?Bp(r)&&(a===null?s.removeAttribute(r):s.setAttribute(r,""+a)):n.mustUseProperty?s[n.propertyName]=a===null?n.type===3?!1:"":a:(r=n.attributeName,t=n.attributeNamespace,a===null?s.removeAttribute(r):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,t?s.setAttributeNS(t,r,a):s.setAttribute(r,a))))}var Ta=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ai=Symbol.for("react.element"),an=Symbol.for("react.portal"),tn=Symbol.for("react.fragment"),xu=Symbol.for("react.strict_mode"),Yc=Symbol.for("react.profiler"),a0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),hu=Symbol.for("react.forward_ref"),Jc=Symbol.for("react.suspense"),Xc=Symbol.for("react.suspense_list"),fu=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),n0=Symbol.for("react.offscreen"),Dm=Symbol.iterator;function Vn(s){return s===null||typeof s!="object"?null:(s=Dm&&s[Dm]||s["@@iterator"],typeof s=="function"?s:null)}var Ds=Object.assign,rc;function lo(s){if(rc===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);rc=r&&r[1]||""}return`
`+rc+s}var ac=!1;function tc(s,r){if(!s||ac)return"";ac=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(u){var t=u}Reflect.construct(s,[],r)}else{try{r.call()}catch(u){t=u}s.call(r.prototype)}else{try{throw Error()}catch(u){t=u}s()}}catch(u){if(u&&t&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),o=t.stack.split(`
`),i=n.length-1,l=o.length-1;1<=i&&0<=l&&n[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||n[i]!==o[l]){var d=`
`+n[i].replace(" at new "," at ");return s.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",s.displayName)),d}while(1<=i&&0<=l);break}}}finally{ac=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?lo(s):""}function Hp(s){switch(s.tag){case 5:return lo(s.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return s=tc(s.type,!1),s;case 11:return s=tc(s.type.render,!1),s;case 1:return s=tc(s.type,!0),s;default:return""}}function ed(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case tn:return"Fragment";case an:return"Portal";case Yc:return"Profiler";case xu:return"StrictMode";case Jc:return"Suspense";case Xc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case t0:return(s.displayName||"Context")+".Consumer";case a0:return(s._context.displayName||"Context")+".Provider";case hu:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case fu:return r=s.displayName||null,r!==null?r:ed(s.type)||"Memo";case Ua:r=s._payload,s=s._init;try{return ed(s(r))}catch{}}return null}function Gp(s){var r=s.type;switch(s.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=r.render,s=s.displayName||s.name||"",r.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(r);case 8:return r===xu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function dt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function o0(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qp(s){var r=o0(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),t=""+s[r];if(!s.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return n.call(this)},set:function(i){t=""+i,o.call(this,i)}}),Object.defineProperty(s,r,{enumerable:a.enumerable}),{getValue:function(){return t},setValue:function(i){t=""+i},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ti(s){s._valueTracker||(s._valueTracker=Qp(s))}function i0(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),t="";return s&&(t=o0(s)?s.checked?"true":"false":s.value),s=t,s!==a?(r.setValue(s),!0):!1}function Hi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function sd(s,r){var a=r.checked;return Ds({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function Tm(s,r){var a=r.defaultValue==null?"":r.defaultValue,t=r.checked!=null?r.checked:r.defaultChecked;a=dt(r.value!=null?r.value:a),s._wrapperState={initialChecked:t,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function l0(s,r){r=r.checked,r!=null&&gu(s,"checked",r,!1)}function rd(s,r){l0(s,r);var a=dt(r.value),t=r.type;if(a!=null)t==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(t==="submit"||t==="reset"){s.removeAttribute("value");return}r.hasOwnProperty("value")?ad(s,r.type,a):r.hasOwnProperty("defaultValue")&&ad(s,r.type,dt(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(s.defaultChecked=!!r.defaultChecked)}function Om(s,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var t=r.type;if(!(t!=="submit"&&t!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+s._wrapperState.initialValue,a||r===s.value||(s.value=r),s.defaultValue=r}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function ad(s,r,a){(r!=="number"||Hi(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var co=Array.isArray;function pn(s,r,a,t){if(s=s.options,r){r={};for(var n=0;n<a.length;n++)r["$"+a[n]]=!0;for(a=0;a<s.length;a++)n=r.hasOwnProperty("$"+s[a].value),s[a].selected!==n&&(s[a].selected=n),n&&t&&(s[a].defaultSelected=!0)}else{for(a=""+dt(a),r=null,n=0;n<s.length;n++){if(s[n].value===a){s[n].selected=!0,t&&(s[n].defaultSelected=!0);return}r!==null||s[n].disabled||(r=s[n])}r!==null&&(r.selected=!0)}}function td(s,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Ds({},r,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Im(s,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(Oe(92));if(co(a)){if(1<a.length)throw Error(Oe(93));a=a[0]}r=a}r==null&&(r=""),a=r}s._wrapperState={initialValue:dt(a)}}function c0(s,r){var a=dt(r.value),t=dt(r.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),r.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),t!=null&&(s.defaultValue=""+t)}function Fm(s){var r=s.textContent;r===s._wrapperState.initialValue&&r!==""&&r!==null&&(s.value=r)}function d0(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nd(s,r){return s==null||s==="http://www.w3.org/1999/xhtml"?d0(r):s==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ni,u0=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,t,n){MSApp.execUnsafeLocalFunction(function(){return s(r,a,t,n)})}:s}(function(s,r){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=r;else{for(ni=ni||document.createElement("div"),ni.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ni.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)s.appendChild(r.firstChild)}});function So(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wp=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(s){Wp.forEach(function(r){r=r+s.charAt(0).toUpperCase()+s.substring(1),go[r]=go[s]})});function m0(s,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||go.hasOwnProperty(s)&&go[s]?(""+r).trim():r+"px"}function g0(s,r){s=s.style;for(var a in r)if(r.hasOwnProperty(a)){var t=a.indexOf("--")===0,n=m0(a,r[a],t);a==="float"&&(a="cssFloat"),t?s.setProperty(a,n):s[a]=n}}var Kp=Ds({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(s,r){if(r){if(Kp[s]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Oe(137,s));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Oe(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Oe(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Oe(62))}}function id(s,r){if(s.indexOf("-")===-1)return typeof r.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function pu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var cd=null,yn=null,bn=null;function Mm(s){if(s=Wo(s)){if(typeof cd!="function")throw Error(Oe(280));var r=s.stateNode;r&&(r=Al(r),cd(s.stateNode,s.type,r))}}function x0(s){yn?bn?bn.push(s):bn=[s]:yn=s}function h0(){if(yn){var s=yn,r=bn;if(bn=yn=null,Mm(s),r)for(s=0;s<r.length;s++)Mm(r[s])}}function f0(s,r){return s(r)}function p0(){}var nc=!1;function y0(s,r,a){if(nc)return s(r,a);nc=!0;try{return f0(s,r,a)}finally{nc=!1,(yn!==null||bn!==null)&&(p0(),h0())}}function Co(s,r){var a=s.stateNode;if(a===null)return null;var t=Al(a);if(t===null)return null;a=t[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(s=s.type,t=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!t;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(Oe(231,r,typeof a));return a}var dd=!1;if(Sa)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){dd=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{dd=!1}function Zp(s,r,a,t,n,o,i,l,d){var u=Array.prototype.slice.call(arguments,3);try{r.apply(a,u)}catch(g){this.onError(g)}}var xo=!1,Gi=null,Qi=!1,ud=null,Yp={onError:function(s){xo=!0,Gi=s}};function Jp(s,r,a,t,n,o,i,l,d){xo=!1,Gi=null,Zp.apply(Yp,arguments)}function Xp(s,r,a,t,n,o,i,l,d){if(Jp.apply(this,arguments),xo){if(xo){var u=Gi;xo=!1,Gi=null}else throw Error(Oe(198));Qi||(Qi=!0,ud=u)}}function Qt(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,r.flags&4098&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function b0(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function Lm(s){if(Qt(s)!==s)throw Error(Oe(188))}function ey(s){var r=s.alternate;if(!r){if(r=Qt(s),r===null)throw Error(Oe(188));return r!==s?null:s}for(var a=s,t=r;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(t=n.return,t!==null){a=t;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return Lm(n),s;if(o===t)return Lm(n),r;o=o.sibling}throw Error(Oe(188))}if(a.return!==t.return)a=n,t=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,t=o;break}if(l===t){i=!0,t=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,t=n;break}if(l===t){i=!0,t=o,a=n;break}l=l.sibling}if(!i)throw Error(Oe(189))}}if(a.alternate!==t)throw Error(Oe(190))}if(a.tag!==3)throw Error(Oe(188));return a.stateNode.current===a?s:r}function j0(s){return s=ey(s),s!==null?v0(s):null}function v0(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var r=v0(s);if(r!==null)return r;s=s.sibling}return null}var N0=Or.unstable_scheduleCallback,zm=Or.unstable_cancelCallback,sy=Or.unstable_shouldYield,ry=Or.unstable_requestPaint,Fs=Or.unstable_now,ay=Or.unstable_getCurrentPriorityLevel,yu=Or.unstable_ImmediatePriority,w0=Or.unstable_UserBlockingPriority,Wi=Or.unstable_NormalPriority,ty=Or.unstable_LowPriority,k0=Or.unstable_IdlePriority,_l=null,ua=null;function ny(s){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(_l,s,void 0,(s.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:ly,oy=Math.log,iy=Math.LN2;function ly(s){return s>>>=0,s===0?32:31-(oy(s)/iy|0)|0}var oi=64,ii=4194304;function uo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ki(s,r){var a=s.pendingLanes;if(a===0)return 0;var t=0,n=s.suspendedLanes,o=s.pingedLanes,i=a&268435455;if(i!==0){var l=i&~n;l!==0?t=uo(l):(o&=i,o!==0&&(t=uo(o)))}else i=a&~n,i!==0?t=uo(i):o!==0&&(t=uo(o));if(t===0)return 0;if(r!==0&&r!==t&&!(r&n)&&(n=t&-t,o=r&-r,n>=o||n===16&&(o&4194240)!==0))return r;if(t&4&&(t|=a&16),r=s.entangledLanes,r!==0)for(s=s.entanglements,r&=t;0<r;)a=31-Yr(r),n=1<<a,t|=s[a],r&=~n;return t}function cy(s,r){switch(s){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(s,r){for(var a=s.suspendedLanes,t=s.pingedLanes,n=s.expirationTimes,o=s.pendingLanes;0<o;){var i=31-Yr(o),l=1<<i,d=n[i];d===-1?(!(l&a)||l&t)&&(n[i]=cy(l,r)):d<=r&&(s.expiredLanes|=l),o&=~l}}function md(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function E0(){var s=oi;return oi<<=1,!(oi&4194240)&&(oi=64),s}function oc(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function Go(s,r,a){s.pendingLanes|=r,r!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,r=31-Yr(r),s[r]=a}function uy(s,r){var a=s.pendingLanes&~r;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=r,s.mutableReadLanes&=r,s.entangledLanes&=r,r=s.entanglements;var t=s.eventTimes;for(s=s.expirationTimes;0<a;){var n=31-Yr(a),o=1<<n;r[n]=0,t[n]=-1,s[n]=-1,a&=~o}}function bu(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var t=31-Yr(a),n=1<<t;n&r|s[t]&r&&(s[t]|=r),a&=~n}}var ms=0;function _0(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var S0,ju,C0,R0,A0,gd=!1,li=[],et=null,st=null,rt=null,Ro=new Map,Ao=new Map,Qa=[],my="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $m(s,r){switch(s){case"focusin":case"focusout":et=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":rt=null;break;case"pointerover":case"pointerout":Ro.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(r.pointerId)}}function Hn(s,r,a,t,n,o){return s===null||s.nativeEvent!==o?(s={blockedOn:r,domEventName:a,eventSystemFlags:t,nativeEvent:o,targetContainers:[n]},r!==null&&(r=Wo(r),r!==null&&ju(r)),s):(s.eventSystemFlags|=t,r=s.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),s)}function gy(s,r,a,t,n){switch(r){case"focusin":return et=Hn(et,s,r,a,t,n),!0;case"dragenter":return st=Hn(st,s,r,a,t,n),!0;case"mouseover":return rt=Hn(rt,s,r,a,t,n),!0;case"pointerover":var o=n.pointerId;return Ro.set(o,Hn(Ro.get(o)||null,s,r,a,t,n)),!0;case"gotpointercapture":return o=n.pointerId,Ao.set(o,Hn(Ao.get(o)||null,s,r,a,t,n)),!0}return!1}function P0(s){var r=Ct(s.target);if(r!==null){var a=Qt(r);if(a!==null){if(r=a.tag,r===13){if(r=b0(a),r!==null){s.blockedOn=r,A0(s.priority,function(){C0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ri(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=xd(s.domEventName,s.eventSystemFlags,r[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var t=new a.constructor(a.type,a);ld=t,a.target.dispatchEvent(t),ld=null}else return r=Wo(a),r!==null&&ju(r),s.blockedOn=a,!1;r.shift()}return!0}function Um(s,r,a){Ri(s)&&a.delete(r)}function xy(){gd=!1,et!==null&&Ri(et)&&(et=null),st!==null&&Ri(st)&&(st=null),rt!==null&&Ri(rt)&&(rt=null),Ro.forEach(Um),Ao.forEach(Um)}function Gn(s,r){s.blockedOn===r&&(s.blockedOn=null,gd||(gd=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,xy)))}function Po(s){function r(n){return Gn(n,s)}if(0<li.length){Gn(li[0],s);for(var a=1;a<li.length;a++){var t=li[a];t.blockedOn===s&&(t.blockedOn=null)}}for(et!==null&&Gn(et,s),st!==null&&Gn(st,s),rt!==null&&Gn(rt,s),Ro.forEach(r),Ao.forEach(r),a=0;a<Qa.length;a++)t=Qa[a],t.blockedOn===s&&(t.blockedOn=null);for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)P0(a),a.blockedOn===null&&Qa.shift()}var jn=Ta.ReactCurrentBatchConfig,Zi=!0;function hy(s,r,a,t){var n=ms,o=jn.transition;jn.transition=null;try{ms=1,vu(s,r,a,t)}finally{ms=n,jn.transition=o}}function fy(s,r,a,t){var n=ms,o=jn.transition;jn.transition=null;try{ms=4,vu(s,r,a,t)}finally{ms=n,jn.transition=o}}function vu(s,r,a,t){if(Zi){var n=xd(s,r,a,t);if(n===null)fc(s,r,t,Yi,a),$m(s,t);else if(gy(n,s,r,a,t))t.stopPropagation();else if($m(s,t),r&4&&-1<my.indexOf(s)){for(;n!==null;){var o=Wo(n);if(o!==null&&S0(o),o=xd(s,r,a,t),o===null&&fc(s,r,t,Yi,a),o===n)break;n=o}n!==null&&t.stopPropagation()}else fc(s,r,t,null,a)}}var Yi=null;function xd(s,r,a,t){if(Yi=null,s=pu(t),s=Ct(s),s!==null)if(r=Qt(s),r===null)s=null;else if(a=r.tag,a===13){if(s=b0(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null);return Yi=s,null}function D0(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ay()){case yu:return 1;case w0:return 4;case Wi:case ty:return 16;case k0:return 536870912;default:return 16}default:return 16}}var Ya=null,Nu=null,Ai=null;function T0(){if(Ai)return Ai;var s,r=Nu,a=r.length,t,n="value"in Ya?Ya.value:Ya.textContent,o=n.length;for(s=0;s<a&&r[s]===n[s];s++);var i=a-s;for(t=1;t<=i&&r[a-t]===n[o-t];t++);return Ai=n.slice(s,1<t?1-t:void 0)}function Pi(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ci(){return!0}function Bm(){return!1}function Fr(s){function r(a,t,n,o,i){this._reactName=a,this._targetInst=n,this.type=t,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(a=s[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ci:Bm,this.isPropagationStopped=Bm,this}return Ds(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),r}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Fr(Fn),Qo=Ds({},Fn,{view:0,detail:0}),py=Fr(Qo),ic,lc,Qn,Sl=Ds({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qn&&(Qn&&s.type==="mousemove"?(ic=s.screenX-Qn.screenX,lc=s.screenY-Qn.screenY):lc=ic=0,Qn=s),ic)},movementY:function(s){return"movementY"in s?s.movementY:lc}}),Vm=Fr(Sl),yy=Ds({},Sl,{dataTransfer:0}),by=Fr(yy),jy=Ds({},Qo,{relatedTarget:0}),cc=Fr(jy),vy=Ds({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=Fr(vy),wy=Ds({},Fn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ky=Fr(wy),Ey=Ds({},Fn,{data:0}),qm=Fr(Ey),_y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Cy[s])?!!r[s]:!1}function ku(){return Ry}var Ay=Ds({},Qo,{key:function(s){if(s.key){var r=_y[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Pi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Sy[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(s){return s.type==="keypress"?Pi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Py=Fr(Ay),Dy=Ds({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=Fr(Dy),Ty=Ds({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),Oy=Fr(Ty),Iy=Ds({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=Fr(Iy),My=Ds({},Sl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ly=Fr(My),zy=[9,13,27,32],Eu=Sa&&"CompositionEvent"in window,ho=null;Sa&&"documentMode"in document&&(ho=document.documentMode);var $y=Sa&&"TextEvent"in window&&!ho,O0=Sa&&(!Eu||ho&&8<ho&&11>=ho),Gm=" ",Qm=!1;function I0(s,r){switch(s){case"keyup":return zy.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var nn=!1;function Uy(s,r){switch(s){case"compositionend":return F0(r);case"keypress":return r.which!==32?null:(Qm=!0,Gm);case"textInput":return s=r.data,s===Gm&&Qm?null:s;default:return null}}function By(s,r){if(nn)return s==="compositionend"||!Eu&&I0(s,r)?(s=T0(),Ai=Nu=Ya=null,nn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return O0&&r.locale!=="ko"?null:r.data;default:return null}}var Vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Vy[s.type]:r==="textarea"}function M0(s,r,a,t){x0(t),r=Ji(r,"onChange"),0<r.length&&(a=new wu("onChange","change",null,a,t),s.push({event:a,listeners:r}))}var fo=null,Do=null;function qy(s){W0(s,0)}function Cl(s){var r=cn(s);if(i0(r))return s}function Hy(s,r){if(s==="change")return r}var L0=!1;if(Sa){var dc;if(Sa){var uc="oninput"in document;if(!uc){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),uc=typeof Km.oninput=="function"}dc=uc}else dc=!1;L0=dc&&(!document.documentMode||9<document.documentMode)}function Zm(){fo&&(fo.detachEvent("onpropertychange",z0),Do=fo=null)}function z0(s){if(s.propertyName==="value"&&Cl(Do)){var r=[];M0(r,Do,s,pu(s)),y0(qy,r)}}function Gy(s,r,a){s==="focusin"?(Zm(),fo=r,Do=a,fo.attachEvent("onpropertychange",z0)):s==="focusout"&&Zm()}function Qy(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Cl(Do)}function Wy(s,r){if(s==="click")return Cl(r)}function Ky(s,r){if(s==="input"||s==="change")return Cl(r)}function Zy(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var sa=typeof Object.is=="function"?Object.is:Zy;function To(s,r){if(sa(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),t=Object.keys(r);if(a.length!==t.length)return!1;for(t=0;t<a.length;t++){var n=a[t];if(!Zc.call(r,n)||!sa(s[n],r[n]))return!1}return!0}function Ym(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Jm(s,r){var a=Ym(s);s=0;for(var t;a;){if(a.nodeType===3){if(t=s+a.textContent.length,s<=r&&t>=r)return{node:a,offset:r-s};s=t}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ym(a)}}function $0(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?$0(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function U0(){for(var s=window,r=Hi();r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=Hi(s.document)}return r}function _u(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}function Yy(s){var r=U0(),a=s.focusedElem,t=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&$0(a.ownerDocument.documentElement,a)){if(t!==null&&_u(a)){if(r=t.start,s=t.end,s===void 0&&(s=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(s,a.value.length);else if(s=(r=a.ownerDocument||document)&&r.defaultView||window,s.getSelection){s=s.getSelection();var n=a.textContent.length,o=Math.min(t.start,n);t=t.end===void 0?o:Math.min(t.end,n),!s.extend&&o>t&&(n=t,t=o,o=n),n=Jm(a,o);var i=Jm(a,t);n&&i&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==i.node||s.focusOffset!==i.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),s.removeAllRanges(),o>t?(s.addRange(r),s.extend(i.node,i.offset)):(r.setEnd(i.node,i.offset),s.addRange(r)))}}for(r=[],s=a;s=s.parentNode;)s.nodeType===1&&r.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)s=r[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Jy=Sa&&"documentMode"in document&&11>=document.documentMode,on=null,hd=null,po=null,fd=!1;function Xm(s,r,a){var t=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fd||on==null||on!==Hi(t)||(t=on,"selectionStart"in t&&_u(t)?t={start:t.selectionStart,end:t.selectionEnd}:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection(),t={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}),po&&To(po,t)||(po=t,t=Ji(hd,"onSelect"),0<t.length&&(r=new wu("onSelect","select",null,r,a),s.push({event:r,listeners:t}),r.target=on)))}function di(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var ln={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},mc={},B0={};Sa&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete ln.animationend.animation,delete ln.animationiteration.animation,delete ln.animationstart.animation),"TransitionEvent"in window||delete ln.transitionend.transition);function Rl(s){if(mc[s])return mc[s];if(!ln[s])return s;var r=ln[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in B0)return mc[s]=r[a];return s}var V0=Rl("animationend"),q0=Rl("animationiteration"),H0=Rl("animationstart"),G0=Rl("transitionend"),Q0=new Map,eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gt(s,r){Q0.set(s,r),Gt(r,[s])}for(var gc=0;gc<eg.length;gc++){var xc=eg[gc],Xy=xc.toLowerCase(),eb=xc[0].toUpperCase()+xc.slice(1);gt(Xy,"on"+eb)}gt(V0,"onAnimationEnd");gt(q0,"onAnimationIteration");gt(H0,"onAnimationStart");gt("dblclick","onDoubleClick");gt("focusin","onFocus");gt("focusout","onBlur");gt(G0,"onTransitionEnd");kn("onMouseEnter",["mouseout","mouseover"]);kn("onMouseLeave",["mouseout","mouseover"]);kn("onPointerEnter",["pointerout","pointerover"]);kn("onPointerLeave",["pointerout","pointerover"]);Gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function sg(s,r,a){var t=s.type||"unknown-event";s.currentTarget=a,Xp(t,r,void 0,s),s.currentTarget=null}function W0(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var t=s[a],n=t.event;t=t.listeners;e:{var o=void 0;if(r)for(var i=t.length-1;0<=i;i--){var l=t[i],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==o&&n.isPropagationStopped())break e;sg(n,l,u),o=d}else for(i=0;i<t.length;i++){if(l=t[i],d=l.instance,u=l.currentTarget,l=l.listener,d!==o&&n.isPropagationStopped())break e;sg(n,l,u),o=d}}}if(Qi)throw s=ud,Qi=!1,ud=null,s}function bs(s,r){var a=r[vd];a===void 0&&(a=r[vd]=new Set);var t=s+"__bubble";a.has(t)||(K0(r,s,2,!1),a.add(t))}function hc(s,r,a){var t=0;r&&(t|=4),K0(a,s,t,r)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Oo(s){if(!s[ui]){s[ui]=!0,r0.forEach(function(a){a!=="selectionchange"&&(sb.has(a)||hc(a,!1,s),hc(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[ui]||(r[ui]=!0,hc("selectionchange",!1,r))}}function K0(s,r,a,t){switch(D0(r)){case 1:var n=hy;break;case 4:n=fy;break;default:n=vu}a=n.bind(null,r,a,s),n=void 0,!dd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),t?n!==void 0?s.addEventListener(r,a,{capture:!0,passive:n}):s.addEventListener(r,a,!0):n!==void 0?s.addEventListener(r,a,{passive:n}):s.addEventListener(r,a,!1)}function fc(s,r,a,t,n){var o=t;if(!(r&1)&&!(r&2)&&t!==null)e:for(;;){if(t===null)return;var i=t.tag;if(i===3||i===4){var l=t.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(i===4)for(i=t.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;i=i.return}for(;l!==null;){if(i=Ct(l),i===null)return;if(d=i.tag,d===5||d===6){t=o=i;continue e}l=l.parentNode}}t=t.return}y0(function(){var u=o,g=pu(a),h=[];e:{var y=Q0.get(s);if(y!==void 0){var k=wu,E=s;switch(s){case"keypress":if(Pi(a)===0)break e;case"keydown":case"keyup":k=Py;break;case"focusin":E="focus",k=cc;break;case"focusout":E="blur",k=cc;break;case"beforeblur":case"afterblur":k=cc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Oy;break;case V0:case q0:case H0:k=Ny;break;case G0:k=Fy;break;case"scroll":k=py;break;case"wheel":k=Ly;break;case"copy":case"cut":case"paste":k=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Hm}var S=(r&4)!==0,C=!S&&s==="scroll",b=S?y!==null?y+"Capture":null:y;S=[];for(var p=u,N;p!==null;){N=p;var _=N.stateNode;if(N.tag===5&&_!==null&&(N=_,b!==null&&(_=Co(p,b),_!=null&&S.push(Io(p,_,N)))),C)break;p=p.return}0<S.length&&(y=new k(y,E,null,a,g),h.push({event:y,listeners:S}))}}if(!(r&7)){e:{if(y=s==="mouseover"||s==="pointerover",k=s==="mouseout"||s==="pointerout",y&&a!==ld&&(E=a.relatedTarget||a.fromElement)&&(Ct(E)||E[Ca]))break e;if((k||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,k?(E=a.relatedTarget||a.toElement,k=u,E=E?Ct(E):null,E!==null&&(C=Qt(E),E!==C||E.tag!==5&&E.tag!==6)&&(E=null)):(k=null,E=u),k!==E)){if(S=Vm,_="onMouseLeave",b="onMouseEnter",p="mouse",(s==="pointerout"||s==="pointerover")&&(S=Hm,_="onPointerLeave",b="onPointerEnter",p="pointer"),C=k==null?y:cn(k),N=E==null?y:cn(E),y=new S(_,p+"leave",k,a,g),y.target=C,y.relatedTarget=N,_=null,Ct(g)===u&&(S=new S(b,p+"enter",E,a,g),S.target=N,S.relatedTarget=C,_=S),C=_,k&&E)s:{for(S=k,b=E,p=0,N=S;N;N=Kt(N))p++;for(N=0,_=b;_;_=Kt(_))N++;for(;0<p-N;)S=Kt(S),p--;for(;0<N-p;)b=Kt(b),N--;for(;p--;){if(S===b||b!==null&&S===b.alternate)break s;S=Kt(S),b=Kt(b)}S=null}else S=null;k!==null&&rg(h,y,k,S,!1),E!==null&&C!==null&&rg(h,C,E,S,!0)}}e:{if(y=u?cn(u):window,k=y.nodeName&&y.nodeName.toLowerCase(),k==="select"||k==="input"&&y.type==="file")var x=Hy;else if(Wm(y))if(L0)x=Ky;else{x=Qy;var v=Gy}else(k=y.nodeName)&&k.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(x=Wy);if(x&&(x=x(s,u))){M0(h,x,a,g);break e}v&&v(s,y,u),s==="focusout"&&(v=y._wrapperState)&&v.controlled&&y.type==="number"&&ad(y,"number",y.value)}switch(v=u?cn(u):window,s){case"focusin":(Wm(v)||v.contentEditable==="true")&&(on=v,hd=u,po=null);break;case"focusout":po=hd=on=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,Xm(h,a,g);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":Xm(h,a,g)}var j;if(Eu)e:{switch(s){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else nn?I0(s,a)&&(D="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(D="onCompositionStart");D&&(O0&&a.locale!=="ko"&&(nn||D!=="onCompositionStart"?D==="onCompositionEnd"&&nn&&(j=T0()):(Ya=g,Nu="value"in Ya?Ya.value:Ya.textContent,nn=!0)),v=Ji(u,D),0<v.length&&(D=new qm(D,s,null,a,g),h.push({event:D,listeners:v}),j?D.data=j:(j=F0(a),j!==null&&(D.data=j)))),(j=$y?Uy(s,a):By(s,a))&&(u=Ji(u,"onBeforeInput"),0<u.length&&(g=new qm("onBeforeInput","beforeinput",null,a,g),h.push({event:g,listeners:u}),g.data=j))}W0(h,r)})}function Io(s,r,a){return{instance:s,listener:r,currentTarget:a}}function Ji(s,r){for(var a=r+"Capture",t=[];s!==null;){var n=s,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Co(s,a),o!=null&&t.unshift(Io(s,o,n)),o=Co(s,r),o!=null&&t.push(Io(s,o,n))),s=s.return}return t}function Kt(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function rg(s,r,a,t,n){for(var o=r._reactName,i=[];a!==null&&a!==t;){var l=a,d=l.alternate,u=l.stateNode;if(d!==null&&d===t)break;l.tag===5&&u!==null&&(l=u,n?(d=Co(a,o),d!=null&&i.unshift(Io(a,d,l))):n||(d=Co(a,o),d!=null&&i.push(Io(a,d,l)))),a=a.return}i.length!==0&&s.push({event:r,listeners:i})}var rb=/\r\n?/g,ab=/\u0000|\uFFFD/g;function ag(s){return(typeof s=="string"?s:""+s).replace(rb,`
`).replace(ab,"")}function mi(s,r,a){if(r=ag(r),ag(s)!==r&&a)throw Error(Oe(425))}function Xi(){}var pd=null,yd=null;function bd(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,tb=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,nb=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(s){return tg.resolve(null).then(s).catch(ob)}:jd;function ob(s){setTimeout(function(){throw s})}function pc(s,r){var a=r,t=0;do{var n=a.nextSibling;if(s.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(t===0){s.removeChild(n),Po(r);return}t--}else a!=="$"&&a!=="$?"&&a!=="$!"||t++;a=n}while(a);Po(r)}function at(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return s}function ng(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return s;r--}else a==="/$"&&r++}s=s.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),la="__reactFiber$"+Mn,Fo="__reactProps$"+Mn,Ca="__reactContainer$"+Mn,vd="__reactEvents$"+Mn,ib="__reactListeners$"+Mn,lb="__reactHandles$"+Mn;function Ct(s){var r=s[la];if(r)return r;for(var a=s.parentNode;a;){if(r=a[Ca]||a[la]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=ng(s);s!==null;){if(a=s[la])return a;s=ng(s)}return r}s=a,a=s.parentNode}return null}function Wo(s){return s=s[la]||s[Ca],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function cn(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Oe(33))}function Al(s){return s[Fo]||null}var Nd=[],dn=-1;function xt(s){return{current:s}}function Ns(s){0>dn||(s.current=Nd[dn],Nd[dn]=null,dn--)}function ps(s,r){dn++,Nd[dn]=s.current,s.current=r}var ut={},lr=xt(ut),wr=xt(!1),Lt=ut;function En(s,r){var a=s.type.contextTypes;if(!a)return ut;var t=s.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===r)return t.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in a)n[o]=r[o];return t&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=n),n}function kr(s){return s=s.childContextTypes,s!=null}function el(){Ns(wr),Ns(lr)}function og(s,r,a){if(lr.current!==ut)throw Error(Oe(168));ps(lr,r),ps(wr,a)}function Z0(s,r,a){var t=s.stateNode;if(r=r.childContextTypes,typeof t.getChildContext!="function")return a;t=t.getChildContext();for(var n in t)if(!(n in r))throw Error(Oe(108,Gp(s)||"Unknown",n));return Ds({},a,t)}function sl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ut,Lt=lr.current,ps(lr,s),ps(wr,wr.current),!0}function ig(s,r,a){var t=s.stateNode;if(!t)throw Error(Oe(169));a?(s=Z0(s,r,Lt),t.__reactInternalMemoizedMergedChildContext=s,Ns(wr),Ns(lr),ps(lr,s)):Ns(wr),ps(wr,a)}var Na=null,Pl=!1,yc=!1;function Y0(s){Na===null?Na=[s]:Na.push(s)}function cb(s){Pl=!0,Y0(s)}function ht(){if(!yc&&Na!==null){yc=!0;var s=0,r=ms;try{var a=Na;for(ms=1;s<a.length;s++){var t=a[s];do t=t(!0);while(t!==null)}Na=null,Pl=!1}catch(n){throw Na!==null&&(Na=Na.slice(s+1)),N0(yu,ht),n}finally{ms=r,yc=!1}}return null}var un=[],mn=0,rl=null,al=0,Mr=[],Lr=0,zt=null,ka=1,Ea="";function kt(s,r){un[mn++]=al,un[mn++]=rl,rl=s,al=r}function J0(s,r,a){Mr[Lr++]=ka,Mr[Lr++]=Ea,Mr[Lr++]=zt,zt=s;var t=ka;s=Ea;var n=32-Yr(t)-1;t&=~(1<<n),a+=1;var o=32-Yr(r)+n;if(30<o){var i=n-n%5;o=(t&(1<<i)-1).toString(32),t>>=i,n-=i,ka=1<<32-Yr(r)+n|a<<n|t,Ea=o+s}else ka=1<<o|a<<n|t,Ea=s}function Su(s){s.return!==null&&(kt(s,1),J0(s,1,0))}function Cu(s){for(;s===rl;)rl=un[--mn],un[mn]=null,al=un[--mn],un[mn]=null;for(;s===zt;)zt=Mr[--Lr],Mr[Lr]=null,Ea=Mr[--Lr],Mr[Lr]=null,ka=Mr[--Lr],Mr[Lr]=null}var Dr=null,Pr=null,Cs=!1,Kr=null;function X0(s,r){var a=$r(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=s,r=s.deletions,r===null?(s.deletions=[a],s.flags|=16):r.push(a)}function lg(s,r){switch(s.tag){case 5:var a=s.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(s.stateNode=r,Dr=s,Pr=at(r.firstChild),!0):!1;case 6:return r=s.pendingProps===""||r.nodeType!==3?null:r,r!==null?(s.stateNode=r,Dr=s,Pr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=zt!==null?{id:ka,overflow:Ea}:null,s.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=$r(18,null,null,0),a.stateNode=r,a.return=s,s.child=a,Dr=s,Pr=null,!0):!1;default:return!1}}function wd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function kd(s){if(Cs){var r=Pr;if(r){var a=r;if(!lg(s,r)){if(wd(s))throw Error(Oe(418));r=at(a.nextSibling);var t=Dr;r&&lg(s,r)?X0(t,a):(s.flags=s.flags&-4097|2,Cs=!1,Dr=s)}}else{if(wd(s))throw Error(Oe(418));s.flags=s.flags&-4097|2,Cs=!1,Dr=s}}}function cg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Dr=s}function gi(s){if(s!==Dr)return!1;if(!Cs)return cg(s),Cs=!0,!1;var r;if((r=s.tag!==3)&&!(r=s.tag!==5)&&(r=s.type,r=r!=="head"&&r!=="body"&&!bd(s.type,s.memoizedProps)),r&&(r=Pr)){if(wd(s))throw eh(),Error(Oe(418));for(;r;)X0(s,r),r=at(r.nextSibling)}if(cg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(r===0){Pr=at(s.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}s=s.nextSibling}Pr=null}}else Pr=Dr?at(s.stateNode.nextSibling):null;return!0}function eh(){for(var s=Pr;s;)s=at(s.nextSibling)}function _n(){Pr=Dr=null,Cs=!1}function Ru(s){Kr===null?Kr=[s]:Kr.push(s)}var db=Ta.ReactCurrentBatchConfig;function Wn(s,r,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Oe(309));var t=a.stateNode}if(!t)throw Error(Oe(147,s));var n=t,o=""+s;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(i){var l=n.refs;i===null?delete l[o]:l[o]=i},r._stringRef=o,r)}if(typeof s!="string")throw Error(Oe(284));if(!a._owner)throw Error(Oe(290,s))}return s}function xi(s,r){throw s=Object.prototype.toString.call(r),Error(Oe(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s))}function dg(s){var r=s._init;return r(s._payload)}function sh(s){function r(b,p){if(s){var N=b.deletions;N===null?(b.deletions=[p],b.flags|=16):N.push(p)}}function a(b,p){if(!s)return null;for(;p!==null;)r(b,p),p=p.sibling;return null}function t(b,p){for(b=new Map;p!==null;)p.key!==null?b.set(p.key,p):b.set(p.index,p),p=p.sibling;return b}function n(b,p){return b=it(b,p),b.index=0,b.sibling=null,b}function o(b,p,N){return b.index=N,s?(N=b.alternate,N!==null?(N=N.index,N<p?(b.flags|=2,p):N):(b.flags|=2,p)):(b.flags|=1048576,p)}function i(b){return s&&b.alternate===null&&(b.flags|=2),b}function l(b,p,N,_){return p===null||p.tag!==6?(p=Ec(N,b.mode,_),p.return=b,p):(p=n(p,N),p.return=b,p)}function d(b,p,N,_){var x=N.type;return x===tn?g(b,p,N.props.children,_,N.key):p!==null&&(p.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ua&&dg(x)===p.type)?(_=n(p,N.props),_.ref=Wn(b,p,N),_.return=b,_):(_=Li(N.type,N.key,N.props,null,b.mode,_),_.ref=Wn(b,p,N),_.return=b,_)}function u(b,p,N,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==N.containerInfo||p.stateNode.implementation!==N.implementation?(p=_c(N,b.mode,_),p.return=b,p):(p=n(p,N.children||[]),p.return=b,p)}function g(b,p,N,_,x){return p===null||p.tag!==7?(p=It(N,b.mode,_,x),p.return=b,p):(p=n(p,N),p.return=b,p)}function h(b,p,N){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ec(""+p,b.mode,N),p.return=b,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ai:return N=Li(p.type,p.key,p.props,null,b.mode,N),N.ref=Wn(b,null,p),N.return=b,N;case an:return p=_c(p,b.mode,N),p.return=b,p;case Ua:var _=p._init;return h(b,_(p._payload),N)}if(co(p)||Vn(p))return p=It(p,b.mode,N,null),p.return=b,p;xi(b,p)}return null}function y(b,p,N,_){var x=p!==null?p.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return x!==null?null:l(b,p,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ai:return N.key===x?d(b,p,N,_):null;case an:return N.key===x?u(b,p,N,_):null;case Ua:return x=N._init,y(b,p,x(N._payload),_)}if(co(N)||Vn(N))return x!==null?null:g(b,p,N,_,null);xi(b,N)}return null}function k(b,p,N,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(N)||null,l(p,b,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ai:return b=b.get(_.key===null?N:_.key)||null,d(p,b,_,x);case an:return b=b.get(_.key===null?N:_.key)||null,u(p,b,_,x);case Ua:var v=_._init;return k(b,p,N,v(_._payload),x)}if(co(_)||Vn(_))return b=b.get(N)||null,g(p,b,_,x,null);xi(p,_)}return null}function E(b,p,N,_){for(var x=null,v=null,j=p,D=p=0,H=null;j!==null&&D<N.length;D++){j.index>D?(H=j,j=null):H=j.sibling;var A=y(b,j,N[D],_);if(A===null){j===null&&(j=H);break}s&&j&&A.alternate===null&&r(b,j),p=o(A,p,D),v===null?x=A:v.sibling=A,v=A,j=H}if(D===N.length)return a(b,j),Cs&&kt(b,D),x;if(j===null){for(;D<N.length;D++)j=h(b,N[D],_),j!==null&&(p=o(j,p,D),v===null?x=j:v.sibling=j,v=j);return Cs&&kt(b,D),x}for(j=t(b,j);D<N.length;D++)H=k(j,b,D,N[D],_),H!==null&&(s&&H.alternate!==null&&j.delete(H.key===null?D:H.key),p=o(H,p,D),v===null?x=H:v.sibling=H,v=H);return s&&j.forEach(function(P){return r(b,P)}),Cs&&kt(b,D),x}function S(b,p,N,_){var x=Vn(N);if(typeof x!="function")throw Error(Oe(150));if(N=x.call(N),N==null)throw Error(Oe(151));for(var v=x=null,j=p,D=p=0,H=null,A=N.next();j!==null&&!A.done;D++,A=N.next()){j.index>D?(H=j,j=null):H=j.sibling;var P=y(b,j,A.value,_);if(P===null){j===null&&(j=H);break}s&&j&&P.alternate===null&&r(b,j),p=o(P,p,D),v===null?x=P:v.sibling=P,v=P,j=H}if(A.done)return a(b,j),Cs&&kt(b,D),x;if(j===null){for(;!A.done;D++,A=N.next())A=h(b,A.value,_),A!==null&&(p=o(A,p,D),v===null?x=A:v.sibling=A,v=A);return Cs&&kt(b,D),x}for(j=t(b,j);!A.done;D++,A=N.next())A=k(j,b,D,A.value,_),A!==null&&(s&&A.alternate!==null&&j.delete(A.key===null?D:A.key),p=o(A,p,D),v===null?x=A:v.sibling=A,v=A);return s&&j.forEach(function(R){return r(b,R)}),Cs&&kt(b,D),x}function C(b,p,N,_){if(typeof N=="object"&&N!==null&&N.type===tn&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ai:e:{for(var x=N.key,v=p;v!==null;){if(v.key===x){if(x=N.type,x===tn){if(v.tag===7){a(b,v.sibling),p=n(v,N.props.children),p.return=b,b=p;break e}}else if(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ua&&dg(x)===v.type){a(b,v.sibling),p=n(v,N.props),p.ref=Wn(b,v,N),p.return=b,b=p;break e}a(b,v);break}else r(b,v);v=v.sibling}N.type===tn?(p=It(N.props.children,b.mode,_,N.key),p.return=b,b=p):(_=Li(N.type,N.key,N.props,null,b.mode,_),_.ref=Wn(b,p,N),_.return=b,b=_)}return i(b);case an:e:{for(v=N.key;p!==null;){if(p.key===v)if(p.tag===4&&p.stateNode.containerInfo===N.containerInfo&&p.stateNode.implementation===N.implementation){a(b,p.sibling),p=n(p,N.children||[]),p.return=b,b=p;break e}else{a(b,p);break}else r(b,p);p=p.sibling}p=_c(N,b.mode,_),p.return=b,b=p}return i(b);case Ua:return v=N._init,C(b,p,v(N._payload),_)}if(co(N))return E(b,p,N,_);if(Vn(N))return S(b,p,N,_);xi(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,p!==null&&p.tag===6?(a(b,p.sibling),p=n(p,N),p.return=b,b=p):(a(b,p),p=Ec(N,b.mode,_),p.return=b,b=p),i(b)):a(b,p)}return C}var Sn=sh(!0),rh=sh(!1),tl=xt(null),nl=null,gn=null,Au=null;function Pu(){Au=gn=nl=null}function Du(s){var r=tl.current;Ns(tl),s._currentValue=r}function Ed(s,r,a){for(;s!==null;){var t=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,t!==null&&(t.childLanes|=r)):t!==null&&(t.childLanes&r)!==r&&(t.childLanes|=r),s===a)break;s=s.return}}function vn(s,r){nl=s,Au=gn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&r&&(jr=!0),s.firstContext=null)}function Vr(s){var r=s._currentValue;if(Au!==s)if(s={context:s,memoizedValue:r,next:null},gn===null){if(nl===null)throw Error(Oe(308));gn=s,nl.dependencies={lanes:0,firstContext:s}}else gn=gn.next=s;return r}var Rt=null;function Tu(s){Rt===null?Rt=[s]:Rt.push(s)}function ah(s,r,a,t){var n=r.interleaved;return n===null?(a.next=a,Tu(r)):(a.next=n.next,n.next=a),r.interleaved=a,Ra(s,t)}function Ra(s,r){s.lanes|=r;var a=s.alternate;for(a!==null&&(a.lanes|=r),a=s,s=s.return;s!==null;)s.childLanes|=r,a=s.alternate,a!==null&&(a.childLanes|=r),a=s,s=s.return;return a.tag===3?a.stateNode:null}var Ba=!1;function Ou(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function th(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function _a(s,r){return{eventTime:s,lane:r,tag:0,payload:null,callback:null,next:null}}function tt(s,r,a){var t=s.updateQueue;if(t===null)return null;if(t=t.shared,ns&2){var n=t.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),t.pending=r,Ra(s,a)}return n=t.interleaved,n===null?(r.next=r,Tu(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ra(s,a)}function Di(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var t=r.lanes;t&=s.pendingLanes,a|=t,r.lanes=a,bu(s,a)}}function ug(s,r){var a=s.updateQueue,t=s.alternate;if(t!==null&&(t=t.updateQueue,a===t)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=r:o=o.next=r}else n=o=r;a={baseState:t.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:t.shared,effects:t.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}function ol(s,r,a,t){var n=s.updateQueue;Ba=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var d=l,u=d.next;d.next=null,i===null?o=u:i.next=u,i=d;var g=s.alternate;g!==null&&(g=g.updateQueue,l=g.lastBaseUpdate,l!==i&&(l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=d))}if(o!==null){var h=n.baseState;i=0,g=u=d=null,l=o;do{var y=l.lane,k=l.eventTime;if((t&y)===y){g!==null&&(g=g.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=s,S=l;switch(y=r,k=a,S.tag){case 1:if(E=S.payload,typeof E=="function"){h=E.call(k,h,y);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,y=typeof E=="function"?E.call(k,h,y):E,y==null)break e;h=Ds({},h,y);break e;case 2:Ba=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,y=n.effects,y===null?n.effects=[l]:y.push(l))}else k={eventTime:k,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},g===null?(u=g=k,d=h):g=g.next=k,i|=y;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;y=l,l=y.next,y.next=null,n.lastBaseUpdate=y,n.shared.pending=null}}while(!0);if(g===null&&(d=h),n.baseState=d,n.firstBaseUpdate=u,n.lastBaseUpdate=g,r=n.shared.interleaved,r!==null){n=r;do i|=n.lane,n=n.next;while(n!==r)}else o===null&&(n.shared.lanes=0);Ut|=i,s.lanes=i,s.memoizedState=h}}function mg(s,r,a){if(s=r.effects,r.effects=null,s!==null)for(r=0;r<s.length;r++){var t=s[r],n=t.callback;if(n!==null){if(t.callback=null,t=a,typeof n!="function")throw Error(Oe(191,n));n.call(t)}}}var Ko={},ma=xt(Ko),Mo=xt(Ko),Lo=xt(Ko);function At(s){if(s===Ko)throw Error(Oe(174));return s}function Iu(s,r){switch(ps(Lo,r),ps(Mo,s),ps(ma,Ko),s=r.nodeType,s){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:nd(null,"");break;default:s=s===8?r.parentNode:r,r=s.namespaceURI||null,s=s.tagName,r=nd(r,s)}Ns(ma),ps(ma,r)}function Cn(){Ns(ma),Ns(Mo),Ns(Lo)}function nh(s){At(Lo.current);var r=At(ma.current),a=nd(r,s.type);r!==a&&(ps(Mo,s),ps(ma,a))}function Fu(s){Mo.current===s&&(Ns(ma),Ns(Mo))}var As=xt(0);function il(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var bc=[];function Mu(){for(var s=0;s<bc.length;s++)bc[s]._workInProgressVersionPrimary=null;bc.length=0}var Ti=Ta.ReactCurrentDispatcher,jc=Ta.ReactCurrentBatchConfig,$t=0,Ps=null,Us=null,qs=null,ll=!1,yo=!1,zo=0,ub=0;function sr(){throw Error(Oe(321))}function Lu(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!sa(s[a],r[a]))return!1;return!0}function zu(s,r,a,t,n,o){if($t=o,Ps=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ti.current=s===null||s.memoizedState===null?hb:fb,s=a(t,n),yo){o=0;do{if(yo=!1,zo=0,25<=o)throw Error(Oe(301));o+=1,qs=Us=null,r.updateQueue=null,Ti.current=pb,s=a(t,n)}while(yo)}if(Ti.current=cl,r=Us!==null&&Us.next!==null,$t=0,qs=Us=Ps=null,ll=!1,r)throw Error(Oe(300));return s}function $u(){var s=zo!==0;return zo=0,s}function oa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?Ps.memoizedState=qs=s:qs=qs.next=s,qs}function qr(){if(Us===null){var s=Ps.alternate;s=s!==null?s.memoizedState:null}else s=Us.next;var r=qs===null?Ps.memoizedState:qs.next;if(r!==null)qs=r,Us=s;else{if(s===null)throw Error(Oe(310));Us=s,s={memoizedState:Us.memoizedState,baseState:Us.baseState,baseQueue:Us.baseQueue,queue:Us.queue,next:null},qs===null?Ps.memoizedState=qs=s:qs=qs.next=s}return qs}function $o(s,r){return typeof r=="function"?r(s):r}function vc(s){var r=qr(),a=r.queue;if(a===null)throw Error(Oe(311));a.lastRenderedReducer=s;var t=Us,n=t.baseQueue,o=a.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,a.pending=null}if(n!==null){o=n.next,t=t.baseState;var l=i=null,d=null,u=o;do{var g=u.lane;if(($t&g)===g)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),t=u.hasEagerState?u.eagerState:s(t,u.action);else{var h={lane:g,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=h,i=t):d=d.next=h,Ps.lanes|=g,Ut|=g}u=u.next}while(u!==null&&u!==o);d===null?i=t:d.next=l,sa(t,r.memoizedState)||(jr=!0),r.memoizedState=t,r.baseState=i,r.baseQueue=d,a.lastRenderedState=t}if(s=a.interleaved,s!==null){n=s;do o=n.lane,Ps.lanes|=o,Ut|=o,n=n.next;while(n!==s)}else n===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Nc(s){var r=qr(),a=r.queue;if(a===null)throw Error(Oe(311));a.lastRenderedReducer=s;var t=a.dispatch,n=a.pending,o=r.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=s(o,i.action),i=i.next;while(i!==n);sa(o,r.memoizedState)||(jr=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),a.lastRenderedState=o}return[o,t]}function oh(){}function ih(s,r){var a=Ps,t=qr(),n=r(),o=!sa(t.memoizedState,n);if(o&&(t.memoizedState=n,jr=!0),t=t.queue,Uu(dh.bind(null,a,t,s),[s]),t.getSnapshot!==r||o||qs!==null&&qs.memoizedState.tag&1){if(a.flags|=2048,Uo(9,ch.bind(null,a,t,n,r),void 0,null),Gs===null)throw Error(Oe(349));$t&30||lh(a,r,n)}return n}function lh(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=Ps.updateQueue,r===null?(r={lastEffect:null,stores:null},Ps.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function ch(s,r,a,t){r.value=a,r.getSnapshot=t,uh(r)&&mh(s)}function dh(s,r,a){return a(function(){uh(r)&&mh(s)})}function uh(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!sa(s,a)}catch{return!0}}function mh(s){var r=Ra(s,1);r!==null&&Jr(r,s,1,-1)}function gg(s){var r=oa();return typeof s=="function"&&(s=s()),r.memoizedState=r.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:s},r.queue=s,s=s.dispatch=xb.bind(null,Ps,s),[r.memoizedState,s]}function Uo(s,r,a,t){return s={tag:s,create:r,destroy:a,deps:t,next:null},r=Ps.updateQueue,r===null?(r={lastEffect:null,stores:null},Ps.updateQueue=r,r.lastEffect=s.next=s):(a=r.lastEffect,a===null?r.lastEffect=s.next=s:(t=a.next,a.next=s,s.next=t,r.lastEffect=s)),s}function gh(){return qr().memoizedState}function Oi(s,r,a,t){var n=oa();Ps.flags|=s,n.memoizedState=Uo(1|r,a,void 0,t===void 0?null:t)}function Dl(s,r,a,t){var n=qr();t=t===void 0?null:t;var o=void 0;if(Us!==null){var i=Us.memoizedState;if(o=i.destroy,t!==null&&Lu(t,i.deps)){n.memoizedState=Uo(r,a,o,t);return}}Ps.flags|=s,n.memoizedState=Uo(1|r,a,o,t)}function xg(s,r){return Oi(8390656,8,s,r)}function Uu(s,r){return Dl(2048,8,s,r)}function xh(s,r){return Dl(4,2,s,r)}function hh(s,r){return Dl(4,4,s,r)}function fh(s,r){if(typeof r=="function")return s=s(),r(s),function(){r(null)};if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function ph(s,r,a){return a=a!=null?a.concat([s]):null,Dl(4,4,fh.bind(null,r,s),a)}function Bu(){}function yh(s,r){var a=qr();r=r===void 0?null:r;var t=a.memoizedState;return t!==null&&r!==null&&Lu(r,t[1])?t[0]:(a.memoizedState=[s,r],s)}function bh(s,r){var a=qr();r=r===void 0?null:r;var t=a.memoizedState;return t!==null&&r!==null&&Lu(r,t[1])?t[0]:(s=s(),a.memoizedState=[s,r],s)}function jh(s,r,a){return $t&21?(sa(a,r)||(a=E0(),Ps.lanes|=a,Ut|=a,s.baseState=!0),r):(s.baseState&&(s.baseState=!1,jr=!0),s.memoizedState=a)}function mb(s,r){var a=ms;ms=a!==0&&4>a?a:4,s(!0);var t=jc.transition;jc.transition={};try{s(!1),r()}finally{ms=a,jc.transition=t}}function vh(){return qr().memoizedState}function gb(s,r,a){var t=ot(s);if(a={lane:t,action:a,hasEagerState:!1,eagerState:null,next:null},Nh(s))wh(r,a);else if(a=ah(s,r,a,t),a!==null){var n=mr();Jr(a,s,t,n),kh(a,r,t)}}function xb(s,r,a){var t=ot(s),n={lane:t,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nh(s))wh(r,n);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var i=r.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,sa(l,i)){var d=r.interleaved;d===null?(n.next=n,Tu(r)):(n.next=d.next,d.next=n),r.interleaved=n;return}}catch{}finally{}a=ah(s,r,n,t),a!==null&&(n=mr(),Jr(a,s,t,n),kh(a,r,t))}}function Nh(s){var r=s.alternate;return s===Ps||r!==null&&r===Ps}function wh(s,r){yo=ll=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function kh(s,r,a){if(a&4194240){var t=r.lanes;t&=s.pendingLanes,a|=t,r.lanes=a,bu(s,a)}}var cl={readContext:Vr,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},hb={readContext:Vr,useCallback:function(s,r){return oa().memoizedState=[s,r===void 0?null:r],s},useContext:Vr,useEffect:xg,useImperativeHandle:function(s,r,a){return a=a!=null?a.concat([s]):null,Oi(4194308,4,fh.bind(null,r,s),a)},useLayoutEffect:function(s,r){return Oi(4194308,4,s,r)},useInsertionEffect:function(s,r){return Oi(4,2,s,r)},useMemo:function(s,r){var a=oa();return r=r===void 0?null:r,s=s(),a.memoizedState=[s,r],s},useReducer:function(s,r,a){var t=oa();return r=a!==void 0?a(r):r,t.memoizedState=t.baseState=r,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},t.queue=s,s=s.dispatch=gb.bind(null,Ps,s),[t.memoizedState,s]},useRef:function(s){var r=oa();return s={current:s},r.memoizedState=s},useState:gg,useDebugValue:Bu,useDeferredValue:function(s){return oa().memoizedState=s},useTransition:function(){var s=gg(!1),r=s[0];return s=mb.bind(null,s[1]),oa().memoizedState=s,[r,s]},useMutableSource:function(){},useSyncExternalStore:function(s,r,a){var t=Ps,n=oa();if(Cs){if(a===void 0)throw Error(Oe(407));a=a()}else{if(a=r(),Gs===null)throw Error(Oe(349));$t&30||lh(t,r,a)}n.memoizedState=a;var o={value:a,getSnapshot:r};return n.queue=o,xg(dh.bind(null,t,o,s),[s]),t.flags|=2048,Uo(9,ch.bind(null,t,o,a,r),void 0,null),a},useId:function(){var s=oa(),r=Gs.identifierPrefix;if(Cs){var a=Ea,t=ka;a=(t&~(1<<32-Yr(t)-1)).toString(32)+a,r=":"+r+"R"+a,a=zo++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=ub++,r=":"+r+"r"+a.toString(32)+":";return s.memoizedState=r},unstable_isNewReconciler:!1},fb={readContext:Vr,useCallback:yh,useContext:Vr,useEffect:Uu,useImperativeHandle:ph,useInsertionEffect:xh,useLayoutEffect:hh,useMemo:bh,useReducer:vc,useRef:gh,useState:function(){return vc($o)},useDebugValue:Bu,useDeferredValue:function(s){var r=qr();return jh(r,Us.memoizedState,s)},useTransition:function(){var s=vc($o)[0],r=qr().memoizedState;return[s,r]},useMutableSource:oh,useSyncExternalStore:ih,useId:vh,unstable_isNewReconciler:!1},pb={readContext:Vr,useCallback:yh,useContext:Vr,useEffect:Uu,useImperativeHandle:ph,useInsertionEffect:xh,useLayoutEffect:hh,useMemo:bh,useReducer:Nc,useRef:gh,useState:function(){return Nc($o)},useDebugValue:Bu,useDeferredValue:function(s){var r=qr();return Us===null?r.memoizedState=s:jh(r,Us.memoizedState,s)},useTransition:function(){var s=Nc($o)[0],r=qr().memoizedState;return[s,r]},useMutableSource:oh,useSyncExternalStore:ih,useId:vh,unstable_isNewReconciler:!1};function Qr(s,r){if(s&&s.defaultProps){r=Ds({},r),s=s.defaultProps;for(var a in s)r[a]===void 0&&(r[a]=s[a]);return r}return r}function _d(s,r,a,t){r=s.memoizedState,a=a(t,r),a=a==null?r:Ds({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Tl={isMounted:function(s){return(s=s._reactInternals)?Qt(s)===s:!1},enqueueSetState:function(s,r,a){s=s._reactInternals;var t=mr(),n=ot(s),o=_a(t,n);o.payload=r,a!=null&&(o.callback=a),r=tt(s,o,n),r!==null&&(Jr(r,s,n,t),Di(r,s,n))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var t=mr(),n=ot(s),o=_a(t,n);o.tag=1,o.payload=r,a!=null&&(o.callback=a),r=tt(s,o,n),r!==null&&(Jr(r,s,n,t),Di(r,s,n))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=mr(),t=ot(s),n=_a(a,t);n.tag=2,r!=null&&(n.callback=r),r=tt(s,n,t),r!==null&&(Jr(r,s,t,a),Di(r,s,t))}};function hg(s,r,a,t,n,o,i){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(t,o,i):r.prototype&&r.prototype.isPureReactComponent?!To(a,t)||!To(n,o):!0}function Eh(s,r,a){var t=!1,n=ut,o=r.contextType;return typeof o=="object"&&o!==null?o=Vr(o):(n=kr(r)?Lt:lr.current,t=r.contextTypes,o=(t=t!=null)?En(s,n):ut),r=new r(a,o),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tl,s.stateNode=r,r._reactInternals=s,t&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=o),r}function fg(s,r,a,t){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,t),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,t),r.state!==s&&Tl.enqueueReplaceState(r,r.state,null)}function Sd(s,r,a,t){var n=s.stateNode;n.props=a,n.state=s.memoizedState,n.refs={},Ou(s);var o=r.contextType;typeof o=="object"&&o!==null?n.context=Vr(o):(o=kr(r)?Lt:lr.current,n.context=En(s,o)),n.state=s.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(_d(s,r,o,a),n.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Tl.enqueueReplaceState(n,n.state,null),ol(s,a,n,t),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function Rn(s,r){try{var a="",t=r;do a+=Hp(t),t=t.return;while(t);var n=a}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:s,source:r,stack:n,digest:null}}function wc(s,r,a){return{value:s,source:null,stack:a??null,digest:r??null}}function Cd(s,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var yb=typeof WeakMap=="function"?WeakMap:Map;function _h(s,r,a){a=_a(-1,a),a.tag=3,a.payload={element:null};var t=r.value;return a.callback=function(){ul||(ul=!0,Ld=t),Cd(s,r)},a}function Sh(s,r,a){a=_a(-1,a),a.tag=3;var t=s.type.getDerivedStateFromError;if(typeof t=="function"){var n=r.value;a.payload=function(){return t(n)},a.callback=function(){Cd(s,r)}}var o=s.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(a.callback=function(){Cd(s,r),typeof t!="function"&&(nt===null?nt=new Set([this]):nt.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:i!==null?i:""})}),a}function pg(s,r,a){var t=s.pingCache;if(t===null){t=s.pingCache=new yb;var n=new Set;t.set(r,n)}else n=t.get(r),n===void 0&&(n=new Set,t.set(r,n));n.has(a)||(n.add(a),s=Db.bind(null,s,r,a),r.then(s,s))}function yg(s){do{var r;if((r=s.tag===13)&&(r=s.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return s;s=s.return}while(s!==null);return null}function bg(s,r,a,t,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===r?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=_a(-1,1),r.tag=2,tt(a,r,1))),a.lanes|=1),s)}var bb=Ta.ReactCurrentOwner,jr=!1;function ur(s,r,a,t){r.child=s===null?rh(r,null,a,t):Sn(r,s.child,a,t)}function jg(s,r,a,t,n){a=a.render;var o=r.ref;return vn(r,n),t=zu(s,r,a,t,o,n),a=$u(),s!==null&&!jr?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~n,Aa(s,r,n)):(Cs&&a&&Su(r),r.flags|=1,ur(s,r,t,n),r.child)}function vg(s,r,a,t,n){if(s===null){var o=a.type;return typeof o=="function"&&!Zu(o)&&o.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=o,Ch(s,r,o,t,n)):(s=Li(a.type,null,t,r,r.mode,n),s.ref=r.ref,s.return=r,r.child=s)}if(o=s.child,!(s.lanes&n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:To,a(i,t)&&s.ref===r.ref)return Aa(s,r,n)}return r.flags|=1,s=it(o,t),s.ref=r.ref,s.return=r,r.child=s}function Ch(s,r,a,t,n){if(s!==null){var o=s.memoizedProps;if(To(o,t)&&s.ref===r.ref)if(jr=!1,r.pendingProps=t=o,(s.lanes&n)!==0)s.flags&131072&&(jr=!0);else return r.lanes=s.lanes,Aa(s,r,n)}return Rd(s,r,a,t,n)}function Rh(s,r,a){var t=r.pendingProps,n=t.children,o=s!==null?s.memoizedState:null;if(t.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ps(hn,Cr),Cr|=a;else{if(!(a&1073741824))return s=o!==null?o.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:s,cachePool:null,transitions:null},r.updateQueue=null,ps(hn,Cr),Cr|=s,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=o!==null?o.baseLanes:a,ps(hn,Cr),Cr|=t}else o!==null?(t=o.baseLanes|a,r.memoizedState=null):t=a,ps(hn,Cr),Cr|=t;return ur(s,r,n,a),r.child}function Ah(s,r){var a=r.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Rd(s,r,a,t,n){var o=kr(a)?Lt:lr.current;return o=En(r,o),vn(r,n),a=zu(s,r,a,t,o,n),t=$u(),s!==null&&!jr?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~n,Aa(s,r,n)):(Cs&&t&&Su(r),r.flags|=1,ur(s,r,a,n),r.child)}function Ng(s,r,a,t,n){if(kr(a)){var o=!0;sl(r)}else o=!1;if(vn(r,n),r.stateNode===null)Ii(s,r),Eh(r,a,t),Sd(r,a,t,n),t=!0;else if(s===null){var i=r.stateNode,l=r.memoizedProps;i.props=l;var d=i.context,u=a.contextType;typeof u=="object"&&u!==null?u=Vr(u):(u=kr(a)?Lt:lr.current,u=En(r,u));var g=a.getDerivedStateFromProps,h=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==t||d!==u)&&fg(r,i,t,u),Ba=!1;var y=r.memoizedState;i.state=y,ol(r,t,i,n),d=r.memoizedState,l!==t||y!==d||wr.current||Ba?(typeof g=="function"&&(_d(r,a,g,t),d=r.memoizedState),(l=Ba||hg(r,a,l,t,y,d,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(r.flags|=4194308)):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=t,r.memoizedState=d),i.props=t,i.state=d,i.context=u,t=l):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),t=!1)}else{i=r.stateNode,th(s,r),l=r.memoizedProps,u=r.type===r.elementType?l:Qr(r.type,l),i.props=u,h=r.pendingProps,y=i.context,d=a.contextType,typeof d=="object"&&d!==null?d=Vr(d):(d=kr(a)?Lt:lr.current,d=En(r,d));var k=a.getDerivedStateFromProps;(g=typeof k=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||y!==d)&&fg(r,i,t,d),Ba=!1,y=r.memoizedState,i.state=y,ol(r,t,i,n);var E=r.memoizedState;l!==h||y!==E||wr.current||Ba?(typeof k=="function"&&(_d(r,a,k,t),E=r.memoizedState),(u=Ba||hg(r,a,u,t,y,E,d)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(t,E,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(t,E,d)),typeof i.componentDidUpdate=="function"&&(r.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=1024),r.memoizedProps=t,r.memoizedState=E),i.props=t,i.state=E,i.context=d,t=u):(typeof i.componentDidUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&y===s.memoizedState||(r.flags|=1024),t=!1)}return Ad(s,r,a,t,o,n)}function Ad(s,r,a,t,n,o){Ah(s,r);var i=(r.flags&128)!==0;if(!t&&!i)return n&&ig(r,a,!1),Aa(s,r,o);t=r.stateNode,bb.current=r;var l=i&&typeof a.getDerivedStateFromError!="function"?null:t.render();return r.flags|=1,s!==null&&i?(r.child=Sn(r,s.child,null,o),r.child=Sn(r,null,l,o)):ur(s,r,l,o),r.memoizedState=t.state,n&&ig(r,a,!0),r.child}function Ph(s){var r=s.stateNode;r.pendingContext?og(s,r.pendingContext,r.pendingContext!==r.context):r.context&&og(s,r.context,!1),Iu(s,r.containerInfo)}function wg(s,r,a,t,n){return _n(),Ru(n),r.flags|=256,ur(s,r,a,t),r.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Dd(s){return{baseLanes:s,cachePool:null,transitions:null}}function Dh(s,r,a){var t=r.pendingProps,n=As.current,o=!1,i=(r.flags&128)!==0,l;if((l=i)||(l=s!==null&&s.memoizedState===null?!1:(n&2)!==0),l?(o=!0,r.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),ps(As,n&1),s===null)return kd(r),s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(r.mode&1?s.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(i=t.children,s=t.fallback,o?(t=r.mode,o=r.child,i={mode:"hidden",children:i},!(t&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Fl(i,t,0,null),s=It(s,t,a,null),o.return=r,s.return=r,o.sibling=s,r.child=o,r.child.memoizedState=Dd(a),r.memoizedState=Pd,s):Vu(r,i));if(n=s.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return jb(s,r,i,t,l,n,a);if(o){o=t.fallback,i=r.mode,n=s.child,l=n.sibling;var d={mode:"hidden",children:t.children};return!(i&1)&&r.child!==n?(t=r.child,t.childLanes=0,t.pendingProps=d,r.deletions=null):(t=it(n,d),t.subtreeFlags=n.subtreeFlags&14680064),l!==null?o=it(l,o):(o=It(o,i,a,null),o.flags|=2),o.return=r,t.return=r,t.sibling=o,r.child=t,t=o,o=r.child,i=s.child.memoizedState,i=i===null?Dd(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=s.childLanes&~a,r.memoizedState=Pd,t}return o=s.child,s=o.sibling,t=it(o,{mode:"visible",children:t.children}),!(r.mode&1)&&(t.lanes=a),t.return=r,t.sibling=null,s!==null&&(a=r.deletions,a===null?(r.deletions=[s],r.flags|=16):a.push(s)),r.child=t,r.memoizedState=null,t}function Vu(s,r){return r=Fl({mode:"visible",children:r},s.mode,0,null),r.return=s,s.child=r}function hi(s,r,a,t){return t!==null&&Ru(t),Sn(r,s.child,null,a),s=Vu(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function jb(s,r,a,t,n,o,i){if(a)return r.flags&256?(r.flags&=-257,t=wc(Error(Oe(422))),hi(s,r,i,t)):r.memoizedState!==null?(r.child=s.child,r.flags|=128,null):(o=t.fallback,n=r.mode,t=Fl({mode:"visible",children:t.children},n,0,null),o=It(o,n,i,null),o.flags|=2,t.return=r,o.return=r,t.sibling=o,r.child=t,r.mode&1&&Sn(r,s.child,null,i),r.child.memoizedState=Dd(i),r.memoizedState=Pd,o);if(!(r.mode&1))return hi(s,r,i,null);if(n.data==="$!"){if(t=n.nextSibling&&n.nextSibling.dataset,t)var l=t.dgst;return t=l,o=Error(Oe(419)),t=wc(o,t,void 0),hi(s,r,i,t)}if(l=(i&s.childLanes)!==0,jr||l){if(t=Gs,t!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(t.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,Ra(s,n),Jr(t,s,n,-1))}return Ku(),t=wc(Error(Oe(421))),hi(s,r,i,t)}return n.data==="$?"?(r.flags|=128,r.child=s.child,r=Tb.bind(null,s),n._reactRetry=r,null):(s=o.treeContext,Pr=at(n.nextSibling),Dr=r,Cs=!0,Kr=null,s!==null&&(Mr[Lr++]=ka,Mr[Lr++]=Ea,Mr[Lr++]=zt,ka=s.id,Ea=s.overflow,zt=r),r=Vu(r,t.children),r.flags|=4096,r)}function kg(s,r,a){s.lanes|=r;var t=s.alternate;t!==null&&(t.lanes|=r),Ed(s.return,r,a)}function kc(s,r,a,t,n){var o=s.memoizedState;o===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:t,tail:a,tailMode:n}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=t,o.tail=a,o.tailMode=n)}function Th(s,r,a){var t=r.pendingProps,n=t.revealOrder,o=t.tail;if(ur(s,r,t.children,a),t=As.current,t&2)t=t&1|2,r.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&kg(s,a,r);else if(s.tag===19)kg(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t&=1}if(ps(As,t),!(r.mode&1))r.memoizedState=null;else switch(n){case"forwards":for(a=r.child,n=null;a!==null;)s=a.alternate,s!==null&&il(s)===null&&(n=a),a=a.sibling;a=n,a===null?(n=r.child,r.child=null):(n=a.sibling,a.sibling=null),kc(r,!1,n,a,o);break;case"backwards":for(a=null,n=r.child,r.child=null;n!==null;){if(s=n.alternate,s!==null&&il(s)===null){r.child=n;break}s=n.sibling,n.sibling=a,a=n,n=s}kc(r,!0,a,null,o);break;case"together":kc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ii(s,r){!(r.mode&1)&&s!==null&&(s.alternate=null,r.alternate=null,r.flags|=2)}function Aa(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),Ut|=r.lanes,!(a&r.childLanes))return null;if(s!==null&&r.child!==s.child)throw Error(Oe(153));if(r.child!==null){for(s=r.child,a=it(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=it(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function vb(s,r,a){switch(r.tag){case 3:Ph(r),_n();break;case 5:nh(r);break;case 1:kr(r.type)&&sl(r);break;case 4:Iu(r,r.stateNode.containerInfo);break;case 10:var t=r.type._context,n=r.memoizedProps.value;ps(tl,t._currentValue),t._currentValue=n;break;case 13:if(t=r.memoizedState,t!==null)return t.dehydrated!==null?(ps(As,As.current&1),r.flags|=128,null):a&r.child.childLanes?Dh(s,r,a):(ps(As,As.current&1),s=Aa(s,r,a),s!==null?s.sibling:null);ps(As,As.current&1);break;case 19:if(t=(a&r.childLanes)!==0,s.flags&128){if(t)return Th(s,r,a);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ps(As,As.current),t)break;return null;case 22:case 23:return r.lanes=0,Rh(s,r,a)}return Aa(s,r,a)}var Oh,Td,Ih,Fh;Oh=function(s,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Td=function(){};Ih=function(s,r,a,t){var n=s.memoizedProps;if(n!==t){s=r.stateNode,At(ma.current);var o=null;switch(a){case"input":n=sd(s,n),t=sd(s,t),o=[];break;case"select":n=Ds({},n,{value:void 0}),t=Ds({},t,{value:void 0}),o=[];break;case"textarea":n=td(s,n),t=td(s,t),o=[];break;default:typeof n.onClick!="function"&&typeof t.onClick=="function"&&(s.onclick=Xi)}od(a,t);var i;a=null;for(u in n)if(!t.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var l=n[u];for(i in l)l.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_o.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in t){var d=t[u];if(l=n!=null?n[u]:void 0,t.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in d)d.hasOwnProperty(i)&&l[i]!==d[i]&&(a||(a={}),a[i]=d[i])}else a||(o||(o=[]),o.push(u,a)),a=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(o=o||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_o.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&bs("scroll",s),o||l===d||(o=[])):(o=o||[]).push(u,d))}a&&(o=o||[]).push("style",a);var u=o;(r.updateQueue=u)&&(r.flags|=4)}};Fh=function(s,r,a,t){a!==t&&(r.flags|=4)};function Kn(s,r){if(!Cs)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var t=null;a!==null;)a.alternate!==null&&(t=a),a=a.sibling;t===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:t.sibling=null}}function rr(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,t=0;if(r)for(var n=s.child;n!==null;)a|=n.lanes|n.childLanes,t|=n.subtreeFlags&14680064,t|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)a|=n.lanes|n.childLanes,t|=n.subtreeFlags,t|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=t,s.childLanes=a,r}function Nb(s,r,a){var t=r.pendingProps;switch(Cu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(r),null;case 1:return kr(r.type)&&el(),rr(r),null;case 3:return t=r.stateNode,Cn(),Ns(wr),Ns(lr),Mu(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(s===null||s.child===null)&&(gi(r)?r.flags|=4:s===null||s.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Kr!==null&&(Ud(Kr),Kr=null))),Td(s,r),rr(r),null;case 5:Fu(r);var n=At(Lo.current);if(a=r.type,s!==null&&r.stateNode!=null)Ih(s,r,a,t,n),s.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!t){if(r.stateNode===null)throw Error(Oe(166));return rr(r),null}if(s=At(ma.current),gi(r)){t=r.stateNode,a=r.type;var o=r.memoizedProps;switch(t[la]=r,t[Fo]=o,s=(r.mode&1)!==0,a){case"dialog":bs("cancel",t),bs("close",t);break;case"iframe":case"object":case"embed":bs("load",t);break;case"video":case"audio":for(n=0;n<mo.length;n++)bs(mo[n],t);break;case"source":bs("error",t);break;case"img":case"image":case"link":bs("error",t),bs("load",t);break;case"details":bs("toggle",t);break;case"input":Tm(t,o),bs("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!o.multiple},bs("invalid",t);break;case"textarea":Im(t,o),bs("invalid",t)}od(a,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?t.textContent!==l&&(o.suppressHydrationWarning!==!0&&mi(t.textContent,l,s),n=["children",l]):typeof l=="number"&&t.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&mi(t.textContent,l,s),n=["children",""+l]):_o.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&bs("scroll",t)}switch(a){case"input":ti(t),Om(t,o,!0);break;case"textarea":ti(t),Fm(t);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(t.onclick=Xi)}t=n,r.updateQueue=t,t!==null&&(r.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=d0(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=i.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof t.is=="string"?s=i.createElement(a,{is:t.is}):(s=i.createElement(a),a==="select"&&(i=s,t.multiple?i.multiple=!0:t.size&&(i.size=t.size))):s=i.createElementNS(s,a),s[la]=r,s[Fo]=t,Oh(s,r,!1,!1),r.stateNode=s;e:{switch(i=id(a,t),a){case"dialog":bs("cancel",s),bs("close",s),n=t;break;case"iframe":case"object":case"embed":bs("load",s),n=t;break;case"video":case"audio":for(n=0;n<mo.length;n++)bs(mo[n],s);n=t;break;case"source":bs("error",s),n=t;break;case"img":case"image":case"link":bs("error",s),bs("load",s),n=t;break;case"details":bs("toggle",s),n=t;break;case"input":Tm(s,t),n=sd(s,t),bs("invalid",s);break;case"option":n=t;break;case"select":s._wrapperState={wasMultiple:!!t.multiple},n=Ds({},t,{value:void 0}),bs("invalid",s);break;case"textarea":Im(s,t),n=td(s,t),bs("invalid",s);break;default:n=t}od(a,n),l=n;for(o in l)if(l.hasOwnProperty(o)){var d=l[o];o==="style"?g0(s,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&u0(s,d)):o==="children"?typeof d=="string"?(a!=="textarea"||d!=="")&&So(s,d):typeof d=="number"&&So(s,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_o.hasOwnProperty(o)?d!=null&&o==="onScroll"&&bs("scroll",s):d!=null&&gu(s,o,d,i))}switch(a){case"input":ti(s),Om(s,t,!1);break;case"textarea":ti(s),Fm(s);break;case"option":t.value!=null&&s.setAttribute("value",""+dt(t.value));break;case"select":s.multiple=!!t.multiple,o=t.value,o!=null?pn(s,!!t.multiple,o,!1):t.defaultValue!=null&&pn(s,!!t.multiple,t.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=Xi)}switch(a){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break e;case"img":t=!0;break e;default:t=!1}}t&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return rr(r),null;case 6:if(s&&r.stateNode!=null)Fh(s,r,s.memoizedProps,t);else{if(typeof t!="string"&&r.stateNode===null)throw Error(Oe(166));if(a=At(Lo.current),At(ma.current),gi(r)){if(t=r.stateNode,a=r.memoizedProps,t[la]=r,(o=t.nodeValue!==a)&&(s=Dr,s!==null))switch(s.tag){case 3:mi(t.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&mi(t.nodeValue,a,(s.mode&1)!==0)}o&&(r.flags|=4)}else t=(a.nodeType===9?a:a.ownerDocument).createTextNode(t),t[la]=r,r.stateNode=t}return rr(r),null;case 13:if(Ns(As),t=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Cs&&Pr!==null&&r.mode&1&&!(r.flags&128))eh(),_n(),r.flags|=98560,o=!1;else if(o=gi(r),t!==null&&t.dehydrated!==null){if(s===null){if(!o)throw Error(Oe(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Oe(317));o[la]=r}else _n(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;rr(r),o=!1}else Kr!==null&&(Ud(Kr),Kr=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(t=t!==null,t!==(s!==null&&s.memoizedState!==null)&&t&&(r.child.flags|=8192,r.mode&1&&(s===null||As.current&1?Vs===0&&(Vs=3):Ku())),r.updateQueue!==null&&(r.flags|=4),rr(r),null);case 4:return Cn(),Td(s,r),s===null&&Oo(r.stateNode.containerInfo),rr(r),null;case 10:return Du(r.type._context),rr(r),null;case 17:return kr(r.type)&&el(),rr(r),null;case 19:if(Ns(As),o=r.memoizedState,o===null)return rr(r),null;if(t=(r.flags&128)!==0,i=o.rendering,i===null)if(t)Kn(o,!1);else{if(Vs!==0||s!==null&&s.flags&128)for(s=r.child;s!==null;){if(i=il(s),i!==null){for(r.flags|=128,Kn(o,!1),t=i.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=a,a=r.child;a!==null;)o=a,s=t,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return ps(As,As.current&1|2),r.child}s=s.sibling}o.tail!==null&&Fs()>An&&(r.flags|=128,t=!0,Kn(o,!1),r.lanes=4194304)}else{if(!t)if(s=il(i),s!==null){if(r.flags|=128,t=!0,a=s.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Kn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Cs)return rr(r),null}else 2*Fs()-o.renderingStartTime>An&&a!==1073741824&&(r.flags|=128,t=!0,Kn(o,!1),r.lanes=4194304);o.isBackwards?(i.sibling=r.child,r.child=i):(a=o.last,a!==null?a.sibling=i:r.child=i,o.last=i)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=Fs(),r.sibling=null,a=As.current,ps(As,t?a&1|2:a&1),r):(rr(r),null);case 22:case 23:return Wu(),t=r.memoizedState!==null,s!==null&&s.memoizedState!==null!==t&&(r.flags|=8192),t&&r.mode&1?Cr&1073741824&&(rr(r),r.subtreeFlags&6&&(r.flags|=8192)):rr(r),null;case 24:return null;case 25:return null}throw Error(Oe(156,r.tag))}function wb(s,r){switch(Cu(r),r.tag){case 1:return kr(r.type)&&el(),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Cn(),Ns(wr),Ns(lr),Mu(),s=r.flags,s&65536&&!(s&128)?(r.flags=s&-65537|128,r):null;case 5:return Fu(r),null;case 13:if(Ns(As),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(Oe(340));_n()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Ns(As),null;case 4:return Cn(),null;case 10:return Du(r.type._context),null;case 22:case 23:return Wu(),null;case 24:return null;default:return null}}var fi=!1,ar=!1,kb=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function xn(s,r){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(t){Os(s,r,t)}else a.current=null}function Od(s,r,a){try{a()}catch(t){Os(s,r,t)}}var Eg=!1;function Eb(s,r){if(pd=Zi,s=U0(),_u(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var t=a.getSelection&&a.getSelection();if(t&&t.rangeCount!==0){a=t.anchorNode;var n=t.anchorOffset,o=t.focusNode;t=t.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,d=-1,u=0,g=0,h=s,y=null;s:for(;;){for(var k;h!==a||n!==0&&h.nodeType!==3||(l=i+n),h!==o||t!==0&&h.nodeType!==3||(d=i+t),h.nodeType===3&&(i+=h.nodeValue.length),(k=h.firstChild)!==null;)y=h,h=k;for(;;){if(h===s)break s;if(y===a&&++u===n&&(l=i),y===o&&++g===t&&(d=i),(k=h.nextSibling)!==null)break;h=y,y=h.parentNode}h=k}a=l===-1||d===-1?null:{start:l,end:d}}else a=null}a=a||{start:0,end:0}}else a=null;for(yd={focusedElem:s,selectionRange:a},Zi=!1,Ve=r;Ve!==null;)if(r=Ve,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ve=s;else for(;Ve!==null;){r=Ve;try{var E=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,C=E.memoizedState,b=r.stateNode,p=b.getSnapshotBeforeUpdate(r.elementType===r.type?S:Qr(r.type,S),C);b.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var N=r.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(_){Os(r,r.return,_)}if(s=r.sibling,s!==null){s.return=r.return,Ve=s;break}Ve=r.return}return E=Eg,Eg=!1,E}function bo(s,r,a){var t=r.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&s)===s){var o=n.destroy;n.destroy=void 0,o!==void 0&&Od(r,a,o)}n=n.next}while(n!==t)}}function Ol(s,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&s)===s){var t=a.create;a.destroy=t()}a=a.next}while(a!==r)}}function Id(s){var r=s.ref;if(r!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof r=="function"?r(s):r.current=s}}function Mh(s){var r=s.alternate;r!==null&&(s.alternate=null,Mh(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&(delete r[la],delete r[Fo],delete r[vd],delete r[ib],delete r[lb])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Lh(s){return s.tag===5||s.tag===3||s.tag===4}function _g(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Lh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fd(s,r,a){var t=s.tag;if(t===5||t===6)s=s.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(s,r):a.insertBefore(s,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(s,a)):(r=a,r.appendChild(s)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xi));else if(t!==4&&(s=s.child,s!==null))for(Fd(s,r,a),s=s.sibling;s!==null;)Fd(s,r,a),s=s.sibling}function Md(s,r,a){var t=s.tag;if(t===5||t===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(t!==4&&(s=s.child,s!==null))for(Md(s,r,a),s=s.sibling;s!==null;)Md(s,r,a),s=s.sibling}var Ws=null,Wr=!1;function Ma(s,r,a){for(a=a.child;a!==null;)zh(s,r,a),a=a.sibling}function zh(s,r,a){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(_l,a)}catch{}switch(a.tag){case 5:ar||xn(a,r);case 6:var t=Ws,n=Wr;Ws=null,Ma(s,r,a),Ws=t,Wr=n,Ws!==null&&(Wr?(s=Ws,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):Ws.removeChild(a.stateNode));break;case 18:Ws!==null&&(Wr?(s=Ws,a=a.stateNode,s.nodeType===8?pc(s.parentNode,a):s.nodeType===1&&pc(s,a),Po(s)):pc(Ws,a.stateNode));break;case 4:t=Ws,n=Wr,Ws=a.stateNode.containerInfo,Wr=!0,Ma(s,r,a),Ws=t,Wr=n;break;case 0:case 11:case 14:case 15:if(!ar&&(t=a.updateQueue,t!==null&&(t=t.lastEffect,t!==null))){n=t=t.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Od(a,r,i),n=n.next}while(n!==t)}Ma(s,r,a);break;case 1:if(!ar&&(xn(a,r),t=a.stateNode,typeof t.componentWillUnmount=="function"))try{t.props=a.memoizedProps,t.state=a.memoizedState,t.componentWillUnmount()}catch(l){Os(a,r,l)}Ma(s,r,a);break;case 21:Ma(s,r,a);break;case 22:a.mode&1?(ar=(t=ar)||a.memoizedState!==null,Ma(s,r,a),ar=t):Ma(s,r,a);break;default:Ma(s,r,a)}}function Sg(s){var r=s.updateQueue;if(r!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new kb),r.forEach(function(t){var n=Ob.bind(null,s,t);a.has(t)||(a.add(t),t.then(n,n))})}}function Hr(s,r){var a=r.deletions;if(a!==null)for(var t=0;t<a.length;t++){var n=a[t];try{var o=s,i=r,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ws=l.stateNode,Wr=!1;break e;case 3:Ws=l.stateNode.containerInfo,Wr=!0;break e;case 4:Ws=l.stateNode.containerInfo,Wr=!0;break e}l=l.return}if(Ws===null)throw Error(Oe(160));zh(o,i,n),Ws=null,Wr=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(u){Os(n,r,u)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)$h(r,s),r=r.sibling}function $h(s,r){var a=s.alternate,t=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Hr(r,s),aa(s),t&4){try{bo(3,s,s.return),Ol(3,s)}catch(S){Os(s,s.return,S)}try{bo(5,s,s.return)}catch(S){Os(s,s.return,S)}}break;case 1:Hr(r,s),aa(s),t&512&&a!==null&&xn(a,a.return);break;case 5:if(Hr(r,s),aa(s),t&512&&a!==null&&xn(a,a.return),s.flags&32){var n=s.stateNode;try{So(n,"")}catch(S){Os(s,s.return,S)}}if(t&4&&(n=s.stateNode,n!=null)){var o=s.memoizedProps,i=a!==null?a.memoizedProps:o,l=s.type,d=s.updateQueue;if(s.updateQueue=null,d!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&l0(n,o),id(l,i);var u=id(l,o);for(i=0;i<d.length;i+=2){var g=d[i],h=d[i+1];g==="style"?g0(n,h):g==="dangerouslySetInnerHTML"?u0(n,h):g==="children"?So(n,h):gu(n,g,h,u)}switch(l){case"input":rd(n,o);break;case"textarea":c0(n,o);break;case"select":var y=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?pn(n,!!o.multiple,k,!1):y!==!!o.multiple&&(o.defaultValue!=null?pn(n,!!o.multiple,o.defaultValue,!0):pn(n,!!o.multiple,o.multiple?[]:"",!1))}n[Fo]=o}catch(S){Os(s,s.return,S)}}break;case 6:if(Hr(r,s),aa(s),t&4){if(s.stateNode===null)throw Error(Oe(162));n=s.stateNode,o=s.memoizedProps;try{n.nodeValue=o}catch(S){Os(s,s.return,S)}}break;case 3:if(Hr(r,s),aa(s),t&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(r.containerInfo)}catch(S){Os(s,s.return,S)}break;case 4:Hr(r,s),aa(s);break;case 13:Hr(r,s),aa(s),n=s.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(Gu=Fs())),t&4&&Sg(s);break;case 22:if(g=a!==null&&a.memoizedState!==null,s.mode&1?(ar=(u=ar)||g,Hr(r,s),ar=u):Hr(r,s),aa(s),t&8192){if(u=s.memoizedState!==null,(s.stateNode.isHidden=u)&&!g&&s.mode&1)for(Ve=s,g=s.child;g!==null;){for(h=Ve=g;Ve!==null;){switch(y=Ve,k=y.child,y.tag){case 0:case 11:case 14:case 15:bo(4,y,y.return);break;case 1:xn(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){t=y,a=y.return;try{r=t,E.props=r.memoizedProps,E.state=r.memoizedState,E.componentWillUnmount()}catch(S){Os(t,a,S)}}break;case 5:xn(y,y.return);break;case 22:if(y.memoizedState!==null){Rg(h);continue}}k!==null?(k.return=y,Ve=k):Rg(h)}g=g.sibling}e:for(g=null,h=s;;){if(h.tag===5){if(g===null){g=h;try{n=h.stateNode,u?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,d=h.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=m0("display",i))}catch(S){Os(s,s.return,S)}}}else if(h.tag===6){if(g===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){Os(s,s.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===s)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hr(r,s),aa(s),t&4&&Sg(s);break;case 21:break;default:Hr(r,s),aa(s)}}function aa(s){var r=s.flags;if(r&2){try{e:{for(var a=s.return;a!==null;){if(Lh(a)){var t=a;break e}a=a.return}throw Error(Oe(160))}switch(t.tag){case 5:var n=t.stateNode;t.flags&32&&(So(n,""),t.flags&=-33);var o=_g(s);Md(s,o,n);break;case 3:case 4:var i=t.stateNode.containerInfo,l=_g(s);Fd(s,l,i);break;default:throw Error(Oe(161))}}catch(d){Os(s,s.return,d)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function _b(s,r,a){Ve=s,Uh(s)}function Uh(s,r,a){for(var t=(s.mode&1)!==0;Ve!==null;){var n=Ve,o=n.child;if(n.tag===22&&t){var i=n.memoizedState!==null||fi;if(!i){var l=n.alternate,d=l!==null&&l.memoizedState!==null||ar;l=fi;var u=ar;if(fi=i,(ar=d)&&!u)for(Ve=n;Ve!==null;)i=Ve,d=i.child,i.tag===22&&i.memoizedState!==null?Ag(n):d!==null?(d.return=i,Ve=d):Ag(n);for(;o!==null;)Ve=o,Uh(o),o=o.sibling;Ve=n,fi=l,ar=u}Cg(s)}else n.subtreeFlags&8772&&o!==null?(o.return=n,Ve=o):Cg(s)}}function Cg(s){for(;Ve!==null;){var r=Ve;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:ar||Ol(5,r);break;case 1:var t=r.stateNode;if(r.flags&4&&!ar)if(a===null)t.componentDidMount();else{var n=r.elementType===r.type?a.memoizedProps:Qr(r.type,a.memoizedProps);t.componentDidUpdate(n,a.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&mg(r,o,t);break;case 3:var i=r.updateQueue;if(i!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}mg(r,i,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var d=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&a.focus();break;case"img":d.src&&(a.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var u=r.alternate;if(u!==null){var g=u.memoizedState;if(g!==null){var h=g.dehydrated;h!==null&&Po(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ar||r.flags&512&&Id(r)}catch(y){Os(r,r.return,y)}}if(r===s){Ve=null;break}if(a=r.sibling,a!==null){a.return=r.return,Ve=a;break}Ve=r.return}}function Rg(s){for(;Ve!==null;){var r=Ve;if(r===s){Ve=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Ve=a;break}Ve=r.return}}function Ag(s){for(;Ve!==null;){var r=Ve;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ol(4,r)}catch(d){Os(r,a,d)}break;case 1:var t=r.stateNode;if(typeof t.componentDidMount=="function"){var n=r.return;try{t.componentDidMount()}catch(d){Os(r,n,d)}}var o=r.return;try{Id(r)}catch(d){Os(r,o,d)}break;case 5:var i=r.return;try{Id(r)}catch(d){Os(r,i,d)}}}catch(d){Os(r,r.return,d)}if(r===s){Ve=null;break}var l=r.sibling;if(l!==null){l.return=r.return,Ve=l;break}Ve=r.return}}var Sb=Math.ceil,dl=Ta.ReactCurrentDispatcher,qu=Ta.ReactCurrentOwner,Ur=Ta.ReactCurrentBatchConfig,ns=0,Gs=null,zs=null,Ys=0,Cr=0,hn=xt(0),Vs=0,Bo=null,Ut=0,Il=0,Hu=0,jo=null,br=null,Gu=0,An=1/0,ja=null,ul=!1,Ld=null,nt=null,pi=!1,Ja=null,ml=0,vo=0,zd=null,Fi=-1,Mi=0;function mr(){return ns&6?Fs():Fi!==-1?Fi:Fi=Fs()}function ot(s){return s.mode&1?ns&2&&Ys!==0?Ys&-Ys:db.transition!==null?(Mi===0&&(Mi=E0()),Mi):(s=ms,s!==0||(s=window.event,s=s===void 0?16:D0(s.type)),s):1}function Jr(s,r,a,t){if(50<vo)throw vo=0,zd=null,Error(Oe(185));Go(s,a,t),(!(ns&2)||s!==Gs)&&(s===Gs&&(!(ns&2)&&(Il|=a),Vs===4&&Wa(s,Ys)),Er(s,t),a===1&&ns===0&&!(r.mode&1)&&(An=Fs()+500,Pl&&ht()))}function Er(s,r){var a=s.callbackNode;dy(s,r);var t=Ki(s,s===Gs?Ys:0);if(t===0)a!==null&&zm(a),s.callbackNode=null,s.callbackPriority=0;else if(r=t&-t,s.callbackPriority!==r){if(a!=null&&zm(a),r===1)s.tag===0?cb(Pg.bind(null,s)):Y0(Pg.bind(null,s)),nb(function(){!(ns&6)&&ht()}),a=null;else{switch(_0(t)){case 1:a=yu;break;case 4:a=w0;break;case 16:a=Wi;break;case 536870912:a=k0;break;default:a=Wi}a=Kh(a,Bh.bind(null,s))}s.callbackPriority=r,s.callbackNode=a}}function Bh(s,r){if(Fi=-1,Mi=0,ns&6)throw Error(Oe(327));var a=s.callbackNode;if(Nn()&&s.callbackNode!==a)return null;var t=Ki(s,s===Gs?Ys:0);if(t===0)return null;if(t&30||t&s.expiredLanes||r)r=gl(s,t);else{r=t;var n=ns;ns|=2;var o=qh();(Gs!==s||Ys!==r)&&(ja=null,An=Fs()+500,Ot(s,r));do try{Ab();break}catch(l){Vh(s,l)}while(!0);Pu(),dl.current=o,ns=n,zs!==null?r=0:(Gs=null,Ys=0,r=Vs)}if(r!==0){if(r===2&&(n=md(s),n!==0&&(t=n,r=$d(s,n))),r===1)throw a=Bo,Ot(s,0),Wa(s,t),Er(s,Fs()),a;if(r===6)Wa(s,t);else{if(n=s.current.alternate,!(t&30)&&!Cb(n)&&(r=gl(s,t),r===2&&(o=md(s),o!==0&&(t=o,r=$d(s,o))),r===1))throw a=Bo,Ot(s,0),Wa(s,t),Er(s,Fs()),a;switch(s.finishedWork=n,s.finishedLanes=t,r){case 0:case 1:throw Error(Oe(345));case 2:Et(s,br,ja);break;case 3:if(Wa(s,t),(t&130023424)===t&&(r=Gu+500-Fs(),10<r)){if(Ki(s,0)!==0)break;if(n=s.suspendedLanes,(n&t)!==t){mr(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=jd(Et.bind(null,s,br,ja),r);break}Et(s,br,ja);break;case 4:if(Wa(s,t),(t&4194240)===t)break;for(r=s.eventTimes,n=-1;0<t;){var i=31-Yr(t);o=1<<i,i=r[i],i>n&&(n=i),t&=~o}if(t=n,t=Fs()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*Sb(t/1960))-t,10<t){s.timeoutHandle=jd(Et.bind(null,s,br,ja),t);break}Et(s,br,ja);break;case 5:Et(s,br,ja);break;default:throw Error(Oe(329))}}}return Er(s,Fs()),s.callbackNode===a?Bh.bind(null,s):null}function $d(s,r){var a=jo;return s.current.memoizedState.isDehydrated&&(Ot(s,r).flags|=256),s=gl(s,r),s!==2&&(r=br,br=a,r!==null&&Ud(r)),s}function Ud(s){br===null?br=s:br.push.apply(br,s)}function Cb(s){for(var r=s;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var t=0;t<a.length;t++){var n=a[t],o=n.getSnapshot;n=n.value;try{if(!sa(o(),n))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wa(s,r){for(r&=~Hu,r&=~Il,s.suspendedLanes|=r,s.pingedLanes&=~r,s=s.expirationTimes;0<r;){var a=31-Yr(r),t=1<<a;s[a]=-1,r&=~t}}function Pg(s){if(ns&6)throw Error(Oe(327));Nn();var r=Ki(s,0);if(!(r&1))return Er(s,Fs()),null;var a=gl(s,r);if(s.tag!==0&&a===2){var t=md(s);t!==0&&(r=t,a=$d(s,t))}if(a===1)throw a=Bo,Ot(s,0),Wa(s,r),Er(s,Fs()),a;if(a===6)throw Error(Oe(345));return s.finishedWork=s.current.alternate,s.finishedLanes=r,Et(s,br,ja),Er(s,Fs()),null}function Qu(s,r){var a=ns;ns|=1;try{return s(r)}finally{ns=a,ns===0&&(An=Fs()+500,Pl&&ht())}}function Bt(s){Ja!==null&&Ja.tag===0&&!(ns&6)&&Nn();var r=ns;ns|=1;var a=Ur.transition,t=ms;try{if(Ur.transition=null,ms=1,s)return s()}finally{ms=t,Ur.transition=a,ns=r,!(ns&6)&&ht()}}function Wu(){Cr=hn.current,Ns(hn)}function Ot(s,r){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,tb(a)),zs!==null)for(a=zs.return;a!==null;){var t=a;switch(Cu(t),t.tag){case 1:t=t.type.childContextTypes,t!=null&&el();break;case 3:Cn(),Ns(wr),Ns(lr),Mu();break;case 5:Fu(t);break;case 4:Cn();break;case 13:Ns(As);break;case 19:Ns(As);break;case 10:Du(t.type._context);break;case 22:case 23:Wu()}a=a.return}if(Gs=s,zs=s=it(s.current,null),Ys=Cr=r,Vs=0,Bo=null,Hu=Il=Ut=0,br=jo=null,Rt!==null){for(r=0;r<Rt.length;r++)if(a=Rt[r],t=a.interleaved,t!==null){a.interleaved=null;var n=t.next,o=a.pending;if(o!==null){var i=o.next;o.next=n,t.next=i}a.pending=t}Rt=null}return s}function Vh(s,r){do{var a=zs;try{if(Pu(),Ti.current=cl,ll){for(var t=Ps.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}ll=!1}if($t=0,qs=Us=Ps=null,yo=!1,zo=0,qu.current=null,a===null||a.return===null){Vs=1,Bo=r,zs=null;break}e:{var o=s,i=a.return,l=a,d=r;if(r=Ys,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,g=l,h=g.tag;if(!(g.mode&1)&&(h===0||h===11||h===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var k=yg(i);if(k!==null){k.flags&=-257,bg(k,i,l,o,r),k.mode&1&&pg(o,u,r),r=k,d=u;var E=r.updateQueue;if(E===null){var S=new Set;S.add(d),r.updateQueue=S}else E.add(d);break e}else{if(!(r&1)){pg(o,u,r),Ku();break e}d=Error(Oe(426))}}else if(Cs&&l.mode&1){var C=yg(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),bg(C,i,l,o,r),Ru(Rn(d,l));break e}}o=d=Rn(d,l),Vs!==4&&(Vs=2),jo===null?jo=[o]:jo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var b=_h(o,d,r);ug(o,b);break e;case 1:l=d;var p=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(nt===null||!nt.has(N)))){o.flags|=65536,r&=-r,o.lanes|=r;var _=Sh(o,l,r);ug(o,_);break e}}o=o.return}while(o!==null)}Gh(a)}catch(x){r=x,zs===a&&a!==null&&(zs=a=a.return);continue}break}while(!0)}function qh(){var s=dl.current;return dl.current=cl,s===null?cl:s}function Ku(){(Vs===0||Vs===3||Vs===2)&&(Vs=4),Gs===null||!(Ut&268435455)&&!(Il&268435455)||Wa(Gs,Ys)}function gl(s,r){var a=ns;ns|=2;var t=qh();(Gs!==s||Ys!==r)&&(ja=null,Ot(s,r));do try{Rb();break}catch(n){Vh(s,n)}while(!0);if(Pu(),ns=a,dl.current=t,zs!==null)throw Error(Oe(261));return Gs=null,Ys=0,Vs}function Rb(){for(;zs!==null;)Hh(zs)}function Ab(){for(;zs!==null&&!sy();)Hh(zs)}function Hh(s){var r=Wh(s.alternate,s,Cr);s.memoizedProps=s.pendingProps,r===null?Gh(s):zs=r,qu.current=null}function Gh(s){var r=s;do{var a=r.alternate;if(s=r.return,r.flags&32768){if(a=wb(a,r),a!==null){a.flags&=32767,zs=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Vs=6,zs=null;return}}else if(a=Nb(a,r,Cr),a!==null){zs=a;return}if(r=r.sibling,r!==null){zs=r;return}zs=r=s}while(r!==null);Vs===0&&(Vs=5)}function Et(s,r,a){var t=ms,n=Ur.transition;try{Ur.transition=null,ms=1,Pb(s,r,a,t)}finally{Ur.transition=n,ms=t}return null}function Pb(s,r,a,t){do Nn();while(Ja!==null);if(ns&6)throw Error(Oe(327));a=s.finishedWork;var n=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(Oe(177));s.callbackNode=null,s.callbackPriority=0;var o=a.lanes|a.childLanes;if(uy(s,o),s===Gs&&(zs=Gs=null,Ys=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||pi||(pi=!0,Kh(Wi,function(){return Nn(),null})),o=(a.flags&15990)!==0,a.subtreeFlags&15990||o){o=Ur.transition,Ur.transition=null;var i=ms;ms=1;var l=ns;ns|=4,qu.current=null,Eb(s,a),$h(a,s),Yy(yd),Zi=!!pd,yd=pd=null,s.current=a,_b(a),ry(),ns=l,ms=i,Ur.transition=o}else s.current=a;if(pi&&(pi=!1,Ja=s,ml=n),o=s.pendingLanes,o===0&&(nt=null),ny(a.stateNode),Er(s,Fs()),r!==null)for(t=s.onRecoverableError,a=0;a<r.length;a++)n=r[a],t(n.value,{componentStack:n.stack,digest:n.digest});if(ul)throw ul=!1,s=Ld,Ld=null,s;return ml&1&&s.tag!==0&&Nn(),o=s.pendingLanes,o&1?s===zd?vo++:(vo=0,zd=s):vo=0,ht(),null}function Nn(){if(Ja!==null){var s=_0(ml),r=Ur.transition,a=ms;try{if(Ur.transition=null,ms=16>s?16:s,Ja===null)var t=!1;else{if(s=Ja,Ja=null,ml=0,ns&6)throw Error(Oe(331));var n=ns;for(ns|=4,Ve=s.current;Ve!==null;){var o=Ve,i=o.child;if(Ve.flags&16){var l=o.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(Ve=u;Ve!==null;){var g=Ve;switch(g.tag){case 0:case 11:case 15:bo(8,g,o)}var h=g.child;if(h!==null)h.return=g,Ve=h;else for(;Ve!==null;){g=Ve;var y=g.sibling,k=g.return;if(Mh(g),g===u){Ve=null;break}if(y!==null){y.return=k,Ve=y;break}Ve=k}}}var E=o.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}Ve=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ve=i;else e:for(;Ve!==null;){if(o=Ve,o.flags&2048)switch(o.tag){case 0:case 11:case 15:bo(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Ve=b;break e}Ve=o.return}}var p=s.current;for(Ve=p;Ve!==null;){i=Ve;var N=i.child;if(i.subtreeFlags&2064&&N!==null)N.return=i,Ve=N;else e:for(i=p;Ve!==null;){if(l=Ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ol(9,l)}}catch(x){Os(l,l.return,x)}if(l===i){Ve=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Ve=_;break e}Ve=l.return}}if(ns=n,ht(),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(_l,s)}catch{}t=!0}return t}finally{ms=a,Ur.transition=r}}return!1}function Dg(s,r,a){r=Rn(a,r),r=_h(s,r,1),s=tt(s,r,1),r=mr(),s!==null&&(Go(s,1,r),Er(s,r))}function Os(s,r,a){if(s.tag===3)Dg(s,s,a);else for(;r!==null;){if(r.tag===3){Dg(r,s,a);break}else if(r.tag===1){var t=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof t.componentDidCatch=="function"&&(nt===null||!nt.has(t))){s=Rn(a,s),s=Sh(r,s,1),r=tt(r,s,1),s=mr(),r!==null&&(Go(r,1,s),Er(r,s));break}}r=r.return}}function Db(s,r,a){var t=s.pingCache;t!==null&&t.delete(r),r=mr(),s.pingedLanes|=s.suspendedLanes&a,Gs===s&&(Ys&a)===a&&(Vs===4||Vs===3&&(Ys&130023424)===Ys&&500>Fs()-Gu?Ot(s,0):Hu|=a),Er(s,r)}function Qh(s,r){r===0&&(s.mode&1?(r=ii,ii<<=1,!(ii&130023424)&&(ii=4194304)):r=1);var a=mr();s=Ra(s,r),s!==null&&(Go(s,r,a),Er(s,a))}function Tb(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),Qh(s,a)}function Ob(s,r){var a=0;switch(s.tag){case 13:var t=s.stateNode,n=s.memoizedState;n!==null&&(a=n.retryLane);break;case 19:t=s.stateNode;break;default:throw Error(Oe(314))}t!==null&&t.delete(r),Qh(s,a)}var Wh;Wh=function(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps||wr.current)jr=!0;else{if(!(s.lanes&a)&&!(r.flags&128))return jr=!1,vb(s,r,a);jr=!!(s.flags&131072)}else jr=!1,Cs&&r.flags&1048576&&J0(r,al,r.index);switch(r.lanes=0,r.tag){case 2:var t=r.type;Ii(s,r),s=r.pendingProps;var n=En(r,lr.current);vn(r,a),n=zu(null,r,t,s,n,a);var o=$u();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kr(t)?(o=!0,sl(r)):o=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Ou(r),n.updater=Tl,r.stateNode=n,n._reactInternals=r,Sd(r,t,s,a),r=Ad(null,r,t,!0,o,a)):(r.tag=0,Cs&&o&&Su(r),ur(null,r,n,a),r=r.child),r;case 16:t=r.elementType;e:{switch(Ii(s,r),s=r.pendingProps,n=t._init,t=n(t._payload),r.type=t,n=r.tag=Fb(t),s=Qr(t,s),n){case 0:r=Rd(null,r,t,s,a);break e;case 1:r=Ng(null,r,t,s,a);break e;case 11:r=jg(null,r,t,s,a);break e;case 14:r=vg(null,r,t,Qr(t.type,s),a);break e}throw Error(Oe(306,t,""))}return r;case 0:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Qr(t,n),Rd(s,r,t,n,a);case 1:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Qr(t,n),Ng(s,r,t,n,a);case 3:e:{if(Ph(r),s===null)throw Error(Oe(387));t=r.pendingProps,o=r.memoizedState,n=o.element,th(s,r),ol(r,t,null,a);var i=r.memoizedState;if(t=i.element,o.isDehydrated)if(o={element:t,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){n=Rn(Error(Oe(423)),r),r=wg(s,r,t,a,n);break e}else if(t!==n){n=Rn(Error(Oe(424)),r),r=wg(s,r,t,a,n);break e}else for(Pr=at(r.stateNode.containerInfo.firstChild),Dr=r,Cs=!0,Kr=null,a=rh(r,null,t,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_n(),t===n){r=Aa(s,r,a);break e}ur(s,r,t,a)}r=r.child}return r;case 5:return nh(r),s===null&&kd(r),t=r.type,n=r.pendingProps,o=s!==null?s.memoizedProps:null,i=n.children,bd(t,n)?i=null:o!==null&&bd(t,o)&&(r.flags|=32),Ah(s,r),ur(s,r,i,a),r.child;case 6:return s===null&&kd(r),null;case 13:return Dh(s,r,a);case 4:return Iu(r,r.stateNode.containerInfo),t=r.pendingProps,s===null?r.child=Sn(r,null,t,a):ur(s,r,t,a),r.child;case 11:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Qr(t,n),jg(s,r,t,n,a);case 7:return ur(s,r,r.pendingProps,a),r.child;case 8:return ur(s,r,r.pendingProps.children,a),r.child;case 12:return ur(s,r,r.pendingProps.children,a),r.child;case 10:e:{if(t=r.type._context,n=r.pendingProps,o=r.memoizedProps,i=n.value,ps(tl,t._currentValue),t._currentValue=i,o!==null)if(sa(o.value,i)){if(o.children===n.children&&!wr.current){r=Aa(s,r,a);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var d=l.firstContext;d!==null;){if(d.context===t){if(o.tag===1){d=_a(-1,a&-a),d.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}}o.lanes|=a,d=o.alternate,d!==null&&(d.lanes|=a),Ed(o.return,a,r),l.lanes|=a;break}d=d.next}}else if(o.tag===10)i=o.type===r.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Oe(341));i.lanes|=a,l=i.alternate,l!==null&&(l.lanes|=a),Ed(i,a,r),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===r){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ur(s,r,n.children,a),r=r.child}return r;case 9:return n=r.type,t=r.pendingProps.children,vn(r,a),n=Vr(n),t=t(n),r.flags|=1,ur(s,r,t,a),r.child;case 14:return t=r.type,n=Qr(t,r.pendingProps),n=Qr(t.type,n),vg(s,r,t,n,a);case 15:return Ch(s,r,r.type,r.pendingProps,a);case 17:return t=r.type,n=r.pendingProps,n=r.elementType===t?n:Qr(t,n),Ii(s,r),r.tag=1,kr(t)?(s=!0,sl(r)):s=!1,vn(r,a),Eh(r,t,n),Sd(r,t,n,a),Ad(null,r,t,!0,s,a);case 19:return Th(s,r,a);case 22:return Rh(s,r,a)}throw Error(Oe(156,r.tag))};function Kh(s,r){return N0(s,r)}function Ib(s,r,a,t){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(s,r,a,t){return new Ib(s,r,a,t)}function Zu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Fb(s){if(typeof s=="function")return Zu(s)?1:0;if(s!=null){if(s=s.$$typeof,s===hu)return 11;if(s===fu)return 14}return 2}function it(s,r){var a=s.alternate;return a===null?(a=$r(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function Li(s,r,a,t,n,o){var i=2;if(t=s,typeof s=="function")Zu(s)&&(i=1);else if(typeof s=="string")i=5;else e:switch(s){case tn:return It(a.children,n,o,r);case xu:i=8,n|=8;break;case Yc:return s=$r(12,a,r,n|2),s.elementType=Yc,s.lanes=o,s;case Jc:return s=$r(13,a,r,n),s.elementType=Jc,s.lanes=o,s;case Xc:return s=$r(19,a,r,n),s.elementType=Xc,s.lanes=o,s;case n0:return Fl(a,n,o,r);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case a0:i=10;break e;case t0:i=9;break e;case hu:i=11;break e;case fu:i=14;break e;case Ua:i=16,t=null;break e}throw Error(Oe(130,s==null?s:typeof s,""))}return r=$r(i,a,r,n),r.elementType=s,r.type=t,r.lanes=o,r}function It(s,r,a,t){return s=$r(7,s,t,r),s.lanes=a,s}function Fl(s,r,a,t){return s=$r(22,s,t,r),s.elementType=n0,s.lanes=a,s.stateNode={isHidden:!1},s}function Ec(s,r,a){return s=$r(6,s,null,r),s.lanes=a,s}function _c(s,r,a){return r=$r(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}function Mb(s,r,a,t,n){this.tag=r,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oc(0),this.expirationTimes=oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.identifierPrefix=t,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Yu(s,r,a,t,n,o,i,l,d){return s=new Mb(s,r,a,l,d),r===1?(r=1,o===!0&&(r|=8)):r=0,o=$r(3,null,null,r),s.current=o,o.stateNode=s,o.memoizedState={element:t,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ou(o),s}function Lb(s,r,a){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:an,key:t==null?null:""+t,children:s,containerInfo:r,implementation:a}}function Zh(s){if(!s)return ut;s=s._reactInternals;e:{if(Qt(s)!==s||s.tag!==1)throw Error(Oe(170));var r=s;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(kr(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Oe(171))}if(s.tag===1){var a=s.type;if(kr(a))return Z0(s,a,r)}return r}function Yh(s,r,a,t,n,o,i,l,d){return s=Yu(a,t,!0,s,n,o,i,l,d),s.context=Zh(null),a=s.current,t=mr(),n=ot(a),o=_a(t,n),o.callback=r??null,tt(a,o,n),s.current.lanes=n,Go(s,n,t),Er(s,t),s}function Ml(s,r,a,t){var n=r.current,o=mr(),i=ot(n);return a=Zh(a),r.context===null?r.context=a:r.pendingContext=a,r=_a(o,i),r.payload={element:s},t=t===void 0?null:t,t!==null&&(r.callback=t),s=tt(n,r,i),s!==null&&(Jr(s,n,i,o),Di(s,n,i)),i}function xl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Tg(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function Ju(s,r){Tg(s,r),(s=s.alternate)&&Tg(s,r)}function zb(){return null}var Jh=typeof reportError=="function"?reportError:function(s){console.error(s)};function Xu(s){this._internalRoot=s}Ll.prototype.render=Xu.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(Oe(409));Ml(s,r,null,null)};Ll.prototype.unmount=Xu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Bt(function(){Ml(null,s,null,null)}),r[Ca]=null}};function Ll(s){this._internalRoot=s}Ll.prototype.unstable_scheduleHydration=function(s){if(s){var r=R0();s={blockedOn:null,target:s,priority:r};for(var a=0;a<Qa.length&&r!==0&&r<Qa[a].priority;a++);Qa.splice(a,0,s),a===0&&P0(s)}};function em(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function zl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Og(){}function $b(s,r,a,t,n){if(n){if(typeof t=="function"){var o=t;t=function(){var u=xl(i);o.call(u)}}var i=Yh(r,t,s,0,null,!1,!1,"",Og);return s._reactRootContainer=i,s[Ca]=i.current,Oo(s.nodeType===8?s.parentNode:s),Bt(),i}for(;n=s.lastChild;)s.removeChild(n);if(typeof t=="function"){var l=t;t=function(){var u=xl(d);l.call(u)}}var d=Yu(s,0,!1,null,null,!1,!1,"",Og);return s._reactRootContainer=d,s[Ca]=d.current,Oo(s.nodeType===8?s.parentNode:s),Bt(function(){Ml(r,d,a,t)}),d}function $l(s,r,a,t,n){var o=a._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var l=n;n=function(){var d=xl(i);l.call(d)}}Ml(r,i,s,n)}else i=$b(a,r,s,n,t);return xl(i)}S0=function(s){switch(s.tag){case 3:var r=s.stateNode;if(r.current.memoizedState.isDehydrated){var a=uo(r.pendingLanes);a!==0&&(bu(r,a|1),Er(r,Fs()),!(ns&6)&&(An=Fs()+500,ht()))}break;case 13:Bt(function(){var t=Ra(s,1);if(t!==null){var n=mr();Jr(t,s,1,n)}}),Ju(s,1)}};ju=function(s){if(s.tag===13){var r=Ra(s,134217728);if(r!==null){var a=mr();Jr(r,s,134217728,a)}Ju(s,134217728)}};C0=function(s){if(s.tag===13){var r=ot(s),a=Ra(s,r);if(a!==null){var t=mr();Jr(a,s,r,t)}Ju(s,r)}};R0=function(){return ms};A0=function(s,r){var a=ms;try{return ms=s,r()}finally{ms=a}};cd=function(s,r,a){switch(r){case"input":if(rd(s,a),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var t=a[r];if(t!==s&&t.form===s.form){var n=Al(t);if(!n)throw Error(Oe(90));i0(t),rd(t,n)}}}break;case"textarea":c0(s,a);break;case"select":r=a.value,r!=null&&pn(s,!!a.multiple,r,!1)}};f0=Qu;p0=Bt;var Ub={usingClientEntryPoint:!1,Events:[Wo,cn,Al,x0,h0,Qu]},Zn={findFiberByHostInstance:Ct,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bb={bundleType:Zn.bundleType,version:Zn.version,rendererPackageName:Zn.rendererPackageName,rendererConfig:Zn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=j0(s),s===null?null:s.stateNode},findFiberByHostInstance:Zn.findFiberByHostInstance||zb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{_l=yi.inject(Bb),ua=yi}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ub;Ir.createPortal=function(s,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(r))throw Error(Oe(200));return Lb(s,r,null,a)};Ir.createRoot=function(s,r){if(!em(s))throw Error(Oe(299));var a=!1,t="",n=Jh;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(t=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=Yu(s,1,!1,null,null,a,!1,t,n),s[Ca]=r.current,Oo(s.nodeType===8?s.parentNode:s),new Xu(r)};Ir.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(Oe(188)):(s=Object.keys(s).join(","),Error(Oe(268,s)));return s=j0(r),s=s===null?null:s.stateNode,s};Ir.flushSync=function(s){return Bt(s)};Ir.hydrate=function(s,r,a){if(!zl(r))throw Error(Oe(200));return $l(null,s,r,!0,a)};Ir.hydrateRoot=function(s,r,a){if(!em(s))throw Error(Oe(405));var t=a!=null&&a.hydratedSources||null,n=!1,o="",i=Jh;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),r=Yh(r,null,s,1,a??null,n,!1,o,i),s[Ca]=r.current,Oo(s),t)for(s=0;s<t.length;s++)a=t[s],n=a._getVersion,n=n(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,n]:r.mutableSourceEagerHydrationData.push(a,n);return new Ll(r)};Ir.render=function(s,r,a){if(!zl(r))throw Error(Oe(200));return $l(null,s,r,!1,a)};Ir.unmountComponentAtNode=function(s){if(!zl(s))throw Error(Oe(40));return s._reactRootContainer?(Bt(function(){$l(null,null,s,!1,function(){s._reactRootContainer=null,s[Ca]=null})}),!0):!1};Ir.unstable_batchedUpdates=Qu;Ir.unstable_renderSubtreeIntoContainer=function(s,r,a,t){if(!zl(a))throw Error(Oe(200));if(s==null||s._reactInternals===void 0)throw Error(Oe(38));return $l(s,r,a,!1,t)};Ir.version="18.3.1-next-f1338f8080-20240426";function Xh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xh)}catch(s){console.error(s)}}Xh(),Xx.exports=Ir;var sm=Xx.exports;const Vb=Ux(sm);var Ig=sm;Kc.createRoot=Ig.createRoot,Kc.hydrateRoot=Ig.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Vo.apply(this,arguments)}var Xa;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Xa||(Xa={}));const Fg="popstate";function qb(s){s===void 0&&(s={});function r(t,n){let{pathname:o,search:i,hash:l}=t.location;return Bd("",{pathname:o,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(t,n){return typeof n=="string"?n:hl(n)}return Gb(r,a,null,s)}function Ms(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function ef(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Hb(){return Math.random().toString(36).substr(2,8)}function Mg(s,r){return{usr:s.state,key:s.key,idx:r}}function Bd(s,r,a,t){return a===void 0&&(a=null),Vo({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof r=="string"?Ln(r):r,{state:a,key:r&&r.key||t||Hb()})}function hl(s){let{pathname:r="/",search:a="",hash:t=""}=s;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ln(s){let r={};if(s){let a=s.indexOf("#");a>=0&&(r.hash=s.substr(a),s=s.substr(0,a));let t=s.indexOf("?");t>=0&&(r.search=s.substr(t),s=s.substr(0,t)),s&&(r.pathname=s)}return r}function Gb(s,r,a,t){t===void 0&&(t={});let{window:n=document.defaultView,v5Compat:o=!1}=t,i=n.history,l=Xa.Pop,d=null,u=g();u==null&&(u=0,i.replaceState(Vo({},i.state,{idx:u}),""));function g(){return(i.state||{idx:null}).idx}function h(){l=Xa.Pop;let C=g(),b=C==null?null:C-u;u=C,d&&d({action:l,location:S.location,delta:b})}function y(C,b){l=Xa.Push;let p=Bd(S.location,C,b);u=g()+1;let N=Mg(p,u),_=S.createHref(p);try{i.pushState(N,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;n.location.assign(_)}o&&d&&d({action:l,location:S.location,delta:1})}function k(C,b){l=Xa.Replace;let p=Bd(S.location,C,b);u=g();let N=Mg(p,u),_=S.createHref(p);i.replaceState(N,"",_),o&&d&&d({action:l,location:S.location,delta:0})}function E(C){let b=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof C=="string"?C:hl(C);return p=p.replace(/ $/,"%20"),Ms(b,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,b)}let S={get action(){return l},get location(){return s(n,i)},listen(C){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Fg,h),d=C,()=>{n.removeEventListener(Fg,h),d=null}},createHref(C){return r(n,C)},createURL:E,encodeLocation(C){let b=E(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:y,replace:k,go(C){return i.go(C)}};return S}var Lg;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Lg||(Lg={}));function Qb(s,r,a){return a===void 0&&(a="/"),Wb(s,r,a)}function Wb(s,r,a,t){let n=typeof r=="string"?Ln(r):r,o=rm(n.pathname||"/",a);if(o==null)return null;let i=sf(s);Kb(i);let l=null;for(let d=0;l==null&&d<i.length;++d){let u=ij(o);l=tj(i[d],u)}return l}function sf(s,r,a,t){r===void 0&&(r=[]),a===void 0&&(a=[]),t===void 0&&(t="");let n=(o,i,l)=>{let d={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};d.relativePath.startsWith("/")&&(Ms(d.relativePath.startsWith(t),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(t.length));let u=lt([t,d.relativePath]),g=a.concat(d);o.children&&o.children.length>0&&(Ms(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sf(o.children,r,g,u)),!(o.path==null&&!o.index)&&r.push({path:u,score:rj(u,o.index),routesMeta:g})};return s.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let d of rf(o.path))n(o,i,d)}),r}function rf(s){let r=s.split("/");if(r.length===0)return[];let[a,...t]=r,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(t.length===0)return n?[o,""]:[o];let i=rf(t.join("/")),l=[];return l.push(...i.map(d=>d===""?o:[o,d].join("/"))),n&&l.push(...i),l.map(d=>s.startsWith("/")&&d===""?"/":d)}function Kb(s){s.sort((r,a)=>r.score!==a.score?a.score-r.score:aj(r.routesMeta.map(t=>t.childrenIndex),a.routesMeta.map(t=>t.childrenIndex)))}const Zb=/^:[\w-]+$/,Yb=3,Jb=2,Xb=1,ej=10,sj=-2,zg=s=>s==="*";function rj(s,r){let a=s.split("/"),t=a.length;return a.some(zg)&&(t+=sj),r&&(t+=Jb),a.filter(n=>!zg(n)).reduce((n,o)=>n+(Zb.test(o)?Yb:o===""?Xb:ej),t)}function aj(s,r){return s.length===r.length&&s.slice(0,-1).every((t,n)=>t===r[n])?s[s.length-1]-r[r.length-1]:0}function tj(s,r,a){let{routesMeta:t}=s,n={},o="/",i=[];for(let l=0;l<t.length;++l){let d=t[l],u=l===t.length-1,g=o==="/"?r:r.slice(o.length)||"/",h=nj({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},g),y=d.route;if(!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:lt([o,h.pathname]),pathnameBase:uj(lt([o,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(o=lt([o,h.pathnameBase]))}return i}function nj(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,t]=oj(s.path,s.caseSensitive,s.end),n=r.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:t.reduce((u,g,h)=>{let{paramName:y,isOptional:k}=g;if(y==="*"){let S=l[h]||"";i=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const E=l[h];return k&&!E?u[y]=void 0:u[y]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:s}}function oj(s,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),ef(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let t=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,d)=>(t.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(t.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),t]}function ij(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return ef(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),s}}function rm(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,t=s.charAt(a);return t&&t!=="/"?null:s.slice(a)||"/"}function lj(s,r){r===void 0&&(r="/");let{pathname:a,search:t="",hash:n=""}=typeof s=="string"?Ln(s):s;return{pathname:a?a.startsWith("/")?a:cj(a,r):r,search:mj(t),hash:gj(n)}}function cj(s,r){let a=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Sc(s,r,a,t){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dj(s){return s.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function am(s,r){let a=dj(s);return r?a.map((t,n)=>n===a.length-1?t.pathname:t.pathnameBase):a.map(t=>t.pathnameBase)}function tm(s,r,a,t){t===void 0&&(t=!1);let n;typeof s=="string"?n=Ln(s):(n=Vo({},s),Ms(!n.pathname||!n.pathname.includes("?"),Sc("?","pathname","search",n)),Ms(!n.pathname||!n.pathname.includes("#"),Sc("#","pathname","hash",n)),Ms(!n.search||!n.search.includes("#"),Sc("#","search","hash",n)));let o=s===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let h=r.length-1;if(!t&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),h-=1;n.pathname=y.join("/")}l=h>=0?r[h]:"/"}let d=lj(n,l),u=i&&i!=="/"&&i.endsWith("/"),g=(o||i===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(u||g)&&(d.pathname+="/"),d}const lt=s=>s.join("/").replace(/\/\/+/g,"/"),uj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),mj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,gj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function xj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const af=["post","put","patch","delete"];new Set(af);const hj=["get",...af];new Set(hj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},qo.apply(this,arguments)}const nm=c.createContext(null),fj=c.createContext(null),ft=c.createContext(null),Ul=c.createContext(null),ha=c.createContext({outlet:null,matches:[],isDataRoute:!1}),tf=c.createContext(null);function pj(s,r){let{relative:a}=r===void 0?{}:r;zn()||Ms(!1);let{basename:t,navigator:n}=c.useContext(ft),{hash:o,pathname:i,search:l}=of(s,{relative:a}),d=i;return t!=="/"&&(d=i==="/"?t:lt([t,i])),n.createHref({pathname:d,search:l,hash:o})}function zn(){return c.useContext(Ul)!=null}function Oa(){return zn()||Ms(!1),c.useContext(Ul).location}function nf(s){c.useContext(ft).static||c.useLayoutEffect(s)}function pr(){let{isDataRoute:s}=c.useContext(ha);return s?Tj():yj()}function yj(){zn()||Ms(!1);let s=c.useContext(nm),{basename:r,future:a,navigator:t}=c.useContext(ft),{matches:n}=c.useContext(ha),{pathname:o}=Oa(),i=JSON.stringify(am(n,a.v7_relativeSplatPath)),l=c.useRef(!1);return nf(()=>{l.current=!0}),c.useCallback(function(u,g){if(g===void 0&&(g={}),!l.current)return;if(typeof u=="number"){t.go(u);return}let h=tm(u,JSON.parse(i),o,g.relative==="path");s==null&&r!=="/"&&(h.pathname=h.pathname==="/"?r:lt([r,h.pathname])),(g.replace?t.replace:t.push)(h,g.state,g)},[r,t,i,o,s])}const bj=c.createContext(null);function jj(s){let r=c.useContext(ha).outlet;return r&&c.createElement(bj.Provider,{value:s},r)}function vj(){let{matches:s}=c.useContext(ha),r=s[s.length-1];return r?r.params:{}}function of(s,r){let{relative:a}=r===void 0?{}:r,{future:t}=c.useContext(ft),{matches:n}=c.useContext(ha),{pathname:o}=Oa(),i=JSON.stringify(am(n,t.v7_relativeSplatPath));return c.useMemo(()=>tm(s,JSON.parse(i),o,a==="path"),[s,i,o,a])}function Nj(s,r){return wj(s,r)}function wj(s,r,a,t){zn()||Ms(!1);let{navigator:n}=c.useContext(ft),{matches:o}=c.useContext(ha),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let u=Oa(),g;if(r){var h;let C=typeof r=="string"?Ln(r):r;d==="/"||(h=C.pathname)!=null&&h.startsWith(d)||Ms(!1),g=C}else g=u;let y=g.pathname||"/",k=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");k="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=Qb(s,{pathname:k}),S=Cj(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:lt([d,n.encodeLocation?n.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:lt([d,n.encodeLocation?n.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,a,t);return r&&S?c.createElement(Ul.Provider,{value:{location:qo({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Xa.Pop}},S):S}function kj(){let s=Dj(),r=xj(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},r),a?c.createElement("pre",{style:n},a):null,null)}const Ej=c.createElement(kj,null);class _j extends c.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?c.createElement(ha.Provider,{value:this.props.routeContext},c.createElement(tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sj(s){let{routeContext:r,match:a,children:t}=s,n=c.useContext(nm);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),c.createElement(ha.Provider,{value:r},t)}function Cj(s,r,a,t){var n;if(r===void 0&&(r=[]),a===void 0&&(a=null),t===void 0&&(t=null),s==null){var o;if(!a)return null;if(a.errors)s=a.matches;else if((o=t)!=null&&o.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let i=s,l=(n=a)==null?void 0:n.errors;if(l!=null){let g=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);g>=0||Ms(!1),i=i.slice(0,Math.min(i.length,g+1))}let d=!1,u=-1;if(a&&t&&t.v7_partialHydration)for(let g=0;g<i.length;g++){let h=i[g];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=g),h.route.id){let{loaderData:y,errors:k}=a,E=h.route.loader&&y[h.route.id]===void 0&&(!k||k[h.route.id]===void 0);if(h.route.lazy||E){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((g,h,y)=>{let k,E=!1,S=null,C=null;a&&(k=l&&h.route.id?l[h.route.id]:void 0,S=h.route.errorElement||Ej,d&&(u<0&&y===0?(Oj("route-fallback"),E=!0,C=null):u===y&&(E=!0,C=h.route.hydrateFallbackElement||null)));let b=r.concat(i.slice(0,y+1)),p=()=>{let N;return k?N=S:E?N=C:h.route.Component?N=c.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=g,c.createElement(Sj,{match:h,routeContext:{outlet:g,matches:b,isDataRoute:a!=null},children:N})};return a&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?c.createElement(_j,{location:a.location,revalidation:a.revalidation,component:S,error:k,children:p(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):p()},null)}var lf=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(lf||{}),cf=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(cf||{});function Rj(s){let r=c.useContext(nm);return r||Ms(!1),r}function Aj(s){let r=c.useContext(fj);return r||Ms(!1),r}function Pj(s){let r=c.useContext(ha);return r||Ms(!1),r}function df(s){let r=Pj(),a=r.matches[r.matches.length-1];return a.route.id||Ms(!1),a.route.id}function Dj(){var s;let r=c.useContext(tf),a=Aj(),t=df();return r!==void 0?r:(s=a.errors)==null?void 0:s[t]}function Tj(){let{router:s}=Rj(lf.UseNavigateStable),r=df(cf.UseNavigateStable),a=c.useRef(!1);return nf(()=>{a.current=!0}),c.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,qo({fromRouteId:r},o)))},[s,r])}const $g={};function Oj(s,r,a){$g[s]||($g[s]=!0)}function Ij(s,r){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function js(s){let{to:r,replace:a,state:t,relative:n}=s;zn()||Ms(!1);let{future:o,static:i}=c.useContext(ft),{matches:l}=c.useContext(ha),{pathname:d}=Oa(),u=pr(),g=tm(r,am(l,o.v7_relativeSplatPath),d,n==="path"),h=JSON.stringify(g);return c.useEffect(()=>u(JSON.parse(h),{replace:a,state:t,relative:n}),[u,h,n,a,t]),null}function Fj(s){return jj(s.context)}function ze(s){Ms(!1)}function Mj(s){let{basename:r="/",children:a=null,location:t,navigationType:n=Xa.Pop,navigator:o,static:i=!1,future:l}=s;zn()&&Ms(!1);let d=r.replace(/^\/*/,"/"),u=c.useMemo(()=>({basename:d,navigator:o,static:i,future:qo({v7_relativeSplatPath:!1},l)}),[d,l,o,i]);typeof t=="string"&&(t=Ln(t));let{pathname:g="/",search:h="",hash:y="",state:k=null,key:E="default"}=t,S=c.useMemo(()=>{let C=rm(g,d);return C==null?null:{location:{pathname:C,search:h,hash:y,state:k,key:E},navigationType:n}},[d,g,h,y,k,E,n]);return S==null?null:c.createElement(ft.Provider,{value:u},c.createElement(Ul.Provider,{children:a,value:S}))}function Lj(s){let{children:r,location:a}=s;return Nj(Vd(r),a)}new Promise(()=>{});function Vd(s,r){r===void 0&&(r=[]);let a=[];return c.Children.forEach(s,(t,n)=>{if(!c.isValidElement(t))return;let o=[...r,n];if(t.type===c.Fragment){a.push.apply(a,Vd(t.props.children,o));return}t.type!==ze&&Ms(!1),!t.props.index||!t.props.children||Ms(!1);let i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Vd(t.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(){return qd=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},qd.apply(this,arguments)}function zj(s,r){if(s==null)return{};var a={},t=Object.keys(s),n,o;for(o=0;o<t.length;o++)n=t[o],!(r.indexOf(n)>=0)&&(a[n]=s[n]);return a}function $j(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Uj(s,r){return s.button===0&&(!r||r==="_self")&&!$j(s)}const Bj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vj="6";try{window.__reactRouterVersion=Vj}catch{}const qj="startTransition",Ug=Dp[qj];function Hj(s){let{basename:r,children:a,future:t,window:n}=s,o=c.useRef();o.current==null&&(o.current=qb({window:n,v5Compat:!0}));let i=o.current,[l,d]=c.useState({action:i.action,location:i.location}),{v7_startTransition:u}=t||{},g=c.useCallback(h=>{u&&Ug?Ug(()=>d(h)):d(h)},[d,u]);return c.useLayoutEffect(()=>i.listen(g),[i,g]),c.useEffect(()=>Ij(t),[t]),c.createElement(Mj,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i,future:t})}const Gj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hs=c.forwardRef(function(r,a){let{onClick:t,relative:n,reloadDocument:o,replace:i,state:l,target:d,to:u,preventScrollReset:g,viewTransition:h}=r,y=zj(r,Bj),{basename:k}=c.useContext(ft),E,S=!1;if(typeof u=="string"&&Qj.test(u)&&(E=u,Gj))try{let N=new URL(window.location.href),_=u.startsWith("//")?new URL(N.protocol+u):new URL(u),x=rm(_.pathname,k);_.origin===N.origin&&x!=null?u=x+_.search+_.hash:S=!0}catch{}let C=pj(u,{relative:n}),b=Wj(u,{replace:i,state:l,target:d,preventScrollReset:g,relative:n,viewTransition:h});function p(N){t&&t(N),N.defaultPrevented||b(N)}return c.createElement("a",qd({},y,{href:E||C,onClick:S||o?t:p,ref:a,target:d}))});var Bg;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var Vg;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Vg||(Vg={}));function Wj(s,r){let{target:a,replace:t,state:n,preventScrollReset:o,relative:i,viewTransition:l}=r===void 0?{}:r,d=pr(),u=Oa(),g=of(s,{relative:i});return c.useCallback(h=>{if(Uj(h,a)){h.preventDefault();let y=t!==void 0?t:hl(u)===hl(g);d(s,{replace:y,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[u,d,g,t,n,a,s,o,i,l])}function Hd(s,r){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},Hd(s,r)}function Bl(s,r){s.prototype=Object.create(r.prototype),s.prototype.constructor=s,Hd(s,r)}var Vl=function(){function s(){this.listeners=[]}var r=s.prototype;return r.subscribe=function(t){var n=this,o=t||function(){};return this.listeners.push(o),this.onSubscribe(),function(){n.listeners=n.listeners.filter(function(i){return i!==o}),n.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},s}();function us(){return us=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)({}).hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},us.apply(null,arguments)}var uf=typeof window>"u";function cr(){}function Kj(s,r){return typeof s=="function"?s(r):s}function Zj(s){return typeof s=="number"&&s>=0&&s!==1/0}function fl(s){return Array.isArray(s)?s:[s]}function Yj(s,r){return Math.max(s+(r||0)-Date.now(),0)}function Cc(s,r,a){return ql(s)?typeof r=="function"?us({},a,{queryKey:s,queryFn:r}):us({},r,{queryKey:s}):s}function Va(s,r,a){return ql(s)?[us({},r,{queryKey:s}),a]:[s||{},r]}function Jj(s,r){if(s===!0&&r===!0||s==null&&r==null)return"all";if(s===!1&&r===!1)return"none";var a=s??!r;return a?"active":"inactive"}function qg(s,r){var a=s.active,t=s.exact,n=s.fetching,o=s.inactive,i=s.predicate,l=s.queryKey,d=s.stale;if(ql(l)){if(t){if(r.queryHash!==om(l,r.options))return!1}else if(!pl(r.queryKey,l))return!1}var u=Jj(a,o);if(u==="none")return!1;if(u!=="all"){var g=r.isActive();if(u==="active"&&!g||u==="inactive"&&g)return!1}return!(typeof d=="boolean"&&r.isStale()!==d||typeof n=="boolean"&&r.isFetching()!==n||i&&!i(r))}function Hg(s,r){var a=s.exact,t=s.fetching,n=s.predicate,o=s.mutationKey;if(ql(o)){if(!r.options.mutationKey)return!1;if(a){if(Pt(r.options.mutationKey)!==Pt(o))return!1}else if(!pl(r.options.mutationKey,o))return!1}return!(typeof t=="boolean"&&r.state.status==="loading"!==t||n&&!n(r))}function om(s,r){var a=(r==null?void 0:r.queryKeyHashFn)||Pt;return a(s)}function Pt(s){var r=fl(s);return Xj(r)}function Xj(s){return JSON.stringify(s,function(r,a){return Gd(a)?Object.keys(a).sort().reduce(function(t,n){return t[n]=a[n],t},{}):a})}function pl(s,r){return mf(fl(s),fl(r))}function mf(s,r){return s===r?!0:typeof s!=typeof r?!1:s&&r&&typeof s=="object"&&typeof r=="object"?!Object.keys(r).some(function(a){return!mf(s[a],r[a])}):!1}function gf(s,r){if(s===r)return s;var a=Array.isArray(s)&&Array.isArray(r);if(a||Gd(s)&&Gd(r)){for(var t=a?s.length:Object.keys(s).length,n=a?r:Object.keys(r),o=n.length,i=a?[]:{},l=0,d=0;d<o;d++){var u=a?d:n[d];i[u]=gf(s[u],r[u]),i[u]===s[u]&&l++}return t===o&&l===t?s:i}return r}function Gd(s){if(!Gg(s))return!1;var r=s.constructor;if(typeof r>"u")return!0;var a=r.prototype;return!(!Gg(a)||!a.hasOwnProperty("isPrototypeOf"))}function Gg(s){return Object.prototype.toString.call(s)==="[object Object]"}function ql(s){return typeof s=="string"||Array.isArray(s)}function ev(s){return new Promise(function(r){setTimeout(r,s)})}function Qg(s){Promise.resolve().then(s).catch(function(r){return setTimeout(function(){throw r})})}function xf(){if(typeof AbortController=="function")return new AbortController}var sv=function(s){Bl(r,s);function r(){var t;return t=s.call(this)||this,t.setup=function(n){var o;if(!uf&&((o=window)!=null&&o.addEventListener)){var i=function(){return n()};return window.addEventListener("visibilitychange",i,!1),window.addEventListener("focus",i,!1),function(){window.removeEventListener("visibilitychange",i),window.removeEventListener("focus",i)}}},t}var a=r.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}},a.setEventListener=function(n){var o,i=this;this.setup=n,(o=this.cleanup)==null||o.call(this),this.cleanup=n(function(l){typeof l=="boolean"?i.setFocused(l):i.onFocus()})},a.setFocused=function(n){this.focused=n,n&&this.onFocus()},a.onFocus=function(){this.listeners.forEach(function(n){n()})},a.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(Vl),zi=new sv,rv=function(s){Bl(r,s);function r(){var t;return t=s.call(this)||this,t.setup=function(n){var o;if(!uf&&((o=window)!=null&&o.addEventListener)){var i=function(){return n()};return window.addEventListener("online",i,!1),window.addEventListener("offline",i,!1),function(){window.removeEventListener("online",i),window.removeEventListener("offline",i)}}},t}var a=r.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}},a.setEventListener=function(n){var o,i=this;this.setup=n,(o=this.cleanup)==null||o.call(this),this.cleanup=n(function(l){typeof l=="boolean"?i.setOnline(l):i.onOnline()})},a.setOnline=function(n){this.online=n,n&&this.onOnline()},a.onOnline=function(){this.listeners.forEach(function(n){n()})},a.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(Vl),$i=new rv;function av(s){return Math.min(1e3*Math.pow(2,s),3e4)}function yl(s){return typeof(s==null?void 0:s.cancel)=="function"}var hf=function(r){this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent};function Rc(s){return s instanceof hf}var ff=function(r){var a=this,t=!1,n,o,i,l;this.abort=r.abort,this.cancel=function(y){return n==null?void 0:n(y)},this.cancelRetry=function(){t=!0},this.continueRetry=function(){t=!1},this.continue=function(){return o==null?void 0:o()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(y,k){i=y,l=k});var d=function(k){a.isResolved||(a.isResolved=!0,r.onSuccess==null||r.onSuccess(k),o==null||o(),i(k))},u=function(k){a.isResolved||(a.isResolved=!0,r.onError==null||r.onError(k),o==null||o(),l(k))},g=function(){return new Promise(function(k){o=k,a.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){o=void 0,a.isPaused=!1,r.onContinue==null||r.onContinue()})},h=function y(){if(!a.isResolved){var k;try{k=r.fn()}catch(E){k=Promise.reject(E)}n=function(S){if(!a.isResolved&&(u(new hf(S)),a.abort==null||a.abort(),yl(k)))try{k.cancel()}catch{}},a.isTransportCancelable=yl(k),Promise.resolve(k).then(d).catch(function(E){var S,C;if(!a.isResolved){var b=(S=r.retry)!=null?S:3,p=(C=r.retryDelay)!=null?C:av,N=typeof p=="function"?p(a.failureCount,E):p,_=b===!0||typeof b=="number"&&a.failureCount<b||typeof b=="function"&&b(a.failureCount,E);if(t||!_){u(E);return}a.failureCount++,r.onFail==null||r.onFail(a.failureCount,E),ev(N).then(function(){if(!zi.isFocused()||!$i.isOnline())return g()}).then(function(){t?u(E):y()})}})}};h()},tv=function(){function s(){this.queue=[],this.transactions=0,this.notifyFn=function(a){a()},this.batchNotifyFn=function(a){a()}}var r=s.prototype;return r.batch=function(t){var n;this.transactions++;try{n=t()}finally{this.transactions--,this.transactions||this.flush()}return n},r.schedule=function(t){var n=this;this.transactions?this.queue.push(t):Qg(function(){n.notifyFn(t)})},r.batchCalls=function(t){var n=this;return function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];n.schedule(function(){t.apply(void 0,i)})}},r.flush=function(){var t=this,n=this.queue;this.queue=[],n.length&&Qg(function(){t.batchNotifyFn(function(){n.forEach(function(o){t.notifyFn(o)})})})},r.setNotifyFunction=function(t){this.notifyFn=t},r.setBatchNotifyFunction=function(t){this.batchNotifyFn=t},s}(),Ks=new tv,pf=console;function yf(){return pf}function nv(s){pf=s}var ov=function(){function s(a){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.cache=a.cache,this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.initialState=a.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=a.meta,this.scheduleGc()}var r=s.prototype;return r.setOptions=function(t){var n;this.options=us({},this.defaultOptions,t),this.meta=t==null?void 0:t.meta,this.cacheTime=Math.max(this.cacheTime||0,(n=this.options.cacheTime)!=null?n:5*60*1e3)},r.setDefaultOptions=function(t){this.defaultOptions=t},r.scheduleGc=function(){var t=this;this.clearGcTimeout(),Zj(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){t.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(t,n){var o,i,l=this.state.data,d=Kj(t,l);return(o=(i=this.options).isDataEqual)!=null&&o.call(i,l,d)?d=l:this.options.structuralSharing!==!1&&(d=gf(l,d)),this.dispatch({data:d,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt}),d},r.setState=function(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})},r.cancel=function(t){var n,o=this.promise;return(n=this.retryer)==null||n.cancel(t),o?o.then(cr).catch(cr):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(t){return t.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(t){return t.getCurrentResult().isStale})},r.isStaleByTime=function(t){return t===void 0&&(t=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Yj(this.state.dataUpdatedAt,t)},r.onFocus=function(){var t,n=this.observers.find(function(o){return o.shouldFetchOnWindowFocus()});n&&n.refetch(),(t=this.retryer)==null||t.continue()},r.onOnline=function(){var t,n=this.observers.find(function(o){return o.shouldFetchOnReconnect()});n&&n.refetch(),(t=this.retryer)==null||t.continue()},r.addObserver=function(t){this.observers.indexOf(t)===-1&&(this.observers.push(t),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))},r.removeObserver=function(t){this.observers.indexOf(t)!==-1&&(this.observers=this.observers.filter(function(n){return n!==t}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:t}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(t,n){var o=this,i,l,d;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){var g=this.observers.find(function(p){return p.options.queryFn});g&&this.setOptions(g.options)}var h=fl(this.queryKey),y=xf(),k={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(k,"signal",{enumerable:!0,get:function(){if(y)return o.abortSignalConsumed=!0,y.signal}});var E=function(){return o.options.queryFn?(o.abortSignalConsumed=!1,o.options.queryFn(k)):Promise.reject("Missing queryFn")},S={fetchOptions:n,options:this.options,queryKey:h,state:this.state,fetchFn:E,meta:this.meta};if((i=this.options.behavior)!=null&&i.onFetch){var C;(C=this.options.behavior)==null||C.onFetch(S)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=S.fetchOptions)==null?void 0:l.meta)){var b;this.dispatch({type:"fetch",meta:(b=S.fetchOptions)==null?void 0:b.meta})}return this.retryer=new ff({fn:S.fetchFn,abort:y==null||(d=y.abort)==null?void 0:d.bind(y),onSuccess:function(N){o.setData(N),o.cache.config.onSuccess==null||o.cache.config.onSuccess(N,o),o.cacheTime===0&&o.optionalRemove()},onError:function(N){Rc(N)&&N.silent||o.dispatch({type:"error",error:N}),Rc(N)||(o.cache.config.onError==null||o.cache.config.onError(N,o),yf().error(N)),o.cacheTime===0&&o.optionalRemove()},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:S.options.retry,retryDelay:S.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(t){var n=this;this.state=this.reducer(this.state,t),Ks.batch(function(){n.observers.forEach(function(o){o.onQueryUpdate(t)}),n.cache.notify({query:n,type:"queryUpdated",action:t})})},r.getDefaultState=function(t){var n=typeof t.initialData=="function"?t.initialData():t.initialData,o=typeof t.initialData<"u",i=o?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,l=typeof n<"u";return{data:n,dataUpdateCount:0,dataUpdatedAt:l?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},r.reducer=function(t,n){var o,i;switch(n.type){case"failed":return us({},t,{fetchFailureCount:t.fetchFailureCount+1});case"pause":return us({},t,{isPaused:!0});case"continue":return us({},t,{isPaused:!1});case"fetch":return us({},t,{fetchFailureCount:0,fetchMeta:(o=n.meta)!=null?o:null,isFetching:!0,isPaused:!1},!t.dataUpdatedAt&&{error:null,status:"loading"});case"success":return us({},t,{data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(i=n.dataUpdatedAt)!=null?i:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=n.error;return Rc(l)&&l.revert&&this.revertState?us({},this.revertState):us({},t,{error:l,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return us({},t,{isInvalidated:!0});case"setState":return us({},t,n.state);default:return t}},s}(),iv=function(s){Bl(r,s);function r(t){var n;return n=s.call(this)||this,n.config=t||{},n.queries=[],n.queriesMap={},n}var a=r.prototype;return a.build=function(n,o,i){var l,d=o.queryKey,u=(l=o.queryHash)!=null?l:om(d,o),g=this.get(u);return g||(g=new ov({cache:this,queryKey:d,queryHash:u,options:n.defaultQueryOptions(o),state:i,defaultOptions:n.getQueryDefaults(d),meta:o.meta}),this.add(g)),g},a.add=function(n){this.queriesMap[n.queryHash]||(this.queriesMap[n.queryHash]=n,this.queries.push(n),this.notify({type:"queryAdded",query:n}))},a.remove=function(n){var o=this.queriesMap[n.queryHash];o&&(n.destroy(),this.queries=this.queries.filter(function(i){return i!==n}),o===n&&delete this.queriesMap[n.queryHash],this.notify({type:"queryRemoved",query:n}))},a.clear=function(){var n=this;Ks.batch(function(){n.queries.forEach(function(o){n.remove(o)})})},a.get=function(n){return this.queriesMap[n]},a.getAll=function(){return this.queries},a.find=function(n,o){var i=Va(n,o),l=i[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(d){return qg(l,d)})},a.findAll=function(n,o){var i=Va(n,o),l=i[0];return Object.keys(l).length>0?this.queries.filter(function(d){return qg(l,d)}):this.queries},a.notify=function(n){var o=this;Ks.batch(function(){o.listeners.forEach(function(i){i(n)})})},a.onFocus=function(){var n=this;Ks.batch(function(){n.queries.forEach(function(o){o.onFocus()})})},a.onOnline=function(){var n=this;Ks.batch(function(){n.queries.forEach(function(o){o.onOnline()})})},r}(Vl),lv=function(){function s(a){this.options=us({},a.defaultOptions,a.options),this.mutationId=a.mutationId,this.mutationCache=a.mutationCache,this.observers=[],this.state=a.state||cv(),this.meta=a.meta}var r=s.prototype;return r.setState=function(t){this.dispatch({type:"setState",state:t})},r.addObserver=function(t){this.observers.indexOf(t)===-1&&this.observers.push(t)},r.removeObserver=function(t){this.observers=this.observers.filter(function(n){return n!==t})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(cr).catch(cr)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var t=this,n,o=this.state.status==="loading",i=Promise.resolve();return o||(this.dispatch({type:"loading",variables:this.options.variables}),i=i.then(function(){t.mutationCache.config.onMutate==null||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return t.options.onMutate==null?void 0:t.options.onMutate(t.state.variables)}).then(function(l){l!==t.state.context&&t.dispatch({type:"loading",context:l,variables:t.state.variables})})),i.then(function(){return t.executeMutation()}).then(function(l){n=l,t.mutationCache.config.onSuccess==null||t.mutationCache.config.onSuccess(n,t.state.variables,t.state.context,t)}).then(function(){return t.options.onSuccess==null?void 0:t.options.onSuccess(n,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(n,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:n}),n}).catch(function(l){return t.mutationCache.config.onError==null||t.mutationCache.config.onError(l,t.state.variables,t.state.context,t),yf().error(l),Promise.resolve().then(function(){return t.options.onError==null?void 0:t.options.onError(l,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(void 0,l,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:l}),l})})},r.executeMutation=function(){var t=this,n;return this.retryer=new ff({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:(n=this.options.retry)!=null?n:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(t){var n=this;this.state=dv(this.state,t),Ks.batch(function(){n.observers.forEach(function(o){o.onMutationUpdate(t)}),n.mutationCache.notify(n)})},s}();function cv(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function dv(s,r){switch(r.type){case"failed":return us({},s,{failureCount:s.failureCount+1});case"pause":return us({},s,{isPaused:!0});case"continue":return us({},s,{isPaused:!1});case"loading":return us({},s,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return us({},s,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return us({},s,{data:void 0,error:r.error,failureCount:s.failureCount+1,isPaused:!1,status:"error"});case"setState":return us({},s,r.state);default:return s}}var uv=function(s){Bl(r,s);function r(t){var n;return n=s.call(this)||this,n.config=t||{},n.mutations=[],n.mutationId=0,n}var a=r.prototype;return a.build=function(n,o,i){var l=new lv({mutationCache:this,mutationId:++this.mutationId,options:n.defaultMutationOptions(o),state:i,defaultOptions:o.mutationKey?n.getMutationDefaults(o.mutationKey):void 0,meta:o.meta});return this.add(l),l},a.add=function(n){this.mutations.push(n),this.notify(n)},a.remove=function(n){this.mutations=this.mutations.filter(function(o){return o!==n}),n.cancel(),this.notify(n)},a.clear=function(){var n=this;Ks.batch(function(){n.mutations.forEach(function(o){n.remove(o)})})},a.getAll=function(){return this.mutations},a.find=function(n){return typeof n.exact>"u"&&(n.exact=!0),this.mutations.find(function(o){return Hg(n,o)})},a.findAll=function(n){return this.mutations.filter(function(o){return Hg(n,o)})},a.notify=function(n){var o=this;Ks.batch(function(){o.listeners.forEach(function(i){i(n)})})},a.onFocus=function(){this.resumePausedMutations()},a.onOnline=function(){this.resumePausedMutations()},a.resumePausedMutations=function(){var n=this.mutations.filter(function(o){return o.state.isPaused});return Ks.batch(function(){return n.reduce(function(o,i){return o.then(function(){return i.continue().catch(cr)})},Promise.resolve())})},r}(Vl);function mv(){return{onFetch:function(r){r.fetchFn=function(){var a,t,n,o,i,l,d=(a=r.fetchOptions)==null||(t=a.meta)==null?void 0:t.refetchPage,u=(n=r.fetchOptions)==null||(o=n.meta)==null?void 0:o.fetchMore,g=u==null?void 0:u.pageParam,h=(u==null?void 0:u.direction)==="forward",y=(u==null?void 0:u.direction)==="backward",k=((i=r.state.data)==null?void 0:i.pages)||[],E=((l=r.state.data)==null?void 0:l.pageParams)||[],S=xf(),C=S==null?void 0:S.signal,b=E,p=!1,N=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},_=function(T,$,L,Y){return b=Y?[$].concat(b):[].concat(b,[$]),Y?[L].concat(T):[].concat(T,[L])},x=function(T,$,L,Y){if(p)return Promise.reject("Cancelled");if(typeof L>"u"&&!$&&T.length)return Promise.resolve(T);var M={queryKey:r.queryKey,signal:C,pageParam:L,meta:r.meta},ne=N(M),oe=Promise.resolve(ne).then(function(Q){return _(T,L,Q,Y)});if(yl(ne)){var fe=oe;fe.cancel=ne.cancel}return oe},v;if(!k.length)v=x([]);else if(h){var j=typeof g<"u",D=j?g:Wg(r.options,k);v=x(k,j,D)}else if(y){var H=typeof g<"u",A=H?g:gv(r.options,k);v=x(k,H,A,!0)}else(function(){b=[];var G=typeof r.options.getNextPageParam>"u",T=d&&k[0]?d(k[0],0,k):!0;v=T?x([],G,E[0]):Promise.resolve(_([],E[0],k[0]));for(var $=function(M){v=v.then(function(ne){var oe=d&&k[M]?d(k[M],M,k):!0;if(oe){var fe=G?E[M]:Wg(r.options,ne);return x(ne,G,fe)}return Promise.resolve(_(ne,E[M],k[M]))})},L=1;L<k.length;L++)$(L)})();var P=v.then(function(G){return{pages:G,pageParams:b}}),R=P;return R.cancel=function(){p=!0,S==null||S.abort(),yl(v)&&v.cancel()},P}}}}function Wg(s,r){return s.getNextPageParam==null?void 0:s.getNextPageParam(r[r.length-1],r)}function gv(s,r){return s.getPreviousPageParam==null?void 0:s.getPreviousPageParam(r[0],r)}var xv=function(){function s(a){a===void 0&&(a={}),this.queryCache=a.queryCache||new iv,this.mutationCache=a.mutationCache||new uv,this.defaultOptions=a.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=s.prototype;return r.mount=function(){var t=this;this.unsubscribeFocus=zi.subscribe(function(){zi.isFocused()&&$i.isOnline()&&(t.mutationCache.onFocus(),t.queryCache.onFocus())}),this.unsubscribeOnline=$i.subscribe(function(){zi.isFocused()&&$i.isOnline()&&(t.mutationCache.onOnline(),t.queryCache.onOnline())})},r.unmount=function(){var t,n;(t=this.unsubscribeFocus)==null||t.call(this),(n=this.unsubscribeOnline)==null||n.call(this)},r.isFetching=function(t,n){var o=Va(t,n),i=o[0];return i.fetching=!0,this.queryCache.findAll(i).length},r.isMutating=function(t){return this.mutationCache.findAll(us({},t,{fetching:!0})).length},r.getQueryData=function(t,n){var o;return(o=this.queryCache.find(t,n))==null?void 0:o.state.data},r.getQueriesData=function(t){return this.getQueryCache().findAll(t).map(function(n){var o=n.queryKey,i=n.state,l=i.data;return[o,l]})},r.setQueryData=function(t,n,o){var i=Cc(t),l=this.defaultQueryOptions(i);return this.queryCache.build(this,l).setData(n,o)},r.setQueriesData=function(t,n,o){var i=this;return Ks.batch(function(){return i.getQueryCache().findAll(t).map(function(l){var d=l.queryKey;return[d,i.setQueryData(d,n,o)]})})},r.getQueryState=function(t,n){var o;return(o=this.queryCache.find(t,n))==null?void 0:o.state},r.removeQueries=function(t,n){var o=Va(t,n),i=o[0],l=this.queryCache;Ks.batch(function(){l.findAll(i).forEach(function(d){l.remove(d)})})},r.resetQueries=function(t,n,o){var i=this,l=Va(t,n,o),d=l[0],u=l[1],g=this.queryCache,h=us({},d,{active:!0});return Ks.batch(function(){return g.findAll(d).forEach(function(y){y.reset()}),i.refetchQueries(h,u)})},r.cancelQueries=function(t,n,o){var i=this,l=Va(t,n,o),d=l[0],u=l[1],g=u===void 0?{}:u;typeof g.revert>"u"&&(g.revert=!0);var h=Ks.batch(function(){return i.queryCache.findAll(d).map(function(y){return y.cancel(g)})});return Promise.all(h).then(cr).catch(cr)},r.invalidateQueries=function(t,n,o){var i,l,d,u=this,g=Va(t,n,o),h=g[0],y=g[1],k=us({},h,{active:(i=(l=h.refetchActive)!=null?l:h.active)!=null?i:!0,inactive:(d=h.refetchInactive)!=null?d:!1});return Ks.batch(function(){return u.queryCache.findAll(h).forEach(function(E){E.invalidate()}),u.refetchQueries(k,y)})},r.refetchQueries=function(t,n,o){var i=this,l=Va(t,n,o),d=l[0],u=l[1],g=Ks.batch(function(){return i.queryCache.findAll(d).map(function(y){return y.fetch(void 0,us({},u,{meta:{refetchPage:d==null?void 0:d.refetchPage}}))})}),h=Promise.all(g).then(cr);return u!=null&&u.throwOnError||(h=h.catch(cr)),h},r.fetchQuery=function(t,n,o){var i=Cc(t,n,o),l=this.defaultQueryOptions(i);typeof l.retry>"u"&&(l.retry=!1);var d=this.queryCache.build(this,l);return d.isStaleByTime(l.staleTime)?d.fetch(l):Promise.resolve(d.state.data)},r.prefetchQuery=function(t,n,o){return this.fetchQuery(t,n,o).then(cr).catch(cr)},r.fetchInfiniteQuery=function(t,n,o){var i=Cc(t,n,o);return i.behavior=mv(),this.fetchQuery(i)},r.prefetchInfiniteQuery=function(t,n,o){return this.fetchInfiniteQuery(t,n,o).then(cr).catch(cr)},r.cancelMutations=function(){var t=this,n=Ks.batch(function(){return t.mutationCache.getAll().map(function(o){return o.cancel()})});return Promise.all(n).then(cr).catch(cr)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(t){return this.mutationCache.build(this,t).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(t){this.defaultOptions=t},r.setQueryDefaults=function(t,n){var o=this.queryDefaults.find(function(i){return Pt(t)===Pt(i.queryKey)});o?o.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})},r.getQueryDefaults=function(t){var n;return t?(n=this.queryDefaults.find(function(o){return pl(t,o.queryKey)}))==null?void 0:n.defaultOptions:void 0},r.setMutationDefaults=function(t,n){var o=this.mutationDefaults.find(function(i){return Pt(t)===Pt(i.mutationKey)});o?o.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})},r.getMutationDefaults=function(t){var n;return t?(n=this.mutationDefaults.find(function(o){return pl(t,o.mutationKey)}))==null?void 0:n.defaultOptions:void 0},r.defaultQueryOptions=function(t){if(t!=null&&t._defaulted)return t;var n=us({},this.defaultOptions.queries,this.getQueryDefaults(t==null?void 0:t.queryKey),t,{_defaulted:!0});return!n.queryHash&&n.queryKey&&(n.queryHash=om(n.queryKey,n)),n},r.defaultQueryObserverOptions=function(t){return this.defaultQueryOptions(t)},r.defaultMutationOptions=function(t){return t!=null&&t._defaulted?t:us({},this.defaultOptions.mutations,this.getMutationDefaults(t==null?void 0:t.mutationKey),t,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},s}(),hv=Vb.unstable_batchedUpdates;Ks.setBatchNotifyFunction(hv);var fv=console;nv(fv);var Kg=Ke.createContext(void 0),pv=Ke.createContext(!1);function yv(s){return s&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Kg),window.ReactQueryClientContext):Kg}var bv=function(r){var a=r.client,t=r.contextSharing,n=t===void 0?!1:t,o=r.children;Ke.useEffect(function(){return a.mount(),function(){a.unmount()}},[a]);var i=yv(n);return Ke.createElement(pv.Provider,{value:n},Ke.createElement(i.Provider,{value:a},o))};let jv={data:""},vv=s=>{if(typeof window=="object"){let r=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(s||document.head).appendChild(r),r.firstChild}return s||jv},Nv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wv=/\/\*[^]*?\*\/|  +/g,Zg=/\n+/g,Ka=(s,r)=>{let a="",t="",n="";for(let o in s){let i=s[o];o[0]=="@"?o[1]=="i"?a=o+" "+i+";":t+=o[1]=="f"?Ka(i,o):o+"{"+Ka(i,o[1]=="k"?"":r)+"}":typeof i=="object"?t+=Ka(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Ka.p?Ka.p(o,i):o+":"+i+";")}return a+(r&&n?r+"{"+n+"}":n)+t},pa={},bf=s=>{if(typeof s=="object"){let r="";for(let a in s)r+=a+bf(s[a]);return r}return s},kv=(s,r,a,t,n)=>{let o=bf(s),i=pa[o]||(pa[o]=(d=>{let u=0,g=11;for(;u<d.length;)g=101*g+d.charCodeAt(u++)>>>0;return"go"+g})(o));if(!pa[i]){let d=o!==s?s:(u=>{let g,h,y=[{}];for(;g=Nv.exec(u.replace(wv,""));)g[4]?y.shift():g[3]?(h=g[3].replace(Zg," ").trim(),y.unshift(y[0][h]=y[0][h]||{})):y[0][g[1]]=g[2].replace(Zg," ").trim();return y[0]})(s);pa[i]=Ka(n?{["@keyframes "+i]:d}:d,a?"":"."+i)}let l=a&&pa.g?pa.g:null;return a&&(pa.g=pa[i]),((d,u,g,h)=>{h?u.data=u.data.replace(h,d):u.data.indexOf(d)===-1&&(u.data=g?d+u.data:u.data+d)})(pa[i],r,t,l),i},Ev=(s,r,a)=>s.reduce((t,n,o)=>{let i=r[o];if(i&&i.call){let l=i(a),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=d?"."+d:l&&typeof l=="object"?l.props?"":Ka(l,""):l===!1?"":l}return t+n+(i??"")},"");function Hl(s){let r=this||{},a=s.call?s(r.p):s;return kv(a.unshift?a.raw?Ev(a,[].slice.call(arguments,1),r.p):a.reduce((t,n)=>Object.assign(t,n&&n.call?n(r.p):n),{}):a,vv(r.target),r.g,r.o,r.k)}let jf,Qd,Wd;Hl.bind({g:1});let Pa=Hl.bind({k:1});function _v(s,r,a,t){Ka.p=r,jf=s,Qd=a,Wd=t}function pt(s,r){let a=this||{};return function(){let t=arguments;function n(o,i){let l=Object.assign({},o),d=l.className||n.className;a.p=Object.assign({theme:Qd&&Qd()},l),a.o=/ *go\d+/.test(d),l.className=Hl.apply(a,t)+(d?" "+d:"");let u=s;return s[0]&&(u=l.as||s,delete l.as),Wd&&u[0]&&Wd(l),jf(u,l)}return n}}var Sv=s=>typeof s=="function",bl=(s,r)=>Sv(s)?s(r):s,Cv=(()=>{let s=0;return()=>(++s).toString()})(),vf=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");s=!r||r.matches}return s}})(),Rv=20,im="default",Nf=(s,r)=>{let{toastLimit:a}=s.settings;switch(r.type){case 0:return{...s,toasts:[r.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:t}=r;return Nf(s,{type:s.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:n}=r;return{...s,toasts:s.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...s,pausedAt:r.time};case 6:let o=r.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Ui=[],wf={toasts:[],pausedAt:void 0,settings:{toastLimit:Rv}},da={},kf=(s,r=im)=>{da[r]=Nf(da[r]||wf,s),Ui.forEach(([a,t])=>{a===r&&t(da[r])})},Ef=s=>Object.keys(da).forEach(r=>kf(s,r)),Av=s=>Object.keys(da).find(r=>da[r].toasts.some(a=>a.id===s)),Gl=(s=im)=>r=>{kf(r,s)},Pv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Dv=(s={},r=im)=>{let[a,t]=c.useState(da[r]||wf),n=c.useRef(da[r]);c.useEffect(()=>(n.current!==da[r]&&t(da[r]),Ui.push([r,t]),()=>{let i=Ui.findIndex(([l])=>l===r);i>-1&&Ui.splice(i,1)}),[r]);let o=a.toasts.map(i=>{var l,d,u;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((l=s[i.type])==null?void 0:l.removeDelay)||(s==null?void 0:s.removeDelay),duration:i.duration||((d=s[i.type])==null?void 0:d.duration)||(s==null?void 0:s.duration)||Pv[i.type],style:{...s.style,...(u=s[i.type])==null?void 0:u.style,...i.style}}});return{...a,toasts:o}},Tv=(s,r="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Cv()}),Zo=s=>(r,a)=>{let t=Tv(r,s,a);return Gl(t.toasterId||Av(t.id))({type:2,toast:t}),t.id},Bs=(s,r)=>Zo("blank")(s,r);Bs.error=Zo("error");Bs.success=Zo("success");Bs.loading=Zo("loading");Bs.custom=Zo("custom");Bs.dismiss=(s,r)=>{let a={type:3,toastId:s};r?Gl(r)(a):Ef(a)};Bs.dismissAll=s=>Bs.dismiss(void 0,s);Bs.remove=(s,r)=>{let a={type:4,toastId:s};r?Gl(r)(a):Ef(a)};Bs.removeAll=s=>Bs.remove(void 0,s);Bs.promise=(s,r,a)=>{let t=Bs.loading(r.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(n=>{let o=r.success?bl(r.success,n):void 0;return o?Bs.success(o,{id:t,...a,...a==null?void 0:a.success}):Bs.dismiss(t),n}).catch(n=>{let o=r.error?bl(r.error,n):void 0;o?Bs.error(o,{id:t,...a,...a==null?void 0:a.error}):Bs.dismiss(t)}),s};var Ov=1e3,Iv=(s,r="default")=>{let{toasts:a,pausedAt:t}=Dv(s,r),n=c.useRef(new Map).current,o=c.useCallback((h,y=Ov)=>{if(n.has(h))return;let k=setTimeout(()=>{n.delete(h),i({type:4,toastId:h})},y);n.set(h,k)},[]);c.useEffect(()=>{if(t)return;let h=Date.now(),y=a.map(k=>{if(k.duration===1/0)return;let E=(k.duration||0)+k.pauseDuration-(h-k.createdAt);if(E<0){k.visible&&Bs.dismiss(k.id);return}return setTimeout(()=>Bs.dismiss(k.id,r),E)});return()=>{y.forEach(k=>k&&clearTimeout(k))}},[a,t,r]);let i=c.useCallback(Gl(r),[r]),l=c.useCallback(()=>{i({type:5,time:Date.now()})},[i]),d=c.useCallback((h,y)=>{i({type:1,toast:{id:h,height:y}})},[i]),u=c.useCallback(()=>{t&&i({type:6,time:Date.now()})},[t,i]),g=c.useCallback((h,y)=>{let{reverseOrder:k=!1,gutter:E=8,defaultPosition:S}=y||{},C=a.filter(N=>(N.position||S)===(h.position||S)&&N.height),b=C.findIndex(N=>N.id===h.id),p=C.filter((N,_)=>_<b&&N.visible).length;return C.filter(N=>N.visible).slice(...k?[p+1]:[0,p]).reduce((N,_)=>N+(_.height||0)+E,0)},[a]);return c.useEffect(()=>{a.forEach(h=>{if(h.dismissed)o(h.id,h.removeDelay);else{let y=n.get(h.id);y&&(clearTimeout(y),n.delete(h.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:d,startPause:l,endPause:u,calculateOffset:g}}},Fv=Pa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Mv=Pa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lv=Pa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zv=pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Mv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Lv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$v=Pa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Uv=pt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${$v} 1s linear infinite;
`,Bv=Pa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Vv=Pa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qv=pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Vv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Hv=pt("div")`
  position: absolute;
`,Gv=pt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Qv=Pa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Wv=pt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Qv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Kv=({toast:s})=>{let{icon:r,type:a,iconTheme:t}=s;return r!==void 0?typeof r=="string"?c.createElement(Wv,null,r):r:a==="blank"?null:c.createElement(Gv,null,c.createElement(Uv,{...t}),a!=="loading"&&c.createElement(Hv,null,a==="error"?c.createElement(zv,{...t}):c.createElement(qv,{...t})))},Zv=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Yv=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Jv="0%{opacity:0;} 100%{opacity:1;}",Xv="0%{opacity:1;} 100%{opacity:0;}",eN=pt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sN=pt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,rN=(s,r)=>{let a=s.includes("top")?1:-1,[t,n]=vf()?[Jv,Xv]:[Zv(a),Yv(a)];return{animation:r?`${Pa(t)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Pa(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aN=c.memo(({toast:s,position:r,style:a,children:t})=>{let n=s.height?rN(s.position||r||"top-center",s.visible):{opacity:0},o=c.createElement(Kv,{toast:s}),i=c.createElement(sN,{...s.ariaProps},bl(s.message,s));return c.createElement(eN,{className:s.className,style:{...n,...a,...s.style}},typeof t=="function"?t({icon:o,message:i}):c.createElement(c.Fragment,null,o,i))});_v(c.createElement);var tN=({id:s,className:r,style:a,onHeightUpdate:t,children:n})=>{let o=c.useCallback(i=>{if(i){let l=()=>{let d=i.getBoundingClientRect().height;t(s,d)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[s,t]);return c.createElement("div",{ref:o,className:r,style:a},n)},nN=(s,r)=>{let a=s.includes("top"),t=a?{top:0}:{bottom:0},n=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vf()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(a?1:-1)}px)`,...t,...n}},oN=Hl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bi=16,iN=({reverseOrder:s,position:r="top-center",toastOptions:a,gutter:t,children:n,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:d,handlers:u}=Iv(a,o);return c.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:bi,left:bi,right:bi,bottom:bi,pointerEvents:"none",...i},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(g=>{let h=g.position||r,y=u.calculateOffset(g,{reverseOrder:s,gutter:t,defaultPosition:r}),k=nN(h,y);return c.createElement(tN,{id:g.id,key:g.id,onHeightUpdate:u.updateHeight,className:g.visible?oN:"",style:k},g.type==="custom"?bl(g.message,g):n?n(g):c.createElement(aN,{toast:g,position:h}))}))},m=Bs;function _f(s,r){return function(){return s.apply(r,arguments)}}const{toString:lN}=Object.prototype,{getPrototypeOf:lm}=Object,{iterator:Ql,toStringTag:Sf}=Symbol,Wl=(s=>r=>{const a=lN.call(r);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ra=s=>(s=s.toLowerCase(),r=>Wl(r)===s),Kl=s=>r=>typeof r===s,{isArray:$n}=Array,Pn=Kl("undefined");function Yo(s){return s!==null&&!Pn(s)&&s.constructor!==null&&!Pn(s.constructor)&&_r(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Cf=ra("ArrayBuffer");function cN(s){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(s):r=s&&s.buffer&&Cf(s.buffer),r}const dN=Kl("string"),_r=Kl("function"),Rf=Kl("number"),Jo=s=>s!==null&&typeof s=="object",uN=s=>s===!0||s===!1,Bi=s=>{if(Wl(s)!=="object")return!1;const r=lm(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Sf in s)&&!(Ql in s)},mN=s=>{if(!Jo(s)||Yo(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},gN=ra("Date"),xN=ra("File"),hN=ra("Blob"),fN=ra("FileList"),pN=s=>Jo(s)&&_r(s.pipe),yN=s=>{let r;return s&&(typeof FormData=="function"&&s instanceof FormData||_r(s.append)&&((r=Wl(s))==="formdata"||r==="object"&&_r(s.toString)&&s.toString()==="[object FormData]"))},bN=ra("URLSearchParams"),[jN,vN,NN,wN]=["ReadableStream","Request","Response","Headers"].map(ra),kN=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xo(s,r,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let t,n;if(typeof s!="object"&&(s=[s]),$n(s))for(t=0,n=s.length;t<n;t++)r.call(null,s[t],t,s);else{if(Yo(s))return;const o=a?Object.getOwnPropertyNames(s):Object.keys(s),i=o.length;let l;for(t=0;t<i;t++)l=o[t],r.call(null,s[l],l,s)}}function Af(s,r){if(Yo(s))return null;r=r.toLowerCase();const a=Object.keys(s);let t=a.length,n;for(;t-- >0;)if(n=a[t],r===n.toLowerCase())return n;return null}const Dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pf=s=>!Pn(s)&&s!==Dt;function Kd(){const{caseless:s,skipUndefined:r}=Pf(this)&&this||{},a={},t=(n,o)=>{const i=s&&Af(a,o)||o;Bi(a[i])&&Bi(n)?a[i]=Kd(a[i],n):Bi(n)?a[i]=Kd({},n):$n(n)?a[i]=n.slice():(!r||!Pn(n))&&(a[i]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Xo(arguments[n],t);return a}const EN=(s,r,a,{allOwnKeys:t}={})=>(Xo(r,(n,o)=>{a&&_r(n)?s[o]=_f(n,a):s[o]=n},{allOwnKeys:t}),s),_N=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),SN=(s,r,a,t)=>{s.prototype=Object.create(r.prototype,t),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:r.prototype}),a&&Object.assign(s.prototype,a)},CN=(s,r,a,t)=>{let n,o,i;const l={};if(r=r||{},s==null)return r;do{for(n=Object.getOwnPropertyNames(s),o=n.length;o-- >0;)i=n[o],(!t||t(i,s,r))&&!l[i]&&(r[i]=s[i],l[i]=!0);s=a!==!1&&lm(s)}while(s&&(!a||a(s,r))&&s!==Object.prototype);return r},RN=(s,r,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=r.length;const t=s.indexOf(r,a);return t!==-1&&t===a},AN=s=>{if(!s)return null;if($n(s))return s;let r=s.length;if(!Rf(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=s[r];return a},PN=(s=>r=>s&&r instanceof s)(typeof Uint8Array<"u"&&lm(Uint8Array)),DN=(s,r)=>{const t=(s&&s[Ql]).call(s);let n;for(;(n=t.next())&&!n.done;){const o=n.value;r.call(s,o[0],o[1])}},TN=(s,r)=>{let a;const t=[];for(;(a=s.exec(r))!==null;)t.push(a);return t},ON=ra("HTMLFormElement"),IN=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,t,n){return t.toUpperCase()+n}),Yg=(({hasOwnProperty:s})=>(r,a)=>s.call(r,a))(Object.prototype),FN=ra("RegExp"),Df=(s,r)=>{const a=Object.getOwnPropertyDescriptors(s),t={};Xo(a,(n,o)=>{let i;(i=r(n,o,s))!==!1&&(t[o]=i||n)}),Object.defineProperties(s,t)},MN=s=>{Df(s,(r,a)=>{if(_r(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const t=s[a];if(_r(t)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},LN=(s,r)=>{const a={},t=n=>{n.forEach(o=>{a[o]=!0})};return $n(s)?t(s):t(String(s).split(r)),a},zN=()=>{},$N=(s,r)=>s!=null&&Number.isFinite(s=+s)?s:r;function UN(s){return!!(s&&_r(s.append)&&s[Sf]==="FormData"&&s[Ql])}const BN=s=>{const r=new Array(10),a=(t,n)=>{if(Jo(t)){if(r.indexOf(t)>=0)return;if(Yo(t))return t;if(!("toJSON"in t)){r[n]=t;const o=$n(t)?[]:{};return Xo(t,(i,l)=>{const d=a(i,n+1);!Pn(d)&&(o[l]=d)}),r[n]=void 0,o}}return t};return a(s,0)},VN=ra("AsyncFunction"),qN=s=>s&&(Jo(s)||_r(s))&&_r(s.then)&&_r(s.catch),Tf=((s,r)=>s?setImmediate:r?((a,t)=>(Dt.addEventListener("message",({source:n,data:o})=>{n===Dt&&o===a&&t.length&&t.shift()()},!1),n=>{t.push(n),Dt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",_r(Dt.postMessage)),HN=typeof queueMicrotask<"u"?queueMicrotask.bind(Dt):typeof process<"u"&&process.nextTick||Tf,GN=s=>s!=null&&_r(s[Ql]),Pe={isArray:$n,isArrayBuffer:Cf,isBuffer:Yo,isFormData:yN,isArrayBufferView:cN,isString:dN,isNumber:Rf,isBoolean:uN,isObject:Jo,isPlainObject:Bi,isEmptyObject:mN,isReadableStream:jN,isRequest:vN,isResponse:NN,isHeaders:wN,isUndefined:Pn,isDate:gN,isFile:xN,isBlob:hN,isRegExp:FN,isFunction:_r,isStream:pN,isURLSearchParams:bN,isTypedArray:PN,isFileList:fN,forEach:Xo,merge:Kd,extend:EN,trim:kN,stripBOM:_N,inherits:SN,toFlatObject:CN,kindOf:Wl,kindOfTest:ra,endsWith:RN,toArray:AN,forEachEntry:DN,matchAll:TN,isHTMLForm:ON,hasOwnProperty:Yg,hasOwnProp:Yg,reduceDescriptors:Df,freezeMethods:MN,toObjectSet:LN,toCamelCase:IN,noop:zN,toFiniteNumber:$N,findKey:Af,global:Dt,isContextDefined:Pf,isSpecCompliantForm:UN,toJSONObject:BN,isAsyncFn:VN,isThenable:qN,setImmediate:Tf,asap:HN,isIterable:GN};function Ye(s,r,a,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",r&&(this.code=r),a&&(this.config=a),t&&(this.request=t),n&&(this.response=n,this.status=n.status?n.status:null)}Pe.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.status}}});const Of=Ye.prototype,If={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{If[s]={value:s}});Object.defineProperties(Ye,If);Object.defineProperty(Of,"isAxiosError",{value:!0});Ye.from=(s,r,a,t,n,o)=>{const i=Object.create(Of);Pe.toFlatObject(s,i,function(g){return g!==Error.prototype},u=>u!=="isAxiosError");const l=s&&s.message?s.message:"Error",d=r==null&&s?s.code:r;return Ye.call(i,l,d,a,t,n),s&&i.cause==null&&Object.defineProperty(i,"cause",{value:s,configurable:!0}),i.name=s&&s.name||"Error",o&&Object.assign(i,o),i};const QN=null;function Zd(s){return Pe.isPlainObject(s)||Pe.isArray(s)}function Ff(s){return Pe.endsWith(s,"[]")?s.slice(0,-2):s}function Jg(s,r,a){return s?s.concat(r).map(function(n,o){return n=Ff(n),!a&&o?"["+n+"]":n}).join(a?".":""):r}function WN(s){return Pe.isArray(s)&&!s.some(Zd)}const KN=Pe.toFlatObject(Pe,{},null,function(r){return/^is[A-Z]/.test(r)});function Zl(s,r,a){if(!Pe.isObject(s))throw new TypeError("target must be an object");r=r||new FormData,a=Pe.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!Pe.isUndefined(C[S])});const t=a.metaTokens,n=a.visitor||g,o=a.dots,i=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&Pe.isSpecCompliantForm(r);if(!Pe.isFunction(n))throw new TypeError("visitor must be a function");function u(E){if(E===null)return"";if(Pe.isDate(E))return E.toISOString();if(Pe.isBoolean(E))return E.toString();if(!d&&Pe.isBlob(E))throw new Ye("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(E)||Pe.isTypedArray(E)?d&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function g(E,S,C){let b=E;if(E&&!C&&typeof E=="object"){if(Pe.endsWith(S,"{}"))S=t?S:S.slice(0,-2),E=JSON.stringify(E);else if(Pe.isArray(E)&&WN(E)||(Pe.isFileList(E)||Pe.endsWith(S,"[]"))&&(b=Pe.toArray(E)))return S=Ff(S),b.forEach(function(N,_){!(Pe.isUndefined(N)||N===null)&&r.append(i===!0?Jg([S],_,o):i===null?S:S+"[]",u(N))}),!1}return Zd(E)?!0:(r.append(Jg(C,S,o),u(E)),!1)}const h=[],y=Object.assign(KN,{defaultVisitor:g,convertValue:u,isVisitable:Zd});function k(E,S){if(!Pe.isUndefined(E)){if(h.indexOf(E)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(E),Pe.forEach(E,function(b,p){(!(Pe.isUndefined(b)||b===null)&&n.call(r,b,Pe.isString(p)?p.trim():p,S,y))===!0&&k(b,S?S.concat(p):[p])}),h.pop()}}if(!Pe.isObject(s))throw new TypeError("data must be an object");return k(s),r}function Xg(s){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function cm(s,r){this._pairs=[],s&&Zl(s,this,r)}const Mf=cm.prototype;Mf.append=function(r,a){this._pairs.push([r,a])};Mf.toString=function(r){const a=r?function(t){return r.call(this,t,Xg)}:Xg;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function ZN(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Lf(s,r,a){if(!r)return s;const t=a&&a.encode||ZN;Pe.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let o;if(n?o=n(r,a):o=Pe.isURLSearchParams(r)?r.toString():new cm(r,a).toString(t),o){const i=s.indexOf("#");i!==-1&&(s=s.slice(0,i)),s+=(s.indexOf("?")===-1?"?":"&")+o}return s}class ex{constructor(){this.handlers=[]}use(r,a,t){return this.handlers.push({fulfilled:r,rejected:a,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Pe.forEach(this.handlers,function(t){t!==null&&r(t)})}}const zf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YN=typeof URLSearchParams<"u"?URLSearchParams:cm,JN=typeof FormData<"u"?FormData:null,XN=typeof Blob<"u"?Blob:null,ew={isBrowser:!0,classes:{URLSearchParams:YN,FormData:JN,Blob:XN},protocols:["http","https","file","blob","url","data"]},dm=typeof window<"u"&&typeof document<"u",Yd=typeof navigator=="object"&&navigator||void 0,sw=dm&&(!Yd||["ReactNative","NativeScript","NS"].indexOf(Yd.product)<0),rw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",aw=dm&&window.location.href||"http://localhost",tw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dm,hasStandardBrowserEnv:sw,hasStandardBrowserWebWorkerEnv:rw,navigator:Yd,origin:aw},Symbol.toStringTag,{value:"Module"})),tr={...tw,...ew};function nw(s,r){return Zl(s,new tr.classes.URLSearchParams,{visitor:function(a,t,n,o){return tr.isNode&&Pe.isBuffer(a)?(this.append(t,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function ow(s){return Pe.matchAll(/\w+|\[(\w*)]/g,s).map(r=>r[0]==="[]"?"":r[1]||r[0])}function iw(s){const r={},a=Object.keys(s);let t;const n=a.length;let o;for(t=0;t<n;t++)o=a[t],r[o]=s[o];return r}function $f(s){function r(a,t,n,o){let i=a[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),d=o>=a.length;return i=!i&&Pe.isArray(n)?n.length:i,d?(Pe.hasOwnProp(n,i)?n[i]=[n[i],t]:n[i]=t,!l):((!n[i]||!Pe.isObject(n[i]))&&(n[i]=[]),r(a,t,n[i],o)&&Pe.isArray(n[i])&&(n[i]=iw(n[i])),!l)}if(Pe.isFormData(s)&&Pe.isFunction(s.entries)){const a={};return Pe.forEachEntry(s,(t,n)=>{r(ow(t),n,a,0)}),a}return null}function lw(s,r,a){if(Pe.isString(s))try{return(r||JSON.parse)(s),Pe.trim(s)}catch(t){if(t.name!=="SyntaxError")throw t}return(a||JSON.stringify)(s)}const ei={transitional:zf,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const t=a.getContentType()||"",n=t.indexOf("application/json")>-1,o=Pe.isObject(r);if(o&&Pe.isHTMLForm(r)&&(r=new FormData(r)),Pe.isFormData(r))return n?JSON.stringify($f(r)):r;if(Pe.isArrayBuffer(r)||Pe.isBuffer(r)||Pe.isStream(r)||Pe.isFile(r)||Pe.isBlob(r)||Pe.isReadableStream(r))return r;if(Pe.isArrayBufferView(r))return r.buffer;if(Pe.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(t.indexOf("application/x-www-form-urlencoded")>-1)return nw(r,this.formSerializer).toString();if((l=Pe.isFileList(r))||t.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Zl(l?{"files[]":r}:r,d&&new d,this.formSerializer)}}return o||n?(a.setContentType("application/json",!1),lw(r)):r}],transformResponse:[function(r){const a=this.transitional||ei.transitional,t=a&&a.forcedJSONParsing,n=this.responseType==="json";if(Pe.isResponse(r)||Pe.isReadableStream(r))return r;if(r&&Pe.isString(r)&&(t&&!this.responseType||n)){const i=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?Ye.from(l,Ye.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tr.classes.FormData,Blob:tr.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],s=>{ei.headers[s]={}});const cw=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dw=s=>{const r={};let a,t,n;return s&&s.split(`
`).forEach(function(i){n=i.indexOf(":"),a=i.substring(0,n).trim().toLowerCase(),t=i.substring(n+1).trim(),!(!a||r[a]&&cw[a])&&(a==="set-cookie"?r[a]?r[a].push(t):r[a]=[t]:r[a]=r[a]?r[a]+", "+t:t)}),r},sx=Symbol("internals");function Yn(s){return s&&String(s).trim().toLowerCase()}function Vi(s){return s===!1||s==null?s:Pe.isArray(s)?s.map(Vi):String(s)}function uw(s){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=a.exec(s);)r[t[1]]=t[2];return r}const mw=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ac(s,r,a,t,n){if(Pe.isFunction(t))return t.call(this,r,a);if(n&&(r=a),!!Pe.isString(r)){if(Pe.isString(t))return r.indexOf(t)!==-1;if(Pe.isRegExp(t))return t.test(r)}}function gw(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,t)=>a.toUpperCase()+t)}function xw(s,r){const a=Pe.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(s,t+a,{value:function(n,o,i){return this[t].call(this,r,n,o,i)},configurable:!0})})}let Sr=class{constructor(r){r&&this.set(r)}set(r,a,t){const n=this;function o(l,d,u){const g=Yn(d);if(!g)throw new Error("header name must be a non-empty string");const h=Pe.findKey(n,g);(!h||n[h]===void 0||u===!0||u===void 0&&n[h]!==!1)&&(n[h||d]=Vi(l))}const i=(l,d)=>Pe.forEach(l,(u,g)=>o(u,g,d));if(Pe.isPlainObject(r)||r instanceof this.constructor)i(r,a);else if(Pe.isString(r)&&(r=r.trim())&&!mw(r))i(dw(r),a);else if(Pe.isObject(r)&&Pe.isIterable(r)){let l={},d,u;for(const g of r){if(!Pe.isArray(g))throw TypeError("Object iterator must return a key-value pair");l[u=g[0]]=(d=l[u])?Pe.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}i(l,a)}else r!=null&&o(a,r,t);return this}get(r,a){if(r=Yn(r),r){const t=Pe.findKey(this,r);if(t){const n=this[t];if(!a)return n;if(a===!0)return uw(n);if(Pe.isFunction(a))return a.call(this,n,t);if(Pe.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Yn(r),r){const t=Pe.findKey(this,r);return!!(t&&this[t]!==void 0&&(!a||Ac(this,this[t],t,a)))}return!1}delete(r,a){const t=this;let n=!1;function o(i){if(i=Yn(i),i){const l=Pe.findKey(t,i);l&&(!a||Ac(t,t[l],l,a))&&(delete t[l],n=!0)}}return Pe.isArray(r)?r.forEach(o):o(r),n}clear(r){const a=Object.keys(this);let t=a.length,n=!1;for(;t--;){const o=a[t];(!r||Ac(this,this[o],o,r,!0))&&(delete this[o],n=!0)}return n}normalize(r){const a=this,t={};return Pe.forEach(this,(n,o)=>{const i=Pe.findKey(t,o);if(i){a[i]=Vi(n),delete a[o];return}const l=r?gw(o):String(o).trim();l!==o&&delete a[o],a[l]=Vi(n),t[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return Pe.forEach(this,(t,n)=>{t!=null&&t!==!1&&(a[n]=r&&Pe.isArray(t)?t.join(", "):t)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const t=new this(r);return a.forEach(n=>t.set(n)),t}static accessor(r){const t=(this[sx]=this[sx]={accessors:{}}).accessors,n=this.prototype;function o(i){const l=Yn(i);t[l]||(xw(n,i),t[l]=!0)}return Pe.isArray(r)?r.forEach(o):o(r),this}};Sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Pe.reduceDescriptors(Sr.prototype,({value:s},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>s,set(t){this[a]=t}}});Pe.freezeMethods(Sr);function Pc(s,r){const a=this||ei,t=r||a,n=Sr.from(t.headers);let o=t.data;return Pe.forEach(s,function(l){o=l.call(a,o,n.normalize(),r?r.status:void 0)}),n.normalize(),o}function Uf(s){return!!(s&&s.__CANCEL__)}function Un(s,r,a){Ye.call(this,s??"canceled",Ye.ERR_CANCELED,r,a),this.name="CanceledError"}Pe.inherits(Un,Ye,{__CANCEL__:!0});function Bf(s,r,a){const t=a.config.validateStatus;!a.status||!t||t(a.status)?s(a):r(new Ye("Request failed with status code "+a.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function hw(s){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return r&&r[1]||""}function fw(s,r){s=s||10;const a=new Array(s),t=new Array(s);let n=0,o=0,i;return r=r!==void 0?r:1e3,function(d){const u=Date.now(),g=t[o];i||(i=u),a[n]=d,t[n]=u;let h=o,y=0;for(;h!==n;)y+=a[h++],h=h%s;if(n=(n+1)%s,n===o&&(o=(o+1)%s),u-i<r)return;const k=g&&u-g;return k?Math.round(y*1e3/k):void 0}}function pw(s,r){let a=0,t=1e3/r,n,o;const i=(u,g=Date.now())=>{a=g,n=null,o&&(clearTimeout(o),o=null),s(...u)};return[(...u)=>{const g=Date.now(),h=g-a;h>=t?i(u,g):(n=u,o||(o=setTimeout(()=>{o=null,i(n)},t-h)))},()=>n&&i(n)]}const jl=(s,r,a=3)=>{let t=0;const n=fw(50,250);return pw(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,d=i-t,u=n(d),g=i<=l;t=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:d,rate:u||void 0,estimated:u&&l&&g?(l-i)/u:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};s(h)},a)},rx=(s,r)=>{const a=s!=null;return[t=>r[0]({lengthComputable:a,total:s,loaded:t}),r[1]]},ax=s=>(...r)=>Pe.asap(()=>s(...r)),yw=tr.hasStandardBrowserEnv?((s,r)=>a=>(a=new URL(a,tr.origin),s.protocol===a.protocol&&s.host===a.host&&(r||s.port===a.port)))(new URL(tr.origin),tr.navigator&&/(msie|trident)/i.test(tr.navigator.userAgent)):()=>!0,bw=tr.hasStandardBrowserEnv?{write(s,r,a,t,n,o){const i=[s+"="+encodeURIComponent(r)];Pe.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),Pe.isString(t)&&i.push("path="+t),Pe.isString(n)&&i.push("domain="+n),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(s){const r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jw(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function vw(s,r){return r?s.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):s}function Vf(s,r,a){let t=!jw(r);return s&&(t||a==!1)?vw(s,r):r}const tx=s=>s instanceof Sr?{...s}:s;function Vt(s,r){r=r||{};const a={};function t(u,g,h,y){return Pe.isPlainObject(u)&&Pe.isPlainObject(g)?Pe.merge.call({caseless:y},u,g):Pe.isPlainObject(g)?Pe.merge({},g):Pe.isArray(g)?g.slice():g}function n(u,g,h,y){if(Pe.isUndefined(g)){if(!Pe.isUndefined(u))return t(void 0,u,h,y)}else return t(u,g,h,y)}function o(u,g){if(!Pe.isUndefined(g))return t(void 0,g)}function i(u,g){if(Pe.isUndefined(g)){if(!Pe.isUndefined(u))return t(void 0,u)}else return t(void 0,g)}function l(u,g,h){if(h in r)return t(u,g);if(h in s)return t(void 0,u)}const d={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,g,h)=>n(tx(u),tx(g),h,!0)};return Pe.forEach(Object.keys({...s,...r}),function(g){const h=d[g]||n,y=h(s[g],r[g],g);Pe.isUndefined(y)&&h!==l||(a[g]=y)}),a}const qf=s=>{const r=Vt({},s);let{data:a,withXSRFToken:t,xsrfHeaderName:n,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=Sr.from(i),r.url=Lf(Vf(r.baseURL,r.url,r.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Pe.isFormData(a)){if(tr.hasStandardBrowserEnv||tr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Pe.isFunction(a.getHeaders)){const d=a.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([g,h])=>{u.includes(g.toLowerCase())&&i.set(g,h)})}}if(tr.hasStandardBrowserEnv&&(t&&Pe.isFunction(t)&&(t=t(r)),t||t!==!1&&yw(r.url))){const d=n&&o&&bw.read(o);d&&i.set(n,d)}return r},Nw=typeof XMLHttpRequest<"u",ww=Nw&&function(s){return new Promise(function(a,t){const n=qf(s);let o=n.data;const i=Sr.from(n.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:u}=n,g,h,y,k,E;function S(){k&&k(),E&&E(),n.cancelToken&&n.cancelToken.unsubscribe(g),n.signal&&n.signal.removeEventListener("abort",g)}let C=new XMLHttpRequest;C.open(n.method.toUpperCase(),n.url,!0),C.timeout=n.timeout;function b(){if(!C)return;const N=Sr.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),x={data:!l||l==="text"||l==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:N,config:s,request:C};Bf(function(j){a(j),S()},function(j){t(j),S()},x),C=null}"onloadend"in C?C.onloadend=b:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(b)},C.onabort=function(){C&&(t(new Ye("Request aborted",Ye.ECONNABORTED,s,C)),C=null)},C.onerror=function(_){const x=_&&_.message?_.message:"Network Error",v=new Ye(x,Ye.ERR_NETWORK,s,C);v.event=_||null,t(v),C=null},C.ontimeout=function(){let _=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const x=n.transitional||zf;n.timeoutErrorMessage&&(_=n.timeoutErrorMessage),t(new Ye(_,x.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,s,C)),C=null},o===void 0&&i.setContentType(null),"setRequestHeader"in C&&Pe.forEach(i.toJSON(),function(_,x){C.setRequestHeader(x,_)}),Pe.isUndefined(n.withCredentials)||(C.withCredentials=!!n.withCredentials),l&&l!=="json"&&(C.responseType=n.responseType),u&&([y,E]=jl(u,!0),C.addEventListener("progress",y)),d&&C.upload&&([h,k]=jl(d),C.upload.addEventListener("progress",h),C.upload.addEventListener("loadend",k)),(n.cancelToken||n.signal)&&(g=N=>{C&&(t(!N||N.type?new Un(null,s,C):N),C.abort(),C=null)},n.cancelToken&&n.cancelToken.subscribe(g),n.signal&&(n.signal.aborted?g():n.signal.addEventListener("abort",g)));const p=hw(n.url);if(p&&tr.protocols.indexOf(p)===-1){t(new Ye("Unsupported protocol "+p+":",Ye.ERR_BAD_REQUEST,s));return}C.send(o||null)})},kw=(s,r)=>{const{length:a}=s=s?s.filter(Boolean):[];if(r||a){let t=new AbortController,n;const o=function(u){if(!n){n=!0,l();const g=u instanceof Error?u:this.reason;t.abort(g instanceof Ye?g:new Un(g instanceof Error?g.message:g))}};let i=r&&setTimeout(()=>{i=null,o(new Ye(`timeout ${r} of ms exceeded`,Ye.ETIMEDOUT))},r);const l=()=>{s&&(i&&clearTimeout(i),i=null,s.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),s=null)};s.forEach(u=>u.addEventListener("abort",o));const{signal:d}=t;return d.unsubscribe=()=>Pe.asap(l),d}},Ew=function*(s,r){let a=s.byteLength;if(a<r){yield s;return}let t=0,n;for(;t<a;)n=t+r,yield s.slice(t,n),t=n},_w=async function*(s,r){for await(const a of Sw(s))yield*Ew(a,r)},Sw=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const r=s.getReader();try{for(;;){const{done:a,value:t}=await r.read();if(a)break;yield t}}finally{await r.cancel()}},nx=(s,r,a,t)=>{const n=_w(s,r);let o=0,i,l=d=>{i||(i=!0,t&&t(d))};return new ReadableStream({async pull(d){try{const{done:u,value:g}=await n.next();if(u){l(),d.close();return}let h=g.byteLength;if(a){let y=o+=h;a(y)}d.enqueue(new Uint8Array(g))}catch(u){throw l(u),u}},cancel(d){return l(d),n.return()}},{highWaterMark:2})},ox=64*1024,{isFunction:ji}=Pe,Cw=(({Request:s,Response:r})=>({Request:s,Response:r}))(Pe.global),{ReadableStream:ix,TextEncoder:lx}=Pe.global,cx=(s,...r)=>{try{return!!s(...r)}catch{return!1}},Rw=s=>{s=Pe.merge.call({skipUndefined:!0},Cw,s);const{fetch:r,Request:a,Response:t}=s,n=r?ji(r):typeof fetch=="function",o=ji(a),i=ji(t);if(!n)return!1;const l=n&&ji(ix),d=n&&(typeof lx=="function"?(E=>S=>E.encode(S))(new lx):async E=>new Uint8Array(await new a(E).arrayBuffer())),u=o&&l&&cx(()=>{let E=!1;const S=new a(tr.origin,{body:new ix,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!S}),g=i&&l&&cx(()=>Pe.isReadableStream(new t("").body)),h={stream:g&&(E=>E.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!h[E]&&(h[E]=(S,C)=>{let b=S&&S[E];if(b)return b.call(S);throw new Ye(`Response type '${E}' is not supported`,Ye.ERR_NOT_SUPPORT,C)})});const y=async E=>{if(E==null)return 0;if(Pe.isBlob(E))return E.size;if(Pe.isSpecCompliantForm(E))return(await new a(tr.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(Pe.isArrayBufferView(E)||Pe.isArrayBuffer(E))return E.byteLength;if(Pe.isURLSearchParams(E)&&(E=E+""),Pe.isString(E))return(await d(E)).byteLength},k=async(E,S)=>{const C=Pe.toFiniteNumber(E.getContentLength());return C??y(S)};return async E=>{let{url:S,method:C,data:b,signal:p,cancelToken:N,timeout:_,onDownloadProgress:x,onUploadProgress:v,responseType:j,headers:D,withCredentials:H="same-origin",fetchOptions:A}=qf(E),P=r||fetch;j=j?(j+"").toLowerCase():"text";let R=kw([p,N&&N.toAbortSignal()],_),G=null;const T=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let $;try{if(v&&u&&C!=="get"&&C!=="head"&&($=await k(D,b))!==0){let fe=new a(S,{method:"POST",body:b,duplex:"half"}),Q;if(Pe.isFormData(b)&&(Q=fe.headers.get("content-type"))&&D.setContentType(Q),fe.body){const[me,xe]=rx($,jl(ax(v)));b=nx(fe.body,ox,me,xe)}}Pe.isString(H)||(H=H?"include":"omit");const L=o&&"credentials"in a.prototype,Y={...A,signal:R,method:C.toUpperCase(),headers:D.normalize().toJSON(),body:b,duplex:"half",credentials:L?H:void 0};G=o&&new a(S,Y);let M=await(o?P(G,A):P(S,Y));const ne=g&&(j==="stream"||j==="response");if(g&&(x||ne&&T)){const fe={};["status","statusText","headers"].forEach(ie=>{fe[ie]=M[ie]});const Q=Pe.toFiniteNumber(M.headers.get("content-length")),[me,xe]=x&&rx(Q,jl(ax(x),!0))||[];M=new t(nx(M.body,ox,me,()=>{xe&&xe(),T&&T()}),fe)}j=j||"text";let oe=await h[Pe.findKey(h,j)||"text"](M,E);return!ne&&T&&T(),await new Promise((fe,Q)=>{Bf(fe,Q,{data:oe,headers:Sr.from(M.headers),status:M.status,statusText:M.statusText,config:E,request:G})})}catch(L){throw T&&T(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,E,G),{cause:L.cause||L}):Ye.from(L,L&&L.code,E,G)}}},Aw=new Map,Hf=s=>{let r=s?s.env:{};const{fetch:a,Request:t,Response:n}=r,o=[t,n,a];let i=o.length,l=i,d,u,g=Aw;for(;l--;)d=o[l],u=g.get(d),u===void 0&&g.set(d,u=l?new Map:Rw(r)),g=u;return u};Hf();const Jd={http:QN,xhr:ww,fetch:{get:Hf}};Pe.forEach(Jd,(s,r)=>{if(s){try{Object.defineProperty(s,"name",{value:r})}catch{}Object.defineProperty(s,"adapterName",{value:r})}});const dx=s=>`- ${s}`,Pw=s=>Pe.isFunction(s)||s===null||s===!1,Gf={getAdapter:(s,r)=>{s=Pe.isArray(s)?s:[s];const{length:a}=s;let t,n;const o={};for(let i=0;i<a;i++){t=s[i];let l;if(n=t,!Pw(t)&&(n=Jd[(l=String(t)).toLowerCase()],n===void 0))throw new Ye(`Unknown adapter '${l}'`);if(n&&(Pe.isFunction(n)||(n=n.get(r))))break;o[l||"#"+i]=n}if(!n){const i=Object.entries(o).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=a?i.length>1?`since :
`+i.map(dx).join(`
`):" "+dx(i[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Jd};function Dc(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Un(null,s)}function ux(s){return Dc(s),s.headers=Sr.from(s.headers),s.data=Pc.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Gf.getAdapter(s.adapter||ei.adapter,s)(s).then(function(t){return Dc(s),t.data=Pc.call(s,s.transformResponse,t),t.headers=Sr.from(t.headers),t},function(t){return Uf(t)||(Dc(s),t&&t.response&&(t.response.data=Pc.call(s,s.transformResponse,t.response),t.response.headers=Sr.from(t.response.headers))),Promise.reject(t)})}const Qf="1.12.2",Yl={};["object","boolean","number","function","string","symbol"].forEach((s,r)=>{Yl[s]=function(t){return typeof t===s||"a"+(r<1?"n ":" ")+s}});const mx={};Yl.transitional=function(r,a,t){function n(o,i){return"[Axios v"+Qf+"] Transitional option '"+o+"'"+i+(t?". "+t:"")}return(o,i,l)=>{if(r===!1)throw new Ye(n(i," has been removed"+(a?" in "+a:"")),Ye.ERR_DEPRECATED);return a&&!mx[i]&&(mx[i]=!0,console.warn(n(i," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(o,i,l):!0}};Yl.spelling=function(r){return(a,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};function Dw(s,r,a){if(typeof s!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const t=Object.keys(s);let n=t.length;for(;n-- >0;){const o=t[n],i=r[o];if(i){const l=s[o],d=l===void 0||i(l,o,s);if(d!==!0)throw new Ye("option "+o+" must be "+d,Ye.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ye("Unknown option "+o,Ye.ERR_BAD_OPTION)}}const qi={assertOptions:Dw,validators:Yl},ta=qi.validators;let Ft=class{constructor(r){this.defaults=r||{},this.interceptors={request:new ex,response:new ex}}async request(r,a){try{return await this._request(r,a)}catch(t){if(t instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{t.stack?o&&!String(t.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+o):t.stack=o}catch{}}throw t}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=Vt(this.defaults,a);const{transitional:t,paramsSerializer:n,headers:o}=a;t!==void 0&&qi.assertOptions(t,{silentJSONParsing:ta.transitional(ta.boolean),forcedJSONParsing:ta.transitional(ta.boolean),clarifyTimeoutError:ta.transitional(ta.boolean)},!1),n!=null&&(Pe.isFunction(n)?a.paramsSerializer={serialize:n}:qi.assertOptions(n,{encode:ta.function,serialize:ta.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),qi.assertOptions(a,{baseUrl:ta.spelling("baseURL"),withXsrfToken:ta.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let i=o&&Pe.merge(o.common,o[a.method]);o&&Pe.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),a.headers=Sr.concat(i,o);const l=[];let d=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(a)===!1||(d=d&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let g,h=0,y;if(!d){const E=[ux.bind(this),void 0];for(E.unshift(...l),E.push(...u),y=E.length,g=Promise.resolve(a);h<y;)g=g.then(E[h++],E[h++]);return g}y=l.length;let k=a;for(;h<y;){const E=l[h++],S=l[h++];try{k=E(k)}catch(C){S.call(this,C);break}}try{g=ux.call(this,k)}catch(E){return Promise.reject(E)}for(h=0,y=u.length;h<y;)g=g.then(u[h++],u[h++]);return g}getUri(r){r=Vt(this.defaults,r);const a=Vf(r.baseURL,r.url,r.allowAbsoluteUrls);return Lf(a,r.params,r.paramsSerializer)}};Pe.forEach(["delete","get","head","options"],function(r){Ft.prototype[r]=function(a,t){return this.request(Vt(t||{},{method:r,url:a,data:(t||{}).data}))}});Pe.forEach(["post","put","patch"],function(r){function a(t){return function(o,i,l){return this.request(Vt(l||{},{method:r,headers:t?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Ft.prototype[r]=a(),Ft.prototype[r+"Form"]=a(!0)});let Tw=class Wf{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const t=this;this.promise.then(n=>{if(!t._listeners)return;let o=t._listeners.length;for(;o-- >0;)t._listeners[o](n);t._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(l=>{t.subscribe(l),o=l}).then(n);return i.cancel=function(){t.unsubscribe(o)},i},r(function(o,i,l){t.reason||(t.reason=new Un(o,i,l),a(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=t=>{r.abort(t)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new Wf(function(n){r=n}),cancel:r}}};function Ow(s){return function(a){return s.apply(null,a)}}function Iw(s){return Pe.isObject(s)&&s.isAxiosError===!0}const Xd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xd).forEach(([s,r])=>{Xd[r]=s});function Kf(s){const r=new Ft(s),a=_f(Ft.prototype.request,r);return Pe.extend(a,Ft.prototype,r,{allOwnKeys:!0}),Pe.extend(a,r,null,{allOwnKeys:!0}),a.create=function(n){return Kf(Vt(s,n))},a}const Ls=Kf(ei);Ls.Axios=Ft;Ls.CanceledError=Un;Ls.CancelToken=Tw;Ls.isCancel=Uf;Ls.VERSION=Qf;Ls.toFormData=Zl;Ls.AxiosError=Ye;Ls.Cancel=Ls.CanceledError;Ls.all=function(r){return Promise.all(r)};Ls.spread=Ow;Ls.isAxiosError=Iw;Ls.mergeConfig=Vt;Ls.AxiosHeaders=Sr;Ls.formToJSON=s=>$f(Pe.isHTMLForm(s)?new FormData(s):s);Ls.getAdapter=Gf.getAdapter;Ls.HttpStatusCode=Xd;Ls.default=Ls;const{Axios:Hk,AxiosError:Gk,CanceledError:Qk,isCancel:Wk,CancelToken:Kk,VERSION:Zk,all:Yk,Cancel:Jk,isAxiosError:Xk,spread:eE,toFormData:sE,AxiosHeaders:rE,HttpStatusCode:aE,formToJSON:tE,getAdapter:nE,mergeConfig:oE}=Ls,um={apiUrl:"https://icap.lat/api"},I={SUCCESS:{LOGIN:"Inicio de sesin exitoso",LOGOUT:"Sesin cerrada exitosamente",CREATE:"Registro creado exitosamente",UPDATE:"Registro actualizado exitosamente",DELETE:"Registro eliminado exitosamente",IMPORT:"Importacin completada exitosamente",EXPORT:"Exportacin completada exitosamente"},ERROR:{LOGIN:"Error al iniciar sesin",LOGOUT:"Error al cerrar sesin",UNAUTHORIZED:"No autorizado",FORBIDDEN:"Acceso denegado",NOT_FOUND:"Recurso no encontrado",SERVER_ERROR:"Error del servidor",NETWORK:"Error de conexin",VALIDATION:"Datos de validacin incorrectos",CREATE:"Error al crear registro",UPDATE:"Error al actualizar registro",DELETE:"Error al eliminar registro",IMPORT:"Error al importar datos",EXPORT:"Error al exportar datos"},VALIDATION:{REQUIRED:"Este campo es obligatorio",EMAIL:"Debe ser un email vlido",MIN_LENGTH:"Debe tener al menos {min} caracteres",MAX_LENGTH:"No puede tener ms de {max} caracteres",UNIQUE:"Este valor ya existe",CONFIRMED:"Las contraseas no coinciden",DATE:"Debe ser una fecha vlida",TIME:"Debe ser una hora vlida",NUMBER:"Debe ser un nmero vlido",POSITIVE:"Debe ser un nmero positivo"}},xs={DEFAULT_PAGE_SIZE:15,PAGE_SIZE_OPTIONS:[10,15,25,50,100],MAX_PAGE_SIZE:100},Ia=Ls.create({baseURL:um.apiUrl,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});Ia.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>(console.error(" Request Error:",s),Promise.reject(s)));Ia.interceptors.response.use(s=>s,async s=>{var l,d,u,g,h,y,k,E,S,C,b,p,N,_;const r=s.config,a=!s.response&&(s.code==="ERR_NETWORK"||((l=s.message)==null?void 0:l.includes("Network Error"))),t=((d=s.message)==null?void 0:d.includes("CORS"))||((u=s.message)==null?void 0:u.includes("blocked"));if(!a&&!t&&console.error(" API Error:",{status:(g=s.response)==null?void 0:g.status,url:(h=s.config)==null?void 0:h.url,message:s.message,data:(y=s.response)==null?void 0:y.data}),((k=s.response)==null?void 0:k.status)===401){if((E=r.url)==null?void 0:E.includes("/auth/perfil"))localStorage.removeItem("token"),sessionStorage.clear();else if(localStorage.removeItem("token"),sessionStorage.clear(),!((S=r.url)!=null&&S.includes("/auth/login"))&&!((C=r.url)!=null&&C.includes("/auth/estudiante/login"))&&!((b=r.url)!=null&&b.includes("/auth/admin/login"))&&!window.location.pathname.includes("/login")){window.queryClient&&window.queryClient.clear();const v=window.location.pathname;v.startsWith("/estudiante")?window.location.href="/estudiante/login":v.startsWith("/docente")?window.location.href="/docente/login":window.location.href="/login"}return Promise.reject(s)}const n=Fw(s),o=(p=r.url)==null?void 0:p.includes("/notificaciones");return!r.silent&&!(a&&o)&&m.error(n),Promise.reject({...s,message:n,status:(N=s.response)==null?void 0:N.status,data:(_=s.response)==null?void 0:_.data})});const Fw=s=>{var t,n,o;if(!s.response)return(t=s.message)!=null&&t.includes("CORS")||(n=s.message)!=null&&n.includes("blocked")?"Error de CORS: El servidor no permite solicitudes desde este origen":s.code==="ERR_NETWORK"||(o=s.message)!=null&&o.includes("Network Error")?"Error de conexin: No se pudo conectar con el servidor":s.message||I.ERROR.NETWORK;const r=s.response.status,a=s.response.data;if(a!=null&&a.message)return a.message;if(r===422&&(a!=null&&a.errors)){const i=[];return typeof a.errors=="object"&&(Object.keys(a.errors).forEach(l=>{(Array.isArray(a.errors[l])?a.errors[l]:[a.errors[l]]).forEach(u=>i.push(`${l}: ${u}`))}),i.length>0)?i.length===1?i[0]:`Errores de validacin: ${i.slice(0,3).join(", ")}${i.length>3?"...":""}`:"Datos de validacin incorrectos"}switch(r){case 400:return a!=null&&a.errors?typeof a.errors=="string"?a.errors:"Datos invlidos":"Solicitud incorrecta";case 401:return(a==null?void 0:a.message)||I.ERROR.UNAUTHORIZED;case 403:return(a==null?void 0:a.message)||I.ERROR.FORBIDDEN;case 404:return(a==null?void 0:a.message)||I.ERROR.NOT_FOUND;case 422:return(a==null?void 0:a.message)||"Datos de validacin incorrectos";case 429:return"Demasiadas solicitudes. Intenta ms tarde";case 500:return(a==null?void 0:a.message)||(a==null?void 0:a.error)||I.ERROR.SERVER_ERROR;case 502:return"Servidor no disponible";case 503:return"Servicio temporalmente no disponible";default:return(a==null?void 0:a.message)||(a==null?void 0:a.error)||I.ERROR.SERVER_ERROR}},Re=(s,r={},a={})=>Ia.get(s,{params:r,...a}),Be=(s,r={},a={})=>Ia.post(s,r,a),os=(s,r={},a={})=>Ia.put(s,r,a),gs=(s,r={})=>Ia.delete(s,r),qt=(s,r,a={})=>Ia.post(s,r,{headers:{"Content-Type":"multipart/form-data"},...a}),_t={async loginAdmin(s){var r,a,t;try{const n=await Be("/auth/admin/login",s);return n.data.success?{success:!0,data:{token:n.data.token,user:n.data.user,token_type:n.data.token_type,expires_in:n.data.expires_in,debe_cambiar_password:n.data.debe_cambiar_password||((r=n.data.user)==null?void 0:r.debe_cambiar_password)||!1},message:I.SUCCESS.LOGIN}:{success:!1,message:n.data.message||I.ERROR.LOGIN}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||I.ERROR.LOGIN}}},async loginDocente(s){var r,a,t;try{const n=await Be("/auth/docente/login",s);return n.data.success?{success:!0,data:{token:n.data.token,user:n.data.user,token_type:n.data.token_type,expires_in:n.data.expires_in,debe_cambiar_password:n.data.debe_cambiar_password||((r=n.data.user)==null?void 0:r.debe_cambiar_password)||!1},message:I.SUCCESS.LOGIN}:{success:!1,message:n.data.message||I.ERROR.LOGIN}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||I.ERROR.LOGIN}}},async loginEstudiante(s){var r,a;try{const t=await Be("/auth/estudiante/login",s);return t.data.success?{success:!0,data:{token:t.data.token,user:t.data.user||t.data.data,token_type:t.data.token_type,expires_in:t.data.expires_in},message:I.SUCCESS.LOGIN}:{success:!1,message:t.data.message||I.ERROR.LOGIN}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.LOGIN}}},async login(s){return s.userType==="estudiante"?s.email?this.loginEstudiante(s):{success:!1,message:"El email es obligatorio para estudiantes"}:s.userType==="admin"?this.loginAdmin(s):s.userType==="docente"?this.loginDocente(s):s.email||s.ci?this.loginAdmin(s):{success:!1,message:"Debe proporcionar email o CI"}},async logout(){try{if(localStorage.getItem("token"))try{const r=await Be("/auth/logout");return{success:!0,message:I.SUCCESS.LOGOUT}}catch{return{success:!0,message:I.SUCCESS.LOGOUT}}return{success:!0,message:I.SUCCESS.LOGOUT}}catch{return{success:!0,message:I.SUCCESS.LOGOUT}}},async getCurrentUser(){var s,r,a;try{const t=await Re("/auth/perfil");if(t.data.success)return{success:!0,data:t.data.data||t.data.user||t.data};throw new Error(t.data.message||"Error al obtener usuario")}catch(t){throw((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),sessionStorage.clear()),new Error(((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario")}},async refreshToken(){try{const s=await Be("/auth/refresh");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al refrescar token")}catch(s){throw new Error(s.message||"Error al refrescar token")}},async updateProfile(s){try{const r=await os("/auth/profile",s);return r.data.success?{success:!0,data:r.data.data,message:I.SUCCESS.UPDATE}:{success:!1,message:r.data.message||I.ERROR.UPDATE}}catch(r){return{success:!1,message:r.message||I.ERROR.UPDATE}}},async changePassword(s){try{const r=await os("/auth/change-password",s);return r.data.success?{success:!0,message:"Contrasea actualizada exitosamente"}:{success:!1,message:r.data.message||"Error al cambiar contrasea"}}catch(r){return{success:!1,message:r.message||"Error al cambiar contrasea"}}},async requestPasswordReset(s){try{const r=await Be("/auth/forgot-password",{email:s});return r.data.success?{success:!0,message:"Se ha enviado un enlace de restablecimiento a tu email"}:{success:!1,message:r.data.message||"Error al solicitar restablecimiento"}}catch(r){return{success:!1,message:r.message||"Error al solicitar restablecimiento"}}},async resetPassword(s){try{const r=await Be("/auth/reset-password",s);return r.data.success?{success:!0,message:"Contrasea restablecida exitosamente"}:{success:!1,message:r.data.message||"Error al restablecer contrasea"}}catch(r){return{success:!1,message:r.message||"Error al restablecer contrasea"}}},async verifyResetToken(s){try{const r=await Re(`/auth/verify-reset-token/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Token invlido"}}catch(r){return{success:!1,message:r.message||"Token invlido"}}},async verifyEmail(s){try{const r=await Be("/auth/verify-email",{token:s});return r.data.success?{success:!0,message:"Email verificado exitosamente"}:{success:!1,message:r.data.message||"Error al verificar email"}}catch(r){return{success:!1,message:r.message||"Error al verificar email"}}},async resendVerificationEmail(){try{const s=await Be("/auth/resend-verification");return s.data.success?{success:!0,message:"Email de verificacin reenviado"}:{success:!1,message:s.data.message||"Error al reenviar email"}}catch(s){return{success:!1,message:s.message||"Error al reenviar email"}}},async getPermissions(){try{const s=await Re("/auth/permissions");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al obtener permisos")}catch(s){throw new Error(s.message||"Error al obtener permisos")}},async hasPermission(s){try{const r=await Re(`/auth/has-permission/${s}`);return r.data.success&&r.data.data.has_permission}catch{return!1}},async getRoles(){try{const s=await Re("/auth/roles");if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.message||"Error al obtener roles")}catch(s){throw new Error(s.message||"Error al obtener roles")}},async hasRole(s){try{const r=await Re(`/auth/has-role/${s}`);return r.data.success&&r.data.data.has_role}catch{return!1}},async registrarEstudiante(s){var r,a,t,n;try{const o=await Be("/auth/estudiante/registrar",s);return o.data.success?{success:!0,data:{token:o.data.token,user:o.data.user||o.data.data,token_type:o.data.token_type||"bearer",expires_in:o.data.expires_in},message:o.data.message||"Registro exitoso. Bienvenido al sistema"}:{success:!1,message:o.data.message||"Error en el registro",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al registrar",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},hs={ADMIN:"ADMIN",DOCENTE:"DOCENTE",ESTUDIANTE:"ESTUDIANTE"},Mw={admin:hs.ADMIN,docente:hs.DOCENTE,estudiante:hs.ESTUDIANTE,ADMIN:hs.ADMIN,DOCENTE:hs.DOCENTE,ESTUDIANTE:hs.ESTUDIANTE},Zs=s=>{if(!s)return null;const r=String(s).trim();return Mw[r]||r.toUpperCase()},Lw=(s,r)=>Zs(s)===Zs(r),mm=(s,r)=>{if(!Array.isArray(r))return!1;const a=Zs(s);return r.some(t=>Zs(t)===a)},Zf=c.createContext(),zw={user:null,token:null,isAuthenticated:!1,loading:!1,error:null};function $w(s,r){switch(r.type){case"AUTH_START":return{...s,loading:!0,error:null};case"AUTH_SUCCESS":const a=r.payload.user;return a&&a.rol&&(a.rol=Zs(a.rol)),{...s,user:a,token:r.payload.token,isAuthenticated:!0,loading:!1,error:null};case"AUTH_FAILURE":return{...s,user:null,token:null,isAuthenticated:!1,loading:!1,error:r.payload};case"AUTH_LOGOUT":return{...s,user:null,token:null,isAuthenticated:!1,loading:!1,error:null};case"AUTH_CLEAR_ERROR":return{...s,error:null};default:return s}}function Uw({children:s}){const[r,a]=c.useReducer($w,zw),[t,n]=c.useState(!1);c.useEffect(()=>{(async()=>{const D=localStorage.getItem("token");if(D&&!r.user&&!r.isAuthenticated&&!t){console.log(" checkAuth: Verificando autenticacin con token existente"),a({type:"AUTH_START"}),n(!0);try{await o()}finally{n(!1)}}else D?r.user&&r.isAuthenticated&&(console.log(" checkAuth: Usuario ya autenticado, no verificar de nuevo"),a({type:"AUTH_CLEAR_ERROR"})):(console.log(" checkAuth: No hay token, marcando como no autenticado"),a({type:"AUTH_FAILURE",payload:null}))})()},[]);const o=async()=>{var j,D,H,A,P,R;try{const G=localStorage.getItem("token");if(console.log(" checkAuth iniciado, token:",G?"Presente":"Ausente"),!G){console.log(" checkAuth: No hay token, marcando como no autenticado"),a({type:"AUTH_FAILURE",payload:null});return}if(r.user&&r.isAuthenticated){console.log(" checkAuth: Usuario ya autenticado, saltando verificacin"),a({type:"AUTH_CLEAR_ERROR"});return}console.log(" checkAuth: Llamando a getCurrentUser...");const T=await _t.getCurrentUser();if(console.log(" checkAuth: Respuesta de getCurrentUser:",T),T.success&&T.data){const $=T.data.user||T.data;$&&$.rol&&($.rol=Zs($.rol)),console.log(" checkAuth: Usuario obtenido, guardando en estado:",$),a({type:"AUTH_SUCCESS",payload:{user:$,token:G}})}else console.log(" checkAuth: Token no vlido, limpiando sesin"),localStorage.removeItem("token"),a({type:"AUTH_FAILURE",payload:"Sesin expirada"})}catch(G){console.error(" Error checking auth:",G),console.error(" Error details:",{status:(j=G.response)==null?void 0:j.status,message:G.message,data:(D=G.response)==null?void 0:D.data}),((H=G.response)==null?void 0:H.status)===401||((A=G.response)==null?void 0:A.status)===404||(P=G.message)!=null&&P.includes("401")||(R=G.message)!=null&&R.includes("404")?(console.log(" checkAuth: Error 401/404, limpiando sesin"),localStorage.removeItem("token"),a({type:"AUTH_FAILURE",payload:"Sesin expirada"})):r.user?console.log(" checkAuth: Error pero hay usuario en estado, manteniendo sesin"):(console.log(" checkAuth: Error de conexin, pero manteniendo token para reintentar"),a({type:"AUTH_FAILURE",payload:"Error de conexin. Reintentando..."}),localStorage.getItem("token")&&setTimeout(()=>{!r.user&&!r.isAuthenticated&&(console.log(" checkAuth: Reintentando verificacin..."),o())},2e3))}},i=async j=>{var D,H;try{a({type:"AUTH_START"}),n(!0);const A=await _t.login(j);if(console.log(" Login Response:",A),A.success){const{user:P,token:R}=A.data||{};if(console.log(" User from response:",P),console.log(" Token from response:",R?"Token presente":"Token ausente"),!P||!R)throw console.error(" Error: Usuario o token faltante en la respuesta"),n(!1),new Error("Error: Datos de autenticacin incompletos");P&&P.rol&&(P.rol=Zs(P.rol),console.log(" Rol normalizado:",P.rol)),localStorage.setItem("token",R),console.log(" Token guardado en localStorage"),a({type:"AUTH_SUCCESS",payload:{user:P,token:R}}),console.log(" Usuario autenticado y guardado en estado"),console.log(" Estado despus del dispatch:",{user:P,token:R,isAuthenticated:!0}),setTimeout(()=>{n(!1)},1e3);const G=P.nombre_completo||(P.nombre&&P.apellido?`${P.nombre} ${P.apellido}`.trim():P.nombre)||P.name||"Usuario";return m.success(`Bienvenido, ${G}`),{success:!0}}else throw console.error(" Login fallido:",A.message),n(!1),new Error(A.message||"Error en el login")}catch(A){console.error(" Error en login:",A),n(!1);const P=((H=(D=A.response)==null?void 0:D.data)==null?void 0:H.message)||A.message||"Error en el login";return a({type:"AUTH_FAILURE",payload:P}),m.error(P),{success:!1,error:P}}},l=async()=>{try{if(localStorage.getItem("token"))try{await _t.logout()}catch(D){console.error("Error during backend logout:",D)}}catch(j){console.error("Error during logout:",j)}finally{localStorage.removeItem("token"),sessionStorage.clear(),window.queryClient&&window.queryClient.clear(),a({type:"AUTH_LOGOUT"}),m.success("Sesin cerrada exitosamente"),setTimeout(()=>{window.location.href="/login"},500)}},d=async()=>{try{const j=await _t.refreshToken();if(j.success){const{token:D}=j.data;return localStorage.setItem("token",D),a({type:"AUTH_SUCCESS",payload:{user:r.user,token:D}}),{success:!0}}else throw new Error(j.message||"Error al refrescar token")}catch(j){return console.error("Error refreshing token:",j),l(),{success:!1}}},u=async j=>{var D,H,A,P,R,G;try{a({type:"AUTH_START"});const T=await _t.registrarEstudiante(j);if(T.success){const{user:$,token:L}=T.data;return localStorage.setItem("token",L),a({type:"AUTH_SUCCESS",payload:{user:$,token:L}}),m.success(T.message||"Registro exitoso. Bienvenido al sistema"),{success:!0}}else return T.errors?Object.keys(T.errors).forEach($=>{m.error(`${$}: ${Array.isArray(T.errors[$])?T.errors[$][0]:T.errors[$]}`)}):m.error(T.message||"Error en el registro"),a({type:"AUTH_FAILURE",payload:T.message||"Error en el registro"}),{success:!1,error:T.message,errors:T.errors}}catch(T){const $=((H=(D=T.response)==null?void 0:D.data)==null?void 0:H.message)||T.message||"Error al registrar";return(P=(A=T.response)==null?void 0:A.data)!=null&&P.errors?Object.keys(T.response.data.errors).forEach(L=>{m.error(`${L}: ${Array.isArray(T.response.data.errors[L])?T.response.data.errors[L][0]:T.response.data.errors[L]}`)}):m.error($),a({type:"AUTH_FAILURE",payload:$}),{success:!1,error:$,errors:(G=(R=T.response)==null?void 0:R.data)==null?void 0:G.errors}}},g=async j=>{var D,H;try{const A=await _t.updateProfile(j);if(A.success)return a({type:"AUTH_SUCCESS",payload:{user:A.data.user,token:r.token}}),m.success("Perfil actualizado exitosamente"),{success:!0};throw new Error(A.message||"Error al actualizar perfil")}catch(A){const P=((H=(D=A.response)==null?void 0:D.data)==null?void 0:H.message)||A.message||"Error al actualizar perfil";return m.error(P),{success:!1,error:P}}},h=()=>{a({type:"AUTH_CLEAR_ERROR"})},y=(j,D)=>{try{return console.log(" setAuthData: Estableciendo datos de autenticacin",{hasUser:!!j,hasToken:!!D,userRole:j==null?void 0:j.rol}),j&&j.rol&&(j.rol=Zs(j.rol)),D&&(localStorage.setItem("token",D),console.log("    Token guardado en localStorage")),a({type:"AUTH_SUCCESS",payload:{user:j,token:D}}),console.log("    Datos de autenticacin establecidos correctamente"),{success:!0}}catch(H){return console.error("    Error al establecer datos de autenticacin:",H),{success:!1,error:H.message}}},k=j=>{var D;return(D=r.user)!=null&&D.rol?Lw(r.user.rol,j):!1},v={...r,login:i,logout:l,registrar:u,refreshToken:d,updateProfile:g,clearError:h,setAuthData:y,checkAuth:o,hasRole:k,hasAnyRole:j=>{var D;return!((D=r.user)!=null&&D.rol)||!Array.isArray(j)?!1:mm(r.user.rol,j)},hasPermission:j=>{var D;return!((D=r.user)!=null&&D.permisos)||!Array.isArray(r.user.permisos)?!1:r.user.permisos.some(H=>H.nombre_permiso===j||H.nombre===j)},hasPermissionByModuleAction:(j,D)=>{var H;return!((H=r.user)!=null&&H.permisos)||!Array.isArray(r.user.permisos)?!1:r.user.permisos.some(A=>A.modulo===j&&A.accion===D)},hasAnyPermission:j=>{var D;return!((D=r.user)!=null&&D.permisos)||!Array.isArray(r.user.permisos)||!Array.isArray(j)?!1:j.some(H=>r.user.permisos.some(A=>A.nombre_permiso===H||A.nombre===H))},isAdmin:()=>k(hs.ADMIN),isDocente:()=>k(hs.DOCENTE),isEstudiante:()=>k(hs.ESTUDIANTE),getUserRole:()=>{var j;return Zs((j=r.user)==null?void 0:j.rol)}};return e.jsx(Zf.Provider,{value:v,children:s})}function Ts(){const s=c.useContext(Zf);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}const Bw=c.createContext(),Vw={theme:"light",sidebarOpen:!0,sidebarCollapsed:!1};function qw(s,r){switch(r.type){case"SET_THEME":return{...s,theme:r.payload};case"TOGGLE_THEME":return{...s,theme:s.theme==="light"?"dark":"light"};case"SET_SIDEBAR_OPEN":return{...s,sidebarOpen:r.payload};case"TOGGLE_SIDEBAR":return{...s,sidebarOpen:!s.sidebarOpen};case"SET_SIDEBAR_COLLAPSED":return{...s,sidebarCollapsed:r.payload};case"TOGGLE_SIDEBAR_COLLAPSED":return{...s,sidebarCollapsed:!s.sidebarCollapsed};default:return s}}function Hw({children:s}){const[r,a]=c.useReducer(qw,Vw);c.useEffect(()=>{const g=localStorage.getItem("theme"),h=localStorage.getItem("sidebarOpen"),y=localStorage.getItem("sidebarCollapsed");g&&a({type:"SET_THEME",payload:g}),h!==null&&a({type:"SET_SIDEBAR_OPEN",payload:h==="true"}),y!==null&&a({type:"SET_SIDEBAR_COLLAPSED",payload:y==="true"})},[]),c.useEffect(()=>{const g=document.documentElement;r.theme==="dark"?g.classList.add("dark"):g.classList.remove("dark")},[r.theme]),c.useEffect(()=>{localStorage.setItem("theme",r.theme),localStorage.setItem("sidebarOpen",r.sidebarOpen.toString()),localStorage.setItem("sidebarCollapsed",r.sidebarCollapsed.toString())},[r.theme,r.sidebarOpen,r.sidebarCollapsed]);const u={...r,setTheme:g=>{a({type:"SET_THEME",payload:g})},toggleTheme:()=>{a({type:"TOGGLE_THEME"})},setSidebarOpen:g=>{a({type:"SET_SIDEBAR_OPEN",payload:g})},toggleSidebar:()=>{a({type:"TOGGLE_SIDEBAR"})},setSidebarCollapsed:g=>{a({type:"SET_SIDEBAR_COLLAPSED",payload:g})},toggleSidebarCollapsed:()=>{a({type:"TOGGLE_SIDEBAR_COLLAPSED"})}};return e.jsx(Bw.Provider,{value:u,children:s})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(s,r)=>{const a=c.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:d,...u},g)=>c.createElement("svg",{ref:g,...Gw,width:n,height:n,stroke:t,strokeWidth:i?Number(o)*24/Number(n):o,className:["lucide",`lucide-${Qw(s)}`,l].join(" "),...u},[...r.map(([h,y])=>c.createElement(h,y)),...Array.isArray(d)?d:[d]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ie("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Ie("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Ie("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Ie("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Ie("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Ie("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Ie("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Ie("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ie("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Ie("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ie("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=Ie("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ie("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gm=()=>{const{user:s,hasPermission:r,hasPermissionByModuleAction:a,hasAnyPermission:t}=Ts();return{can:h=>r(h),canDo:(h,y)=>a(h,y),canAny:h=>t(h),canCreate:h=>a(h,"crear"),canEdit:h=>a(h,"editar"),canDelete:h=>a(h,"eliminar"),canView:h=>a(h,"ver"),permisos:(s==null?void 0:s.permisos)||[]}},ca={async getNotificaciones(s={}){var r,a,t,n,o,i;try{const l=await Re("/notificaciones",s);return l.data&&l.data.success?{success:!0,data:l.data.data,noLeidas:l.data.no_leidas||0}:{success:!1,message:((r=l.data)==null?void 0:r.message)||"Error al obtener notificaciones",data:null}}catch(l){const d=!l.response&&(l.code==="ERR_NETWORK"||((a=l.message)==null?void 0:a.includes("Network Error"))),u=((t=l.message)==null?void 0:t.includes("CORS"))||((n=l.message)==null?void 0:n.includes("blocked"));return!d&&!u&&console.error("Error en notificacionService.getNotificaciones:",l),{success:!1,message:((i=(o=l.response)==null?void 0:o.data)==null?void 0:i.message)||l.message||"Error al obtener notificaciones",data:null}}},async contarNoLeidas(){try{const s=await Re("/notificaciones/no-leidas");return s.data.success?{success:!0,count:s.data.data.count||0}:{success:!1,count:0}}catch{return{success:!1,count:0}}},async marcarLeida(s){try{const r=await os(`/notificaciones/${s}/marcar-leida`);return r.data.success?{success:!0,data:r.data.data,message:r.data.message||"Notificacin marcada como leda"}:{success:!1,message:r.data.message||"Error al marcar notificacin"}}catch(r){return{success:!1,message:r.message||"Error al marcar notificacin"}}},async marcarTodasLeidas(){try{const s=await os("/notificaciones/marcar-todas-leidas");return s.data.success?{success:!0,message:s.data.message||"Todas las notificaciones marcadas como ledas"}:{success:!1,message:s.data.message||"Error al marcar notificaciones"}}catch(s){return{success:!1,message:s.message||"Error al marcar notificaciones"}}},async eliminarNotificacion(s){try{const r=await gs(`/notificaciones/${s}`);return r.data.success?{success:!0,message:r.data.message||"Notificacin eliminada exitosamente"}:{success:!1,message:r.data.message||"Error al eliminar notificacin"}}catch(r){return{success:!1,message:r.message||"Error al eliminar notificacin"}}}},g1=s=>{const a=new Date-new Date(s),t=Math.floor(a/1e3),n=Math.floor(t/60),o=Math.floor(n/60),i=Math.floor(o/24);return i>0?`hace ${i} da${i>1?"s":""}`:o>0?`hace ${o} hora${o>1?"s":""}`:n>0?`hace ${n} minuto${n>1?"s":""}`:"ahora"},x1=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(0),[n,o]=c.useState(!1),[i,l]=c.useState(!1),[d,u]=c.useState(!1),g=c.useRef(null),h=pr();c.useEffect(()=>{y();const N=setInterval(()=>{d||y()},3e4);return()=>clearInterval(N)},[d]),c.useEffect(()=>{const N=_=>{g.current&&!g.current.contains(_.target)&&o(!1)};return n&&document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[n]);const y=async()=>{var N,_,x,v,j,D;try{l(!0);const H=await ca.getNotificaciones({per_page:5});if(H.success)r(((N=H.data)==null?void 0:N.data)||[]),t(H.noLeidas||0),u(!1);else{const A=((_=H.message)==null?void 0:_.includes("conexin"))||((x=H.message)==null?void 0:x.includes("CORS"));u(A)}}catch(H){const A=!H.response&&(H.code==="ERR_NETWORK"||((v=H.message)==null?void 0:v.includes("Network Error"))),P=((j=H.message)==null?void 0:j.includes("CORS"))||((D=H.message)==null?void 0:D.includes("blocked"));(A||P)&&u(!0)}finally{l(!1)}},k=async(N,_)=>{_.stopPropagation(),(await ca.marcarLeida(N)).success&&(r(v=>v.map(j=>j.id===N?{...j,leida:!0,leida_at:new Date().toISOString()}:j)),t(v=>Math.max(0,v-1)))},E=async()=>{l(!0),(await ca.marcarTodasLeidas()).success&&(r(_=>_.map(x=>({...x,leida:!0}))),t(0),m.success("Todas las notificaciones marcadas como ledas")),l(!1)},S=async(N,_)=>{_.stopPropagation(),(await ca.eliminarNotificacion(N)).success&&(r(v=>v.filter(j=>j.id!==N)),m.success("Notificacin eliminada"))},C=N=>{N.leida||k(N.id,{stopPropagation:()=>{}}),N.accion_url&&(h(N.accion_url),o(!1))},b=N=>{switch(N){case"horario_cambio":return e.jsx(Qs,{className:"h-4 w-4"});case"asistencia":return e.jsx(Xr,{className:"h-4 w-4"});case"alerta":return e.jsx(ws,{className:"h-4 w-4"});default:return e.jsx(Br,{className:"h-4 w-4"})}},p=N=>{switch(N){case"horario_cambio":return"text-primary-500 bg-primary-100 dark:bg-primary-900/30";case"asistencia":return"text-success-500 bg-success-100 dark:bg-success-900/30";case"alerta":return"text-warning-500 bg-warning-100 dark:bg-warning-900/30";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}};return e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>o(!n),className:"relative p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 group",children:[e.jsx(Br,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-error-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse shadow-glow",children:a>9?"9+":a})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 glass-card border border-gray-200/50 dark:border-gray-700/50 rounded-2xl shadow-glow-lg z-50 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-r from-primary-500/10 to-accent-500/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold gradient-text",children:"Notificaciones"}),a>0&&e.jsx("button",{onClick:E,disabled:i,className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 font-medium transition-colors",children:i?"Marcando...":"Marcar todas ledas"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Br,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay notificaciones"})]}):e.jsx("div",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:s.map(N=>e.jsx("div",{onClick:()=>C(N),className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer ${N.leida?"":"bg-primary-50/50 dark:bg-primary-900/10"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${p(N.tipo)}`,children:b(N.tipo)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-semibold ${N.leida?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-gray-100"}`,children:N.titulo}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:N.mensaje}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"h-3 w-3 mr-1"}),g1(N.created_at||N.fecha_envio)]}),(N.fecha_formateada||N.created_at)&&e.jsx("span",{className:"text-xs",children:N.fecha_formateada||(N.created_at?new Date(N.created_at).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"")})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!N.leida&&e.jsx("button",{onClick:_=>k(N.id,_),className:"p-1 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Marcar como leda",children:e.jsx(Xr,{className:"h-4 w-4 text-primary-600 dark:text-primary-400"})}),e.jsx("button",{onClick:_=>S(N.id,_),className:"p-1 rounded-lg hover:bg-error-100 dark:hover:bg-error-900/30 transition-colors",title:"Eliminar",children:e.jsx(xr,{className:"h-4 w-4 text-error-600 dark:text-error-400"})})]})]})}),!N.leida&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-primary-500 rounded-full mt-2"})]})},N.id))})}),s.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("button",{onClick:()=>{h("/notificaciones"),o(!1)},className:"w-full text-center text-sm text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 font-medium transition-colors",children:"Ver todas las notificaciones"})})]})]})]})},Fc=()=>{var P,R,G;const[s,r]=c.useState(!1),[a,t]=c.useState(!1),[n,o]=c.useState(""),[i,l]=c.useState([]),[d,u]=c.useState(!1),g=c.useRef(null),h=Oa(),y=pr(),{user:k,logout:E,hasPermission:S}=Ts(),C=[{name:"Dashboard",href:"/admin/dashboard",icon:Oc,roles:["ADMIN"],permiso:null},{name:"Pases",href:"/admin/paises",icon:wo,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Provincias",href:"/admin/provincias",icon:Eo,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Ciudades",href:"/admin/ciudades",icon:Js,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Instituciones",href:"/admin/instituciones",icon:Mt,roles:["ADMIN"],permiso:"configuracion_ver"},{name:"Usuarios Sistema",href:"/admin/sistema-usuarios",icon:nr,roles:["ADMIN"],permiso:"usuarios_ver"},{name:"Roles y Permisos",href:"/admin/roles",icon:nr,roles:["ADMIN"],permiso:"roles_ver"},{name:"Tipos Convenio",href:"/admin/tipo-convenios",icon:ss,roles:["ADMIN"],permiso:"convenios_ver"},{name:"Convenios",href:"/admin/convenios",icon:ss,roles:["ADMIN"],permiso:"convenios_ver"},{name:"Ramas Acadmicas",href:"/admin/ramas-academicas",icon:ts,roles:["ADMIN"],permiso:"programas_ver"},{name:"Versiones",href:"/admin/versiones",icon:ga,roles:["ADMIN"],permiso:"programas_ver"},{name:"Tipos Programa",href:"/admin/tipos-programa",icon:ys,roles:["ADMIN"],permiso:"programas_ver"},{name:"Mdulos",href:"/admin/modulos",icon:ys,roles:["ADMIN"],permiso:"programas_ver"},{name:"Programas",href:"/admin/programas",icon:ys,roles:["ADMIN"],permiso:"programas_ver"},{name:"Docentes",href:"/admin/docentes",icon:Da,roles:["ADMIN"],permiso:"docentes_ver"},{name:"Horarios",href:"/admin/horarios",icon:Je,roles:["ADMIN"],permiso:"grupos_ver"},{name:"Grupos",href:"/admin/grupos",icon:Rs,roles:["ADMIN"],permiso:"grupos_ver"},{name:"Estudiantes",href:"/admin/estudiantes",icon:ts,roles:["ADMIN"],permiso:"estudiantes_ver"},{name:"Inscripciones",href:"/admin/inscripciones",icon:Dn,roles:["ADMIN"],permiso:"inscripciones_ver"},{name:"Planes de Pago",href:"/admin/planes-pago",icon:ea,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Descuentos",href:"/admin/descuentos",icon:su,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Gestin de Pagos",href:"/admin/gestion-pagos",icon:Tr,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Pagos",href:"/admin/pagos",icon:ea,roles:["ADMIN"],permiso:"pagos_ver"},{name:"Validacin Documentos",href:"/admin/documentos",icon:Xf,roles:["ADMIN"],permiso:"documentos_ver"},{name:"Tipos Documento",href:"/admin/tipos-documento",icon:ss,roles:["ADMIN"],permiso:"documentos_ver"},{name:"Reportes",href:"/admin/reportes",icon:Yf,roles:["ADMIN"],permiso:null},{name:"Bitcora",href:"/admin/bitacora",icon:vl,roles:["ADMIN"],permiso:"bitacora_ver"},{name:"Notificaciones",href:"/admin/notificaciones",icon:Br,roles:["ADMIN"],permiso:null}],b=[{name:"Dashboard",href:"/docente/dashboard",icon:Oc,roles:["DOCENTE"]},{name:"Mis Grupos",href:"/docente/grupos",icon:Rs,roles:["DOCENTE"]},{name:"Notificaciones",href:"/docente/notificaciones",icon:Br,roles:["DOCENTE"]}],p=[{name:"Dashboard",href:"/estudiante/dashboard",icon:Oc,roles:["ESTUDIANTE"]},{name:"Inscripciones",href:"/estudiante/inscripciones",icon:ts,roles:["ESTUDIANTE"]},{name:"Mis Materias",href:"/estudiante/materias",icon:ys,roles:["ESTUDIANTE"]},{name:"Mis Notas",href:"/estudiante/notas",icon:mt,roles:["ESTUDIANTE"]},{name:"Mis Documentos",href:"/estudiante/mis-documentos",icon:ss,roles:["ESTUDIANTE"]},{name:"Mis Pagos",href:"/estudiante/mis-pagos",icon:ea,roles:["ESTUDIANTE"]},{name:"Notificaciones",href:"/estudiante/notificaciones",icon:Br,roles:["ESTUDIANTE"]}],_=(()=>{var $;const T=($=k==null?void 0:k.rol)==null?void 0:$.toUpperCase();return T==="ESTUDIANTE"?p:T==="DOCENTE"?b:C})(),x=T=>h.pathname===T||h.pathname.startsWith(T+"/"),v=async()=>{var $;await E();const T=($=k==null?void 0:k.rol)==null?void 0:$.toUpperCase();y(T==="ESTUDIANTE"?"/estudiante/login":T==="DOCENTE"?"/docente/login":"/login")},j=_.filter(T=>{var $;return!T.permiso||(($=k==null?void 0:k.rol)==null?void 0:$.toUpperCase())==="ADMIN"?!0:S(T.permiso)}),D=()=>r(!1),H=()=>{t(!a),document.documentElement.classList.toggle("dark")},A=async T=>{const $=T.trim().toLowerCase();if(!$||$.length<2){l([]),u(!1);return}const L=$.replace(/\s+/g," ").trim();try{const Y=[],ne=[{name:"docentes",route:"/docentes",icon:ts,label:"Docentes",getDisplayName:Q=>{var me;return((me=Q.user)==null?void 0:me.name)||Q.codigo_docente||Q.nombre||"Sin nombre"},getSubtitle:Q=>{var me;return((me=Q.user)==null?void 0:me.email)||Q.especialidad||""}},{name:"materias",route:"/materias",icon:ys,label:"Materias",getDisplayName:Q=>Q.nombre||Q.codigo_materia||"Sin nombre",getSubtitle:Q=>`${Q.codigo_materia||""} ${Q.sigla||""}`.trim()||Q.nivel||""},{name:"aulas",route:"/aulas",icon:Ht,label:"Aulas",getDisplayName:Q=>Q.nombre||Q.codigo_aula||"Sin nombre",getSubtitle:Q=>`${Q.edificio||""} - Piso ${Q.piso||""}`.trim()||Q.tipo||""},{name:"grupos",route:"/grupos",icon:Da,label:"Grupos",getDisplayName:Q=>Q.nombre||`Grupo ${Q.numero_grupo||""}`||"Sin nombre",getSubtitle:Q=>{var me,xe,ie;return((me=Q.materia)==null?void 0:me.nombre)||((xe=Q.materia)==null?void 0:xe.sigla)||((ie=Q.gestion)==null?void 0:ie.nombre)||""}},{name:"usuarios",route:"/usuarios",icon:Rs,label:"Usuarios",getDisplayName:Q=>Q.name||Q.email||"Sin nombre",getSubtitle:Q=>{var me;return Q.email||((me=Q.rol)==null?void 0:me.nombre)||""}},{name:"horarios",route:"/horarios",icon:Je,label:"Horarios",getDisplayName:Q=>{var ie,le,Se;const me=((le=(ie=Q.grupo)==null?void 0:ie.materia)==null?void 0:le.nombre)||Q.materia||"Sin materia",xe=((Se=Q.grupo)==null?void 0:Se.numero_grupo)||Q.grupo||"";return`${me} - Grupo ${xe}`.trim()},getSubtitle:Q=>{var le,Se,pe;const me=((le=Q.aula)==null?void 0:le.nombre)||Q.aula||"Sin aula",xe=((pe=(Se=Q.docente)==null?void 0:Se.user)==null?void 0:pe.name)||Q.docente||"Sin docente",ie=Q.hora_inicio&&Q.hora_fin?`${Q.hora_inicio} - ${Q.hora_fin}`:"";return`${me}  ${xe} ${ie?` ${ie}`:""}`.trim()}},{name:"asistencias",route:"/asistencias",icon:Dn,label:"Asistencias",getDisplayName:Q=>{var ie,le,Se;const me=((Se=(le=(ie=Q.horario)==null?void 0:ie.grupo)==null?void 0:le.materia)==null?void 0:Se.nombre)||Q.materia||"Sin materia",xe=Q.fecha||"";return`${me} - ${xe}`.trim()},getSubtitle:Q=>{var ie,le;const me=((le=(ie=Q.docente)==null?void 0:ie.user)==null?void 0:le.name)||Q.docente||"Sin docente",xe=Q.estado||"";return`${me}  ${xe}`.trim()}},{name:"gestiones-academicas",route:"/gestiones-academicas",icon:ga,label:"Gestiones Acadmicas",getDisplayName:Q=>Q.nombre||`${Q.anio||Q.ao||""} - ${Q.periodo||""}`.trim()||"Sin nombre",getSubtitle:Q=>`${Q.anio||Q.ao||""} ${Q.periodo||""}`.trim()||""},{name:"paises",route:"/admin/paises",icon:wo,label:"Pases",getDisplayName:Q=>Q.nombre_pais||"Sin nombre",getSubtitle:Q=>Q.codigo_iso||Q.codigo_telefono||""},{name:"provincias",route:"/admin/provincias",icon:Eo,label:"Provincias",getDisplayName:Q=>Q.nombre_provincia||"Sin nombre",getSubtitle:Q=>{var me;return((me=Q.pais)==null?void 0:me.nombre_pais)||Q.codigo_provincia||""}},{name:"ciudades",route:"/admin/ciudades",icon:Js,label:"Ciudades",getDisplayName:Q=>Q.nombre_ciudad||"Sin nombre",getSubtitle:Q=>{var me;return((me=Q.provincia)==null?void 0:me.nombre_provincia)||Q.codigo_postal||""}},{name:"instituciones",route:"/admin/instituciones",icon:Mt,label:"Instituciones",getDisplayName:Q=>Q.nombre||"Sin nombre",getSubtitle:Q=>{var me;return((me=Q.ciudad)==null?void 0:me.nombre_ciudad)||Q.email||""}},{name:"sistema-usuarios",route:"/admin/sistema-usuarios",icon:nr,label:"Usuarios del Sistema",getDisplayName:Q=>{const me=Q.persona||{};return`${me.nombre||""} ${me.apellido||""}`.trim()||Q.email||"Sin nombre"},getSubtitle:Q=>{var me;return Q.email||((me=Q.rol)==null?void 0:me.nombre_rol)||""}}].filter(Q=>{const me=_.find(xe=>xe.href===Q.route);return me&&(!me.roles||me.roles.includes(k==null?void 0:k.rol))});for(const Q of ne){let me=`/${Q.name}`;Q.name==="paises"||Q.name==="provincias"||Q.name==="ciudades"||Q.name==="instituciones"?me=`/admin/${Q.name}`:Q.name==="sistema-usuarios"?me="/admin/usuarios":Q.name==="gestiones-academicas"?me="/admin/gestiones-academicas":Q.name==="docentes"?me="/admin/docentes":Q.name==="grupos"?me="/admin/grupos":Q.name==="horarios"?me="/admin/horarios":Q.name==="asistencias"&&(me="/admin/asistencias"),Y.push(Ia.get(me,{params:{search:L,per_page:5}}).then(xe=>{var le,Se;const ie=(le=xe.data)!=null&&le.success?((Se=xe.data.data)==null?void 0:Se.data)||xe.data.data||[]:[];return{module:Q.name,route:Q.route,icon:Q.icon,label:Q.label,getDisplayName:Q.getDisplayName,getSubtitle:Q.getSubtitle,results:ie}}).catch(xe=>(console.error(`Error buscando en ${Q.name}:`,xe),{module:Q.name,route:Q.route,icon:Q.icon,label:Q.label,getDisplayName:Q.getDisplayName,getSubtitle:Q.getSubtitle,results:[]})))}const fe=(await Promise.all(Y)).filter(Q=>Q.results&&Q.results.length>0);l(fe),u(fe.length>0)}catch(Y){console.error("Error en bsqueda global:",Y),l([]),u(!1)}};return c.useEffect(()=>{const T=setTimeout(()=>{n&&n.trim().length>=2?A(n):(l([]),u(!1))},300);return()=>clearTimeout(T)},[n,k==null?void 0:k.rol]),c.useEffect(()=>{const T=$=>{g.current&&!g.current.contains($.target)&&u(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${a?"dark":""}`,children:[s&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-40 lg:hidden transition-opacity",onClick:D}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-80 glass-card transform transition-all duration-300 ease-in-out lg:hidden ${s?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ts,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold gradient-text",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Acadmico"})]})]}),e.jsx("button",{onClick:D,className:"p-2 rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:e.jsx(xr,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:e.jsx("div",{className:"space-y-2",children:j.map(T=>{const $=T.icon,L=x(T.href);return e.jsxs(Hs,{to:T.href,onClick:D,className:`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 group ${L?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-glow":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx($,{className:`mr-3 h-5 w-5 flex-shrink-0 transition-transform duration-200 ${L?"text-white":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),T.name]},T.name)})})}),e.jsxs("div",{className:"border-t border-gray-200/50 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center shadow-glow",children:e.jsx("span",{className:"text-white font-bold text-lg",children:((P=k==null?void 0:k.name)==null?void 0:P.charAt(0))||"U"})})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:(k==null?void 0:k.name)||"Usuario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:(k==null?void 0:k.rol)||"Usuario"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Hs,{to:"/perfil",onClick:D,className:"flex-1 flex items-center justify-center px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200",children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),"Perfil"]}),e.jsxs("button",{onClick:v,className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-error-500 to-error-600 text-white rounded-xl text-sm font-medium hover:shadow-glow transition-all duration-200",children:[e.jsx(px,{className:"h-4 w-4 mr-2"}),"Salir"]})]})]})]})}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 glass-card border-r border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center h-20 flex-shrink-0 px-6 border-b border-gray-200/50 dark:border-gray-700/50 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(ts,{className:"h-7 w-7 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-success-500 rounded-full flex items-center justify-center shadow-glow animate-pulse",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Acadmico"})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:e.jsx("div",{className:"space-y-2",children:j.map(T=>{const $=T.icon,L=x(T.href);return e.jsxs(Hs,{to:T.href,className:`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-300 group relative overflow-hidden ${L?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-glow":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100 hover:shadow-soft"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-primary-500/10 to-accent-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${L?"opacity-100":""}`}),e.jsx($,{className:`mr-3 h-5 w-5 flex-shrink-0 transition-all duration-300 ${L?"text-white scale-110":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 group-hover:scale-110"}`}),e.jsx("span",{className:"relative z-10 group-hover:translate-x-1 transition-transform duration-300",children:T.name}),L&&e.jsx("div",{className:"absolute right-2 w-2 h-2 bg-white rounded-full animate-pulse"})]},T.name)})})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200/50 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center group mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center shadow-glow",children:e.jsx("span",{className:"text-white font-bold text-lg",children:((R=k==null?void 0:k.name)==null?void 0:R.charAt(0))||"U"})})}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 truncate transition-colors duration-200",children:(k==null?void 0:k.name)||"Usuario"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:(k==null?void 0:k.rol)||"Usuario"})]})]}),e.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-error-500 to-error-600 text-white rounded-xl text-sm font-medium hover:shadow-glow transition-all duration-200",children:[e.jsx(px,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})]})}),e.jsxs("div",{className:"lg:pl-72 flex flex-col min-h-screen",children:[e.jsx("div",{className:"sticky top-0 z-30 lg:hidden glass-card border-b border-gray-200/50 dark:border-gray-700/50 shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:e.jsx(o1,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-lg font-bold gradient-text",children:"ICAP"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:H,className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:a?e.jsx(bx,{className:"h-5 w-5"}):e.jsx(yx,{className:"h-5 w-5"})})})]})}),e.jsx("div",{className:"hidden lg:block sticky top-0 z-30 glass-card border-b border-gray-200/50 dark:border-gray-700/50 shadow-soft",children:e.jsxs("div",{className:"flex items-center justify-between h-20 px-8",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative group",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:((G=_.find(T=>x(T.href)))==null?void 0:G.name)||"Dashboard"}),e.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-primary-500 to-accent-500 group-hover:w-full transition-all duration-300"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative group",ref:g,children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-hover:text-primary-500 transition-colors duration-200"}),e.jsx("input",{type:"text",placeholder:"Buscar en todo el sistema...",value:n,onChange:T=>{const $=T.target.value;o($),$.trim().length>=2&&i.length>0?u(!0):$.trim().length<2&&u(!1)},onFocus:()=>{n.trim().length>=2&&i.length>0&&u(!0)},onKeyDown:T=>{T.key==="Escape"&&(u(!1),o(""))},className:"pl-10 pr-4 py-2 w-64 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:shadow-soft group-hover:shadow-glow"}),d&&i.length>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-glow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-50 to-accent-50 dark:from-primary-900/20 dark:to-accent-900/20",children:e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:[i.reduce((T,$)=>T+$.results.length,0)," resultados encontrados"]})}),i.map((T,$)=>{const L=T.icon;return e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900/50 flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-primary-500 dark:text-primary-400"}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:T.label||T.module}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",T.results.length,")"]})]}),e.jsxs("div",{className:"py-2",children:[T.results.slice(0,3).map((Y,M)=>{var fe,Q,me;const ne=T.getDisplayName?T.getDisplayName(Y):Y.name||Y.nombre||Y.codigo_docente||Y.codigo_materia||Y.codigo_aula||"Sin nombre",oe=T.getSubtitle?T.getSubtitle(Y):((fe=Y.user)==null?void 0:fe.email)||((Q=Y.user)==null?void 0:Q.name)||((me=Y.materia)==null?void 0:me.nombre)||"";return e.jsxs(Hs,{to:`${T.route}${Y.id?`?highlight=${Y.id}&search=${encodeURIComponent(n)}`:`?search=${encodeURIComponent(n)}`}`,onClick:()=>{u(!1),o("")},className:"block px-4 py-2 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors border-l-2 border-transparent hover:border-primary-500",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:ne}),oe&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:oe})]},M)}),T.results.length>3&&e.jsxs(Hs,{to:`${T.route}?search=${encodeURIComponent(n)}`,onClick:()=>{u(!1),o("")},className:"block px-4 py-2 text-sm text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 font-medium border-l-2 border-transparent hover:border-primary-500",children:["Ver todos los resultados (",T.results.length,") "]})]})]},$)}),i.length===0&&e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(is,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No se encontraron resultados"})]})]})]}),e.jsx(x1,{}),e.jsx("button",{onClick:H,className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 group",children:e.jsx("div",{className:"group-hover:scale-110 transition-transform duration-200",children:a?e.jsx(bx,{className:"h-5 w-5"}):e.jsx(yx,{className:"h-5 w-5"})})})]})]})}),e.jsx("main",{className:"flex-1",children:e.jsx(Fj,{})})]})]})},h1=()=>{const s=[{id:1,nombre:"Programa de Capacitacin",descripcion:"Programas especializados para el desarrollo profesional",icon:e.jsx(ts,{className:"h-8 w-8"})},{id:2,nombre:"Cursos Tcnicos",descripcion:"Formacin tcnica de alta calidad",icon:e.jsx(ys,{className:"h-8 w-8"})},{id:3,nombre:"Diplomados",descripcion:"Programas de diplomado especializados",icon:e.jsx(mt,{className:"h-8 w-8"})}],r=["Certificacin reconocida","Docentes altamente calificados","Instalaciones modernas","Flexibilidad horaria","Bolsa de trabajo","Seguimiento personalizado"];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx(ts,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ICAP"}),e.jsx("p",{className:"text-xs text-gray-600",children:"UAGRM - Oficial SCZ"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("a",{href:"https://www.facebook.com/p/ICAP-UAGRM-Oficial-SCZ-100083936572455/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 transition-colors",children:e.jsx(hx,{className:"h-6 w-6"})}),e.jsx(Hs,{to:"/portales",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Acceder a Portales"})]})]})}),e.jsx("section",{className:"bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 text-white py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Mt,{className:"h-16 w-16 mx-auto mb-4"})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Instituto de Capacitacin"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-semibold mb-4",children:"ICAP - UAGRM"}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Formacin profesional de excelencia para tu futuro"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(Hs,{to:"/portales",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2",children:["Ver Programas",e.jsx(wa,{className:"h-5 w-5"})]}),e.jsx(Hs,{to:"/portales",className:"bg-blue-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-400 transition-colors border-2 border-white",children:"Iniciar Sesin"})]})]})})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Sobre Nosotros"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Nuestra Misin"}),e.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:"El Instituto de Capacitacin (ICAP) de la Universidad Autnoma Gabriel Ren Moreno tiene como misin proporcionar formacin profesional de alta calidad, desarrollando competencias tcnicas y profesionales que contribuyan al crecimiento personal y profesional de nuestros estudiantes."}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Nos comprometemos a ofrecer programas educativos innovadores, con docentes altamente calificados y un enfoque prctico que prepare a nuestros estudiantes para los desafos del mercado laboral actual."})]}),e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(c1,{className:"h-6 w-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Visin"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Ser el instituto de referencia en formacin profesional en Bolivia"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(mt,{className:"h-6 w-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Valores"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Excelencia, compromiso, innovacin y responsabilidad social"})]})]})]})})]})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Nuestros Programas"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Ofertas acadmicas diseadas para tu crecimiento profesional"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mt-4"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:s.map(a=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 hover:shadow-xl transition-shadow hover:border-blue-500",children:[e.jsx("div",{className:"text-blue-600 mb-4",children:a.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:a.nombre}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.descripcion}),e.jsxs(Hs,{to:"/portales",className:"text-blue-600 font-medium hover:text-blue-700 flex items-center gap-2",children:["Ms informacin",e.jsx(wa,{className:"h-4 w-4"})]})]},a.id))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Por qu elegir ICAP?"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:r.map((a,t)=>e.jsxs("div",{className:"flex items-start space-x-4 bg-white p-4 rounded-lg shadow-sm",children:[e.jsx(Me,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-gray-700 font-medium",children:a})]},t))})]})})}),e.jsx("section",{className:"py-20 bg-gray-900 text-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Contctanos"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[e.jsxs("div",{children:[e.jsx(Js,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Ubicacin"}),e.jsxs("p",{className:"text-gray-400",children:["Universidad Autnoma Gabriel Ren Moreno",e.jsx("br",{}),"Santa Cruz, Bolivia"]})]}),e.jsxs("div",{children:[e.jsx(ru,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Telfono"}),e.jsx("p",{className:"text-gray-400",children:"Consultar en oficinas"})]}),e.jsxs("div",{children:[e.jsx(Bn,{className:"h-8 w-8 mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-400",children:"icap@uagrm.edu.bo"})]})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("a",{href:"https://www.facebook.com/p/ICAP-UAGRM-Oficial-SCZ-100083936572455/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-blue-600 px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(hx,{className:"h-5 w-5"}),"Sguenos en Facebook"]})})]})})}),e.jsx("footer",{className:"bg-gray-800 text-gray-400 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("p",{className:"mb-2",children:[" ",new Date().getFullYear()," ICAP - UAGRM. Todos los derechos reservados."]}),e.jsx("p",{className:"text-sm",children:"Instituto de Capacitacin - Universidad Autnoma Gabriel Ren Moreno"})]})})]})},f1=()=>{const s=[{id:"estudiante",titulo:"Portal del Estudiante",descripcion:"Accede a tus materias, calificaciones, documentos y pagos",icon:e.jsx(ts,{className:"h-12 w-12"}),color:"from-green-500 to-green-600",hoverColor:"hover:from-green-600 hover:to-green-700",link:"/estudiante/login",features:["Consulta tus materias","Revisa tus calificaciones","Gestiona tus documentos","Realiza pagos en lnea"]},{id:"docente",titulo:"Portal del Docente",descripcion:"Administra tus grupos, estudiantes y calificaciones",icon:e.jsx(ir,{className:"h-12 w-12"}),color:"from-blue-500 to-blue-600",hoverColor:"hover:from-blue-600 hover:to-blue-700",link:"/docente/login",features:["Gestiona tus grupos","Registra calificaciones","Control de asistencias","Reportes acadmicos"]}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs(Hs,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx(ts,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ICAP"}),e.jsx("p",{className:"text-xs text-gray-600",children:"UAGRM - Oficial SCZ"})]})]}),e.jsx(Hs,{to:"/",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Volver al inicio"})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Acceso a Portales"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Selecciona el portal correspondiente a tu rol"}),e.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-12",children:s.map(r=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow",children:[e.jsxs("div",{className:`bg-gradient-to-br ${r.color} ${r.hoverColor} p-8 text-white`,children:[e.jsx("div",{className:"mb-4",children:r.icon}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:r.titulo}),e.jsx("p",{className:"text-blue-100",children:r.descripcion})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("ul",{className:"space-y-3 mb-6",children:r.features.map((a,t)=>e.jsxs("li",{className:"flex items-center text-gray-700",children:[e.jsx(mt,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),e.jsx("span",{children:a})]},t))}),e.jsxs(Hs,{to:r.link,className:`block w-full bg-gradient-to-r ${r.color} text-white text-center py-3 rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2`,children:["Acceder",e.jsx(wa,{className:"h-5 w-5"})]})]})]},r.id))}),e.jsx("div",{className:"max-w-4xl mx-auto bg-blue-50 rounded-xl p-8 border-2 border-blue-100",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(nr,{className:"h-8 w-8 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Portal de Administracin"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"El portal de administracin es de acceso restringido y solo est disponible para personal autorizado. Si eres administrador, contacta con el equipo tcnico para obtener acceso."}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Nota:"})," El acceso al portal de administracin se realiza nicamente mediante enlace directo proporcionado por el administrador del sistema."]})]})]})})]})}),e.jsx("footer",{className:"bg-gray-800 text-gray-400 py-6 mt-12",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," ICAP - UAGRM. Todos los derechos reservados."]})})})]})};var si=s=>s.type==="checkbox",Tt=s=>s instanceof Date,yr=s=>s==null;const sp=s=>typeof s=="object";var $s=s=>!yr(s)&&!Array.isArray(s)&&sp(s)&&!Tt(s),p1=s=>$s(s)&&s.target?si(s.target)?s.target.checked:s.target.value:s,y1=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,b1=(s,r)=>s.has(y1(r)),j1=s=>{const r=s.constructor&&s.constructor.prototype;return $s(r)&&r.hasOwnProperty("isPrototypeOf")},xm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ss(s){let r;const a=Array.isArray(s),t=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)r=new Date(s);else if(!(xm&&(s instanceof Blob||t))&&(a||$s(s)))if(r=a?[]:Object.create(Object.getPrototypeOf(s)),!a&&!j1(s))r=s;else for(const n in s)s.hasOwnProperty(n)&&(r[n]=Ss(s[n]));else return s;return r}var Xl=s=>/^\w*$/.test(s),vs=s=>s===void 0,ec=s=>Array.isArray(s)?s.filter(Boolean):[],hm=s=>ec(s.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(s,r,a)=>{if(!r||!$s(s))return a;const t=(Xl(r)?[r]:hm(r)).reduce((n,o)=>yr(n)?n:n[o],s);return vs(t)||t===s?vs(s[r])?a:s[r]:t},ia=s=>typeof s=="boolean",fs=(s,r,a)=>{let t=-1;const n=Xl(r)?[r]:hm(r),o=n.length,i=o-1;for(;++t<o;){const l=n[t];let d=a;if(t!==i){const u=s[l];d=$s(u)||Array.isArray(u)?u:isNaN(+n[t+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;s[l]=d,s=s[l]}};const jx={BLUR:"blur",FOCUS_OUT:"focusout"},zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ya={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rp=Ke.createContext(null);rp.displayName="HookFormContext";const v1=()=>Ke.useContext(rp);var N1=(s,r,a,t=!0)=>{const n={defaultValues:r._defaultValues};for(const o in s)Object.defineProperty(n,o,{get:()=>{const i=o;return r._proxyFormState[i]!==zr.all&&(r._proxyFormState[i]=!t||zr.all),s[i]}});return n};const ap=typeof window<"u"?Ke.useLayoutEffect:Ke.useEffect;var Ar=s=>typeof s=="string",w1=(s,r,a,t,n)=>Ar(s)?(t&&r.watch.add(s),$e(a,s,n)):Array.isArray(s)?s.map(o=>(t&&r.watch.add(o),$e(a,o))):(t&&(r.watchAll=!0),a),au=s=>yr(s)||!sp(s);function Za(s,r,a=new WeakSet){if(au(s)||au(r))return s===r;if(Tt(s)&&Tt(r))return s.getTime()===r.getTime();const t=Object.keys(s),n=Object.keys(r);if(t.length!==n.length)return!1;if(a.has(s)||a.has(r))return!0;a.add(s),a.add(r);for(const o of t){const i=s[o];if(!n.includes(o))return!1;if(o!=="ref"){const l=r[o];if(Tt(i)&&Tt(l)||$s(i)&&$s(l)||Array.isArray(i)&&Array.isArray(l)?!Za(i,l,a):i!==l)return!1}}return!0}var k1=(s,r,a,t,n)=>r?{...a[s],types:{...a[s]&&a[s].types?a[s].types:{},[t]:n||!0}}:{},Nr=s=>Array.isArray(s)?s:[s],vx=()=>{let s=[];return{get observers(){return s},next:n=>{for(const o of s)o.next&&o.next(n)},subscribe:n=>(s.push(n),{unsubscribe:()=>{s=s.filter(o=>o!==n)}}),unsubscribe:()=>{s=[]}}};function tp(s,r){const a={};for(const t in s)if(s.hasOwnProperty(t)){const n=s[t],o=r[t];if(n&&$s(n)&&o){const i=tp(n,o);$s(i)&&(a[t]=i)}else s[t]&&(a[t]=o)}return a}var dr=s=>$s(s)&&!Object.keys(s).length,fm=s=>s.type==="file",Zr=s=>typeof s=="function",wl=s=>{if(!xm)return!1;const r=s?s.ownerDocument:0;return s instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},np=s=>s.type==="select-multiple",pm=s=>s.type==="radio",E1=s=>pm(s)||si(s),Mc=s=>wl(s)&&s.isConnected;function _1(s,r){const a=r.slice(0,-1).length;let t=0;for(;t<a;)s=vs(s)?t++:s[r[t++]];return s}function S1(s){for(const r in s)if(s.hasOwnProperty(r)&&!vs(s[r]))return!1;return!0}function Is(s,r){const a=Array.isArray(r)?r:Xl(r)?[r]:hm(r),t=a.length===1?s:_1(s,a),n=a.length-1,o=a[n];return t&&delete t[o],n!==0&&($s(t)&&dr(t)||Array.isArray(t)&&S1(t))&&Is(s,a.slice(0,-1)),s}var C1=s=>{for(const r in s)if(Zr(s[r]))return!0;return!1};function op(s){return Array.isArray(s)||$s(s)&&!C1(s)}function tu(s,r={}){for(const a in s)op(s[a])?(r[a]=Array.isArray(s[a])?[]:{},tu(s[a],r[a])):vs(s[a])||(r[a]=!0);return r}function Xt(s,r,a){a||(a=tu(r));for(const t in s)op(s[t])?vs(r)||au(a[t])?a[t]=tu(s[t],Array.isArray(s[t])?[]:{}):Xt(s[t],yr(r)?{}:r[t],a[t]):a[t]=!Za(s[t],r[t]);return a}const Nx={value:!1,isValid:!1},wx={value:!0,isValid:!0};var ip=s=>{if(Array.isArray(s)){if(s.length>1){const r=s.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:r,isValid:!!r.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!vs(s[0].attributes.value)?vs(s[0].value)||s[0].value===""?wx:{value:s[0].value,isValid:!0}:wx:Nx}return Nx},lp=(s,{valueAsNumber:r,valueAsDate:a,setValueAs:t})=>vs(s)?s:r?s===""?NaN:s&&+s:a&&Ar(s)?new Date(s):t?t(s):s;const kx={isValid:!1,value:null};var cp=s=>Array.isArray(s)?s.reduce((r,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:r,kx):kx;function Ex(s){const r=s.ref;return fm(r)?r.files:pm(r)?cp(s.refs).value:np(r)?[...r.selectedOptions].map(({value:a})=>a):si(r)?ip(s.refs).value:lp(vs(r.value)?s.ref.value:r.value,s)}var R1=(s,r,a,t)=>{const n={};for(const o of s){const i=$e(r,o);i&&fs(n,o,i._f)}return{criteriaMode:a,names:[...s],fields:n,shouldUseNativeValidation:t}},kl=s=>s instanceof RegExp,Jn=s=>vs(s)?s:kl(s)?s.source:$s(s)?kl(s.value)?s.value.source:s.value:s,fn=s=>({isOnSubmit:!s||s===zr.onSubmit,isOnBlur:s===zr.onBlur,isOnChange:s===zr.onChange,isOnAll:s===zr.all,isOnTouch:s===zr.onTouched});const _x="AsyncFunction";var A1=s=>!!s&&!!s.validate&&!!(Zr(s.validate)&&s.validate.constructor.name===_x||$s(s.validate)&&Object.values(s.validate).find(r=>r.constructor.name===_x)),P1=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),nu=(s,r,a)=>!a&&(r.watchAll||r.watch.has(s)||[...r.watch].some(t=>s.startsWith(t)&&/^\.\w+/.test(s.slice(t.length))));const wn=(s,r,a,t)=>{for(const n of a||Object.keys(s)){const o=$e(s,n);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&r(i.refs[0],n)&&!t)return!0;if(i.ref&&r(i.ref,i.name)&&!t)return!0;if(wn(l,r))break}else if($s(l)&&wn(l,r))break}}};function Sx(s,r,a){const t=$e(s,a);if(t||Xl(a))return{error:t,name:a};const n=a.split(".");for(;n.length;){const o=n.join("."),i=$e(r,o),l=$e(s,o);if(i&&!Array.isArray(i)&&a!==o)return{name:a};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};n.pop()}return{name:a}}var D1=(s,r,a,t)=>{a(s);const{name:n,...o}=s;return dr(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(i=>r[i]===(!t||zr.all))},T1=(s,r,a)=>!s||!r||s===r||Nr(s).some(t=>t&&(a?t===r:t.startsWith(r)||r.startsWith(t))),O1=(s,r,a,t,n)=>n.isOnAll?!1:!a&&n.isOnTouch?!(r||s):(a?t.isOnBlur:n.isOnBlur)?!s:(a?t.isOnChange:n.isOnChange)?s:!0,I1=(s,r)=>!ec($e(s,r)).length&&Is(s,r),dp=(s,r,a)=>{const t=Nr($e(s,a));return fs(t,"root",r[a]),fs(s,a,t),s};function Cx(s,r,a="validate"){if(Ar(s)||Array.isArray(s)&&s.every(Ar)||ia(s)&&!s)return{type:a,message:Ar(s)?s:"",ref:r}}var Zt=s=>$s(s)&&!kl(s)?s:{value:s,message:""},ou=async(s,r,a,t,n,o)=>{const{ref:i,refs:l,required:d,maxLength:u,minLength:g,min:h,max:y,pattern:k,validate:E,name:S,valueAsNumber:C,mount:b}=s._f,p=$e(a,S);if(!b||r.has(S))return{};const N=l?l[0]:i,_=R=>{n&&N.reportValidity&&(N.setCustomValidity(ia(R)?"":R||""),N.reportValidity())},x={},v=pm(i),j=si(i),D=v||j,H=(C||fm(i))&&vs(i.value)&&vs(p)||wl(i)&&i.value===""||p===""||Array.isArray(p)&&!p.length,A=k1.bind(null,S,t,x),P=(R,G,T,$=ya.maxLength,L=ya.minLength)=>{const Y=R?G:T;x[S]={type:R?$:L,message:Y,ref:i,...A(R?$:L,Y)}};if(o?!Array.isArray(p)||!p.length:d&&(!D&&(H||yr(p))||ia(p)&&!p||j&&!ip(l).isValid||v&&!cp(l).isValid)){const{value:R,message:G}=Ar(d)?{value:!!d,message:d}:Zt(d);if(R&&(x[S]={type:ya.required,message:G,ref:N,...A(ya.required,G)},!t))return _(G),x}if(!H&&(!yr(h)||!yr(y))){let R,G;const T=Zt(y),$=Zt(h);if(!yr(p)&&!isNaN(p)){const L=i.valueAsNumber||p&&+p;yr(T.value)||(R=L>T.value),yr($.value)||(G=L<$.value)}else{const L=i.valueAsDate||new Date(p),Y=oe=>new Date(new Date().toDateString()+" "+oe),M=i.type=="time",ne=i.type=="week";Ar(T.value)&&p&&(R=M?Y(p)>Y(T.value):ne?p>T.value:L>new Date(T.value)),Ar($.value)&&p&&(G=M?Y(p)<Y($.value):ne?p<$.value:L<new Date($.value))}if((R||G)&&(P(!!R,T.message,$.message,ya.max,ya.min),!t))return _(x[S].message),x}if((u||g)&&!H&&(Ar(p)||o&&Array.isArray(p))){const R=Zt(u),G=Zt(g),T=!yr(R.value)&&p.length>+R.value,$=!yr(G.value)&&p.length<+G.value;if((T||$)&&(P(T,R.message,G.message),!t))return _(x[S].message),x}if(k&&!H&&Ar(p)){const{value:R,message:G}=Zt(k);if(kl(R)&&!p.match(R)&&(x[S]={type:ya.pattern,message:G,ref:i,...A(ya.pattern,G)},!t))return _(G),x}if(E){if(Zr(E)){const R=await E(p,a),G=Cx(R,N);if(G&&(x[S]={...G,...A(ya.validate,G.message)},!t))return _(G.message),x}else if($s(E)){let R={};for(const G in E){if(!dr(R)&&!t)break;const T=Cx(await E[G](p,a),N,G);T&&(R={...T,...A(G,T.message)},_(T.message),t&&(x[S]=R))}if(!dr(R)&&(x[S]={ref:N,...R},!t))return x}}return _(!0),x};const F1={mode:zr.onSubmit,reValidateMode:zr.onChange,shouldFocusError:!0};function M1(s={}){let r={...F1,...s},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:Zr(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},t={},n=$s(r.defaultValues)||$s(r.values)?Ss(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:Ss(n),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,u=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...g};const y={array:vx(),state:vx()},k=r.criteriaMode===zr.all,E=f=>w=>{clearTimeout(u),u=setTimeout(f,w)},S=async f=>{if(!r.disabled&&(g.isValid||h.isValid||f)){const w=r.resolver?dr((await j()).errors):await H(t,!0);w!==a.isValid&&y.state.next({isValid:w})}},C=(f,w)=>{!r.disabled&&(g.isValidating||g.validatingFields||h.isValidating||h.validatingFields)&&((f||Array.from(l.mount)).forEach(V=>{V&&(w?fs(a.validatingFields,V,w):Is(a.validatingFields,V))}),y.state.next({validatingFields:a.validatingFields,isValidating:!dr(a.validatingFields)}))},b=(f,w=[],V,B,ue=!0,ge=!0)=>{if(B&&V&&!r.disabled){if(i.action=!0,ge&&Array.isArray($e(t,f))){const _e=V($e(t,f),B.argA,B.argB);ue&&fs(t,f,_e)}if(ge&&Array.isArray($e(a.errors,f))){const _e=V($e(a.errors,f),B.argA,B.argB);ue&&fs(a.errors,f,_e),I1(a.errors,f)}if((g.touchedFields||h.touchedFields)&&ge&&Array.isArray($e(a.touchedFields,f))){const _e=V($e(a.touchedFields,f),B.argA,B.argB);ue&&fs(a.touchedFields,f,_e)}(g.dirtyFields||h.dirtyFields)&&(a.dirtyFields=Xt(n,o)),y.state.next({name:f,isDirty:P(f,w),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else fs(o,f,w)},p=(f,w)=>{fs(a.errors,f,w),y.state.next({errors:a.errors})},N=f=>{a.errors=f,y.state.next({errors:a.errors,isValid:!1})},_=(f,w,V,B)=>{const ue=$e(t,f);if(ue){const ge=$e(o,f,vs(V)?$e(n,f):V);vs(ge)||B&&B.defaultChecked||w?fs(o,f,w?ge:Ex(ue._f)):T(f,ge),i.mount&&S()}},x=(f,w,V,B,ue)=>{let ge=!1,_e=!1;const je={name:f};if(!r.disabled){if(!V||B){(g.isDirty||h.isDirty)&&(_e=a.isDirty,a.isDirty=je.isDirty=P(),ge=_e!==je.isDirty);const Ne=Za($e(n,f),w);_e=!!$e(a.dirtyFields,f),Ne?Is(a.dirtyFields,f):fs(a.dirtyFields,f,!0),je.dirtyFields=a.dirtyFields,ge=ge||(g.dirtyFields||h.dirtyFields)&&_e!==!Ne}if(V){const Ne=$e(a.touchedFields,f);Ne||(fs(a.touchedFields,f,V),je.touchedFields=a.touchedFields,ge=ge||(g.touchedFields||h.touchedFields)&&Ne!==V)}ge&&ue&&y.state.next(je)}return ge?je:{}},v=(f,w,V,B)=>{const ue=$e(a.errors,f),ge=(g.isValid||h.isValid)&&ia(w)&&a.isValid!==w;if(r.delayError&&V?(d=E(()=>p(f,V)),d(r.delayError)):(clearTimeout(u),d=null,V?fs(a.errors,f,V):Is(a.errors,f)),(V?!Za(ue,V):ue)||!dr(B)||ge){const _e={...B,...ge&&ia(w)?{isValid:w}:{},errors:a.errors,name:f};a={...a,..._e},y.state.next(_e)}},j=async f=>{C(f,!0);const w=await r.resolver(o,r.context,R1(f||l.mount,t,r.criteriaMode,r.shouldUseNativeValidation));return C(f),w},D=async f=>{const{errors:w}=await j(f);if(f)for(const V of f){const B=$e(w,V);B?fs(a.errors,V,B):Is(a.errors,V)}else a.errors=w;return w},H=async(f,w,V={valid:!0})=>{for(const B in f){const ue=f[B];if(ue){const{_f:ge,..._e}=ue;if(ge){const je=l.array.has(ge.name),Ne=ue._f&&A1(ue._f);Ne&&g.validatingFields&&C([ge.name],!0);const Te=await ou(ue,l.disabled,o,k,r.shouldUseNativeValidation&&!w,je);if(Ne&&g.validatingFields&&C([ge.name]),Te[ge.name]&&(V.valid=!1,w))break;!w&&($e(Te,ge.name)?je?dp(a.errors,Te,ge.name):fs(a.errors,ge.name,Te[ge.name]):Is(a.errors,ge.name))}!dr(_e)&&await H(_e,w,V)}}return V.valid},A=()=>{for(const f of l.unMount){const w=$e(t,f);w&&(w._f.refs?w._f.refs.every(V=>!Mc(V)):!Mc(w._f.ref))&&Se(f)}l.unMount=new Set},P=(f,w)=>!r.disabled&&(f&&w&&fs(o,f,w),!Za(oe(),n)),R=(f,w,V)=>w1(f,l,{...i.mount?o:vs(w)?n:Ar(f)?{[f]:w}:w},V,w),G=f=>ec($e(i.mount?o:n,f,r.shouldUnregister?$e(n,f,[]):[])),T=(f,w,V={})=>{const B=$e(t,f);let ue=w;if(B){const ge=B._f;ge&&(!ge.disabled&&fs(o,f,lp(w,ge)),ue=wl(ge.ref)&&yr(w)?"":w,np(ge.ref)?[...ge.ref.options].forEach(_e=>_e.selected=ue.includes(_e.value)):ge.refs?si(ge.ref)?ge.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(ue)?_e.checked=!!ue.find(je=>je===_e.value):_e.checked=ue===_e.value||!!ue)}):ge.refs.forEach(_e=>_e.checked=_e.value===ue):fm(ge.ref)?ge.ref.value="":(ge.ref.value=ue,ge.ref.type||y.state.next({name:f,values:Ss(o)})))}(V.shouldDirty||V.shouldTouch)&&x(f,ue,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&ne(f)},$=(f,w,V)=>{for(const B in w){if(!w.hasOwnProperty(B))return;const ue=w[B],ge=f+"."+B,_e=$e(t,ge);(l.array.has(f)||$s(ue)||_e&&!_e._f)&&!Tt(ue)?$(ge,ue,V):T(ge,ue,V)}},L=(f,w,V={})=>{const B=$e(t,f),ue=l.array.has(f),ge=Ss(w);fs(o,f,ge),ue?(y.array.next({name:f,values:Ss(o)}),(g.isDirty||g.dirtyFields||h.isDirty||h.dirtyFields)&&V.shouldDirty&&y.state.next({name:f,dirtyFields:Xt(n,o),isDirty:P(f,ge)})):B&&!B._f&&!yr(ge)?$(f,ge,V):T(f,ge,V),nu(f,l)&&y.state.next({...a,name:f}),y.state.next({name:i.mount?f:void 0,values:Ss(o)})},Y=async f=>{i.mount=!0;const w=f.target;let V=w.name,B=!0;const ue=$e(t,V),ge=Ne=>{B=Number.isNaN(Ne)||Tt(Ne)&&isNaN(Ne.getTime())||Za(Ne,$e(o,V,Ne))},_e=fn(r.mode),je=fn(r.reValidateMode);if(ue){let Ne,Te;const ve=w.type?Ex(ue._f):p1(f),F=f.type===jx.BLUR||f.type===jx.FOCUS_OUT,te=!P1(ue._f)&&!r.resolver&&!$e(a.errors,V)&&!ue._f.deps||O1(F,$e(a.touchedFields,V),a.isSubmitted,je,_e),be=nu(V,l,F);fs(o,V,ve),F?(!w||!w.readOnly)&&(ue._f.onBlur&&ue._f.onBlur(f),d&&d(0)):ue._f.onChange&&ue._f.onChange(f);const z=x(V,ve,F),Ee=!dr(z)||be;if(!F&&y.state.next({name:V,type:f.type,values:Ss(o)}),te)return(g.isValid||h.isValid)&&(r.mode==="onBlur"?F&&S():F||S()),Ee&&y.state.next({name:V,...be?{}:z});if(!F&&be&&y.state.next({...a}),r.resolver){const{errors:Ce}=await j([V]);if(ge(ve),B){const he=Sx(a.errors,t,V),O=Sx(Ce,t,he.name||V);Ne=O.error,V=O.name,Te=dr(Ce)}}else C([V],!0),Ne=(await ou(ue,l.disabled,o,k,r.shouldUseNativeValidation))[V],C([V]),ge(ve),B&&(Ne?Te=!1:(g.isValid||h.isValid)&&(Te=await H(t,!0)));B&&(ue._f.deps&&(!Array.isArray(ue._f.deps)||ue._f.deps.length>0)&&ne(ue._f.deps),v(V,Te,Ne,z))}},M=(f,w)=>{if($e(a.errors,w)&&f.focus)return f.focus(),1},ne=async(f,w={})=>{let V,B;const ue=Nr(f);if(r.resolver){const ge=await D(vs(f)?f:ue);V=dr(ge),B=f?!ue.some(_e=>$e(ge,_e)):V}else f?(B=(await Promise.all(ue.map(async ge=>{const _e=$e(t,ge);return await H(_e&&_e._f?{[ge]:_e}:_e)}))).every(Boolean),!(!B&&!a.isValid)&&S()):B=V=await H(t);return y.state.next({...!Ar(f)||(g.isValid||h.isValid)&&V!==a.isValid?{}:{name:f},...r.resolver||!f?{isValid:V}:{},errors:a.errors}),w.shouldFocus&&!B&&wn(t,M,f?ue:l.mount),B},oe=(f,w)=>{let V={...i.mount?o:n};return w&&(V=tp(w.dirtyFields?a.dirtyFields:a.touchedFields,V)),vs(f)?V:Ar(f)?$e(V,f):f.map(B=>$e(V,B))},fe=(f,w)=>({invalid:!!$e((w||a).errors,f),isDirty:!!$e((w||a).dirtyFields,f),error:$e((w||a).errors,f),isValidating:!!$e(a.validatingFields,f),isTouched:!!$e((w||a).touchedFields,f)}),Q=f=>{f&&Nr(f).forEach(w=>Is(a.errors,w)),y.state.next({errors:f?a.errors:{}})},me=(f,w,V)=>{const B=($e(t,f,{_f:{}})._f||{}).ref,ue=$e(a.errors,f)||{},{ref:ge,message:_e,type:je,...Ne}=ue;fs(a.errors,f,{...Ne,...w,ref:B}),y.state.next({name:f,errors:a.errors,isValid:!1}),V&&V.shouldFocus&&B&&B.focus&&B.focus()},xe=(f,w)=>Zr(f)?y.state.subscribe({next:V=>"values"in V&&f(R(void 0,w),V)}):R(f,w,!0),ie=f=>y.state.subscribe({next:w=>{T1(f.name,w.name,f.exact)&&D1(w,f.formState||g,ee,f.reRenderRoot)&&f.callback({values:{...o},...a,...w,defaultValues:n})}}).unsubscribe,le=f=>(i.mount=!0,h={...h,...f.formState},ie({...f,formState:h})),Se=(f,w={})=>{for(const V of f?Nr(f):l.mount)l.mount.delete(V),l.array.delete(V),w.keepValue||(Is(t,V),Is(o,V)),!w.keepError&&Is(a.errors,V),!w.keepDirty&&Is(a.dirtyFields,V),!w.keepTouched&&Is(a.touchedFields,V),!w.keepIsValidating&&Is(a.validatingFields,V),!r.shouldUnregister&&!w.keepDefaultValue&&Is(n,V);y.state.next({values:Ss(o)}),y.state.next({...a,...w.keepDirty?{isDirty:P()}:{}}),!w.keepIsValid&&S()},pe=({disabled:f,name:w})=>{(ia(f)&&i.mount||f||l.disabled.has(w))&&(f?l.disabled.add(w):l.disabled.delete(w))},K=(f,w={})=>{let V=$e(t,f);const B=ia(w.disabled)||ia(r.disabled);return fs(t,f,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:f}},name:f,mount:!0,...w}}),l.mount.add(f),V?pe({disabled:ia(w.disabled)?w.disabled:r.disabled,name:f}):_(f,!0,w.value),{...B?{disabled:w.disabled||r.disabled}:{},...r.progressive?{required:!!w.required,min:Jn(w.min),max:Jn(w.max),minLength:Jn(w.minLength),maxLength:Jn(w.maxLength),pattern:Jn(w.pattern)}:{},name:f,onChange:Y,onBlur:Y,ref:ue=>{if(ue){K(f,w),V=$e(t,f);const ge=vs(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,_e=E1(ge),je=V._f.refs||[];if(_e?je.find(Ne=>Ne===ge):ge===V._f.ref)return;fs(t,f,{_f:{...V._f,..._e?{refs:[...je.filter(Mc),ge,...Array.isArray($e(n,f))?[{}]:[]],ref:{type:ge.type,name:f}}:{ref:ge}}}),_(f,!1,void 0,ge)}else V=$e(t,f,{}),V._f&&(V._f.mount=!1),(r.shouldUnregister||w.shouldUnregister)&&!(b1(l.array,f)&&i.action)&&l.unMount.add(f)}}},ae=()=>r.shouldFocusError&&wn(t,M,l.mount),ce=f=>{ia(f)&&(y.state.next({disabled:f}),wn(t,(w,V)=>{const B=$e(t,V);B&&(w.disabled=B._f.disabled||f,Array.isArray(B._f.refs)&&B._f.refs.forEach(ue=>{ue.disabled=B._f.disabled||f}))},0,!1))},J=(f,w)=>async V=>{let B;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let ue=Ss(o);if(y.state.next({isSubmitting:!0}),r.resolver){const{errors:ge,values:_e}=await j();a.errors=ge,ue=Ss(_e)}else await H(t);if(l.disabled.size)for(const ge of l.disabled)Is(ue,ge);if(Is(a.errors,"root"),dr(a.errors)){y.state.next({errors:{}});try{await f(ue,V)}catch(ge){B=ge}}else w&&await w({...a.errors},V),ae(),setTimeout(ae);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dr(a.errors)&&!B,submitCount:a.submitCount+1,errors:a.errors}),B)throw B},Z=(f,w={})=>{$e(t,f)&&(vs(w.defaultValue)?L(f,Ss($e(n,f))):(L(f,w.defaultValue),fs(n,f,Ss(w.defaultValue))),w.keepTouched||Is(a.touchedFields,f),w.keepDirty||(Is(a.dirtyFields,f),a.isDirty=w.defaultValue?P(f,Ss($e(n,f))):P()),w.keepError||(Is(a.errors,f),g.isValid&&S()),y.state.next({...a}))},ye=(f,w={})=>{const V=f?Ss(f):n,B=Ss(V),ue=dr(f),ge=ue?n:B;if(w.keepDefaultValues||(n=V),!w.keepValues){if(w.keepDirtyValues){const _e=new Set([...l.mount,...Object.keys(Xt(n,o))]);for(const je of Array.from(_e))$e(a.dirtyFields,je)?fs(ge,je,$e(o,je)):L(je,$e(ge,je))}else{if(xm&&vs(f))for(const _e of l.mount){const je=$e(t,_e);if(je&&je._f){const Ne=Array.isArray(je._f.refs)?je._f.refs[0]:je._f.ref;if(wl(Ne)){const Te=Ne.closest("form");if(Te){Te.reset();break}}}}if(w.keepFieldsRef)for(const _e of l.mount)L(_e,$e(ge,_e));else t={}}o=r.shouldUnregister?w.keepDefaultValues?Ss(n):{}:Ss(ge),y.array.next({values:{...ge}}),y.state.next({values:{...ge}})}l={mount:w.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!g.isValid||!!w.keepIsValid||!!w.keepDirtyValues,i.watch=!!r.shouldUnregister,y.state.next({submitCount:w.keepSubmitCount?a.submitCount:0,isDirty:ue?!1:w.keepDirty?a.isDirty:!!(w.keepDefaultValues&&!Za(f,n)),isSubmitted:w.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:ue?{}:w.keepDirtyValues?w.keepDefaultValues&&o?Xt(n,o):a.dirtyFields:w.keepDefaultValues&&f?Xt(n,f):w.keepDirty?a.dirtyFields:{},touchedFields:w.keepTouched?a.touchedFields:{},errors:w.keepErrors?a.errors:{},isSubmitSuccessful:w.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},de=(f,w)=>ye(Zr(f)?f(o):f,w),q=(f,w={})=>{const V=$e(t,f),B=V&&V._f;if(B){const ue=B.refs?B.refs[0]:B.ref;ue.focus&&(ue.focus(),w.shouldSelect&&Zr(ue.select)&&ue.select())}},ee=f=>{a={...a,...f}},re={control:{register:K,unregister:Se,getFieldState:fe,handleSubmit:J,setError:me,_subscribe:ie,_runSchema:j,_focusError:ae,_getWatch:R,_getDirty:P,_setValid:S,_setFieldArray:b,_setDisabledField:pe,_setErrors:N,_getFieldArray:G,_reset:ye,_resetDefaultValues:()=>Zr(r.defaultValues)&&r.defaultValues().then(f=>{de(f,r.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:ce,_subjects:y,_proxyFormState:g,get _fields(){return t},get _formValues(){return o},get _state(){return i},set _state(f){i=f},get _defaultValues(){return n},get _names(){return l},set _names(f){l=f},get _formState(){return a},get _options(){return r},set _options(f){r={...r,...f}}},subscribe:le,trigger:ne,register:K,handleSubmit:J,watch:xe,setValue:L,getValues:oe,reset:de,resetField:Z,clearErrors:Q,unregister:Se,setError:me,setFocus:q,getFieldState:fe};return{...re,formControl:re}}var La=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const s=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const a=(Math.random()*16+s)%16|0;return(r=="x"?a:a&3|8).toString(16)})},Lc=(s,r,a={})=>a.shouldFocus||vs(a.shouldFocus)?a.focusName||`${s}.${vs(a.focusIndex)?r:a.focusIndex}.`:"",zc=(s,r)=>[...s,...Nr(r)],$c=s=>Array.isArray(s)?s.map(()=>{}):void 0;function Uc(s,r,a){return[...s.slice(0,r),...Nr(a),...s.slice(r)]}var Bc=(s,r,a)=>Array.isArray(s)?(vs(s[a])&&(s[a]=void 0),s.splice(a,0,s.splice(r,1)[0]),s):[],Vc=(s,r)=>[...Nr(r),...Nr(s)];function L1(s,r){let a=0;const t=[...s];for(const n of r)t.splice(n-a,1),a++;return ec(t).length?t:[]}var qc=(s,r)=>vs(r)?[]:L1(s,Nr(r).sort((a,t)=>a-t)),Hc=(s,r,a)=>{[s[r],s[a]]=[s[a],s[r]]},Rx=(s,r,a)=>(s[r]=a,s);function z1(s){const r=v1(),{control:a=r.control,name:t,keyName:n="id",shouldUnregister:o,rules:i}=s,[l,d]=Ke.useState(a._getFieldArray(t)),u=Ke.useRef(a._getFieldArray(t).map(La)),g=Ke.useRef(!1);a._names.array.add(t),Ke.useMemo(()=>i&&l.length>=0&&a.register(t,i),[a,t,l.length,i]),ap(()=>a._subjects.array.subscribe({next:({values:_,name:x})=>{if(x===t||!x){const v=$e(_,t);Array.isArray(v)&&(d(v),u.current=v.map(La))}}}).unsubscribe,[a,t]);const h=Ke.useCallback(_=>{g.current=!0,a._setFieldArray(t,_)},[a,t]),y=(_,x)=>{const v=Nr(Ss(_)),j=zc(a._getFieldArray(t),v);a._names.focus=Lc(t,j.length-1,x),u.current=zc(u.current,v.map(La)),h(j),d(j),a._setFieldArray(t,j,zc,{argA:$c(_)})},k=(_,x)=>{const v=Nr(Ss(_)),j=Vc(a._getFieldArray(t),v);a._names.focus=Lc(t,0,x),u.current=Vc(u.current,v.map(La)),h(j),d(j),a._setFieldArray(t,j,Vc,{argA:$c(_)})},E=_=>{const x=qc(a._getFieldArray(t),_);u.current=qc(u.current,_),h(x),d(x),!Array.isArray($e(a._fields,t))&&fs(a._fields,t,void 0),a._setFieldArray(t,x,qc,{argA:_})},S=(_,x,v)=>{const j=Nr(Ss(x)),D=Uc(a._getFieldArray(t),_,j);a._names.focus=Lc(t,_,v),u.current=Uc(u.current,_,j.map(La)),h(D),d(D),a._setFieldArray(t,D,Uc,{argA:_,argB:$c(x)})},C=(_,x)=>{const v=a._getFieldArray(t);Hc(v,_,x),Hc(u.current,_,x),h(v),d(v),a._setFieldArray(t,v,Hc,{argA:_,argB:x},!1)},b=(_,x)=>{const v=a._getFieldArray(t);Bc(v,_,x),Bc(u.current,_,x),h(v),d(v),a._setFieldArray(t,v,Bc,{argA:_,argB:x},!1)},p=(_,x)=>{const v=Ss(x),j=Rx(a._getFieldArray(t),_,v);u.current=[...j].map((D,H)=>!D||H===_?La():u.current[H]),h(j),d([...j]),a._setFieldArray(t,j,Rx,{argA:_,argB:v},!0,!1)},N=_=>{const x=Nr(Ss(_));u.current=x.map(La),h([...x]),d([...x]),a._setFieldArray(t,[...x],v=>v,{},!0,!1)};return Ke.useEffect(()=>{if(a._state.action=!1,nu(t,a._names)&&a._subjects.state.next({...a._formState}),g.current&&(!fn(a._options.mode).isOnSubmit||a._formState.isSubmitted)&&!fn(a._options.reValidateMode).isOnSubmit)if(a._options.resolver)a._runSchema([t]).then(_=>{const x=$e(_.errors,t),v=$e(a._formState.errors,t);(v?!x&&v.type||x&&(v.type!==x.type||v.message!==x.message):x&&x.type)&&(x?fs(a._formState.errors,t,x):Is(a._formState.errors,t),a._subjects.state.next({errors:a._formState.errors}))});else{const _=$e(a._fields,t);_&&_._f&&!(fn(a._options.reValidateMode).isOnSubmit&&fn(a._options.mode).isOnSubmit)&&ou(_,a._names.disabled,a._formValues,a._options.criteriaMode===zr.all,a._options.shouldUseNativeValidation,!0).then(x=>!dr(x)&&a._subjects.state.next({errors:dp(a._formState.errors,x,t)}))}a._subjects.state.next({name:t,values:Ss(a._formValues)}),a._names.focus&&wn(a._fields,(_,x)=>{if(a._names.focus&&x.startsWith(a._names.focus)&&_.focus)return _.focus(),1}),a._names.focus="",a._setValid(),g.current=!1},[l,t,a]),Ke.useEffect(()=>(!$e(a._formValues,t)&&a._setFieldArray(t),()=>{const _=(x,v)=>{const j=$e(a._fields,x);j&&j._f&&(j._f.mount=v)};a._options.shouldUnregister||o?a.unregister(t):_(t,!1)}),[t,a,n,o]),{swap:Ke.useCallback(C,[h,t,a]),move:Ke.useCallback(b,[h,t,a]),prepend:Ke.useCallback(k,[h,t,a]),append:Ke.useCallback(y,[h,t,a]),remove:Ke.useCallback(E,[h,t,a]),insert:Ke.useCallback(S,[h,t,a]),update:Ke.useCallback(p,[h,t,a]),replace:Ke.useCallback(N,[h,t,a]),fields:Ke.useMemo(()=>l.map((_,x)=>({..._,[n]:u.current[x]||La()})),[l,n])}}function Xe(s={}){const r=Ke.useRef(void 0),a=Ke.useRef(void 0),[t,n]=Ke.useState({isDirty:!1,isValidating:!1,isLoading:Zr(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:Zr(s.defaultValues)?void 0:s.defaultValues});if(!r.current)if(s.formControl)r.current={...s.formControl,formState:t},s.defaultValues&&!Zr(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:i,...l}=M1(s);r.current={...l,formState:t}}const o=r.current.control;return o._options=s,ap(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),Ke.useEffect(()=>o._disableForm(s.disabled),[o,s.disabled]),Ke.useEffect(()=>{s.mode&&(o._options.mode=s.mode),s.reValidateMode&&(o._options.reValidateMode=s.reValidateMode)},[o,s.mode,s.reValidateMode]),Ke.useEffect(()=>{s.errors&&(o._setErrors(s.errors),o._focusError())},[o,s.errors]),Ke.useEffect(()=>{s.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,s.shouldUnregister]),Ke.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==t.isDirty&&o._subjects.state.next({isDirty:i})}},[o,t.isDirty]),Ke.useEffect(()=>{s.values&&!Za(s.values,a.current)?(o._reset(s.values,{keepFieldsRef:!0,...o._options.resetOptions}),a.current=s.values,n(i=>({...i}))):o._resetDefaultValues()},[o,s.values]),Ke.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),r.current.formState=N1(t,o),r.current}function up(s){var r,a,t="";if(typeof s=="string"||typeof s=="number")t+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(r=0;r<n;r++)s[r]&&(a=up(s[r]))&&(t&&(t+=" "),t+=a)}else for(a in s)s[a]&&(t&&(t+=" "),t+=a);return t}function Ge(){for(var s,r,a=0,t="",n=arguments.length;a<n;a++)(s=arguments[a])&&(r=up(s))&&(t&&(t+=" "),t+=r);return t}const W=({children:s,variant:r="primary",size:a="md",disabled:t=!1,loading:n=!1,icon:o,iconPosition:i="left",fullWidth:l=!1,className:d,onClick:u,type:g="button",...h})=>{const y="btn",k={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",warning:"btn-warning",danger:"btn-error",outline:"btn-outline",ghost:"btn-ghost",link:"text-primary-600 hover:text-primary-800 underline focus:ring-primary-500 bg-transparent hover:bg-primary-50 dark:hover:bg-primary-900/20"},E={sm:"btn-sm",md:"btn-md",lg:"btn-lg",xl:"h-14 px-10 text-lg rounded-2xl"},S=Ge(y,k[r],E[a],l&&"w-full",d),C=o&&e.jsx("span",{className:Ge("flex-shrink-0 transition-transform duration-200",i==="left"?"mr-2":"ml-2",n&&"opacity-0"),children:o}),b=n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return e.jsxs("button",{type:g,className:S,disabled:t||n,onClick:u,...h,children:[n&&b,!n&&i==="left"&&C,e.jsx("span",{className:Ge("transition-all duration-200",n&&"opacity-0"),children:s}),!n&&i==="right"&&C]})},we=c.forwardRef(({label:s,error:r,helperText:a,required:t=!1,disabled:n=!1,readOnly:o=!1,className:i,containerClassName:l,labelClassName:d,errorClassName:u,helperClassName:g,leftIcon:h,rightIcon:y,leftAddon:k,rightAddon:E,size:S="md",variant:C="default",...b},p)=>{const N="input",_={default:"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-primary-500",error:"border-error-300 dark:border-error-600 focus:border-error-500 focus:ring-error-500",success:"border-success-300 dark:border-success-600 focus:border-success-500 focus:ring-success-500"},x={sm:"h-9 px-3 text-sm rounded-lg",md:"h-11 px-4 text-sm rounded-xl",lg:"h-12 px-4 text-base rounded-xl"},v=Ge(N,_[r?"error":C],x[S],n&&"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed",o&&"bg-gray-50 dark:bg-gray-800",h&&"pl-10",y&&"pr-10",k&&"pl-12",E&&"pr-12",i),j=Ge("space-y-2",l),D=Ge("block text-sm font-semibold text-gray-700 dark:text-gray-300",r&&"text-error-700 dark:text-error-400",n&&"text-gray-500 dark:text-gray-400",d),H=Ge("text-sm text-error-600 dark:text-error-400 flex items-center gap-1",u),A=Ge("text-sm text-gray-500 dark:text-gray-400",g);return e.jsxs("div",{className:j,children:[s&&e.jsxs("label",{className:D,children:[s,t&&e.jsx("span",{className:"text-error-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[h&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:Ge("text-gray-400 dark:text-gray-500 transition-colors duration-200","group-focus-within:text-primary-500"),children:h})}),k&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:k})}),e.jsx("input",{ref:p,className:v,disabled:n,readOnly:o,...b}),y&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:Ge("text-gray-400 dark:text-gray-500 transition-colors duration-200","group-focus-within:text-primary-500"),children:y})}),E&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:E})})]}),r&&e.jsxs("p",{className:H,children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r]}),a&&!r&&e.jsx("p",{className:A,children:a})]})});we.displayName="Input";const ym=({children:s,type:r="info",title:a,showIcon:t=!0,dismissible:n=!1,onDismiss:o,className:i,titleClassName:l,contentClassName:d,iconClassName:u,variant:g="default"})=>{const h={success:{bg:"bg-gradient-to-r from-success-50 to-success-100 dark:from-success-900/20 dark:to-success-800/20",border:"border-success-200/50 dark:border-success-700/50",text:"text-success-800 dark:text-success-200",icon:Me,iconColor:"text-success-500",iconBg:"bg-gradient-to-br from-success-500 to-success-600",glow:"shadow-glow shadow-success-500/25"},warning:{bg:"bg-gradient-to-r from-warning-50 to-warning-100 dark:from-warning-900/20 dark:to-warning-800/20",border:"border-warning-200/50 dark:border-warning-700/50",text:"text-warning-800 dark:text-warning-200",icon:No,iconColor:"text-warning-500",iconBg:"bg-gradient-to-br from-warning-500 to-warning-600",glow:"shadow-glow shadow-warning-500/25"},error:{bg:"bg-gradient-to-r from-error-50 to-error-100 dark:from-error-900/20 dark:to-error-800/20",border:"border-error-200/50 dark:border-error-700/50",text:"text-error-800 dark:text-error-200",icon:ls,iconColor:"text-error-500",iconBg:"bg-gradient-to-br from-error-500 to-error-600",glow:"shadow-glow shadow-error-500/25"},info:{bg:"bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20",border:"border-primary-200/50 dark:border-primary-700/50",text:"text-primary-800 dark:text-primary-200",icon:ko,iconColor:"text-primary-500",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",glow:"shadow-glow shadow-primary-500/25"}},y=h[r]||h.info,k=y.icon,S=Ge({default:"rounded-xl border backdrop-blur-sm",glass:"rounded-2xl border backdrop-blur-xl glass-card",minimal:"rounded-lg border-0 bg-transparent"}[g],y.bg,y.border,g!=="minimal"&&"shadow-soft",g==="glass"&&y.glow,"transition-all duration-200 hover:shadow-soft-lg",i),C=Ge("text-sm font-semibold",y.text,l),b=Ge("text-sm",y.text,d),p=Ge("h-5 w-5",y.iconColor,u);return e.jsx("div",{className:S,children:e.jsxs("div",{className:"flex items-start",children:[t&&e.jsx("div",{className:"flex-shrink-0",children:g==="glass"?e.jsx("div",{className:`w-8 h-8 rounded-xl ${y.iconBg} flex items-center justify-center shadow-glow`,children:e.jsx(k,{className:"h-4 w-4 text-white"})}):e.jsx(k,{className:p})}),e.jsxs("div",{className:Ge(t?"ml-3":"","flex-1 min-w-0"),children:[a&&e.jsx("h3",{className:C,children:a}),e.jsx("div",{className:Ge(a?"mt-2":"",b),children:s})]}),n&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("div",{className:"-mx-1.5 -my-1.5",children:e.jsxs("button",{type:"button",className:Ge("inline-flex rounded-xl p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200","hover:bg-white/50 dark:hover:bg-gray-800/50","focus:ring-primary-500"),onClick:o,children:[e.jsx("span",{className:"sr-only",children:"Cerrar"}),e.jsx(xr,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})]})})})]})})},$1=()=>{var g,h,y;const[s,r]=c.useState(!1),a=pr(),{setAuthData:t}=Ts(),{register:n,handleSubmit:o,formState:{errors:i,isSubmitting:l},setError:d}=Xe(),u=async k=>{var E,S,C,b,p,N,_,x,v,j;try{console.log(" [DOCENTE] Iniciando login...",{input:k.email});const D=(E=k.email)==null?void 0:E.trim();if(!D||!k.password)throw new Error("Email/CI y contrasea son requeridos");const H=D.includes("@"),A={password:k.password};H?(A.email=D,console.log("    Tipo: EMAIL -",D)):(A.ci=D,console.log("    Tipo: CI -",D)),console.log("    Enviando peticin a /auth/docente/login...");const P=await _t.loginDocente(A);if(console.log("    Respuesta:",{success:P.success,hasToken:!!((S=P.data)!=null&&S.token),hasUser:!!((C=P.data)!=null&&C.user),debeCambiar:(b=P.data)==null?void 0:b.debe_cambiar_password}),!P.success)throw console.error("    Login fallido:",P.message),new Error(P.message||"Error al iniciar sesin");if(!((p=P.data)!=null&&p.token)||!((N=P.data)!=null&&N.user))throw console.error("    Respuesta incompleta:",P.data),new Error("Respuesta del servidor incompleta");console.log("    Login exitoso");const R=P.data.debe_cambiar_password||P.data.user.debe_cambiar_password;console.log("    Debe cambiar contrasea:",R),console.log("    Actualizando contexto de autenticacin...");const G=t(P.data.user,P.data.token);if(!G.success)throw console.error("    Error al actualizar contexto:",G.error),new Error("Error al establecer sesin");console.log("    Contexto actualizado correctamente"),R?(console.log("    Redirigiendo a cambiar contrasea..."),m("Debes cambiar tu contrasea antes de continuar",{duration:5e3,icon:"",style:{background:"#FEF3C7",color:"#92400E",border:"1px solid #FCD34D"}}),a("/docente/cambiar-password",{state:{requiereCambio:!0,mensaje:"Por seguridad, debes cambiar tu contrasea temporal antes de continuar.",fromLogin:!0},replace:!0})):(console.log("    Redirigiendo al dashboard..."),m.success(`Bienvenido, ${P.data.user.nombre||""} ${P.data.user.apellido||""}`.trim()),a("/docente/dashboard",{replace:!0}))}catch(D){console.error(" [DOCENTE] Error en login:",{message:D.message,response:(_=D.response)==null?void 0:_.data,status:(x=D.response)==null?void 0:x.status});const H=((j=(v=D.response)==null?void 0:v.data)==null?void 0:j.message)||D.message||"Error de conexin. Verifica tu conexin e intenta nuevamente.";d("root",{type:"manual",message:H}),m.error(H)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(Hs,{to:"/portales",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-6 transition-colors",children:[e.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Volver a portales"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(ir,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portal del Docente"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Inicia sesin para acceder a tu portal"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:o(u),children:[i.root&&e.jsx(ym,{type:"error",title:"Error de autenticacin",children:i.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email o CI"}),e.jsx(we,{type:"text",placeholder:"tu@email.com o tu CI",icon:e.jsx(Bn,{className:"h-5 w-5"}),error:((g=i.email)==null?void 0:g.message)||((h=i.ci)==null?void 0:h.message),...n("email",{required:"El email o CI es obligatorio"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Puedes usar tu email o nmero de CI"})]}),e.jsx(we,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(y=i.password)==null?void 0:y.message,...n("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:l,disabled:l,children:l?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Problemas para acceder?"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contactar soporte"})]})})]})]})]})},U1=()=>{var k,E,S;const[s,r]=c.useState(!1),{login:a,isAuthenticated:t,user:n,loading:o}=Ts(),i=pr(),{register:l,handleSubmit:d,formState:{errors:u,isSubmitting:g},setError:h}=Xe();if(c.useEffect(()=>{var C;!o&&t&&((C=n==null?void 0:n.rol)==null?void 0:C.toUpperCase())==="ESTUDIANTE"&&i("/estudiante/dashboard",{replace:!0})},[t,n,o,i]),!o&&t&&((k=n==null?void 0:n.rol)==null?void 0:k.toUpperCase())==="ESTUDIANTE")return e.jsx(js,{to:"/estudiante/dashboard",replace:!0});const y=async C=>{try{console.log(" Iniciando login con Email:",C.email);const b=await a({email:C.email,password:C.password,userType:"estudiante"});if(console.log(" Login Result:",b),b.success){const p=localStorage.getItem("token");if(console.log(" Token en localStorage:",p?"Presente":"Ausente"),!p){console.error(" Error: Token no guardado en localStorage"),h("root",{type:"manual",message:"Error al guardar la sesin. Intenta nuevamente."});return}console.log(" Login exitoso, redirigiendo a dashboard..."),i("/estudiante/dashboard",{replace:!0})}else h("root",{type:"manual",message:b.error||"CI o contrasea incorrectos"})}catch(b){console.error(" Error en onSubmit:",b),h("root",{type:"manual",message:"Error de conexin. Intenta nuevamente."}),m.error("Error de conexin")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(Hs,{to:"/portales",className:"inline-flex items-center text-green-600 hover:text-green-700 mb-6 transition-colors",children:[e.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Volver a portales"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(ts,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portal del Estudiante"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Inicia sesin o regstrate para acceder"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:d(y),children:[u.root&&e.jsx(ym,{type:"error",title:"Error de autenticacin",children:u.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(we,{label:"Email",type:"email",placeholder:"tu@email.com",icon:e.jsx(Bn,{className:"h-5 w-5"}),error:(E=u.email)==null?void 0:E.message,...l("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email debe tener un formato vlido"}})}),e.jsx(we,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(S=u.password)==null?void 0:S.message,...l("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:g||o,disabled:g||o,children:g||o?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-center text-gray-600 mb-4",children:"No tienes una cuenta?"}),e.jsxs(Hs,{to:"/estudiante/registro",className:"block w-full text-center bg-green-50 text-green-600 py-3 rounded-lg font-semibold hover:bg-green-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(u1,{className:"h-5 w-5"}),"Crear cuenta de estudiante"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Problemas para acceder?"," ",e.jsx("a",{href:"#",className:"text-green-600 hover:text-green-700 font-medium",children:"Contactar soporte"})]})})]})]})]})},B1=()=>{var C,b,p,N,_,x,v,j,D,H;const[s,r]=c.useState(!1),[a,t]=c.useState(!1),{registrar:n,isAuthenticated:o,user:i,loading:l}=Ts(),d=pr(),{register:u,handleSubmit:g,formState:{errors:h,isSubmitting:y},watch:k}=Xe(),E=k("password");if(c.useEffect(()=>{o&&(i==null?void 0:i.rol)==="ESTUDIANTE"&&d("/estudiante/dashboard",{replace:!0})},[o,i,d]),o&&(i==null?void 0:i.rol)==="ESTUDIANTE")return e.jsx(js,{to:"/estudiante/dashboard",replace:!0});const S=async A=>{try{(await n(A)).success&&d("/estudiante/dashboard",{replace:!0})}catch(P){console.error("Error en registro:",P),m.error("Error inesperado al registrar")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(Hs,{to:"/estudiante/login",className:"inline-flex items-center text-green-600 hover:text-green-700 mb-6 transition-colors",children:[e.jsx(Jl,{className:"h-5 w-5 mr-2"}),"Volver al login"]}),e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(ts,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registro de Estudiante"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Completa el formulario para crear tu cuenta"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{className:"space-y-6",onSubmit:g(S),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ir,{className:"h-5 w-5 text-green-600"}),"Informacin Personal"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Nmero de CI",type:"text",placeholder:"12345678",icon:e.jsx(ts,{className:"h-5 w-5"}),error:(C=h.ci)==null?void 0:C.message,...u("ci",{required:"El CI es obligatorio",pattern:{value:/^\d+$/,message:"El CI debe contener solo nmeros"}})}),e.jsx(we,{label:"Nombre",type:"text",placeholder:"Tu nombre",icon:e.jsx(ir,{className:"h-5 w-5"}),error:(b=h.nombre)==null?void 0:b.message,...u("nombre",{required:"El nombre es obligatorio"})}),e.jsx(we,{label:"Apellido",type:"text",placeholder:"Tu apellido",icon:e.jsx(ir,{className:"h-5 w-5"}),error:(p=h.apellido)==null?void 0:p.message,...u("apellido",{required:"El apellido es obligatorio"})}),e.jsx(we,{label:"Fecha de Nacimiento",type:"date",icon:e.jsx(Qs,{className:"h-5 w-5"}),error:(N=h.fecha_nacimiento)==null?void 0:N.message,...u("fecha_nacimiento",{required:"La fecha de nacimiento es obligatoria"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sexo"}),e.jsxs("select",{className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ${h.sexo?"border-red-500":"border-gray-300"}`,...u("sexo",{required:"El sexo es obligatorio"}),children:[e.jsx("option",{value:"",children:"Seleccione..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),h.sexo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.sexo.message})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ru,{className:"h-5 w-5 text-green-600"}),"Informacin de Contacto"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Email",type:"email",placeholder:"tu@email.com",icon:e.jsx(Bn,{className:"h-5 w-5"}),error:(_=h.email)==null?void 0:_.message,...u("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email debe tener un formato vlido"}})}),e.jsx(we,{label:"Celular",type:"text",placeholder:"70000000",icon:e.jsx(ru,{className:"h-5 w-5"}),error:(x=h.celular)==null?void 0:x.message,...u("celular",{required:"El celular es obligatorio"})}),e.jsx(we,{label:"Provincia",type:"text",placeholder:"Santa Cruz",icon:e.jsx(Js,{className:"h-5 w-5"}),error:(v=h.provincia)==null?void 0:v.message,...u("provincia",{required:"La provincia es obligatoria"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(we,{label:"Direccin",type:"text",placeholder:"Tu direccin completa",icon:e.jsx(Js,{className:"h-5 w-5"}),error:(j=h.direccion)==null?void 0:j.message,...u("direccion",{required:"La direccin es obligatoria"})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(vr,{className:"h-5 w-5 text-green-600"}),"Contrasea"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Contrasea",type:s?"text":"password",placeholder:"Mnimo 8 caracteres",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(D=h.password)==null?void 0:D.message,...u("password",{required:"La contrasea es obligatoria",minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Debe contener al menos una mayscula, una minscula y un nmero"}})}),e.jsx(we,{label:"Confirmar Contrasea",type:a?"text":"password",placeholder:"Repite tu contrasea",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>t(!a),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(H=h.password_confirmation)==null?void 0:H.message,...u("password_confirmation",{required:"Confirma tu contrasea",validate:A=>A===E||"Las contraseas no coinciden"})})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"La contrasea debe contener al menos 8 caracteres, una mayscula, una minscula y un nmero"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(W,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:y||l,disabled:y||l,children:y||l?"Registrando...":"Crear Cuenta"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Ya tienes una cuenta?"," ",e.jsx(Hs,{to:"/estudiante/login",className:"text-green-600 hover:text-green-700 font-medium",children:"Inicia sesin aqu"})]})})]})]})]})},Ax=()=>{var E,S;const[s,r]=c.useState(!1),{login:a,isAuthenticated:t,loading:n,user:o}=Ts(),i=pr(),{register:l,handleSubmit:d,formState:{errors:u,isSubmitting:g},setError:h}=Xe(),y=C=>{const b=Zs(C);return b===hs.ADMIN?"/admin/dashboard":b===hs.DOCENTE?"/docente/dashboard":b===hs.ESTUDIANTE?"/estudiante/dashboard":"/login"};if(c.useEffect(()=>{if(t&&(o!=null&&o.rol)){const C=y(o.rol);console.log(" Usuario autenticado, redirigiendo a:",C),i(C,{replace:!0})}},[t,o,i]),t&&o){const C=y(o==null?void 0:o.rol);return e.jsx(js,{to:C,replace:!0})}const k=async C=>{try{console.log(" Login genrico iniciado con:",{email:C.email,hasCI:!!C.ci});const b=await a({...C,userType:"admin"});console.log(" Resultado del login:",b),b.success?console.log(" Login exitoso, esperando actualizacin del estado..."):h("root",{type:"manual",message:b.message||"Error al iniciar sesin"})}catch(b){console.error(" Error en login:",b),h("root",{type:"manual",message:"Error de conexin. Intenta nuevamente."})}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-accent-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 rounded-full animate-spin"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Cargando..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-accent-400/20 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-accent-400/20 to-primary-400/20 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-primary-300/10 to-accent-300/10 rounded-full blur-3xl animate-float"})]}),e.jsxs("div",{className:"relative max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow-lg animate-bounce-in",children:e.jsx(ts,{className:"h-10 w-10 text-white"})}),e.jsx("h1",{className:"mt-6 text-4xl font-bold gradient-text animate-fade-in-up",children:"ICAP - UAGRM"}),e.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-400 animate-fade-in-up",children:"Sistema Acadmico Inteligente"}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-accent-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]}),e.jsxs("div",{className:"glass-card rounded-3xl p-8 shadow-soft-lg animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsxs("form",{className:"space-y-6",onSubmit:d(k),children:[u.root&&e.jsx(ym,{type:"error",title:"Error de autenticacin",children:u.root.message}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(we,{label:"Correo electrnico",type:"email",placeholder:"tu@email.com",icon:e.jsx(Bn,{className:"h-5 w-5"}),error:(E=u.email)==null?void 0:E.message,...l("email",{required:"El email es obligatorio",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"El email no es vlido"}})}),e.jsx(we,{label:"Contrasea",type:s?"text":"password",placeholder:"Tu contrasea",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(S=u.password)==null?void 0:S.message,...l("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:g,disabled:g,icon:e.jsx(l1,{className:"h-5 w-5"}),children:g?"Iniciando sesin...":"Iniciar Sesin"})})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200/50 dark:border-gray-700/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Problemas para acceder?"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("a",{href:"#",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200 flex items-center gap-1",children:[e.jsx(nr,{className:"h-4 w-4"}),"Soporte tcnico"]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:""}),e.jsxs("a",{href:"#",className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200 flex items-center gap-1",children:[e.jsx(Rs,{className:"h-4 w-4"}),"Contactar admin"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(Rs,{className:"h-6 w-6 text-primary-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Gestin de Usuarios"})]}),e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(ys,{className:"h-6 w-6 text-accent-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Control Acadmico"})]}),e.jsxs("div",{className:"text-center p-4 glass rounded-2xl",children:[e.jsx(nr,{className:"h-6 w-6 text-success-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Seguridad Avanzada"})]})]})]})]})},Gc=()=>e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mi Perfil"}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Informacin Personal"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tu nombre"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+591 12345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Administrador"}),e.jsx("option",{children:"Docente"}),e.jsx("option",{children:"Estudiante"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Guardar Cambios"})})]})]})]}),V1=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-gray-300",children:"404"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Pgina no encontrada"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Lo sentimos, la pgina que buscas no existe."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Hs,{to:"/dashboard",className:"block w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Ir al Dashboard"}),e.jsx("button",{onClick:()=>window.history.back(),className:"block w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Volver Atrs"})]})]})}),ke=({children:s,title:r,subtitle:a,header:t,footer:n,className:o,headerClassName:i,bodyClassName:l,footerClassName:d,titleClassName:u,subtitleClassName:g,shadow:h="soft",rounded:y="2xl",bordered:k=!0,padding:E="default",hover:S=!0,gradient:C=!1,...b})=>{const p={none:"",sm:"shadow-sm",soft:"shadow-soft",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl","soft-lg":"shadow-soft-lg",glow:"shadow-glow","glow-lg":"shadow-glow-lg"},N={none:"",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl","4xl":"rounded-4xl",full:"rounded-full"},_={none:"",sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},x=Ge("card",p[h],N[y],k&&"border border-gray-200/50 dark:border-gray-700/50",S&&"hover:shadow-soft-lg hover:-translate-y-1",C&&"bg-gradient-to-br from-white/90 to-gray-50/90 dark:from-gray-800/90 dark:to-gray-900/90",o),v=Ge("card-header",i),j=Ge("card-content",_[E],l),D=Ge("card-footer",d),H=Ge("card-title",u),A=Ge("card-description",g);return e.jsxs("div",{className:x,...b,children:[(t||r||a)&&e.jsx("div",{className:v,children:t||e.jsxs(e.Fragment,{children:[r&&e.jsx("h3",{className:H,children:r}),a&&e.jsx("p",{className:A,children:a})]})}),e.jsx("div",{className:j,children:s}),n&&e.jsx("div",{className:D,children:n})]})},er=({size:s="medium",className:r=""})=>{const a={small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12",xlarge:"h-16 w-16"};return e.jsx("div",{className:`flex items-center justify-center ${r}`,children:e.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${a[s]}`})})},q1=()=>{var d,u,g,h,y,k,E,S,C;const{user:s}=Ts(),r=pr(),[a,t]=c.useState(null),[n,o]=c.useState(!0);c.useEffect(()=>{i()},[]);const i=async()=>{var b,p,N;try{o(!0);const _=await Ia.get("/admin/dashboard");if(_.data&&_.data.success){const x=_.data.data;t(x)}else{const x=((b=_.data)==null?void 0:b.message)||"Error al cargar el dashboard";m.error(x)}}catch(_){const x=((N=(p=_.response)==null?void 0:p.data)==null?void 0:N.message)||_.message||"Error de conexin";m.error(x)}finally{o(!1)}};if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 rounded-full animate-spin"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Cargando dashboard..."})]})});const l=a?[{title:"Total Estudiantes",value:((d=a.totales)==null?void 0:d.estudiantes)||((u=a.estudiantes)==null?void 0:u.total)||0,icon:ts,color:"primary",gradient:"from-primary-500 to-primary-600",bgGradient:"from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20"},{title:"Total Docentes",value:((g=a.totales)==null?void 0:g.docentes)||((h=a.docentes)==null?void 0:h.total)||0,icon:Da,color:"success",gradient:"from-success-500 to-success-600",bgGradient:"from-success-50 to-success-100 dark:from-success-900/20 dark:to-success-800/20"},{title:"Total Programas",value:((y=a.totales)==null?void 0:y.programas)||((k=a.programas)==null?void 0:k.total)||0,icon:ys,color:"accent",gradient:"from-accent-500 to-accent-600",bgGradient:"from-accent-50 to-accent-100 dark:from-accent-900/20 dark:to-accent-800/20"},{title:"Total Grupos",value:((E=a.totales)==null?void 0:E.grupos)||((S=a.grupos)==null?void 0:S.total)||0,icon:Rs,color:"warning",gradient:"from-warning-500 to-warning-600",bgGradient:"from-warning-50 to-warning-100 dark:from-warning-900/20 dark:to-warning-800/20"}]:[];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center lg:text-left animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-4 mb-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow-lg animate-bounce-in group-hover:scale-110 transition-transform duration-300",children:e.jsx(ts,{className:"h-8 w-8 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-success-500 rounded-full flex items-center justify-center shadow-glow animate-pulse",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold gradient-text group-hover:scale-105 transition-transform duration-300",children:["Bienvenido, ",(s==null?void 0:s.nombre)||(s==null?void 0:s.name)||"Administrador","!"]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:"Resumen general del sistema acadmico"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 glass rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sistema Activo"})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 glass rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Rol: ",((C=s==null?void 0:s.rol)==null?void 0:C.nombre)||(s==null?void 0:s.rol)||"Administrador"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:l.map((b,p)=>{const N=b.icon;return e.jsx(ke,{className:`group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 hover:scale-105 bg-gradient-to-br ${b.bgGradient} border-0 cursor-pointer`,style:{animationDelay:`${p*.1}s`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:b.title}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:b.value})]}),e.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${b.gradient} shadow-glow animate-float`,children:e.jsx(N,{className:"h-8 w-8 text-white"})})]})},p)})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsx(ke,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/estudiantes"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(ts,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Gestin de Estudiantes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Administrar estudiantes"})]})}),e.jsx(ke,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/validacion-documentos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-warning-500 to-warning-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(ss,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Validar Documentos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revisar documentos"})]})}),e.jsx(ke,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/gestion-pagos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-success-500 to-success-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(ea,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Verificar Pagos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmar pagos"})]})}),e.jsx(ke,{className:"group hover:shadow-glow-lg transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>r("/admin/grupos"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent-500 to-accent-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-glow group-hover:scale-110 transition-transform duration-300",children:e.jsx(Da,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Gestin de Grupos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Administrar grupos"})]})})]}),(a==null?void 0:a.actividad_reciente)&&a.actividad_reciente.length>0&&e.jsxs(ke,{className:"gradient",shadow:"glow-lg",style:{animationDelay:"0.3s"},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ww,{className:"h-6 w-6 mr-2"}),e.jsx("h3",{className:"text-xl font-bold gradient-text",children:"Actividad Reciente"})]}),e.jsx("div",{className:"space-y-4",children:a.actividad_reciente.slice(0,5).map((b,p)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded-2xl transition-all duration-200 group",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-glow group-hover:scale-110 transition-transform duration-200",children:e.jsx(Dn,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200",children:b.mensaje||b.titulo||"Actividad del sistema"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center space-x-2",children:[b.docente&&e.jsxs("span",{children:["Por: ",b.docente]}),b.fecha&&e.jsxs(e.Fragment,{children:[b.docente&&e.jsx("span",{children:""}),e.jsx("span",{children:b.fecha})]})]})]})]},b.id||p))})]})]})},Fe=({isOpen:s=!1,onClose:r,title:a,children:t,size:n="md",showCloseButton:o=!0,closeOnOverlayClick:i=!0,closeOnEscape:l=!0,className:d,overlayClassName:u,headerClassName:g,bodyClassName:h,footerClassName:y,footer:k})=>{if(c.useEffect(()=>{if(!s||!l)return;const v=j=>{j.key==="Escape"&&(r==null||r())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s,l,r]),c.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const E={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},S=Ge("fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",u),C=Ge("bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-h-[90vh] flex flex-col",E[n],d),b=Ge("flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",g),p=Ge("p-6 flex-1 min-h-0 overflow-y-auto",h),N=Ge("flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",y),_=v=>{i&&v.target===v.currentTarget&&(r==null||r())},x=e.jsx("div",{className:S,onClick:_,children:e.jsxs("div",{className:C,children:[(a||o)&&e.jsxs("div",{className:b,children:[a&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),o&&e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xr,{className:"h-6 w-6"})})]}),e.jsx("div",{className:p,children:t}),k&&e.jsx("div",{className:N,children:k})]})});return sm.createPortal(x,document.body)},ds=({columns:s=[],data:r=[],loading:a=!1,emptyMessage:t="No hay datos disponibles",onSort:n,sortBy:o,sortDirection:i="asc",className:l,headerClassName:d,bodyClassName:u,rowClassName:g,cellClassName:h,striped:y=!1,hover:k=!0,bordered:E=!1,compact:S=!1,pagination:C,...b})=>{const{currentPage:p,totalPages:N,perPage:_,onPageChange:x,onPerPageChange:v,total:j,from:D,to:H}=C||{},A=C&&x,P=Ge("min-w-full divide-y divide-gray-200 dark:divide-gray-700",E&&"border border-gray-200 dark:border-gray-700",l),R=Ge("bg-gray-50 dark:bg-gray-800",d),G=Ge("bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",u),T=ne=>Ge(y&&ne%2===1&&"bg-gray-50 dark:bg-gray-800/50",k&&"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150",g),$=()=>Ge(S?"px-3 py-2":"px-6 py-4","text-sm text-gray-900 dark:text-gray-100",h),L=ne=>{if(!n||!ne.sortable)return;const oe=o===ne.key&&i==="asc"?"desc":"asc";n(ne.key,oe)},Y=ne=>ne.sortable?o===ne.key?i==="asc"?e.jsx(eu,{className:"h-4 w-4"}):e.jsx(Jf,{className:"h-4 w-4"}):e.jsx(eu,{className:"h-4 w-4 opacity-30"}):null;if(a)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-800 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-primary-600 dark:border-t-primary-400 rounded-full animate-spin"})]})});if(r.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:t})]});Object.keys(b).reduce((ne,oe)=>(["currentPage","totalPages","onPageChange","perPage","onPerPageChange"].includes(oe)||(ne[oe]=b[oe]),ne),{});const M=()=>{if(!A)return null;const ne=[],oe=5;let fe=Math.max(1,p-Math.floor(oe/2)),Q=Math.min(N,fe+oe-1);Q-fe+1<oe&&(fe=Math.max(1,Q-oe+1));for(let me=fe;me<=Q;me++)ne.push(me);return e.jsx("div",{className:"px-4 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando"," ",e.jsx("span",{className:"font-medium",children:D||0})," ","a"," ",e.jsx("span",{className:"font-medium",children:H||0})," ","de"," ",e.jsx("span",{className:"font-medium",children:j||0})," ","registros"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Por pgina:"}),e.jsxs("select",{value:_,onChange:me=>v(Number(me.target.value)),className:"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(1),disabled:p===1,className:Ge("p-2 rounded-lg transition-colors",p===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),title:"Primera pgina",children:e.jsx(s1,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>x(p-1),disabled:p===1,className:Ge("p-2 rounded-lg transition-colors",p===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),title:"Pgina anterior",children:e.jsx(Xw,{className:"h-5 w-5"})}),fe>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(1),className:"px-3 py-1.5 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"1"}),fe>2&&e.jsx("span",{className:"px-2 text-gray-500",children:"..."})]}),ne.map(me=>e.jsx("button",{onClick:()=>x(me),className:Ge("px-3 py-1.5 rounded-lg text-sm transition-colors",me===p?"bg-primary-600 text-white font-medium shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:me},me)),Q<N&&e.jsxs(e.Fragment,{children:[Q<N-1&&e.jsx("span",{className:"px-2 text-gray-500",children:"..."}),e.jsx("button",{onClick:()=>x(N),className:"px-3 py-1.5 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:N})]}),e.jsx("button",{onClick:()=>x(p+1),disabled:p===N,className:Ge("p-2 rounded-lg transition-colors",p===N?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),title:"Pgina siguiente",children:e.jsx(e1,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>x(N),disabled:p===N,className:Ge("p-2 rounded-lg transition-colors",p===N?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),title:"ltima pgina",children:e.jsx(r1,{className:"h-5 w-5"})})]})]})]})})};return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:P,...b,children:[e.jsx("thead",{className:R,children:e.jsx("tr",{children:s.map(ne=>e.jsx("th",{className:Ge(S?"px-3 py-2":"px-6 py-3","text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",ne.sortable&&"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150",ne.className),onClick:()=>L(ne),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:ne.label||ne.title}),ne.sortable&&Y(ne)]})},ne.key))})}),e.jsx("tbody",{className:G,children:r.map((ne,oe)=>e.jsx("tr",{className:T(oe),children:s.map(fe=>e.jsx("td",{className:Ge($(),fe.cellClassName),children:fe.render?fe.render(ne,oe):ne[fe.key]},fe.key))},ne.id||oe))})]})}),M()]})},za={async getUsers(s={}){var r,a,t,n,o;try{const i={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE};s.search&&s.search.trim()!==""&&(i.search=s.search.trim()),s.rol_id&&s.rol_id!==""&&(i.rol_id=s.rol_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(i.activo=s.activo);const l=await Re("/usuarios",i);return l.data&&l.data.success?{success:!0,data:l.data.data,message:l.data.message}:{success:!1,message:((r=l.data)==null?void 0:r.message)||"Error al obtener usuarios",data:null}}catch(i){return console.error("Error en userService.getUsers:",i),console.error("Response error:",(a=i.response)==null?void 0:a.data),console.error("Status:",(t=i.response)==null?void 0:t.status),{success:!1,message:((o=(n=i.response)==null?void 0:n.data)==null?void 0:o.message)||i.message||"Error al obtener usuarios",data:null}}},async getUser(s){var r,a;try{const t=await Re(`/usuarios/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Usuario no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario"}}},async createUser(s){var r,a,t,n;try{const o=await Be("/usuarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE,errors:null}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateUser(s,r){var a,t,n,o;try{const i=await os(`/usuarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE,errors:null}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteUser(s){var r,a;try{const t=await gs(`/usuarios/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async toggleStatus(s){var r,a;try{const t=await os(`/usuarios/${s}/toggle-status`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Estado actualizado exitosamente"}:{success:!1,message:t.data.message||"Error al actualizar el estado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al actualizar el estado"}}},async importUsers(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await Be("/usuarios/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Usuarios importados exitosamente"}:{success:!1,message:i.data.message||"Error al importar usuarios",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar usuarios",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async exportUsers(s={}){var r,a,t;try{const n={page:1,per_page:1e4};s.search&&s.search.trim()!==""&&(n.search=s.search.trim()),s.rol_id&&s.rol_id!==""&&(n.rol_id=s.rol_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(n.activo=s.activo);const o=await Re("/usuarios",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[]}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar usuarios"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar usuarios"}}}},na={async getRoles(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_order:s.sort_order||"asc"},a=await Re("/admin/roles",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener roles"}}catch(r){return{success:!1,message:r.message||"Error al obtener roles"}}},async getAllRoles(){try{const s=await Re("/admin/roles/all");return s.data.success?{success:!0,data:s.data.data}:{success:!1,message:s.data.message||"Error al obtener roles"}}catch(s){return{success:!1,message:s.message||"Error al obtener roles"}}},async getRole(s){try{const r=await Re(`/admin/roles/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Rol no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener rol"}}},async getPermisos(){var s,r;try{const a=await Re("/admin/permisos");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos"}}},async getPermisosAgrupados(){var s,r;try{const a=await Re("/admin/permisos/agrupados");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos agrupados"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos agrupados"}}},async createRole(s){var r,a,t,n,o,i;try{const l={nombre_rol:s.nombre_rol||s.nombre,descripcion:s.descripcion||"",activo:s.activo!==void 0?s.activo:!0},d=await Be("/admin/roles",l);if(s.permisos&&Array.isArray(s.permisos)&&s.permisos.length>0&&d.data.success){const u=((r=d.data.data)==null?void 0:r.rol_id)||((a=d.data.data)==null?void 0:a.id);u&&await this.asignarPermisos(u,s.permisos)}return d.data.success?{success:!0,data:d.data.data,message:d.data.message||I.SUCCESS.SAVE,errors:null}:{success:!1,message:d.data.message||I.ERROR.SAVE,errors:d.data.errors}}catch(l){return{success:!1,message:((n=(t=l.response)==null?void 0:t.data)==null?void 0:n.message)||l.message||I.ERROR.SAVE,errors:(i=(o=l.response)==null?void 0:o.data)==null?void 0:i.errors}}},async updateRole(s,r){var a,t,n,o;try{const i={nombre_rol:r.nombre_rol||r.nombre,descripcion:r.descripcion||"",activo:r.activo!==void 0?r.activo:!0},l=await os(`/admin/roles/${s}`,i);return r.permisos&&Array.isArray(r.permisos)&&r.permisos.length>=0&&await this.asignarPermisos(s,r.permisos),l.data.success?{success:!0,data:l.data.data,message:l.data.message||I.SUCCESS.UPDATE,errors:null}:{success:!1,message:l.data.message||I.ERROR.UPDATE,errors:l.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async asignarPermisos(s,r){var a,t,n,o;try{const i=await Be(`/admin/roles/${s}/permisos`,{permisos:r});return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Permisos asignados exitosamente"}:{success:!1,message:i.data.message||"Error al asignar permisos",errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||"Error al asignar permisos",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteRole(s){try{const r=await gs(`/admin/roles/${s}`);return r.data.success?{success:!0,message:I.SUCCESS.DELETE}:{success:!1,message:r.data.message||I.ERROR.DELETE}}catch(r){return{success:!1,message:r.message||I.ERROR.DELETE}}}},H1=s=>{if(!s)return"";const r=new Date(s);return isNaN(r.getTime())?"":r.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Px=s=>{if(!s)return"Fecha no disponible";try{const r=new Date(s);if(isNaN(r.getTime()))return console.warn("Fecha invlida:",s),"Fecha invlida";const a=new Date,t=a.getTime()-r.getTime();if(t<0){const n=new Date(s+(s.includes("Z")?"":"Z"));if(!isNaN(n.getTime())){const o=a.getTime()-n.getTime();if(o>=0&&o<864e5*365)return Dx(o)}return"hace un momento"}return Dx(t)}catch(r){return console.error("Error formateando fecha relativa:",r,s),"Fecha invlida"}},Dx=s=>{const r=Math.floor(s/1e3),a=Math.floor(r/60),t=Math.floor(a/60),n=Math.floor(t/24),o=Math.floor(n/7),i=Math.floor(n/30),l=Math.floor(n/365);return l>0?`hace ${l} ao${l>1?"s":""}`:i>0?`hace ${i} mes${i>1?"es":""}`:o>0?`hace ${o} semana${o>1?"s":""}`:n>0?`hace ${n} da${n>1?"s":""}`:t>0?`hace ${t} hora${t>1?"s":""}`:a>0?`hace ${a} minuto${a>1?"s":""}`:r>0?`hace ${r} segundo${r>1?"s":""}`:"hace un momento"},Wt=(s,r="export.csv")=>{if(!s||s.length===0)return;const a=Object.keys(s[0]),t=[a.join(","),...s.map(i=>a.map(l=>`"${i[l]||""}"`).join(","))].join(`
`),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");if(o.download!==void 0){const i=URL.createObjectURL(n);o.setAttribute("href",i),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},G1=()=>{var ae,ce,J,Z,ye;const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState([]),[o,i]=c.useState(!0),[l,d]=c.useState(""),[u,g]=c.useState(1),[h,y]=c.useState(1),[k,E]=c.useState(10),[S,C]=c.useState(!1),[b,p]=c.useState(!1),[N,_]=c.useState(!1),[x,v]=c.useState(null),[j,D]=c.useState(null),[H,A]=c.useState(!1),[P,R]=c.useState(null),G=c.useRef(null),{register:T,handleSubmit:$,reset:L,formState:{errors:Y}}=Xe();c.useEffect(()=>{M(),ne()},[u,k,l]);const M=async()=>{var de,q;try{i(!0);const ee=await za.getUsers({page:u,per_page:k,search:l});ee.success&&ee.data?(a(ee.data.data||[]),y(ee.data.last_page||1)):(m.error(ee.message||"Error al cargar usuarios"),a([]),y(1))}catch(ee){const se=((q=(de=ee.response)==null?void 0:de.data)==null?void 0:q.message)||ee.message||"Error de conexin";m.error(se),console.error("Error al cargar usuarios:",ee),a([]),y(1)}finally{i(!1)}},ne=async()=>{try{const de=await na.getAllRoles();de.success&&n(de.data||[])}catch(de){console.error("Error al cargar roles:",de)}},oe=()=>{v(null),L({name:"",email:"",password:"",rol_id:"",activo:!0}),C(!0)},fe=de=>{var q;v(de),L({name:de.name,email:de.email,rol_id:de.rol_id||((q=de.rol)==null?void 0:q.id),activo:de.activo}),C(!0)},Q=async de=>{try{const q=await za.getUser(de.id);q.success&&(D(q.data),p(!0))}catch{m.error("Error al cargar el usuario")}},me=async de=>{var q,ee;if(window.confirm("Ests seguro de que quieres eliminar este usuario?"))try{i(!0);const se=await za.deleteUser(de);se.success?(m.success(se.message||"Usuario eliminado exitosamente"),await M()):m.error(se.message||"Error al eliminar el usuario")}catch(se){const re=((ee=(q=se.response)==null?void 0:q.data)==null?void 0:ee.message)||se.message||"Error al eliminar el usuario";m.error(re)}finally{i(!1)}},xe=async de=>{var q,ee;try{const se=await za.toggleStatus(de);se.success?(m.success(se.message||"Estado actualizado exitosamente"),await M()):m.error(se.message||"Error al actualizar el estado")}catch(se){const re=((ee=(q=se.response)==null?void 0:q.data)==null?void 0:ee.message)||se.message||"Error al actualizar el estado";m.error(re)}},ie=async de=>{var q,ee,se,re;try{i(!0);const f={...de,rol_id:parseInt(de.rol_id),activo:de.activo==="true"||de.activo===!0||de.activo==="1"||de.activo===1};x&&!de.password&&delete f.password;let w;if(x)w=await za.updateUser(x.id,f);else{if(!de.password){m.error("La contrasea es obligatoria para crear un nuevo usuario");return}w=await za.createUser(f)}w.success?(m.success(w.message||(x?"Usuario actualizado exitosamente":"Usuario creado exitosamente")),C(!1),v(null),L(),await M()):(m.error(w.message||"Error al guardar el usuario"),w.errors&&Object.keys(w.errors).forEach(V=>{m.error(`${V}: ${w.errors[V]}`)}))}catch(f){const w=((ee=(q=f.response)==null?void 0:q.data)==null?void 0:ee.message)||f.message||"Error al guardar el usuario";m.error(w),(re=(se=f.response)==null?void 0:se.data)!=null&&re.errors&&Object.keys(f.response.data.errors).forEach(V=>{m.error(`${V}: ${f.response.data.errors[V]}`)})}finally{i(!1)}},le=async de=>{var ee,se;const q=de.target.files[0];if(q){if(!q.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}A(!0),R(null);try{const re=await za.importUsers(q);re.success?(R(re.data),m.success(re.message||"Usuarios importados exitosamente"),await M(),setTimeout(()=>{_(!1),R(null),G.current&&(G.current.value="")},3e3)):(m.error(re.message||"Error al importar usuarios"),re.errors&&R({errores:re.errors}))}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error al importar usuarios";m.error(f)}finally{A(!1)}}},Se=()=>{const de=`nombre,email,rol,codigo_docente
Juan Prez,juan.perez@example.com,docente,DOC001
Mara Gonzlez,maria.gonzalez@example.com,coordinador,
`,q=new Blob([de],{type:"text/csv;charset=utf-8;"}),ee=document.createElement("a");ee.href=URL.createObjectURL(q),ee.download="template_usuarios.csv",ee.click()},pe=async()=>{var de,q;try{i(!0);const ee=await za.exportUsers({search:l});if(ee.success&&ee.data&&Array.isArray(ee.data)){if(ee.data.length===0){m.error("No hay usuarios para exportar");return}const se=ee.data.map(re=>{var f;return{Nombre:re.name||"",Email:re.email||"",Rol:((f=re.rol)==null?void 0:f.nombre)||"Sin rol",Estado:re.activo?"Activo":"Inactivo",Creado:re.created_at?new Date(re.created_at).toLocaleDateString("es-ES"):""}});Wt(se,`usuarios_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${se.length} usuarios exitosamente`)}else m.error(ee.message||"Error al exportar usuarios: No se recibieron datos vlidos"),console.error("Error en exportacin:",ee)}catch(ee){console.error("Error al exportar usuarios:",ee),m.error(((q=(de=ee.response)==null?void 0:de.data)==null?void 0:q.message)||ee.message||"Error al exportar usuarios")}finally{i(!1)}},K=[{key:"name",label:"Usuario",sortable:!0,render:de=>{var q;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((q=de.name)==null?void 0:q.charAt(0))||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:de.name}),e.jsx("div",{className:"text-sm text-gray-500",children:de.email})]})]})}},{key:"rol",label:"Rol",sortable:!0,render:de=>{var q;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((q=de.rol)==null?void 0:q.nombre)||"Sin rol"})]})}},{key:"activo",label:"Estado",sortable:!0,render:de=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.activo?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:de.activo?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})},{key:"actions",label:"Acciones",render:de=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Q(de)}),e.jsx(W,{variant:"ghost",size:"sm",icon:de.activo?e.jsx(ls,{className:"h-4 w-4"}):e.jsx(Me,{className:"h-4 w-4"}),onClick:()=>xe(de.id),title:de.activo?"Desactivar":"Activar"}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>fe(de)}),de.id!==(s==null?void 0:s.id)&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>me(de.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Usuarios"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los usuarios del sistema"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{variant:"success",icon:e.jsx(or,{className:"h-5 w-5"}),onClick:()=>_(!0),children:"Importar"}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:oe,children:"Nuevo Usuario"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(de=>de.activo).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(de=>{var q;return((q=de.rol)==null?void 0:q.nombre)==="docente"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(nr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Coordinadores"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(de=>{var q;return((q=de.rol)==null?void 0:q.nombre)==="coordinador"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(nr,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Usuarios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar usuarios...",value:l,onChange:de=>d(de.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(or,{className:"h-4 w-4"}),onClick:()=>_(!0),children:"Importar"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:pe,disabled:o,children:"Exportar"})]})]})]}),e.jsx(ds,{columns:K,data:r,loading:o,pagination:{currentPage:u,totalPages:h,perPage:k,onPageChange:g,onPerPageChange:E}})]}),e.jsx(Fe,{isOpen:S,onClose:()=>{C(!1),v(null),L()},title:x?"Editar Usuario":"Nuevo Usuario",size:"lg",children:e.jsxs("form",{onSubmit:$(ie),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(we,{label:"Nombre Completo *",placeholder:"Ej: Juan Prez",error:(ae=Y.name)==null?void 0:ae.message,...T("name",{required:"El nombre es obligatorio"})}),e.jsx(we,{label:"Email *",type:"email",placeholder:"Ej: juan@example.com",error:(ce=Y.email)==null?void 0:ce.message,...T("email",{required:"El email es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invlido"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol *"}),e.jsxs("select",{...T("rol_id",{required:"El rol es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar rol..."}),t.map(de=>e.jsxs("option",{value:de.id,children:[de.nombre," - ",de.descripcion||""]},de.id))]}),Y.rol_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Y.rol_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{...T("activo",{setValueAs:de=>de==="true"||de===!0||de==="1"||de===1}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"true",children:"Activo"}),e.jsx("option",{value:"false",children:"Inactivo"})]})]}),!x&&e.jsx(we,{label:"Contrasea *",type:"password",placeholder:"Mnimo 8 caracteres",error:(J=Y.password)==null?void 0:J.message,...T("password",{required:!x&&"La contrasea es obligatoria",minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"}})}),x&&e.jsx(we,{label:"Nueva Contrasea (opcional)",type:"password",placeholder:"Dejar vaco para mantener la actual",error:(Z=Y.password)==null?void 0:Z.message,...T("password",{minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"}})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{C(!1),v(null),L()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[x?"Actualizar":"Crear"," Usuario"]})]})]})}),e.jsx(Fe,{isOpen:N,onClose:()=>{_(!1),R(null),G.current&&(G.current.value="")},title:"Importar Usuarios",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-info-900 dark:text-info-100 mb-2",children:"Formato del archivo"}),e.jsx("p",{className:"text-sm text-info-700 dark:text-info-300 mb-2",children:"El archivo debe ser Excel (.xlsx, .xls) o CSV con las siguientes columnas:"}),e.jsxs("ul",{className:"text-sm text-info-700 dark:text-info-300 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"nombre"})," o ",e.jsx("strong",{children:"name"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"email"})," o ",e.jsx("strong",{children:"correo"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"rol"})," (opcional, por defecto: docente)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"codigo"})," o ",e.jsx("strong",{children:"cdigo"})," (opcional, para docentes)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar archivo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{ref:G,type:"file",accept:".xlsx,.xls,.csv",onChange:le,disabled:H,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),e.jsx(W,{type:"button",variant:"outline",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:Se,children:"Template"})]})]}),H&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando usuarios..."})]}),P&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Resultado de la importacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-success-600",children:"Creados:"})," ",P.creados||0]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-info-600",children:"Actualizados:"})," ",P.actualizados||0]}),P.errores&&P.errores.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-semibold text-error-600 mb-2",children:"Errores:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:P.errores.map((de,q)=>e.jsx("p",{className:"text-xs text-error-600",children:de},q))})]})]})]})]})}),e.jsx(Fe,{isOpen:b,onClose:()=>p(!1),title:"Detalles del Usuario",size:"lg",children:j&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:j.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:j.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400 capitalize",children:((ye=j.rol)==null?void 0:ye.nombre)||"Sin rol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.activo?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:j.activo?"Activo":"Inactivo"})]})]})})})]})},en={async getPaises(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre_pais",sort_direction:s.sort_direction||"asc"};t.search||delete t.search;const n=await Re("/admin/paises",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener pases"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener pases"}}},async getPais(s){var r,a;try{const t=await Re(`/admin/paises/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Pas no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener pas"}}},async createPais(s){var r,a,t,n;try{const o=await Be("/admin/paises",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updatePais(s,r){var a,t,n,o;try{const i=await os(`/admin/paises/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deletePais(s){var r,a;try{const t=await gs(`/admin/paises/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}}},sn={async getProvincias(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",pais_id:s.pais_id||""};t.search||delete t.search,t.pais_id||delete t.pais_id;const n=await Re("/admin/provincias",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener provincias"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener provincias"}}},async getProvincia(s){var r,a;try{const t=await Re(`/admin/provincias/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Provincia no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener provincia"}}},async createProvincia(s){var r,a,t,n;try{const o=await Be("/admin/provincias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateProvincia(s,r){var a,t,n,o;try{const i=await os(`/admin/provincias/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteProvincia(s){var r,a;try{const t=await gs(`/admin/provincias/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}}},rn={async getCiudades(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",provincia_id:s.provincia_id||""};t.search||delete t.search,t.provincia_id||delete t.provincia_id;const n=await Re("/admin/ciudades",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener ciudades"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener ciudades"}}},async getCiudad(s){var r,a;try{const t=await Re(`/admin/ciudades/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Ciudad no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener ciudad"}}},async createCiudad(s){var r,a,t,n;try{const o=await Be("/admin/ciudades",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateCiudad(s,r){var a,t,n,o;try{const i=await os(`/admin/ciudades/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteCiudad(s){var r,a;try{const t=await gs(`/admin/ciudades/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}}},Xn={async getInstituciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",ciudad_id:s.ciudad_id||"",estado:s.estado!==void 0?s.estado:""};t.search||delete t.search,t.ciudad_id||delete t.ciudad_id,t.estado===""&&delete t.estado;const n=await Re("/admin/instituciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener instituciones"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener instituciones"}}},async getInstitucion(s){var r,a;try{const t=await Re(`/admin/instituciones/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Institucin no encontrada"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener institucin"}}},async createInstitucion(s){var r,a,t,n;try{const o=await Be("/admin/instituciones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateInstitucion(s,r){var a,t,n,o;try{const i=await os(`/admin/instituciones/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteInstitucion(s){var r,a;try{const t=await gs(`/admin/instituciones/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}}},Yt={async getUsuarios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",rol_id:s.rol_id||""};t.search||delete t.search,t.rol_id||delete t.rol_id;const n=await Re("/admin/usuarios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener usuarios"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuarios"}}},async getUsuario(s){var r,a;try{const t=await Re(`/admin/usuarios/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Usuario no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener usuario"}}},async createUsuario(s){var r,a,t,n;try{const o=await Be("/admin/usuarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateUsuario(s,r){var a,t,n,o;try{const i=await os(`/admin/usuarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteUsuario(s){var r,a;try{const t=await gs(`/admin/usuarios/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async getRoles(){var s,r;try{const a=await Re("/admin/usuarios/roles");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener roles"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener roles"}}}},eo={async getTiposConvenio(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre_tipo",sort_direction:s.sort_direction||"asc"};t.search||delete t.search;const n=await Re("/admin/tipo-convenios",t);return n.data.success?{success:!0,data:n.data.data,meta:n.data.meta,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getTipoConvenioById(s){var r,a;try{const t=await Re(`/admin/tipo-convenios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createTipoConvenio(s){var r,a,t,n;try{const o=await Be("/admin/tipo-convenios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo de convenio:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateTipoConvenio(s,r){var a,t,n,o;try{const i=await os(`/admin/tipo-convenios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo de convenio:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeTipoConvenio(s){var r,a;try{const t=await gs(`/admin/tipo-convenios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing tipo de convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},yt={async getConvenios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",tipo_convenio_id:s.tipo_convenio_id||"",estado:s.estado!==void 0?s.estado:"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||"",sort_by:s.sort_by||"fecha_ini",sort_direction:s.sort_direction||"desc"};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await Re("/admin/convenios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching convenios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getConvenioById(s){var r,a;try{const t=await Re(`/admin/convenios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await Re("/admin/convenios/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async createConvenio(s){var r,a,t,n;try{const o=await Be("/admin/convenios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating convenio:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateConvenio(s,r){var a,t,n,o;try{const i=await os(`/admin/convenios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating convenio:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeConvenio(s){var r,a;try{const t=await gs(`/admin/convenios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing convenio:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}},async agregarInstitucion(s,r){var a,t;try{const n=await Be(`/admin/convenios/${s}/instituciones`,r);return n.data.success?{success:!0,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_UPDATE}}catch(n){return console.error("Error agregando institucin:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE}}},async removerInstitucion(s,r){var a,t;try{const n=await gs(`/admin/convenios/${s}/instituciones/${r}`);return n.data.success?{success:!0,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_DELETE}}catch(n){return console.error("Error removiendo institucin:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_DELETE}}}},Q1=()=>{var xe,ie,le,Se,pe,K,ae,ce,J,Z,ye,de,q,ee,se,re,f;const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState([]),[o,i]=c.useState(!0),[l,d]=c.useState(""),[u,g]=c.useState(""),[h,y]=c.useState(1),[k,E]=c.useState(1),[S,C]=c.useState(10),[b,p]=c.useState(!1),[N,_]=c.useState(!1),[x,v]=c.useState(null),[j,D]=c.useState(null),{register:H,handleSubmit:A,reset:P,formState:{errors:R},watch:G,trigger:T,setValue:$}=Xe({mode:"onChange",defaultValues:{ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",email:"",password:"",password_confirmation:"",rol_id:""}});c.useEffect(()=>{L()},[]),c.useEffect(()=>{Y()},[h,S,l,u]);const L=async()=>{var w,V;try{const B=await Yt.getRoles();if(B.success){const ue=(B.data||[]).filter(ge=>ge.nombre_rol!=="ESTUDIANTE"&&ge.nombre_rol!=="estudiante");n(ue)}else m.error(B.message||"Error al cargar roles")}catch(B){const ue=((V=(w=B.response)==null?void 0:w.data)==null?void 0:V.message)||B.message||"Error al cargar roles";m.error(ue)}},Y=async()=>{var w,V;try{i(!0);const B=await Yt.getUsuarios({page:h,per_page:S,search:l,rol_id:u||void 0});if(B.success&&B.data){const ue=(B.data.data||[]).filter(ge=>{var je;const _e=((je=ge.rol)==null?void 0:je.nombre_rol)||"";return _e!=="ESTUDIANTE"&&_e!=="estudiante"});a(ue),E(B.data.last_page||1)}else{const ue=B.message||"Error al cargar usuarios";m.error(ue),a([]),E(1)}}catch(B){const ue=((V=(w=B.response)==null?void 0:w.data)==null?void 0:V.message)||B.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(ue),a([]),E(1)}finally{i(!1)}},M=()=>{v(null),P({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",email:"",password:"",password_confirmation:"",rol_id:""}),p(!0)},ne=w=>{v(w);const V=w.persona||{};P({ci:V.ci||"",nombre:V.nombre||"",apellido:V.apellido||"",celular:V.celular||"",sexo:V.sexo||"",fecha_nacimiento:V.fecha_nacimiento?V.fecha_nacimiento.split("T")[0]:"",direccion:V.direccion||"",email:w.email||"",password:"",password_confirmation:"",rol_id:w.rol_id||""}),p(!0)},oe=async w=>{var V,B,ue,ge,_e,je;try{const Ne=await Yt.getUsuario(w.usuario_id||w.id);if(Ne.success){if(((B=(V=Ne.data)==null?void 0:V.rol)==null?void 0:B.nombre_rol)==="ESTUDIANTE"||((ge=(ue=Ne.data)==null?void 0:ue.rol)==null?void 0:ge.nombre_rol)==="estudiante"){m.error("Los usuarios estudiantes se gestionan desde el mdulo de estudiantes");return}D(Ne.data),_(!0)}else m.error(Ne.message||"Error al cargar el usuario")}catch(Ne){const Te=((je=(_e=Ne.response)==null?void 0:_e.data)==null?void 0:je.message)||Ne.message||"Error al cargar el usuario";m.error(Te)}},fe=async w=>{var V,B;if(window.confirm("Ests seguro de que quieres eliminar este usuario?"))try{i(!0);const ue=await Yt.deleteUsuario(w);ue.success?(m.success(ue.message||"Usuario eliminado exitosamente"),await Y()):m.error(ue.message||"Error al eliminar el usuario")}catch(ue){m.error(((B=(V=ue.response)==null?void 0:V.data)==null?void 0:B.message)||ue.message||"Error al eliminar el usuario")}finally{i(!1)}},Q=async w=>{var ue,ge,_e,je;if(!w.ci||w.ci.trim()===""){m.error("El CI es obligatorio");return}if(!w.nombre||w.nombre.trim()===""){m.error("El nombre es obligatorio");return}if(!w.apellido||w.apellido.trim()===""){m.error("El apellido es obligatorio");return}if(!w.email||w.email.trim()===""){m.error("El email es obligatorio");return}if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(w.email)){m.error("El email no es vlido");return}if(!w.rol_id){m.error("El rol es obligatorio");return}const B=t.find(Ne=>Ne.rol_id===parseInt(w.rol_id));if(B&&(B.nombre_rol==="ESTUDIANTE"||B.nombre_rol==="estudiante")){m.error("No se puede crear un usuario con rol ESTUDIANTE desde este mdulo. Los estudiantes se registran desde el portal de estudiantes.");return}if(x){if(w.password&&w.password.trim()!==""){if(w.password.length<6){m.error("La contrasea debe tener al menos 6 caracteres");return}if(w.password!==w.password_confirmation){m.error("Las contraseas no coinciden");return}}}else{if(!w.password||w.password.length<6){m.error("La contrasea es obligatoria y debe tener al menos 6 caracteres");return}if(w.password!==w.password_confirmation){m.error("Las contraseas no coinciden");return}}try{i(!0);const Ne={ci:w.ci.trim(),nombre:w.nombre.trim(),apellido:w.apellido.trim(),celular:w.celular?w.celular.trim():null,sexo:w.sexo||null,fecha_nacimiento:w.fecha_nacimiento||null,direccion:w.direccion?w.direccion.trim():null,email:w.email.trim().toLowerCase(),rol_id:parseInt(w.rol_id)};Object.keys(Ne).forEach(ve=>{(Ne[ve]===null||Ne[ve]==="")&&delete Ne[ve]}),x?w.password&&w.password.trim()!==""&&(Ne.password=w.password.trim(),Ne.password_confirmation=w.password_confirmation?w.password_confirmation.trim():""):(Ne.password=w.password,Ne.password_confirmation=w.password_confirmation);let Te;x?Te=await Yt.updateUsuario(x.usuario_id||x.id,Ne):Te=await Yt.createUsuario(Ne),Te.success?(m.success(Te.message||(x?"Usuario actualizado exitosamente":"Usuario creado exitosamente")),p(!1),v(null),P(),await Y()):(m.error(Te.message||"Error al guardar el usuario"),Te.errors&&(Array.isArray(Te.errors)?Te.errors:Object.values(Te.errors).flat()).forEach(F=>{typeof F=="string"&&F.trim()&&m.error(F,{duration:4e3})}))}catch(Ne){const Te=((ge=(ue=Ne.response)==null?void 0:ue.data)==null?void 0:ge.message)||Ne.message||"Error al guardar el usuario";if(m.error(Te),(je=(_e=Ne.response)==null?void 0:_e.data)!=null&&je.errors){const ve=Ne.response.data.errors;(Array.isArray(ve)?ve:Object.values(ve).flat()).forEach(te=>{typeof te=="string"&&te.trim()&&m.error(te,{duration:4e3})})}}finally{i(!1)}},me=[{key:"persona",label:"Usuario",sortable:!0,render:w=>{const V=w.persona||{},B=`${V.nombre||""} ${V.apellido||""}`.trim()||w.email;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:B.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:B}),e.jsx("div",{className:"text-sm text-gray-500",children:w.email})]})]})}},{key:"rol",label:"Rol",sortable:!0,render:w=>{var V;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((V=w.rol)==null?void 0:V.nombre_rol)||"Sin rol"})]})}},{key:"ci",label:"CI",render:w=>{var V;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((V=w.persona)==null?void 0:V.ci)||"-"})}},{key:"actions",label:"Acciones",render:w=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>oe(w)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>ne(w)}),(w.usuario_id||w.id)!==(s==null?void 0:s.id)&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>fe(w.usuario_id||w.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Usuarios del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los usuarios base del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:M,children:"Nuevo Usuario"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Administradores"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(w=>{var V;return((V=w.rol)==null?void 0:V.nombre_rol)==="ADMIN"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(nr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(w=>{var V;return((V=w.rol)==null?void 0:V.nombre_rol)==="DOCENTE"}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ir,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Usuarios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar usuarios...",value:l,onChange:w=>d(w.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:u,onChange:w=>g(w.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los roles"}),t.map(w=>e.jsx("option",{value:w.rol_id,children:w.nombre_rol},w.rol_id))]})]})]}),e.jsx(ds,{columns:me,data:r,loading:o,pagination:{currentPage:h,totalPages:k,perPage:S,onPageChange:y,onPerPageChange:C}})]}),e.jsx(Fe,{isOpen:b,onClose:()=>{p(!1),v(null),P()},title:x?"Editar Usuario":"Nuevo Usuario",size:"xl",children:e.jsxs("form",{onSubmit:A(Q),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx("h3",{className:"col-span-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Datos de la Persona"}),e.jsx(we,{label:"CI *",placeholder:"Ej: 12345678",error:(xe=R.ci)==null?void 0:xe.message,...H("ci",{required:"El CI es obligatorio",maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"},validate:w=>w&&w.trim().length===0?"El CI no puede estar vaco":!0}),onBlur:()=>T("ci")}),e.jsx(we,{label:"Nombre *",placeholder:"Ej: Juan",error:(ie=R.nombre)==null?void 0:ie.message,...H("nombre",{required:"El nombre es obligatorio",maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"},validate:w=>w&&w.trim().length===0?"El nombre no puede estar vaco":!0}),onBlur:()=>T("nombre")}),e.jsx(we,{label:"Apellido *",placeholder:"Ej: Prez",error:(le=R.apellido)==null?void 0:le.message,...H("apellido",{required:"El apellido es obligatorio",maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"},validate:w=>w&&w.trim().length===0?"El apellido no puede estar vaco":!0}),onBlur:()=>T("apellido")}),e.jsx(we,{label:"Celular",placeholder:"Ej: 70000000",error:(Se=R.celular)==null?void 0:Se.message,...H("celular",{maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"},pattern:{value:/^[0-9]*$/,message:"El celular solo puede contener nmeros"}}),onBlur:()=>T("celular")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...H("sexo"),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]})]}),e.jsx(we,{label:"Fecha de Nacimiento",type:"date",error:(pe=R.fecha_nacimiento)==null?void 0:pe.message,...H("fecha_nacimiento")}),e.jsx(we,{label:"Direccin",placeholder:"Ej: Av. Principal #123",error:(K=R.direccion)==null?void 0:K.message,...H("direccion",{maxLength:{value:300,message:"La direccin no puede tener ms de 300 caracteres"}}),className:"col-span-2",onBlur:()=>T("direccion")}),e.jsx("h3",{className:"col-span-2 text-lg font-semibold text-gray-900 dark:text-gray-100 mt-4",children:"Datos del Usuario"}),e.jsx(we,{label:"Email *",type:"email",placeholder:"Ej: juan@example.com",error:(ae=R.email)==null?void 0:ae.message,...H("email",{required:"El email es obligatorio",maxLength:{value:100,message:"El email no puede tener ms de 100 caracteres"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"El email no es vlido"},validate:w=>w&&w.trim().length===0?"El email no puede estar vaco":!0}),onBlur:()=>T("email"),onChange:w=>{const V=w.target.value.toLowerCase().trim();$("email",V,{shouldValidate:!0})}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol *"}),e.jsxs("select",{...H("rol_id",{required:"El rol es obligatorio",validate:w=>{if(!w)return"El rol es obligatorio";const V=t.find(B=>B.rol_id===parseInt(w));return V&&(V.nombre_rol==="ESTUDIANTE"||V.nombre_rol==="estudiante")?"No se puede seleccionar el rol ESTUDIANTE. Los estudiantes se registran desde el portal de estudiantes.":!0}}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onBlur:()=>T("rol_id"),children:[e.jsx("option",{value:"",children:"Seleccionar rol..."}),t.filter(w=>w.nombre_rol!=="ESTUDIANTE"&&w.nombre_rol!=="estudiante").map(w=>e.jsxs("option",{value:w.rol_id,children:[w.nombre_rol," - ",w.descripcion||""]},w.rol_id))]}),R.rol_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:R.rol_id.message})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(we,{label:"Contrasea *",type:"password",placeholder:"Mnimo 6 caracteres",error:(ce=R.password)==null?void 0:ce.message,...H("password",{required:"La contrasea es obligatoria",minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"},validate:w=>!w||w.length<6?"La contrasea debe tener al menos 6 caracteres":!0}),onBlur:()=>T("password")}),e.jsx(we,{label:"Confirmar Contrasea *",type:"password",placeholder:"Repite la contrasea",error:(J=R.password_confirmation)==null?void 0:J.message,...H("password_confirmation",{required:"La confirmacin de contrasea es obligatoria",validate:w=>w?w!==G("password")?"Las contraseas no coinciden":!0:"La confirmacin de contrasea es obligatoria"}),onBlur:()=>T("password_confirmation")})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(we,{label:"Nueva Contrasea (opcional)",type:"password",placeholder:"Dejar vaco para mantener la actual",error:(Z=R.password)==null?void 0:Z.message,...H("password",{minLength:{value:6,message:"La contrasea debe tener al menos 6 caracteres"},validate:w=>w&&w.length>0&&w.length<6?"La contrasea debe tener al menos 6 caracteres":!0}),onBlur:()=>T("password")}),e.jsx(we,{label:"Confirmar Nueva Contrasea (opcional)",type:"password",placeholder:"Solo si cambias la contrasea",error:(ye=R.password_confirmation)==null?void 0:ye.message,...H("password_confirmation",{validate:w=>{const V=G("password");if(V&&V.trim()!==""){if(!w||w.trim()==="")return"Debes confirmar la nueva contrasea";if(w!==V)return"Las contraseas no coinciden"}return!0}}),onBlur:()=>T("password_confirmation")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{p(!1),v(null),P()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[x?"Actualizar":"Crear"," Usuario"]})]})]})}),e.jsx(Fe,{isOpen:N,onClose:()=>_(!1),title:"Detalles del Usuario",size:"lg",children:j&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[((de=j.persona)==null?void 0:de.nombre)||""," ",((q=j.persona)==null?void 0:q.apellido)||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CI"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((ee=j.persona)==null?void 0:ee.ci)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:j.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400 capitalize",children:((se=j.rol)==null?void 0:se.nombre_rol)||"Sin rol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Celular"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((re=j.persona)==null?void 0:re.celular)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((f=j.persona)==null?void 0:f.direccion)||"-"})]})]})})})]})},W1=()=>{var K;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre_tipo"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState({total:0,conConvenios:0}),{register:L,handleSubmit:Y,reset:M,formState:{errors:ne},trigger:oe}=Xe({mode:"onChange",defaultValues:{nombre_tipo:"",descripcion:""}});c.useEffect(()=>{fe()},[i,g,n,p,_]);const fe=async()=>{var ae,ce,J,Z;try{t(!0);const ye=await eo.getTiposConvenio({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});if(ye.success&&ye.data)r(ye.data.data||[]),u(ye.data.last_page||1),k(ye.data.total||0),S(ye.data.from||0),b(ye.data.to||0),$({total:ye.data.total||0,conConvenios:((ae=ye.meta)==null?void 0:ae.tipos_con_convenios)||((ce=ye.data.data)==null?void 0:ce.filter(de=>de.convenios_count>0).length)||0});else{const de=ye.message||"Error al cargar tipos de convenio";m.error(de),r([]),u(1),k(0),S(0),b(0)}}catch(ye){const de=((Z=(J=ye.response)==null?void 0:J.data)==null?void 0:Z.message)||ye.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(de),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},Q=(ae,ce)=>{N(ae),x(ce),l(1)},me=async ae=>{var ce,J,Z,ye;if(!ae.nombre_tipo||ae.nombre_tipo.trim()===""){m.error("El nombre del tipo de convenio es obligatorio");return}try{t(!0);const de={nombre_tipo:ae.nombre_tipo.trim(),descripcion:ae.descripcion?ae.descripcion.trim():null};de.descripcion||delete de.descripcion;let q;A?q=await eo.updateTipoConvenio(A.tipo_convenio_id,de):q=await eo.createTipoConvenio(de),q.success?(m.success(q.message||(A?"Tipo de convenio actualizado exitosamente":"Tipo de convenio creado exitosamente")),j(!1),M(),P(null),await fe()):(m.error(q.message||"Error al guardar el tipo de convenio"),q.errors&&(Array.isArray(q.errors)?q.errors:Object.values(q.errors).flat()).forEach(se=>{typeof se=="string"&&se.trim()?m.error(se,{duration:4e3}):Array.isArray(se)&&se.length>0&&m.error(se[0],{duration:4e3})}))}catch(de){const q=((J=(ce=de.response)==null?void 0:ce.data)==null?void 0:J.message)||de.message||"Error al guardar el tipo de convenio";if(m.error(q),(ye=(Z=de.response)==null?void 0:Z.data)!=null&&ye.errors){const ee=de.response.data.errors;(Array.isArray(ee)?ee:Object.values(ee).flat()).forEach(re=>{typeof re=="string"&&re.trim()?m.error(re,{duration:4e3}):Array.isArray(re)&&re.length>0&&m.error(re[0],{duration:4e3})})}}finally{t(!1)}},xe=ae=>{P(ae),M({nombre_tipo:ae.nombre_tipo,descripcion:ae.descripcion||""}),j(!0)},ie=async ae=>{var ce,J;try{const Z=await eo.getTipoConvenioById(ae.tipo_convenio_id);Z.success?(G(Z.data),H(!0)):m.error(Z.message||"Error al cargar detalles del tipo de convenio")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al cargar detalles del tipo de convenio";m.error(ye)}},le=async ae=>{var ce,J;if(window.confirm(`Est seguro de eliminar el tipo de convenio "${ae.nombre_tipo}"?`))try{t(!0);const Z=await eo.removeTipoConvenio(ae.tipo_convenio_id);Z.success?(m.success(Z.message||"Tipo de convenio eliminado exitosamente"),await fe()):m.error(Z.message||"Error al eliminar el tipo de convenio")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al eliminar el tipo de convenio";m.error(ye)}finally{t(!1)}},Se=()=>{P(null),M({nombre_tipo:"",descripcion:""}),j(!0)},pe=[{key:"nombre_tipo",label:"Nombre",sortable:!0,render:ae=>ae.nombre_tipo||"-"},{key:"descripcion",label:"Descripcin",sortable:!0,render:ae=>ae.descripcion||"-"},{key:"convenios_count",label:"Convenios",render:ae=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",children:ae.convenios_count||0})},{key:"actions",label:"Acciones",render:ae=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ie(ae),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>xe(ae),className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>le(ae),className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar",disabled:ae.convenios_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Convenio"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de tipos de convenio institucional"})]}),e.jsx(W,{onClick:Se,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Tipo"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total de Tipos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:y}),e.jsx("p",{className:"text-xs text-primary-200 mt-1",children:n?`${y} encontrados`:"En el sistema"})]}),e.jsx(ss,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Convenios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.conConvenios}),e.jsx("p",{className:"text-xs text-accent-200 mt-1",children:"Tipos activos"})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Pgina Actual"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:[i," / ",d]}),e.jsxs("p",{className:"text-xs text-blue-200 mt-1",children:["Mostrando ",E," - ",C]})]}),e.jsx(ss,{className:"h-12 w-12 text-blue-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Por Pgina"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:g}),e.jsx("p",{className:"text-xs text-green-200 mt-1",children:"Registros"})]}),e.jsx(Me,{className:"h-12 w-12 text-green-200"})]})})]}),e.jsx(ke,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre o descripcin...",value:n,onChange:ae=>{o(ae.target.value),l(1)},icon:is})})})}),e.jsx(ke,{children:e.jsx(ds,{columns:pe,data:s,loading:a,onSort:Q,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),M()},title:A?"Editar Tipo de Convenio":"Nuevo Tipo de Convenio",children:e.jsxs("form",{onSubmit:Y(me),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Tipo *"}),e.jsx(we,{...L("nombre_tipo",{required:"El nombre es obligatorio",maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"},validate:ae=>ae&&ae.trim().length===0?"El nombre no puede estar vaco":!0}),placeholder:"Ej: Educativo, Interinstitucional, Internacional",error:(K=ne.nombre_tipo)==null?void 0:K.message,onBlur:()=>oe("nombre_tipo")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("textarea",{...L("descripcion"),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-white",placeholder:"Descripcin del tipo de convenio..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),M()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:A?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null)},title:"Detalles del Tipo de Convenio",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:R.nombre_tipo})]}),R.descripcion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Descripcin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.descripcion})]}),R.convenios&&R.convenios.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Convenios Asociados (",R.convenios.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.convenios.map(ae=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ae.numero_convenio}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:ae.objeto_convenio})]},ae.convenio_id))})]})]})})]})},K1=()=>{var ge,_e,je,Ne,Te,ve;const[s,r]=c.useState([]),[a,t]=c.useState([]),[n,o]=c.useState([]),[i,l]=c.useState(!0),[d,u]=c.useState(""),[g,h]=c.useState(""),[y,k]=c.useState(1),[E,S]=c.useState(1),[C,b]=c.useState(10),[p,N]=c.useState(0),[_,x]=c.useState(0),[v,j]=c.useState(0),[D,H]=c.useState("fecha_ini"),[A,P]=c.useState("desc"),[R,G]=c.useState(!1),[T,$]=c.useState(!1),[L,Y]=c.useState(null),[M,ne]=c.useState(null),[oe,fe]=c.useState([]),[Q,me]=c.useState(""),[xe,ie]=c.useState({total:0,activos:0}),{register:le,handleSubmit:Se,reset:pe,formState:{errors:K},watch:ae,setValue:ce,trigger:J}=Xe({mode:"onChange",defaultValues:{numero_convenio:"",objeto_convenio:"",fecha_ini:"",fecha_fin:"",fecha_firma:"",moneda:"",observaciones:"",tipo_convenio_id:""}});c.useEffect(()=>{Z(),ye()},[y,C,d,g,D,A]);const Z=async()=>{var F,te;try{const be=await yt.getDatosFormulario();be.success&&be.data?(t(be.data.tipos_convenio||[]),o(be.data.instituciones||[]),!L&&be.data.siguiente_numero_convenio&&me(be.data.siguiente_numero_convenio)):m.error(be.message||"Error al cargar datos del formulario")}catch(be){const z=((te=(F=be.response)==null?void 0:F.data)==null?void 0:te.message)||be.message||"Error al cargar datos del formulario";m.error(z)}},ye=async()=>{var F,te;try{l(!0);const be=await yt.getConvenios({page:y,per_page:C,search:d,tipo_convenio_id:g||void 0,sort_by:D,sort_direction:A});if(be.success&&be.data){const z=be.data.data||[];r(z),S(be.data.last_page||1),N(be.data.total||0),x(be.data.from||0),j(be.data.to||0),ie({total:be.data.total||0,activos:z.filter(Ee=>new Date(Ee.fecha_fin)>=new Date).length||0})}else{const z=be.message||"Error al cargar convenios";m.error(z),r([]),S(1),N(0),x(0),j(0)}}catch(be){const z=((te=(F=be.response)==null?void 0:F.data)==null?void 0:te.message)||be.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(z),r([]),S(1),N(0),x(0),j(0)}finally{l(!1)}},de=()=>{fe([...oe,{id:"",porcentaje_participacion:"",monto_asignado:""}])},q=F=>{fe(oe.filter((te,be)=>be!==F))},ee=(F,te,be)=>{const z=[...oe];z[F][te]=be,fe(z)},se=async F=>{var z,Ee,Ce,he;if(!F.objeto_convenio||F.objeto_convenio.trim()===""){m.error("El objeto del convenio es obligatorio");return}if(F.objeto_convenio.length>500){m.error("El objeto del convenio no puede tener ms de 500 caracteres");return}if(!F.fecha_ini){m.error("La fecha de inicio es obligatoria");return}if(!F.fecha_fin){m.error("La fecha de fin es obligatoria");return}const te=new Date(F.fecha_ini);if(new Date(F.fecha_fin)<=te){m.error("La fecha de fin debe ser posterior a la fecha de inicio");return}if(F.fecha_firma){const O=new Date(F.fecha_firma),X=new Date;if(X.setHours(23,59,59,999),O>X){m.error("La fecha de firma no puede ser posterior a hoy");return}}if(!F.tipo_convenio_id){m.error("El tipo de convenio es obligatorio");return}if(oe.length===0){m.error("Debe agregar al menos una institucin");return}for(let O=0;O<oe.length;O++){const X=oe[O];if(!X.id||X.id===""){m.error(`La institucin ${O+1} debe estar seleccionada`);return}if(X.porcentaje_participacion&&X.porcentaje_participacion!==""){const U=parseFloat(X.porcentaje_participacion);if(isNaN(U)||U<0||U>100){m.error(`El porcentaje de participacin de la institucin ${O+1} debe ser un nmero entre 0 y 100`);return}}if(X.monto_asignado&&X.monto_asignado!==""){const U=parseFloat(X.monto_asignado);if(isNaN(U)||U<0){m.error(`El monto asignado de la institucin ${O+1} debe ser un nmero mayor o igual a 0`);return}}}if(F.moneda&&F.moneda.length>10){m.error("La moneda no puede tener ms de 10 caracteres");return}if(F.observaciones&&F.observaciones.length>1e3){m.error("Las observaciones no pueden tener ms de 1000 caracteres");return}try{l(!0);const O={objeto_convenio:F.objeto_convenio.trim(),fecha_ini:F.fecha_ini,fecha_fin:F.fecha_fin,fecha_firma:F.fecha_firma||null,moneda:F.moneda?F.moneda.trim().toUpperCase():null,observaciones:F.observaciones?F.observaciones.trim():null,tipo_convenio_id:parseInt(F.tipo_convenio_id),instituciones:oe.map(U=>({id:parseInt(U.id),porcentaje_participacion:U.porcentaje_participacion&&U.porcentaje_participacion!==""?parseFloat(U.porcentaje_participacion):null,monto_asignado:U.monto_asignado&&U.monto_asignado!==""?parseFloat(U.monto_asignado):null}))};O.fecha_firma||delete O.fecha_firma,O.moneda||delete O.moneda,O.observaciones||delete O.observaciones,L&&(O.numero_convenio=F.numero_convenio||L.numero_convenio);let X;if(L){const U=L.convenio_id||L.id;if(!U){console.error(" onSubmit - No se encontr ID en editingConvenio:",L),m.error("No se pudo identificar el ID del convenio para actualizar"),l(!1);return}console.log(" onSubmit - Actualizando convenio con ID:",U),X=await yt.updateConvenio(U,O)}else X=await yt.createConvenio(O);X.success?(m.success(X.message||(L?"Convenio actualizado exitosamente":"Convenio creado exitosamente")),G(!1),pe(),Y(null),fe([]),me(""),await Z(),await ye()):(m.error(X.message||"Error al guardar el convenio"),X.errors&&(Array.isArray(X.errors)?X.errors:Object.values(X.errors).flat()).forEach(Ae=>{typeof Ae=="string"&&Ae.trim()?m.error(Ae,{duration:4e3}):Array.isArray(Ae)&&Ae.length>0&&m.error(Ae[0],{duration:4e3})}))}catch(O){const X=((Ee=(z=O.response)==null?void 0:z.data)==null?void 0:Ee.message)||O.message||"Error al guardar el convenio";if(m.error(X),(he=(Ce=O.response)==null?void 0:Ce.data)!=null&&he.errors){const U=O.response.data.errors;(Array.isArray(U)?U:Object.values(U).flat()).forEach(De=>{typeof De=="string"&&De.trim()?m.error(De,{duration:4e3}):Array.isArray(De)&&De.length>0&&m.error(De[0],{duration:4e3})})}}finally{l(!1)}},re=async F=>{var te,be;console.log(" handleEdit - Convenio recibido:",F),console.log(" handleEdit - convenio_id:",F.convenio_id,"id:",F.id);try{const z=F.convenio_id||F.id;if(!z){console.error(" handleEdit - No se encontr ID. Objeto completo:",F),m.error("No se pudo identificar el ID del convenio");return}console.log(" handleEdit - Llamando API con ID:",z);const Ee=await yt.getConvenioById(z);if(console.log(" handleEdit - Respuesta recibida:",Ee),Ee.success){const Ce=Ee.data;console.log(" handleEdit - ConvenioData recibido:",Ce),console.log(" handleEdit - convenio_id:",Ce.convenio_id),Y(Ce),pe({convenio_id:Ce.convenio_id,numero_convenio:Ce.numero_convenio,objeto_convenio:Ce.objeto_convenio,fecha_ini:Ce.fecha_ini?Ce.fecha_ini.split("T")[0]:"",fecha_fin:Ce.fecha_fin?Ce.fecha_fin.split("T")[0]:"",fecha_firma:Ce.fecha_firma?Ce.fecha_firma.split("T")[0]:"",moneda:Ce.moneda||"",observaciones:Ce.observaciones||"",tipo_convenio_id:Ce.tipo_convenio_id}),Ce.instituciones&&Ce.instituciones.length>0?fe(Ce.instituciones.map(he=>{var O,X,U,Ae;return{id:he.id.toString(),porcentaje_participacion:((X=(O=he.pivot)==null?void 0:O.porcentaje_participacion)==null?void 0:X.toString())||"",monto_asignado:((Ae=(U=he.pivot)==null?void 0:U.monto_asignado)==null?void 0:Ae.toString())||""}})):fe([]),me(""),console.log(" handleEdit - Abriendo modal..."),G(!0),console.log(" handleEdit - Modal abierto, showModal:",!0)}else console.error(" handleEdit - Error en respuesta:",Ee.message),m.error(Ee.message||"Error al cargar datos del convenio")}catch(z){console.error(" handleEdit - Excepcin:",z);const Ee=((be=(te=z.response)==null?void 0:te.data)==null?void 0:be.message)||z.message||"Error al cargar datos del convenio";m.error(Ee)}},f=async F=>{var te,be;try{const z=F.convenio_id||F.id;if(!z){console.error(" handleView - No se encontr ID. Objeto completo:",F),m.error("No se pudo identificar el ID del convenio");return}console.log(" handleView - ID extrado:",z);const Ee=await yt.getConvenioById(z);Ee.success?(ne(Ee.data),$(!0)):m.error(Ee.message||"Error al cargar detalles del convenio")}catch(z){const Ee=((be=(te=z.response)==null?void 0:te.data)==null?void 0:be.message)||z.message||"Error al cargar detalles del convenio";m.error(Ee)}},w=async F=>{var be,z;const te=F.convenio_id||F.id;if(!te){console.error(" handleDelete - No se encontr ID. Objeto completo:",F),m.error("No se pudo identificar el ID del convenio");return}if(console.log(" handleDelete - ID extrado:",te),!!window.confirm(`Est seguro de eliminar el convenio "${F.numero_convenio||"este convenio"}"?`))try{l(!0);const Ee=await yt.removeConvenio(te);Ee.success?(m.success(Ee.message||"Convenio eliminado exitosamente"),await ye()):m.error(Ee.message||"Error al eliminar el convenio")}catch(Ee){const Ce=((z=(be=Ee.response)==null?void 0:be.data)==null?void 0:z.message)||Ee.message||"Error al eliminar el convenio";m.error(Ce)}finally{l(!1)}},V=(F,te)=>{H(F),P(te),k(1)},B=async()=>{Y(null),pe({convenio_id:"",numero_convenio:"",objeto_convenio:"",fecha_ini:"",fecha_fin:"",fecha_firma:"",moneda:"",observaciones:"",tipo_convenio_id:""}),fe([]),await Z(),G(!0)},ue=[{key:"convenio_id",label:"id",render:F=>F.convenio_id||"-"},{key:"numero_convenio",label:"Nmero",render:F=>F.numero_convenio||"-"},{key:"objeto_convenio",label:"Objeto",render:F=>{const te=F.objeto_convenio||"";return te.length>50?te.substring(0,50)+"...":te||"-"}},{key:"tipo_convenio",label:"Tipo",render:F=>{var te,be;return((te=F.tipo_convenio)==null?void 0:te.nombre_tipo)||((be=F.tipoConvenio)==null?void 0:be.nombre_tipo)||"N/A"}},{key:"fecha_ini",label:"Fecha Inicio",render:F=>{const te=F.fecha_ini;return te?new Date(te).toLocaleDateString("es-ES"):"N/A"}},{key:"fecha_fin",label:"Fecha Fin",render:F=>{const te=F.fecha_fin;return te?new Date(te).toLocaleDateString("es-ES"):"N/A"}},{key:"estado",label:"Estado",render:F=>new Date(F.fecha_fin)>=new Date?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-error-100 text-error-800",children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Vencido"]})},{key:"actions",label:"Acciones",render:F=>(console.log(" render actions - Row recibido:",F),console.log(" render actions - convenio_id:",F==null?void 0:F.convenio_id,"id:",F==null?void 0:F.id),!F||!F.convenio_id&&!F.id?(console.error(" render actions - Row invlido:",F),e.jsx("span",{className:"text-error-600",children:"Error: datos invlidos"})):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),console.log(" onClick handleView - Row:",F),f(F)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),console.log(" onClick handleEdit - Row:",F),console.log(" onClick handleEdit - convenio_id:",F.convenio_id),re(F)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),console.log(" onClick handleDelete - Row:",F),w(F)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]}))}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Convenios Institucionales"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de convenios y asociacin con instituciones"})]}),e.jsx(W,{onClick:B,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Convenio"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Convenios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:xe.total})]}),e.jsx(ss,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Convenios Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:xe.activos})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nmero o objeto...",value:d,onChange:F=>{u(F.target.value),k(1)},icon:is})}),e.jsx("div",{className:"w-64",children:e.jsxs("select",{value:g,onChange:F=>{h(F.target.value),k(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),a.map(F=>e.jsx("option",{value:F.id,children:F.nombre_tipo},F.id))]})})]})}),e.jsx(ke,{children:e.jsx(ds,{columns:ue,data:s,loading:i,onSort:V,sortBy:D,sortDirection:A,pagination:{currentPage:y,totalPages:E,perPage:C,total:p,from:_,to:v,onPageChange:k,onPerPageChange:b}})}),e.jsx(Fe,{isOpen:R,onClose:()=>{G(!1),Y(null),fe([]),pe()},title:L?"Editar Convenio":"Nuevo Convenio",size:"xl",children:e.jsxs("form",{onSubmit:Se(se),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nmero de Convenio ",!L&&"*"]}),L?e.jsx(we,{...le("numero_convenio",{required:"El nmero es requerido"}),placeholder:"Ej: CONV-2024-001",error:(ge=K.numero_convenio)==null?void 0:ge.message,readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}):e.jsx(we,{value:Q,placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),!L&&Q&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este nmero se asignar automticamente al crear el convenio"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Convenio *"}),e.jsxs("select",{...le("tipo_convenio_id",{required:"El tipo es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),a.map(F=>e.jsx("option",{value:F.id,children:F.nombre_tipo},F.id))]}),K.tipo_convenio_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.tipo_convenio_id.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Objeto del Convenio *"}),e.jsx("textarea",{...le("objeto_convenio",{required:"El objeto del convenio es obligatorio",maxLength:{value:500,message:"El objeto del convenio no puede tener ms de 500 caracteres"},validate:F=>F&&F.trim().length===0?"El objeto del convenio no puede estar vaco":!0}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white",placeholder:"Descripcin del objeto del convenio...",onBlur:()=>J("objeto_convenio")}),K.objeto_convenio&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.objeto_convenio.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio *"}),e.jsx(we,{type:"date",...le("fecha_ini",{required:"La fecha de inicio es obligatoria",validate:F=>{if(!F)return"La fecha de inicio es obligatoria";const te=new Date(F),be=ae("fecha_fin");return be&&new Date(be)<=te?"La fecha de inicio debe ser anterior a la fecha de fin":!0}}),error:(_e=K.fecha_ini)==null?void 0:_e.message,onBlur:()=>J("fecha_ini"),onChange:F=>{ce("fecha_ini",F.target.value,{shouldValidate:!0}),J("fecha_fin")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin *"}),e.jsx(we,{type:"date",...le("fecha_fin",{required:"La fecha de fin es obligatoria",validate:F=>{if(!F)return"La fecha de fin es obligatoria";const te=new Date(F),be=ae("fecha_ini");return be&&te<=new Date(be)?"La fecha de fin debe ser posterior a la fecha de inicio":!0}}),error:(je=K.fecha_fin)==null?void 0:je.message,onBlur:()=>J("fecha_fin"),onChange:F=>{ce("fecha_fin",F.target.value,{shouldValidate:!0}),J("fecha_ini")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Firma"}),e.jsx(we,{type:"date",...le("fecha_firma",{validate:F=>{if(F){const te=new Date(F),be=new Date;if(be.setHours(23,59,59,999),te>be)return"La fecha de firma no puede ser posterior a hoy"}return!0}}),error:(Ne=K.fecha_firma)==null?void 0:Ne.message,onBlur:()=>J("fecha_firma"),max:new Date().toISOString().split("T")[0]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Moneda"}),e.jsx(we,{...le("moneda",{maxLength:{value:10,message:"La moneda no puede tener ms de 10 caracteres"}}),placeholder:"Ej: BOB, USD",error:(Te=K.moneda)==null?void 0:Te.message,onBlur:()=>J("moneda"),onChange:F=>{const te=F.target.value.toUpperCase().trim();ce("moneda",te,{shouldValidate:!0})}})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones"}),e.jsx("textarea",{...le("observaciones",{maxLength:{value:1e3,message:"Las observaciones no pueden tener ms de 1000 caracteres"}}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white",placeholder:"Observaciones adicionales...",onBlur:()=>J("observaciones")}),K.observaciones&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:K.observaciones.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instituciones Participantes *"}),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:de,icon:e.jsx(We,{className:"h-4 w-4"}),children:"Agregar Institucin"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[oe.map((F,te)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Institucin ",te+1]}),e.jsx("button",{type:"button",onClick:()=>q(te),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(xr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("select",{value:F.id,onChange:be=>ee(te,"id",be.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar..."}),n.filter(be=>!oe.some((z,Ee)=>Ee!==te&&z.id===be.id.toString())).map(be=>e.jsx("option",{value:be.id,children:be.nombre},be.id))]})}),e.jsx("div",{children:e.jsx(we,{type:"number",placeholder:"% Participacin (0-100)",value:F.porcentaje_participacion,onChange:be=>{const z=be.target.value;(z===""||parseFloat(z)>=0&&parseFloat(z)<=100)&&ee(te,"porcentaje_participacion",z)},min:"0",max:"100",step:"0.01"})}),e.jsx("div",{children:e.jsx(we,{type:"number",placeholder:"Monto Asignado",value:F.monto_asignado,onChange:be=>{const z=be.target.value;(z===""||parseFloat(z)>=0)&&ee(te,"monto_asignado",z)},min:"0",step:"0.01"})})]})]},te)),oe.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay instituciones agregadas. Haga clic en "Agregar Institucin" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{G(!1),Y(null),fe([]),pe()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:L?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:T,onClose:()=>{$(!1),ne(null)},title:"Detalles del Convenio",size:"xl",children:M&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nmero de Convenio"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:M.numero_convenio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Convenio"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((ve=M.tipo_convenio)==null?void 0:ve.nombre_tipo)||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Objeto del Convenio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.objeto_convenio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.fecha_ini?new Date(M.fecha_ini).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.fecha_fin?new Date(M.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Firma"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.fecha_firma?new Date(M.fecha_firma).toLocaleDateString("es-ES"):"N/A"})]})]}),M.moneda&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Moneda"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.moneda})]}),M.observaciones&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:M.observaciones})]}),M.instituciones&&M.instituciones.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Instituciones Participantes (",M.instituciones.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:M.instituciones.map(F=>{var te,be;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.nombre}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[((te=F.pivot)==null?void 0:te.porcentaje_participacion)&&e.jsxs("span",{children:["Participacin: ",F.pivot.porcentaje_participacion,"%"]}),((be=F.pivot)==null?void 0:be.monto_asignado)&&e.jsxs("span",{children:["Monto: ",F.pivot.monto_asignado," ",M.moneda||""]})]})]},F.id)})})]})]})})]})},so={async getRamasAcademicas(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};t.search||delete t.search;const n=await Re("/admin/ramas-academicas",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching ramas acadmicas:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getRamaAcademicaById(s){var r,a;try{const t=await Re(`/admin/ramas-academicas/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching rama acadmica:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createRamaAcademica(s){var r,a,t,n;try{const o=await Be("/admin/ramas-academicas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating rama acadmica:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateRamaAcademica(s,r){var a,t,n,o;try{const i=await os(`/admin/ramas-academicas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating rama acadmica:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeRamaAcademica(s){var r,a;try{const t=await gs(`/admin/ramas-academicas/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing rama acadmica:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},ro={async getVersiones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",ao:s.ao||"",sort_by:s.sort_by||"ao",sort_direction:s.sort_direction||"desc"};t.search||delete t.search,t.ao||delete t.ao;const n=await Re("/admin/versiones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching versiones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getVersionById(s){var r,a;try{const t=await Re(`/admin/versiones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching versin:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createVersion(s){var r,a,t,n;try{const o=await Be("/admin/versiones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating versin:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateVersion(s,r){var a,t,n,o;try{const i=await os(`/admin/versiones/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating versin:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeVersion(s){var r,a;try{const t=await gs(`/admin/versiones/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing versin:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},ao={async getTiposPrograma(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};t.search||delete t.search;const n=await Re("/admin/tipos-programa",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getTipoProgramaById(s){var r,a;try{const t=await Re(`/admin/tipos-programa/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createTipoPrograma(s){var r,a,t,n;try{const o=await Be("/admin/tipos-programa",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo de programa:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateTipoPrograma(s,r){var a,t,n,o;try{const i=await os(`/admin/tipos-programa/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo de programa:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeTipoPrograma(s){var r,a;try{const t=await gs(`/admin/tipos-programa/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing tipo de programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},to={async getModulos(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};t.search||delete t.search;const n=await Re("/admin/modulos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching mdulos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getModuloById(s){var r,a;try{const t=await Re(`/admin/modulos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching mdulo:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createModulo(s){var r,a,t,n;try{const o=await Be("/admin/modulos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating mdulo:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateModulo(s,r){var a,t,n,o;try{const i=await os(`/admin/modulos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating mdulo:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeModulo(s){var r,a;try{const t=await gs(`/admin/modulos/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing mdulo:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},va={async getProgramas(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",rama_academica_id:s.rama_academica_id||"",tipo_programa_id:s.tipo_programa_id||"",version_id:s.version_id||"",institucion_id:s.institucion_id||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await Re("/admin/programas",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching programas:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getProgramaById(s){var r,a;try{const t=await Re(`/admin/programas/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await Re("/admin/programas/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async createPrograma(s){var r,a,t,n;try{const o=await Be("/admin/programas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating programa:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updatePrograma(s,r){var a,t,n,o;try{const i=await os(`/admin/programas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating programa:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removePrograma(s){var r,a;try{const t=await gs(`/admin/programas/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing programa:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},Z1=()=>{var pe;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState({total:0,conProgramas:0}),{register:L,handleSubmit:Y,reset:M,formState:{errors:ne}}=Xe();c.useEffect(()=>{oe()},[i,g,n,p,_]);const oe=async()=>{try{t(!0);const K=await so.getRamasAcademicas({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});if(K.success&&K.data){const ae=K.data.data||[];r(ae),u(K.data.last_page||1),k(K.data.total||0),S(K.data.from||0),b(K.data.to||0),$({total:K.data.total||0,conProgramas:ae.filter(ce=>ce.programas_count>0).length||0})}else m.error(K.message||"Error al cargar ramas acadmicas"),r([]),u(1),k(0),S(0),b(0)}catch{m.error("Error al cargar ramas acadmicas"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},fe=async K=>{var ae,ce,J,Z;if(!K.nombre||K.nombre.trim()===""){m.error("El nombre de la rama acadmica es obligatorio");return}try{t(!0);let ye;if(A){const de=A.id||A.rama_academica_id;if(!de){m.error("No se pudo identificar el ID de la rama acadmica para actualizar"),t(!1);return}ye=await so.updateRamaAcademica(de,{nombre:K.nombre.trim()})}else ye=await so.createRamaAcademica({nombre:K.nombre.trim()});ye.success?(m.success(ye.message||(A?"Rama acadmica actualizada exitosamente":"Rama acadmica creada exitosamente")),j(!1),M(),P(null),await oe()):(m.error(ye.message||"Error al guardar rama acadmica"),ye.errors&&(Array.isArray(ye.errors)?ye.errors:Object.values(ye.errors).flat()).forEach(q=>{typeof q=="string"&&q.trim()?m.error(q,{duration:4e3}):Array.isArray(q)&&q.length>0&&m.error(q[0],{duration:4e3})}))}catch(ye){const de=((ce=(ae=ye.response)==null?void 0:ae.data)==null?void 0:ce.message)||ye.message||"Error al guardar rama acadmica";if(m.error(de),(Z=(J=ye.response)==null?void 0:J.data)!=null&&Z.errors){const q=ye.response.data.errors;(Array.isArray(q)?q:Object.values(q).flat()).forEach(se=>{typeof se=="string"&&se.trim()?m.error(se,{duration:4e3}):Array.isArray(se)&&se.length>0&&m.error(se[0],{duration:4e3})})}}finally{t(!1)}},Q=K=>{if(!(K.id||K.rama_academica_id)){m.error("No se pudo identificar el ID de la rama acadmica");return}P(K),M({nombre:K.nombre}),j(!0)},me=async K=>{var ce,J;const ae=K.id||K.rama_academica_id;if(!ae){m.error("No se pudo identificar el ID de la rama acadmica");return}try{const Z=await so.getRamaAcademicaById(ae);Z.success?(G(Z.data),H(!0)):m.error(Z.message||"Error al cargar detalles de la rama acadmica")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al cargar detalles de la rama acadmica";m.error(ye)}},xe=async K=>{var ce,J;const ae=K.id||K.rama_academica_id;if(!ae){m.error("No se pudo identificar el ID de la rama acadmica");return}if(window.confirm(`Est seguro de eliminar la rama acadmica "${K.nombre}"?`))try{const Z=await so.removeRamaAcademica(ae);Z.success?(m.success(Z.message||"Rama acadmica eliminada exitosamente"),oe()):m.error(Z.message||"Error al eliminar rama acadmica")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al eliminar rama acadmica";m.error(ye)}},ie=()=>{P(null),M({nombre:""}),j(!0)},le=(K,ae)=>{N(K),x(ae),l(1)},Se=[{key:"nombre",label:"Nombre",render:K=>K.nombre||"-"},{key:"programas_count",label:"Programas",render:K=>K.programas_count||0},{key:"actions",label:"Acciones",render:K=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),me(K)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),Q(K)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),xe(K)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:K.programas_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Ramas Acadmicas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de ramas acadmicas del sistema"})]}),e.jsx(W,{onClick:ie,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nueva Rama"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Ramas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.total})]}),e.jsx(ts,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.conProgramas})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:K=>{o(K.target.value),l(1)},icon:is})})})}),e.jsx(ke,{children:e.jsx(ds,{columns:Se,data:s,loading:a,onSort:le,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),M()},title:A?"Editar Rama Acadmica":"Nueva Rama Acadmica",children:e.jsxs("form",{onSubmit:Y(fe),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Rama *"}),e.jsx(we,{...L("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Ciencias de la Educacin, Ingeniera, etc.",error:(pe=ne.nombre)==null?void 0:pe.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),M()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:A?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null)},title:"Detalles de la Rama Acadmica",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:R.nombre})]}),R.programas&&R.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",R.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.programas.map(K=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:K.nombre}),K.tipo_programa&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.tipo_programa.nombre})]},K.id))})]})]})})]})},Y1=()=>{var ae,ce;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(""),[d,u]=c.useState(1),[g,h]=c.useState(1),[y,k]=c.useState(10),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState(0),[_,x]=c.useState("ao"),[v,j]=c.useState("desc"),[D,H]=c.useState(!1),[A,P]=c.useState(!1),[R,G]=c.useState(null),[T,$]=c.useState(null),[L,Y]=c.useState({total:0,conProgramas:0}),{register:M,handleSubmit:ne,reset:oe,formState:{errors:fe}}=Xe();c.useEffect(()=>{Q()},[d,y,n,i,_,v]);const Q=async()=>{try{t(!0);const J=await ro.getVersiones({page:d,per_page:y,search:n,ao:i,sort_by:_,sort_direction:v});if(J.success&&J.data){const Z=J.data.data||[];r(Z),h(J.data.last_page||1),S(J.data.total||0),b(J.data.from||0),N(J.data.to||0),Y({total:J.data.total||0,conProgramas:Z.filter(ye=>ye.programas_count>0).length||0})}else m.error(J.message||"Error al cargar versiones"),r([]),h(1),S(0),b(0),N(0)}catch{m.error("Error al cargar versiones"),r([]),h(1),S(0),b(0),N(0)}finally{t(!1)}},me=async J=>{var ye,de,q,ee;if(!J.nombre||J.nombre.trim()===""){m.error("El nombre de la versin es obligatorio");return}if(!J.ao){m.error("El ao es obligatorio");return}const Z=parseInt(J.ao);if(isNaN(Z)||Z<2e3||Z>new Date().getFullYear()+10){m.error("El ao debe ser un nmero vlido entre 2000 y "+(new Date().getFullYear()+10));return}try{t(!0);let se;if(R){const re=R.id||R.version_id;if(!re){m.error("No se pudo identificar el ID de la versin para actualizar"),t(!1);return}se=await ro.updateVersion(re,{nombre:J.nombre.trim(),ao:Z})}else se=await ro.createVersion({nombre:J.nombre.trim(),ao:Z});se.success?(m.success(se.message||(R?"Versin actualizada exitosamente":"Versin creada exitosamente")),H(!1),oe(),G(null),await Q()):(m.error(se.message||"Error al guardar versin"),se.errors&&(Array.isArray(se.errors)?se.errors:Object.values(se.errors).flat()).forEach(f=>{typeof f=="string"&&f.trim()?m.error(f,{duration:4e3}):Array.isArray(f)&&f.length>0&&m.error(f[0],{duration:4e3})}))}catch(se){const re=((de=(ye=se.response)==null?void 0:ye.data)==null?void 0:de.message)||se.message||"Error al guardar versin";if(m.error(re),(ee=(q=se.response)==null?void 0:q.data)!=null&&ee.errors){const f=se.response.data.errors;(Array.isArray(f)?f:Object.values(f).flat()).forEach(V=>{typeof V=="string"&&V.trim()?m.error(V,{duration:4e3}):Array.isArray(V)&&V.length>0&&m.error(V[0],{duration:4e3})})}}finally{t(!1)}},xe=J=>{if(!(J.id||J.version_id)){m.error("No se pudo identificar el ID de la versin");return}G(J),oe({nombre:J.nombre,ao:J.ao}),H(!0)},ie=async J=>{var ye,de;const Z=J.id||J.version_id;if(!Z){m.error("No se pudo identificar el ID de la versin");return}try{const q=await ro.getVersionById(Z);q.success?($(q.data),P(!0)):m.error(q.message||"Error al cargar detalles de la versin")}catch(q){const ee=((de=(ye=q.response)==null?void 0:ye.data)==null?void 0:de.message)||q.message||"Error al cargar detalles de la versin";m.error(ee)}},le=async J=>{var ye,de;const Z=J.id||J.version_id;if(!Z){m.error("No se pudo identificar el ID de la versin");return}if(window.confirm(`Est seguro de eliminar la versin "${J.nombre}"?`))try{const q=await ro.removeVersion(Z);q.success?(m.success(q.message||"Versin eliminada exitosamente"),await Q()):m.error(q.message||"Error al eliminar versin")}catch(q){const ee=((de=(ye=q.response)==null?void 0:ye.data)==null?void 0:de.message)||q.message||"Error al eliminar versin";m.error(ee)}},Se=()=>{G(null),oe({nombre:"",ao:new Date().getFullYear()}),H(!0)},pe=(J,Z)=>{x(J),j(Z),u(1)},K=[{key:"nombre",label:"Nombre",render:J=>J.nombre||"-"},{key:"ao",label:"Ao",render:J=>J.ao||"N/A"},{key:"programas_count",label:"Programas",render:J=>J.programas_count||0},{key:"actions",label:"Acciones",render:J=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),ie(J)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),xe(J)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),le(J)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:J.programas_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Versiones de Plan de Estudio"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de versiones de planes de estudio"})]}),e.jsx(W,{onClick:Se,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nueva Versin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Versiones"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:L.total})]}),e.jsx(Qs,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:L.conProgramas})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:J=>{o(J.target.value),u(1)},icon:is})}),e.jsx("div",{className:"w-48",children:e.jsx(we,{type:"number",placeholder:"Filtrar por ao...",value:i,onChange:J=>{l(J.target.value),u(1)},min:"2000",max:new Date().getFullYear()+10})})]})}),e.jsx(ke,{children:e.jsx(ds,{columns:K,data:s,loading:a,onSort:pe,sortBy:_,sortDirection:v,pagination:{currentPage:d,totalPages:g,perPage:y,total:E,from:C,to:p,onPageChange:u,onPerPageChange:k}})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null),oe()},title:R?"Editar Versin":"Nueva Versin",children:e.jsxs("form",{onSubmit:ne(me),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Versin *"}),e.jsx(we,{...M("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Versin 2024, Plan 2020-2024",error:(ae=fe.nombre)==null?void 0:ae.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ao *"}),e.jsx(we,{type:"number",...M("ao",{required:"El ao es requerido",min:{value:2e3,message:"El ao debe ser mayor a 2000"},max:{value:new Date().getFullYear()+10,message:"El ao no puede ser mayor a "+(new Date().getFullYear()+10)}}),placeholder:"Ej: 2024",error:(ce=fe.ao)==null?void 0:ce.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{H(!1),G(null),oe()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:R?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:A,onClose:()=>{P(!1),$(null)},title:"Detalles de la Versin",children:T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:T.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Ao"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:T.ao})]})]}),T.programas&&T.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",T.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:T.programas.map(J=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:J.nombre})},J.id))})]})]})})]})},J1=()=>{var pe;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState({total:0,conProgramas:0}),{register:L,handleSubmit:Y,reset:M,formState:{errors:ne}}=Xe();c.useEffect(()=>{oe()},[i,g,n,p,_]);const oe=async()=>{try{t(!0);const K=await ao.getTiposPrograma({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});if(K.success&&K.data){const ae=K.data.data||[];r(ae),u(K.data.last_page||1),k(K.data.total||0),S(K.data.from||0),b(K.data.to||0),$({total:K.data.total||0,conProgramas:ae.filter(ce=>ce.programas_count>0).length||0})}else m.error(K.message||"Error al cargar tipos de programa"),r([]),u(1),k(0),S(0),b(0)}catch{m.error("Error al cargar tipos de programa"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},fe=async K=>{var ae,ce,J,Z;if(!K.nombre||K.nombre.trim()===""){m.error("El nombre del tipo de programa es obligatorio");return}try{t(!0);let ye;if(A){const de=A.id||A.tipo_programa_id;if(!de){m.error("No se pudo identificar el ID del tipo de programa para actualizar"),t(!1);return}ye=await ao.updateTipoPrograma(de,{nombre:K.nombre.trim()})}else ye=await ao.createTipoPrograma({nombre:K.nombre.trim()});ye.success?(m.success(ye.message||(A?"Tipo de programa actualizado exitosamente":"Tipo de programa creado exitosamente")),j(!1),M(),P(null),await oe()):(m.error(ye.message||"Error al guardar tipo de programa"),ye.errors&&(Array.isArray(ye.errors)?ye.errors:Object.values(ye.errors).flat()).forEach(q=>{typeof q=="string"&&q.trim()?m.error(q,{duration:4e3}):Array.isArray(q)&&q.length>0&&m.error(q[0],{duration:4e3})}))}catch(ye){const de=((ce=(ae=ye.response)==null?void 0:ae.data)==null?void 0:ce.message)||ye.message||"Error al guardar tipo de programa";if(m.error(de),(Z=(J=ye.response)==null?void 0:J.data)!=null&&Z.errors){const q=ye.response.data.errors;(Array.isArray(q)?q:Object.values(q).flat()).forEach(se=>{typeof se=="string"&&se.trim()?m.error(se,{duration:4e3}):Array.isArray(se)&&se.length>0&&m.error(se[0],{duration:4e3})})}}finally{t(!1)}},Q=K=>{if(!(K.id||K.tipo_programa_id)){m.error("No se pudo identificar el ID del tipo de programa");return}P(K),M({nombre:K.nombre}),j(!0)},me=async K=>{var ce,J;const ae=K.id||K.tipo_programa_id;if(!ae){m.error("No se pudo identificar el ID del tipo de programa");return}try{const Z=await ao.getTipoProgramaById(ae);Z.success?(G(Z.data),H(!0)):m.error(Z.message||"Error al cargar detalles del tipo de programa")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al cargar detalles del tipo de programa";m.error(ye)}},xe=async K=>{var ce,J;const ae=K.id||K.tipo_programa_id;if(!ae){m.error("No se pudo identificar el ID del tipo de programa");return}if(window.confirm(`Est seguro de eliminar el tipo de programa "${K.nombre}"?`))try{const Z=await ao.removeTipoPrograma(ae);Z.success?(m.success(Z.message||"Tipo de programa eliminado exitosamente"),await oe()):m.error(Z.message||"Error al eliminar tipo de programa")}catch(Z){const ye=((J=(ce=Z.response)==null?void 0:ce.data)==null?void 0:J.message)||Z.message||"Error al eliminar tipo de programa";m.error(ye)}},ie=()=>{P(null),M({nombre:""}),j(!0)},le=(K,ae)=>{N(K),x(ae),l(1)},Se=[{key:"nombre",label:"Nombre",render:K=>K.nombre||"-"},{key:"programas_count",label:"Programas",render:K=>K.programas_count||0},{key:"actions",label:"Acciones",render:K=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),me(K)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),Q(K)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),xe(K)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:K.programas_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Programa"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de tipos de programa (Diplomado, Maestra, etc.)"})]}),e.jsx(W,{onClick:ie,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Tipo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Tipos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.total})]}),e.jsx(ys,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.conProgramas})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:K=>{o(K.target.value),l(1)},icon:is})})})}),e.jsx(ke,{children:e.jsx(ds,{columns:Se,data:s,loading:a,onSort:le,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),M()},title:A?"Editar Tipo de Programa":"Nuevo Tipo de Programa",children:e.jsxs("form",{onSubmit:Y(fe),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Tipo *"}),e.jsx(we,{...L("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Diplomado, Maestra, Doctorado, Especializacin",error:(pe=ne.nombre)==null?void 0:pe.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),M()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:A?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null)},title:"Detalles del Tipo de Programa",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:R.nombre})]}),R.programas&&R.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",R.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.programas.map(K=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:K.nombre}),K.institucion&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.institucion.nombre})]},K.id))})]})]})})]})},X1=()=>{var pe,K,ae;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState({total:0,conProgramas:0}),{register:L,handleSubmit:Y,reset:M,formState:{errors:ne}}=Xe();c.useEffect(()=>{oe()},[i,g,n,p,_]);const oe=async()=>{try{t(!0);const ce=await to.getModulos({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});if(ce.success&&ce.data){const J=ce.data.data||[];r(J),u(ce.data.last_page||1),k(ce.data.total||0),S(ce.data.from||0),b(ce.data.to||0),$({total:ce.data.total||0,conProgramas:J.filter(Z=>Z.programas_count>0).length||0})}else m.error(ce.message||"Error al cargar mdulos"),r([]),u(1),k(0),S(0),b(0)}catch{m.error("Error al cargar mdulos"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},fe=async ce=>{var J,Z,ye,de;if(!ce.nombre||ce.nombre.trim()===""){m.error("El nombre del mdulo es obligatorio");return}if(!ce.credito||parseInt(ce.credito)<1||parseInt(ce.credito)>20){m.error("Los crditos deben ser un nmero entre 1 y 20");return}if(!ce.horas_academicas||parseInt(ce.horas_academicas)<1){m.error("Las horas acadmicas deben ser un nmero mayor a 0");return}try{t(!0);let q;if(A){const ee=A.modulo_id||A.id;if(!ee){m.error("No se pudo identificar el ID del mdulo para actualizar"),t(!1);return}q=await to.updateModulo(ee,{nombre:ce.nombre.trim(),credito:parseInt(ce.credito),horas_academicas:parseInt(ce.horas_academicas)})}else q=await to.createModulo({nombre:ce.nombre.trim(),credito:parseInt(ce.credito),horas_academicas:parseInt(ce.horas_academicas)});q.success?(m.success(q.message||(A?"Mdulo actualizado exitosamente":"Mdulo creado exitosamente")),j(!1),M(),P(null),await oe()):(m.error(q.message||"Error al guardar mdulo"),q.errors&&(Array.isArray(q.errors)?q.errors:Object.values(q.errors).flat()).forEach(se=>{typeof se=="string"&&se.trim()?m.error(se,{duration:4e3}):Array.isArray(se)&&se.length>0&&m.error(se[0],{duration:4e3})}))}catch(q){const ee=((Z=(J=q.response)==null?void 0:J.data)==null?void 0:Z.message)||q.message||"Error al guardar mdulo";if(m.error(ee),(de=(ye=q.response)==null?void 0:ye.data)!=null&&de.errors){const se=q.response.data.errors;(Array.isArray(se)?se:Object.values(se).flat()).forEach(f=>{typeof f=="string"&&f.trim()?m.error(f,{duration:4e3}):Array.isArray(f)&&f.length>0&&m.error(f[0],{duration:4e3})})}}finally{t(!1)}},Q=ce=>{if(!(ce.modulo_id||ce.id)){m.error("No se pudo identificar el ID del mdulo");return}P(ce),M({nombre:ce.nombre,credito:ce.credito,horas_academicas:ce.horas_academicas}),j(!0)},me=async ce=>{var Z,ye;const J=ce.modulo_id||ce.id;if(!J){m.error("No se pudo identificar el ID del mdulo");return}try{const de=await to.getModuloById(J);de.success?(G(de.data),H(!0)):m.error(de.message||"Error al cargar detalles del mdulo")}catch(de){const q=((ye=(Z=de.response)==null?void 0:Z.data)==null?void 0:ye.message)||de.message||"Error al cargar detalles del mdulo";m.error(q)}},xe=async ce=>{var Z,ye;const J=ce.modulo_id||ce.id;if(!J){m.error("No se pudo identificar el ID del mdulo");return}if(window.confirm(`Est seguro de eliminar el mdulo "${ce.nombre}"?`))try{const de=await to.removeModulo(J);de.success?(m.success(de.message||"Mdulo eliminado exitosamente"),await oe()):m.error(de.message||"Error al eliminar mdulo")}catch(de){const q=((ye=(Z=de.response)==null?void 0:Z.data)==null?void 0:ye.message)||de.message||"Error al eliminar mdulo";m.error(q)}},ie=()=>{P(null),M({nombre:"",credito:"",horas_academicas:""}),j(!0)},le=(ce,J)=>{N(ce),x(J),l(1)},Se=[{key:"nombre",label:"Nombre",render:ce=>ce.nombre||"-"},{key:"credito",label:"Crditos",render:ce=>ce.credito||0},{key:"horas_academicas",label:"Horas Acadmicas",render:ce=>ce.horas_academicas||0},{key:"programas_count",label:"Programas",render:ce=>ce.programas_count||0},{key:"actions",label:"Acciones",render:ce=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),me(ce)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),Q(ce)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),xe(ce)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:ce.programas_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mdulos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de mdulos (materias) del sistema"})]}),e.jsx(W,{onClick:ie,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Mdulo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Mdulos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.total})]}),e.jsx(Kw,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:T.conProgramas})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre...",value:n,onChange:ce=>{o(ce.target.value),l(1)},icon:is})})})}),e.jsx(ke,{children:e.jsx(ds,{columns:Se,data:s,loading:a,onSort:le,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),M()},title:A?"Editar Mdulo":"Nuevo Mdulo",children:e.jsxs("form",{onSubmit:Y(fe),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Mdulo *"}),e.jsx(we,{...L("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Didctica General, Metodologa de la Investigacin",error:(pe=ne.nombre)==null?void 0:pe.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Crditos *"}),e.jsx(we,{type:"number",...L("credito",{required:"Los crditos son requeridos",min:{value:1,message:"Mnimo 1 crdito"},max:{value:20,message:"Mximo 20 crditos"}}),placeholder:"Ej: 3",error:(K=ne.credito)==null?void 0:K.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horas Acadmicas *"}),e.jsx(we,{type:"number",...L("horas_academicas",{required:"Las horas acadmicas son requeridas",min:{value:1,message:"Mnimo 1 hora"}}),placeholder:"Ej: 45",error:(ae=ne.horas_academicas)==null?void 0:ae.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),M()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:A?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null)},title:"Detalles del Mdulo",children:R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:R.nombre})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Crditos"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.credito})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Horas Acadmicas"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.horas_academicas})]})]}),R.programas&&R.programas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Programas Asociados (",R.programas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.programas.map(ce=>{var J;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ce.nombre}),((J=ce.pivot)==null?void 0:J.edicion)!==void 0&&ce.pivot.edicion!==null&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Edicin: ",ce.pivot.edicion]})]},ce.id)})})]})]})})]})},ek={async getPermisos(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||100,search:s.search||"",modulo:s.modulo||""},n=await Re("/admin/permisos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener permisos"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener permisos"}}},async getPermisosPorModulo(){var s,r;try{const a=await Re("/admin/permisos/agrupados");return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener permisos"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener permisos"}}}},sk=()=>{var de,q;const{user:s,isAdmin:r}=Ts(),{canCreate:a,canEdit:t,canDelete:n,canView:o,canDo:i}=gm(),[l,d]=c.useState([]),[u,g]=c.useState([]),[h,y]=c.useState({}),[k,E]=c.useState(!0),[S,C]=c.useState(""),[b,p]=c.useState(1),[N,_]=c.useState(1),[x,v]=c.useState(10),[j,D]=c.useState(!1),[H,A]=c.useState(!1),[P,R]=c.useState(!1),[G,T]=c.useState(null),[$,L]=c.useState(null),[Y,M]=c.useState([]),{register:ne,handleSubmit:oe,reset:fe,formState:{errors:Q}}=Xe();c.useEffect(()=>{me(),xe()},[b,x,S]);const me=async()=>{var ee,se;try{E(!0);const re=await na.getRoles({page:b,per_page:x,search:S,sort_by:"nombre_rol",sort_order:"asc"});if(re.success&&re.data){const f=re.data;if(f.data&&Array.isArray(f.data)){const V=f.data.map(B=>{var ue;return{id:B.id||B.rol_id,nombre:B.nombre_rol||B.nombre,nombre_rol:B.nombre_rol||B.nombre,descripcion:B.descripcion||"",activo:B.activo!==void 0?B.activo:!0,users_count:B.usuarios_count||B.users_count||0,permisos_count:((ue=B.permisos)==null?void 0:ue.length)||B.permisos_count||0,permisos:B.permisos||[]}});d(V),_(f.last_page||1)}else if(Array.isArray(f)){const w=f.map(V=>{var B;return{id:V.id||V.rol_id,nombre:V.nombre_rol||V.nombre,nombre_rol:V.nombre_rol||V.nombre,descripcion:V.descripcion||"",activo:V.activo!==void 0?V.activo:!0,users_count:V.usuarios_count||V.users_count||0,permisos_count:((B=V.permisos)==null?void 0:B.length)||V.permisos_count||0,permisos:V.permisos||[]}});d(w),_(1)}else d([]),_(1)}else m.error(re.message||"Error al cargar roles"),d([]),_(1)}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error de conexin";m.error(f),d([]),_(1)}finally{E(!1)}},xe=async()=>{try{const ee=await ek.getPermisosPorModulo();if(ee.success&&ee.data){let se={};Array.isArray(ee.data)?se=ee.data.reduce((V,B)=>{const ue=B.modulo||"otros";return V[ue]||(V[ue]=[]),V[ue].push({id:B.permiso_id||B.id,permiso_id:B.permiso_id||B.id,nombre_permiso:B.nombre_permiso,descripcion:B.descripcion,modulo:B.modulo,accion:B.accion,activo:B.activo}),V},{}):Object.keys(ee.data).forEach(V=>{se[V]=(ee.data[V]||[]).map(B=>({id:B.permiso_id||B.id,permiso_id:B.permiso_id||B.id,nombre_permiso:B.nombre_permiso,descripcion:B.descripcion,modulo:B.modulo,accion:B.accion,activo:B.activo}))});const re=["usuarios","roles","estudiantes","inscripciones","programas","grupos","pagos","documentos","convenios","configuracion","bitacora","notificaciones","reportes"],f={};re.forEach(V=>{se[V]&&(f[V]=se[V])}),Object.keys(se).filter(V=>!re.includes(V)).sort().forEach(V=>{f[V]=se[V]}),y(f);const w=Object.values(f).flat();g(w)}else{const se=await na.getPermisos();if(se.success&&se.data){const re=Array.isArray(se.data)?se.data:[];g(re);const f=re.reduce((B,ue)=>{const ge=ue.modulo||"otros";return B[ge]||(B[ge]=[]),B[ge].push({id:ue.permiso_id||ue.id,permiso_id:ue.permiso_id||ue.id,nombre_permiso:ue.nombre_permiso,descripcion:ue.descripcion,modulo:ue.modulo,accion:ue.accion,activo:ue.activo}),B},{}),w=["usuarios","roles","estudiantes","inscripciones","programas","grupos","pagos","documentos","convenios","configuracion","bitacora","notificaciones","reportes"],V={};w.forEach(B=>{f[B]&&(V[B]=f[B])}),Object.keys(f).filter(B=>!w.includes(B)).sort().forEach(B=>{V[B]=f[B]}),y(V)}}}catch(ee){console.error("Error al cargar permisos:",ee),m.error("Error al cargar permisos")}},ie=()=>{T(null),M([]),fe({nombre:"",descripcion:""}),D(!0)},le=async ee=>{var se;try{const re=await na.getRole(ee.id);if(re.success){const f=re.data;T(f);const w=((se=f.permisos)==null?void 0:se.map(V=>V.permiso_id||V.id))||[];M(w),fe({nombre:f.nombre_rol||f.nombre,descripcion:f.descripcion||""}),D(!0)}}catch{m.error("Error al cargar el rol")}},Se=async ee=>{try{const se=await na.getRole(ee.id);se.success&&(L(se.data),R(!0))}catch{m.error("Error al cargar el rol")}},pe=async ee=>{var se;try{const re=await na.getRole(ee.id);if(re.success){const f=re.data;T(f),M(((se=f.permisos)==null?void 0:se.map(w=>w.permiso_id||w.id))||[]),A(!0)}}catch{m.error("Error al cargar permisos del rol")}},K=async ee=>{var se,re;if(window.confirm("Ests seguro de que quieres eliminar este rol?"))try{E(!0);const f=ee.rol_id||ee.id,w=await na.deleteRole(f);w.success?(m.success(w.message||"Rol eliminado exitosamente"),await me()):m.error(w.message||"Error al eliminar el rol")}catch(f){const w=((re=(se=f.response)==null?void 0:se.data)==null?void 0:re.message)||f.message||"Error al eliminar el rol";m.error(w)}finally{E(!1)}},ae=async ee=>{var se,re;try{E(!0);const f={nombre_rol:ee.nombre,descripcion:ee.descripcion||"",permisos:Y};let w;if(G){const V=G.rol_id||G.id;w=await na.updateRole(V,f)}else w=await na.createRole(f);w.success?(m.success(w.message||(G?"Rol actualizado exitosamente":"Rol creado exitosamente")),D(!1),T(null),M([]),fe(),await me()):(m.error(w.message||"Error al guardar el rol"),w.errors&&Object.keys(w.errors).forEach(V=>{m.error(`${V}: ${w.errors[V]}`)}))}catch(f){const w=((re=(se=f.response)==null?void 0:se.data)==null?void 0:re.message)||f.message||"Error al guardar el rol";m.error(w)}finally{E(!1)}},ce=async()=>{var ee,se;try{E(!0);const re=G.rol_id||G.id,f=await na.asignarPermisos(re,Y);f.success?(m.success(f.message||"Permisos asignados exitosamente"),A(!1),T(null),M([]),await me()):m.error(f.message||"Error al asignar permisos")}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error al asignar permisos";m.error(f)}finally{E(!1)}},J=ee=>{M(se=>se.includes(ee)?se.filter(re=>re!==ee):[...se,ee])},Z=ee=>{const se=ee.map(f=>f.permiso_id||f.id),re=se.every(f=>Y.includes(f));M(re?f=>f.filter(w=>!se.includes(w)):f=>[...new Set([...f,...se])])},ye=[{key:"nombre",label:"Rol",sortable:!0,render:ee=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(nr,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ee.nombre}),e.jsx("div",{className:"text-sm text-gray-500",children:ee.descripcion||"Sin descripcin"})]})]})},{key:"users_count",label:"Usuarios",sortable:!0,render:ee=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ee.users_count||0})]})},{key:"permisos_count",label:"Permisos",sortable:!0,render:ee=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ee.permisos_count||0})]})},{key:"actions",label:"Acciones",render:ee=>e.jsxs("div",{className:"flex items-center space-x-2",children:[(o("roles")||r())&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Se(ee)}),(r()||i("roles","asignar_permisos"))&&e.jsx(W,{variant:"info",size:"sm",icon:e.jsx(vr,{className:"h-4 w-4"}),onClick:()=>pe(ee),title:"Gestionar permisos"}),(t("roles")||r())&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>le(ee)}),(n("roles")||r())&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>K(ee)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(nr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Roles y Permisos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona los roles y sus permisos del sistema"})]})]}),(r()||a("roles"))&&e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:ie,children:"Nuevo Rol"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Roles"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:l.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(nr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Permisos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:u.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(vr,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Usuarios"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:l.reduce((ee,se)=>ee+(se.users_count||0),0)})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Roles"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar roles...",value:S,onChange:ee=>C(ee.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:ye,data:l,loading:k,pagination:{currentPage:b,totalPages:N,perPage:x,onPageChange:p,onPerPageChange:v}})]}),e.jsx(Fe,{isOpen:j,onClose:()=>{D(!1),T(null),M([]),fe()},title:G?"Editar Rol":"Nuevo Rol",size:"lg",bodyClassName:"max-h-[calc(90vh-180px)] overflow-y-auto",children:e.jsxs("form",{onSubmit:oe(ae),className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-6 min-h-0",children:[e.jsx(we,{label:"Nombre del Rol *",placeholder:"Ej: coordinador_academico",error:(de=Q.nombre)==null?void 0:de.message,...ne("nombre",{required:"El nombre es obligatorio"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("textarea",{...ne("descripcion"),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Descripcin del rol..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Permisos"}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:Object.keys(h).length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No hay permisos disponibles"}):Object.keys(h).map(ee=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 capitalize",children:ee.replace(/_/g," ")}),e.jsx("button",{type:"button",onClick:()=>Z(h[ee]),className:"text-xs text-primary-600 hover:text-primary-700 font-medium",children:h[ee].every(se=>Y.includes(se.permiso_id||se.id))?"Desmarcar todos":"Marcar todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:h[ee].map(se=>{const re=se.permiso_id||se.id;return e.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y.includes(re),onChange:()=>J(re),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:se.descripcion||se.accion||se.nombre_permiso})]},re)})})]},ee))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-900",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{D(!1),T(null),M([]),fe()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),disabled:k,children:[G?"Actualizar":"Crear"," Rol"]})]})]})}),e.jsx(Fe,{isOpen:H,onClose:()=>{A(!1),T(null),M([])},title:`Gestionar Permisos - ${(G==null?void 0:G.nombre_rol)||(G==null?void 0:G.nombre)||""}`,size:"xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-xl p-4 space-y-4",children:Object.keys(h).map(ee=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-3 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 capitalize",children:ee.replace(/_/g," ")}),e.jsx("button",{type:"button",onClick:()=>Z(h[ee]),className:"text-xs text-primary-600 hover:text-primary-700",children:h[ee].every(se=>Y.includes(se.permiso_id||se.id))?"Desmarcar todos":"Marcar todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:h[ee].map(se=>{const re=se.permiso_id||se.id;return e.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y.includes(re),onChange:()=>J(re),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:se.descripcion||se.accion||se.nombre_permiso})]},re)})})]},ee))}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{A(!1),T(null),M([])},children:"Cancelar"}),e.jsx(W,{type:"button",variant:"primary",onClick:ce,icon:e.jsx(vr,{className:"h-5 w-5"}),children:"Guardar Permisos"})]})]})}),e.jsx(Fe,{isOpen:P,onClose:()=>R(!1),title:"Detalles del Rol",size:"lg",children:$&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:$.nombre_rol||$.nombre||"N/A"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:$.descripcion||"Sin descripcin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:$.activo!==!1?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:"Activo"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Inactivo"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuarios Asignados"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-lg",children:$.usuarios_count||$.users_count||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permisos Asignados"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-lg",children:((q=$.permisos)==null?void 0:q.length)||$.permisos_count||0})]})]}),$.permisos&&$.permisos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permisos"}),e.jsx("div",{className:"space-y-2",children:Object.keys(h).map(ee=>{const se=$.permisos.filter(re=>{const f=re.permiso_id||re.id;return h[ee].some(w=>(w.permiso_id||w.id)===f)});return se.length===0?null:e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2 capitalize",children:ee.replace(/_/g," ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(re=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400",children:re.descripcion||re.accion||re.nombre_permiso},re.permiso_id||re.id))})]},ee)})})]})]})})]})},Qc={async getBitacora(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||50,usuario_id:s.usuario_id||"",tabla:s.tabla||"",transaccion:s.transaccion||"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||"",recientes:s.recientes||!1};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===!1||t[o]===null)&&delete t[o]});const n=await Re("/admin/bitacora",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener registros de bitcora"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener registros de bitcora"}}},async getRegistro(s){var r,a;try{const t=await Re(`/admin/bitacora/${s}`);return t.data.success?{success:!0,data:t.data.data}:{success:!1,message:t.data.message||"Registro no encontrado"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener registro"}}},async getEstadisticas(s={}){var r,a;try{const t={fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||""};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null)&&delete t[o]});const n=await Re("/admin/bitacora/estadisticas",t);return n.data.success?{success:!0,data:n.data.data}:{success:!1,message:n.data.message||"Error al obtener estadsticas"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener estadsticas"}}}},rk=()=>{var ne,oe,fe,Q,me,xe,ie,le,Se;const{isAdmin:s}=Ts(),{canView:r}=gm(),[a,t]=c.useState([]),[n,o]=c.useState(null),[i,l]=c.useState(!0),[d,u]=c.useState(!1),[g,h]=c.useState(""),[y,k]=c.useState(1),[E,S]=c.useState(1),[C,b]=c.useState(50),[p,N]=c.useState(!1),[_,x]=c.useState(!1),[v,j]=c.useState(null),[D,H]=c.useState({usuario_id:"",tabla:"",transaccion:"",fecha_desde:"",fecha_hasta:"",recientes:!1});c.useEffect(()=>{A(),P()},[y,C,D]);const A=async()=>{var pe,K;try{l(!0);const ae={page:y,per_page:C,...D};g&&(ae.transaccion=g);const ce=await Qc.getBitacora(ae);if(ce.success&&ce.data){const J=ce.data;J.data&&Array.isArray(J.data)?(t(J.data),S(J.last_page||1)):(t([]),S(1))}else m.error(ce.message||"Error al cargar bitcora"),t([]),S(1)}catch(ae){const ce=((K=(pe=ae.response)==null?void 0:pe.data)==null?void 0:K.message)||ae.message||"Error de conexin";m.error(ce),t([]),S(1)}finally{l(!1)}},P=async()=>{try{u(!0);const pe=await Qc.getEstadisticas({fecha_desde:D.fecha_desde,fecha_hasta:D.fecha_hasta});pe.success&&pe.data&&o(pe.data)}catch(pe){console.error("Error al cargar estadsticas:",pe)}finally{u(!1)}},R=async pe=>{try{const K=await Qc.getRegistro(pe.id||pe.bitacora_id);K.success&&(j(K.data),x(!0))}catch{m.error("Error al cargar el registro")}},G=(pe,K)=>{H(ae=>({...ae,[pe]:K})),k(1)},T=()=>{H({usuario_id:"",tabla:"",transaccion:"",fecha_desde:"",fecha_hasta:"",recientes:!1}),h(""),k(1)},$=pe=>{if(!pe)return"N/A";try{const K=new Date(pe);return isNaN(K.getTime())?"N/A":K.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},L=pe=>pe!=null&&pe.includes("CREAR")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":pe!=null&&pe.includes("EDITAR")?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":pe!=null&&pe.includes("ELIMINAR")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":pe!=null&&pe.includes("APROBAR")?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400":pe!=null&&pe.includes("RECHAZAR")?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",Y=[{key:"fecha",label:"Fecha",sortable:!0,render:pe=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:$(pe.fecha)})]})},{key:"usuario",label:"Usuario",render:pe=>{var K,ae,ce,J,Z;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((ae=(K=pe.usuario)==null?void 0:K.persona)==null?void 0:ae.nombre_completo)||((ce=pe.usuario)==null?void 0:ce.email)||"N/A"}),((Z=(J=pe.usuario)==null?void 0:J.persona)==null?void 0:Z.ci)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["CI: ",pe.usuario.persona.ci]})]})]})}},{key:"tabla",label:"Tabla",render:pe=>{var K;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xx,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((K=pe.tabla)==null?void 0:K.replace(/_/g," "))||"N/A"})]})}},{key:"transaccion",label:"Accin",render:pe=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(pe.transaccion)}`,children:pe.transaccion||"N/A"})},{key:"codTabla",label:"ID Registro",render:pe=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-sm",children:pe.codTabla||"N/A"})},{key:"actions",label:"Acciones",render:pe=>e.jsx("div",{className:"flex items-center space-x-2",children:(r("bitacora")||s())&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>R(pe),title:"Ver detalles"})})}],M=[...new Set(a.map(pe=>pe.tabla).filter(Boolean))].sort();return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(vl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Bitcora del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registro de todas las acciones realizadas en el sistema"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"outline",icon:e.jsx(fa,{className:"h-5 w-5"}),onClick:()=>N(!p),children:p?"Ocultar Filtros":"Filtros"}),e.jsx(W,{variant:"outline",icon:e.jsx(Tn,{className:"h-5 w-5"}),onClick:()=>{A(),P()},children:"Actualizar"})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n.total_registros||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Yf,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tablas Diferentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((ne=n.por_tabla)==null?void 0:ne.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(xx,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((oe=n.por_usuario)==null?void 0:oe.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ir,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tipos de Accin"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:((fe=n.por_transaccion)==null?void 0:fe.length)||0})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(On,{className:"h-6 w-6 text-white"})})]})})]}),p&&e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar en transaccin"}),e.jsx(we,{placeholder:"Buscar...",value:g,onChange:pe=>h(pe.target.value),onKeyPress:pe=>{pe.key==="Enter"&&A()}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tabla"}),e.jsxs("select",{value:D.tabla,onChange:pe=>G("tabla",pe.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las tablas"}),M.map(pe=>e.jsx("option",{value:pe,children:pe.replace(/_/g," ")},pe))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Desde"}),e.jsx(we,{type:"date",value:D.fecha_desde,onChange:pe=>G("fecha_desde",pe.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Hasta"}),e.jsx(we,{type:"date",value:D.fecha_hasta,onChange:pe=>G("fecha_hasta",pe.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.recientes,onChange:pe=>G("recientes",pe.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Solo registros recientes (30 das)"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsx(W,{variant:"outline",onClick:T,className:"w-full",children:"Limpiar Filtros"})})]})}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Registros de Actividad"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar en transacciones...",value:g,onChange:pe=>h(pe.target.value),onKeyPress:pe=>{pe.key==="Enter"&&A()},className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:Y,data:a,loading:i,pagination:{currentPage:y,totalPages:E,perPage:C,onPageChange:k,onPerPageChange:b}})]}),e.jsx(Fe,{isOpen:_,onClose:()=>x(!1),title:"Detalles del Registro",size:"lg",children:v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:$(v.fecha)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((me=(Q=v.usuario)==null?void 0:Q.persona)==null?void 0:me.nombre_completo)||((xe=v.usuario)==null?void 0:xe.email)||"N/A"}),((le=(ie=v.usuario)==null?void 0:ie.persona)==null?void 0:le.ci)&&e.jsxs("p",{className:"text-sm text-gray-500",children:["CI: ",v.usuario.persona.ci]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tabla"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 capitalize",children:((Se=v.tabla)==null?void 0:Se.replace(/_/g," "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ID Registro"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-mono",children:v.codTabla||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transaccin / Accin"}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:e.jsx("p",{className:"text-gray-900 dark:text-gray-100 whitespace-pre-wrap",children:v.transaccion||"N/A"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Creado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 text-sm",children:$(v.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actualizado"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 text-sm",children:$(v.updated_at)})]})]})]})})]})},Ha={async getDocentes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",especializacion:s.especializacion||"",sort_by:s.sort_by||"apellido",sort_direction:s.sort_direction||"asc"};t.search||delete t.search,t.especializacion||delete t.especializacion;const n=await Re("/admin/docentes",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching docentes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getSiguienteRegistro(){var s,r;try{const a=await Re("/admin/docentes/siguiente-registro");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching siguiente registro:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async getDocenteById(s){var r,a;try{const t=await Re(`/admin/docentes/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching docente:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createDocente(s){var r,a,t,n;try{const o=await Be("/admin/docentes",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating docente:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateDocente(s,r){var a,t,n,o;try{const i=await os(`/admin/docentes/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating docente:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeDocente(s){var r,a;try{const t=await gs(`/admin/docentes/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing docente:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},no={async getHorarios(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",dias:s.dias||"",turno:s.turno||""};t.search||delete t.search,t.dias||delete t.dias,t.turno||delete t.turno;const n=await Re("/admin/horarios",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching horarios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getHorarioById(s){var r,a;try{const t=await Re(`/admin/horarios/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching horario:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createHorario(s){var r,a,t,n;try{const o=await Be("/admin/horarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating horario:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateHorario(s,r){var a,t,n,o;try{const i=await os(`/admin/horarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating horario:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async removeHorario(s){var r,a;try{const t=await gs(`/admin/horarios/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing horario:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},Tx=()=>{var Ne,Te,ve,F,te,be,z,Ee,Ce,he;const{canView:s,canCreate:r,canEdit:a,canDelete:t}=gm(),[n,o]=c.useState([]),[i,l]=c.useState(!0),[d,u]=c.useState(""),[g,h]=c.useState(""),[y,k]=c.useState(1),[E,S]=c.useState(1),[C,b]=c.useState(10),[p,N]=c.useState(0),[_,x]=c.useState(0),[v,j]=c.useState(0),[D,H]=c.useState("apellido"),[A,P]=c.useState("asc"),[R,G]=c.useState(!1),[T,$]=c.useState(!1),[L,Y]=c.useState(!1),[M,ne]=c.useState(null),[oe,fe]=c.useState(null),[Q,me]=c.useState(null),[xe,ie]=c.useState(null),[le,Se]=c.useState(""),[pe,K]=c.useState({total:0,conGrupos:0}),{register:ae,handleSubmit:ce,reset:J,formState:{errors:Z},watch:ye,setValue:de,trigger:q}=Xe({mode:"onChange"});c.useEffect(()=>{ee()},[y,C,d,g,D,A]),c.useEffect(()=>{R&&!Q&&re()},[R,Q]);const ee=async()=>{try{l(!0);const O=await Ha.getDocentes({page:y,per_page:C,search:d,especializacion:g,sort_by:D,sort_direction:A});if(O.success&&O.data){const X=O.data.data||[];o(X),S(O.data.last_page||1),N(O.data.total||0),x(O.data.from||0),j(O.data.to||0),K({total:O.data.total||0,conGrupos:X.filter(U=>U.grupos_count>0).length||0})}else m.error(O.message||"Error al cargar docentes"),o([]),S(1),N(0),x(0),j(0)}catch{m.error("Error al cargar docentes"),o([]),S(1),N(0),x(0),j(0)}finally{l(!1)}},se=(O,X)=>{H(O),P(X),k(1)},re=async()=>{try{const O=await Ha.getSiguienteRegistro();O.success&&O.data&&Se(O.data.siguiente_registro||"")}catch(O){console.error("Error al obtener siguiente registro:",O)}},f=async O=>{var X,U,Ae,De,Le,Ue;if(!O.ci||O.ci.trim()===""){m.error("El CI es obligatorio");return}if(!/^\d+$/.test(O.ci.trim())){m.error("El CI solo debe contener nmeros");return}if(!O.nombre||O.nombre.trim()===""){m.error("El nombre es obligatorio");return}if(!/^[a-zA-Z\s]+$/.test(O.nombre.trim())){m.error("El nombre solo debe contener letras");return}if(!O.apellido||O.apellido.trim()===""){m.error("El apellido es obligatorio");return}if(!/^[a-zA-Z\s]+$/.test(O.apellido.trim())){m.error("El apellido solo debe contener letras");return}if(O.celular&&O.celular.trim()!==""){if(!/^\d+$/.test(O.celular.trim())){m.error("El celular solo debe contener nmeros");return}if(O.celular.trim().length<7){m.error("El celular debe tener al menos 7 dgitos");return}}if(O.fecha_nacimiento){const qe=new Date(O.fecha_nacimiento),He=new Date;if(He.setHours(0,0,0,0),qe>=He){m.error("La fecha de nacimiento debe ser anterior a hoy");return}const _s=He.getFullYear()-qe.getFullYear(),rs=He.getMonth()-qe.getMonth(),as=He.getDate()-qe.getDate(),cs=rs<0||rs===0&&as<0?_s-1:_s;if(cs<18){m.error("El docente debe tener al menos 18 aos");return}if(cs>100){m.error("La fecha de nacimiento no es vlida (edad mayor a 100 aos)");return}}if(O.direccion&&O.direccion.trim()!==""&&O.direccion.trim().length>255){m.error("La direccin no puede tener ms de 255 caracteres");return}if(O.cargo&&O.cargo.trim()!==""&&O.cargo.trim().length>100){m.error("El cargo no puede tener ms de 100 caracteres");return}if(O.modalidad_de_contratacion&&O.modalidad_de_contratacion.trim()!==""&&O.modalidad_de_contratacion.trim().length>100){m.error("La modalidad de contratacin no puede tener ms de 100 caracteres");return}if(O.area_de_especializacion&&O.area_de_especializacion.trim()!==""&&O.area_de_especializacion.trim().length>200){m.error("El rea de especializacin no puede tener ms de 200 caracteres");return}if(O.sexo&&O.sexo!==""&&!["M","F"].includes(O.sexo)){m.error("El sexo debe ser M o F");return}if(!Q&&(!O.email||O.email.trim()==="")){m.error("El email es obligatorio para crear las credenciales de acceso del docente");return}try{l(!0);const qe={ci:O.ci.trim(),nombre:O.nombre.trim(),apellido:O.apellido.trim(),celular:O.celular&&O.celular.trim()!==""?O.celular.trim():null,sexo:O.sexo||null,fecha_nacimiento:O.fecha_nacimiento||null,direccion:O.direccion?O.direccion.trim():null,cargo:O.cargo?O.cargo.trim():null,area_de_especializacion:O.area_de_especializacion?O.area_de_especializacion.trim():null,modalidad_de_contratacion:O.modalidad_de_contratacion?O.modalidad_de_contratacion.trim():null};!Q&&O.email&&(qe.email=O.email.trim().toLowerCase());let He;if(Q){const _s=Q.id;if(!_s){m.error("No se pudo identificar el docente. Por favor, recarga la pgina."),l(!1);return}console.log(" Actualizando docente con ID:",_s),console.log(" Datos a enviar:",qe),He=await Ha.updateDocente(_s,qe)}else He=await Ha.createDocente(qe);if(He.success){if(!Q&&((U=(X=He.data)==null?void 0:X.usuario)!=null&&U.password_temporal)){const _s=He.data.usuario.password_temporal,rs=He.data.usuario.email;ne({email:rs,password:_s,docenteNombre:`${O.nombre} ${O.apellido}`}),Y(!0),m.success("Docente creado exitosamente. Revisa las credenciales temporales.",{duration:5e3})}else m.success(He.message||(Q?"Docente actualizado exitosamente":"Docente creado exitosamente"));G(!1),J(),me(null),Se(""),await ee()}else m.error(He.message||"Error al guardar docente"),He.errors&&(Array.isArray(He.errors)?He.errors:Object.values(He.errors).flat()).forEach(rs=>{typeof rs=="string"&&rs.trim()?m.error(rs,{duration:4e3}):Array.isArray(rs)&&rs.length>0&&m.error(rs[0],{duration:4e3})})}catch(qe){const He=((De=(Ae=qe.response)==null?void 0:Ae.data)==null?void 0:De.message)||qe.message||"Error al guardar docente";if(m.error(He),(Ue=(Le=qe.response)==null?void 0:Le.data)!=null&&Ue.errors){const _s=qe.response.data.errors;(Array.isArray(_s)?_s:Object.values(_s).flat()).forEach(as=>{typeof as=="string"&&as.trim()?m.error(as,{duration:4e3}):Array.isArray(as)&&as.length>0&&m.error(as[0],{duration:4e3})})}}finally{l(!1)}},w=O=>{me(O),J({ci:O.ci,nombre:O.nombre,apellido:O.apellido,celular:O.celular||"",sexo:O.sexo||"",fecha_nacimiento:O.fecha_nacimiento||"",direccion:O.direccion||"",cargo:O.cargo||"",area_de_especializacion:O.area_de_especializacion||"",modalidad_de_contratacion:O.modalidad_de_contratacion||"",email:""}),G(!0)},V=async O=>{const X=O.id;if(!X){m.error("No se pudo identificar el docente");return}console.log(" Obteniendo docente con ID:",X);const U=await Ha.getDocenteById(X);U.success?(ie(U.data),$(!0)):m.error(U.message||"Error al cargar detalles del docente")},B=async O=>{if(!window.confirm(`Est seguro de eliminar al docente "${O.nombre} ${O.apellido}"?`))return;const X=O.id;if(!X){m.error("No se pudo identificar el docente");return}try{const U=await Ha.removeDocente(X);U.success?(m.success(U.message),ee()):m.error(U.message)}catch{m.error("Error al eliminar docente")}},ue=async()=>{me(null),J({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",cargo:"",area_de_especializacion:"",modalidad_de_contratacion:"",email:""}),await re(),G(!0)},ge=async(O,X)=>{try{await navigator.clipboard.writeText(O),fe(X),m.success(`${X==="email"?"Email":"Contrasea"} copiado al portapapeles`,{duration:2e3}),setTimeout(()=>{fe(null)},2e3)}catch(U){console.error("Error al copiar:",U),m.error("Error al copiar al portapapeles")}},_e=async()=>{if(!M)return;const O=`Email: ${M.email}
Contrasea: ${M.password}`;try{await navigator.clipboard.writeText(O),m.success("Credenciales completas copiadas al portapapeles",{duration:2e3})}catch(X){console.error("Error al copiar:",X),m.error("Error al copiar al portapapeles")}},je=[{key:"docente",label:"Docente",sortable:!0,render:O=>{var X;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((X=O.nombre)==null?void 0:X.charAt(0))||"D"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[O.nombre," ",O.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",O.ci]})]})]})}},{key:"registro_docente",label:"Registro",sortable:!0,render:O=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:O.registro_docente||"N/A"})},{key:"cargo",label:"Cargo",render:O=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:O.cargo||"N/A"})},{key:"area_de_especializacion",label:"Especializacin",render:O=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:O.area_de_especializacion||"N/A"})},{key:"grupos_count",label:"Grupos",sortable:!0,render:O=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.grupos_count>0?"bg-primary-100 text-primary-800 dark:bg-primary-900/20 dark:text-primary-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:O.grupos_count||0})},{key:"actions",label:"Acciones",render:O=>e.jsxs("div",{className:"flex items-center space-x-2",children:[s("docentes")&&e.jsx("button",{onClick:X=>{X.preventDefault(),X.stopPropagation(),V(O)},className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),a("docentes")&&e.jsx("button",{onClick:X=>{X.preventDefault(),X.stopPropagation(),w(O)},className:"p-2 rounded-xl text-warning-600 hover:bg-warning-50 dark:hover:bg-warning-900/20 transition-colors duration-200",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),t("docentes")&&e.jsx("button",{onClick:X=>{X.preventDefault(),X.stopPropagation(),B(O)},className:"p-2 rounded-xl text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar",disabled:O.grupos_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Da,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Docentes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los docentes del sistema"})]})]}),r("docentes")&&e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:ue,children:"Nuevo Docente"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Docentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:pe.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Da,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Con Grupos Asignados"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:pe.conGrupos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{type:"text",placeholder:"Buscar por nombre, CI o registro...",value:d,onChange:O=>{u(O.target.value),k(1)},className:"pl-10"})]}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsx(we,{type:"text",placeholder:"Filtrar por especializacin...",value:g,onChange:O=>{h(O.target.value),k(1)}})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsx(ds,{columns:je,data:n,loading:i,emptyMessage:"No se encontraron docentes",hover:!0,striped:!0,onSort:se,sortBy:D,sortDirection:A,pagination:{currentPage:y,totalPages:E,perPage:C,total:p,from:_,to:v,onPageChange:k,onPerPageChange:b}})}),e.jsx(Fe,{isOpen:R,onClose:()=>{G(!1),me(null),Se(""),J()},title:Q?"Editar Docente":"Nuevo Docente",size:"xl",children:e.jsxs("form",{onSubmit:ce(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CI *"}),e.jsx(we,{type:"text",...ae("ci",{required:"El CI es requerido",pattern:{value:/^\d+$/,message:"El CI solo debe contener nmeros"},maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 12345678",error:(Ne=Z.ci)==null?void 0:Ne.message,disabled:!!Q,onInput:O=>{O.target.value=O.target.value.replace(/\D/g,""),q("ci")}})]}),!Q&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registro Docente"}),e.jsx(we,{type:"text",value:le,placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),le&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este nmero se asignar automticamente al crear el docente"})]})]}),!Q&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Email * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Para credenciales de acceso)"})]}),e.jsx(we,{type:"email",...ae("email",{required:"El email es requerido para crear las credenciales de acceso",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"El email debe tener un formato vlido"}}),placeholder:"Ej: docente@icap.edu.bo",error:(Te=Z.email)==null?void 0:Te.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Se generar una contrasea temporal que el docente deber cambiar en su primer login"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),e.jsx(we,{type:"text",...ae("nombre",{required:"El nombre es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El nombre solo debe contener letras"},maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Juan",error:(ve=Z.nombre)==null?void 0:ve.message,onInput:O=>{O.target.value=O.target.value.replace(/[^a-zA-Z\s]/g,""),q("nombre")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apellido *"}),e.jsx(we,{type:"text",...ae("apellido",{required:"El apellido es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El apellido solo debe contener letras"},maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Prez",error:(F=Z.apellido)==null?void 0:F.message,onInput:O=>{O.target.value=O.target.value.replace(/[^a-zA-Z\s]/g,""),q("apellido")}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Celular"}),e.jsx(we,{type:"text",...ae("celular",{pattern:{value:/^\d+$/,message:"El celular solo debe contener nmeros"},maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 70012345",error:(te=Z.celular)==null?void 0:te.message,onInput:O=>{O.target.value=O.target.value.replace(/\D/g,""),q("celular")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...ae("sexo",{validate:O=>O&&!["M","F"].includes(O)?"El sexo debe ser M o F":!0}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),Z.sexo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Z.sexo.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Nacimiento"}),e.jsx(we,{type:"date",...ae("fecha_nacimiento",{validate:O=>{if(O){const X=new Date(O),U=new Date;if(U.setHours(0,0,0,0),X>=U)return"La fecha de nacimiento debe ser anterior a hoy";const Ae=U.getFullYear()-X.getFullYear(),De=U.getMonth()-X.getMonth(),Le=U.getDate()-X.getDate(),Ue=De<0||De===0&&Le<0?Ae-1:Ae;if(Ue<18)return"El docente debe tener al menos 18 aos";if(Ue>100)return"La fecha de nacimiento no es vlida (edad mayor a 100 aos)"}return!0}}),error:(be=Z.fecha_nacimiento)==null?void 0:be.message,max:new Date().toISOString().split("T")[0],min:new Date(new Date().setFullYear(new Date().getFullYear()-100)).toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx(we,{type:"text",...ae("direccion",{maxLength:{value:255,message:"La direccin no puede tener ms de 255 caracteres"},validate:O=>O&&O.trim()!==""&&O.trim().length<5?"La direccin debe tener al menos 5 caracteres":!0}),placeholder:"Ej: Av. Principal #123",error:(z=Z.direccion)==null?void 0:z.message,onBlur:()=>q("direccion")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cargo"}),e.jsx(we,{type:"text",...ae("cargo",{maxLength:{value:100,message:"El cargo no puede tener ms de 100 caracteres"},validate:O=>O&&O.trim()!==""&&O.trim().length<3?"El cargo debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Profesor Titular",error:(Ee=Z.cargo)==null?void 0:Ee.message,onBlur:()=>q("cargo")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Modalidad de Contratacin"}),e.jsx(we,{type:"text",...ae("modalidad_de_contratacion",{maxLength:{value:100,message:"La modalidad no puede tener ms de 100 caracteres"},validate:O=>O&&O.trim()!==""&&O.trim().length<3?"La modalidad debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Tiempo Completo",error:(Ce=Z.modalidad_de_contratacion)==null?void 0:Ce.message,onBlur:()=>q("modalidad_de_contratacion")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"rea de Especializacin"}),e.jsx(we,{type:"text",...ae("area_de_especializacion",{maxLength:{value:200,message:"El rea de especializacin no puede tener ms de 200 caracteres"},validate:O=>O&&O.trim()!==""&&O.trim().length<3?"El rea de especializacin debe tener al menos 3 caracteres":!0}),placeholder:"Ej: Ciencias de la Educacin",error:(he=Z.area_de_especializacion)==null?void 0:he.message,onBlur:()=>q("area_de_especializacion")})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{G(!1),me(null),J()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",children:[Q?"Actualizar":"Crear"," Docente"]})]})]})}),e.jsx(Fe,{isOpen:T,onClose:()=>{$(!1),ie(null)},title:"Detalles del Docente",size:"xl",children:xe&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[xe.nombre," ",xe.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:xe.ci})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Docente"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:xe.registro_docente})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Cargo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:xe.cargo||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"rea de Especializacin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:xe.area_de_especializacion||"N/A"})]}),xe.grupos&&xe.grupos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Grupos Asignados (",xe.grupos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:xe.grupos.map(O=>{var X;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((X=O.programa)==null?void 0:X.nombre)||"Sin programa"}),O.modulo&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mdulo: ",O.modulo.nombre]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[O.fecha_ini," - ",O.fecha_fin]})]},O.grupo_id)})})]})]})}),e.jsx(Fe,{isOpen:L,onClose:()=>{Y(!1),ne(null),fe(null)},title:"Credenciales Temporales del Docente",size:"md",children:M&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-300 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900 dark:text-yellow-200 mb-1",children:" Importante"}),e.jsxs("p",{className:"text-xs text-yellow-800 dark:text-yellow-300",children:["Guarda estas credenciales de forma segura. El docente ",e.jsx("strong",{children:M.docenteNombre})," deber cambiar su contrasea en el primer login."]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx(Bn,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 flex-shrink-0"}),e.jsx("code",{className:"flex-1 text-sm font-mono text-gray-900 dark:text-gray-100 break-all",children:M.email})]}),e.jsx(W,{type:"button",variant:oe==="email"?"success":"outline",size:"md",icon:oe==="email"?e.jsx(Xr,{className:"h-4 w-4"}):e.jsx(Tc,{className:"h-4 w-4"}),onClick:()=>ge(M.email,"email"),className:"flex-shrink-0",children:oe==="email"?"Copiado":"Copiar"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contrasea Temporal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx(vr,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 flex-shrink-0"}),e.jsx("code",{className:"flex-1 text-sm font-mono text-gray-900 dark:text-gray-100 break-all",children:M.password})]}),e.jsx(W,{type:"button",variant:oe==="password"?"success":"outline",size:"md",icon:oe==="password"?e.jsx(Xr,{className:"h-4 w-4"}):e.jsx(Tc,{className:"h-4 w-4"}),onClick:()=>ge(M.password,"password"),className:"flex-shrink-0",children:oe==="password"?"Copiado":"Copiar"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(W,{type:"button",variant:"primary",fullWidth:!0,icon:e.jsx(Tc,{className:"h-5 w-5"}),onClick:_e,children:"Copiar Credenciales Completas"})}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[" ",e.jsx("strong",{children:"Tip:"})," Puedes copiar cada credencial individualmente o copiar ambas a la vez. Comparte estas credenciales de forma segura con el docente."]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(W,{type:"button",variant:"primary",onClick:()=>{Y(!1),ne(null),fe(null)},children:"Entendido"})})]})})]})},Ox=()=>{var se,re;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(""),[d,u]=c.useState(""),[g,h]=c.useState(1),[y,k]=c.useState(1),[E,S]=c.useState(10),[C,b]=c.useState(0),[p,N]=c.useState(0),[_,x]=c.useState(0),[v,j]=c.useState("dias"),[D,H]=c.useState("asc"),[A,P]=c.useState(!1),[R,G]=c.useState(!1),[T,$]=c.useState(null),[L,Y]=c.useState(null),[M,ne]=c.useState({total:0,conGrupos:0}),oe=[{value:"lunes",label:"Lunes"},{value:"martes",label:"Martes"},{value:"mircoles",label:"Mircoles"},{value:"jueves",label:"Jueves"},{value:"viernes",label:"Viernes"},{value:"sbado",label:"Sbado"}],{register:fe,handleSubmit:Q,reset:me,formState:{errors:xe},trigger:ie,watch:le,setValue:Se}=Xe({mode:"onChange",defaultValues:{dias:[]}}),pe=le("dias")||[];c.useEffect(()=>{K()},[g,E,n,i,d,v,D]);const K=async()=>{try{t(!0);const f=await no.getHorarios({page:g,per_page:E,search:n,dias:i,turno:d,sort_by:v,sort_direction:D});if(f.success&&f.data){const w=f.data.data||[];r(w),k(f.data.last_page||1),b(f.data.total||0),N(f.data.from||0),x(f.data.to||0),ne({total:f.data.total||0,conGrupos:w.filter(V=>V.grupos_count>0).length||0})}else m.error(f.message||"Error al cargar horarios"),r([]),k(1),b(0),N(0),x(0)}catch{m.error("Error al cargar horarios"),r([]),k(1),b(0),N(0),x(0)}finally{t(!1)}},ae=async f=>{var V,B,ue,ge;let w="";if(Array.isArray(f.dias)&&f.dias.length>0)w=f.dias.join(", ");else if(typeof f.dias=="string"&&f.dias.trim()!=="")w=f.dias.trim();else{m.error("Debes seleccionar al menos un da");return}if(!w||w.trim()===""){m.error("Los das son obligatorios");return}if(!f.hora_ini){m.error("La hora de inicio es obligatoria");return}if(!f.hora_fin){m.error("La hora de fin es obligatoria");return}if(f.hora_fin<=f.hora_ini){m.error("La hora de fin debe ser mayor a la hora de inicio");return}try{t(!0);const _e={dias:w,hora_ini:f.hora_ini,hora_fin:f.hora_fin};let je;if(T){const Ne=T.horario_id||T.id;if(!Ne){m.error("No se pudo identificar el horario. Por favor, recarga la pgina."),t(!1);return}je=await no.updateHorario(Ne,_e)}else je=await no.createHorario(_e);je.success?(m.success(je.message||(T?"Horario actualizado exitosamente":"Horario creado exitosamente")),P(!1),me(),$(null),await K()):(m.error(je.message||"Error al guardar horario"),je.errors&&(Array.isArray(je.errors)?je.errors:Object.values(je.errors).flat()).forEach(Te=>{typeof Te=="string"&&Te.trim()?m.error(Te,{duration:4e3}):Array.isArray(Te)&&Te.length>0&&m.error(Te[0],{duration:4e3})}))}catch(_e){const je=((B=(V=_e.response)==null?void 0:V.data)==null?void 0:B.message)||_e.message||"Error al guardar horario";if(m.error(je),(ge=(ue=_e.response)==null?void 0:ue.data)!=null&&ge.errors){const Ne=_e.response.data.errors;(Array.isArray(Ne)?Ne:Object.values(Ne).flat()).forEach(ve=>{typeof ve=="string"&&ve.trim()?m.error(ve,{duration:4e3}):Array.isArray(ve)&&ve.length>0&&m.error(ve[0],{duration:4e3})})}}finally{t(!1)}},ce=f=>{if(!(f.horario_id||f.id)){m.error("No se pudo identificar el horario");return}$(f);let V=f.hora_ini_formatted||"",B=f.hora_fin_formatted||"";if(!V&&f.hora_ini&&typeof f.hora_ini=="string")if(f.hora_ini.includes("T")){const ge=f.hora_ini.split("T");ge[1]&&(V=ge[1].substring(0,5))}else f.hora_ini.match(/^\d{2}:\d{2}/)&&(V=f.hora_ini.substring(0,5));if(!B&&f.hora_fin&&typeof f.hora_fin=="string")if(f.hora_fin.includes("T")){const ge=f.hora_fin.split("T");ge[1]&&(B=ge[1].substring(0,5))}else f.hora_fin.match(/^\d{2}:\d{2}/)&&(B=f.hora_fin.substring(0,5));let ue=[];f.dias&&(typeof f.dias=="string"?ue=f.dias.split(",").map(_e=>_e.trim().toLowerCase()).map(_e=>{const je=_e.toLowerCase();return je.includes("lunes")?"lunes":je.includes("martes")?"martes":je.includes("mircoles")||je.includes("miercoles")?"mircoles":je.includes("jueves")?"jueves":je.includes("viernes")?"viernes":je.includes("sbado")||je.includes("sabado")?"sbado":je}).filter(_e=>_e&&oe.some(je=>je.value===_e)):Array.isArray(f.dias)&&(ue=f.dias.map(ge=>{const _e=typeof ge=="string"?ge.trim().toLowerCase():String(ge).toLowerCase();return _e.includes("lunes")?"lunes":_e.includes("martes")?"martes":_e.includes("mircoles")||_e.includes("miercoles")?"mircoles":_e.includes("jueves")?"jueves":_e.includes("viernes")?"viernes":_e.includes("sbado")||_e.includes("sabado")?"sbado":_e}).filter(ge=>ge&&oe.some(_e=>_e.value===ge)))),me({dias:ue,hora_ini:V,hora_fin:B}),P(!0)},J=async f=>{const w=f.horario_id||f.id;if(!w){m.error("No se pudo identificar el horario");return}const V=await no.getHorarioById(w);V.success?(Y(V.data),G(!0)):m.error(V.message||"Error al cargar detalles del horario")},Z=async f=>{const w=f.horario_id||f.id;if(!w){m.error("No se pudo identificar el horario");return}let V=f.hora_ini_formatted||"N/A",B=f.hora_fin_formatted||"N/A";if(V==="N/A"&&f.hora_ini&&typeof f.hora_ini=="string")if(f.hora_ini.includes("T")){const ue=f.hora_ini.split("T");ue[1]&&(V=ue[1].substring(0,5))}else f.hora_ini.match(/^\d{2}:\d{2}/)&&(V=f.hora_ini.substring(0,5));if(B==="N/A"&&f.hora_fin&&typeof f.hora_fin=="string")if(f.hora_fin.includes("T")){const ue=f.hora_fin.split("T");ue[1]&&(B=ue[1].substring(0,5))}else f.hora_fin.match(/^\d{2}:\d{2}/)&&(B=f.hora_fin.substring(0,5));if(window.confirm(`Est seguro de eliminar el horario "${f.dias||"N/A"} ${V}-${B}"?`))try{const ue=await no.removeHorario(w);ue.success?(m.success(ue.message),K()):m.error(ue.message)}catch{m.error("Error al eliminar horario")}},ye=()=>{$(null),me({dias:[],hora_ini:"",hora_fin:""}),P(!0)},de=(f,w)=>{j(f),H(w),h(1)},q=f=>{const w=Array.from(f.target.selectedOptions,V=>V.value);Se("dias",w,{shouldValidate:!0}),ie("dias")},ee=[{key:"dias",label:"Das",render:f=>f.dias||"-"},{key:"hora_ini",label:"Hora Inicio",render:f=>{if(f.hora_ini_formatted)return f.hora_ini_formatted;const w=f.hora_ini;if(w&&typeof w=="string"){if(w.includes("T")){const V=w.split("T");if(V[1])return V[1].substring(0,5)}if(w.match(/^\d{2}:\d{2}/))return w.substring(0,5)}return"N/A"}},{key:"hora_fin",label:"Hora Fin",render:f=>{if(f.hora_fin_formatted)return f.hora_fin_formatted;const w=f.hora_fin;if(w&&typeof w=="string"){if(w.includes("T")){const V=w.split("T");if(V[1])return V[1].substring(0,5)}if(w.match(/^\d{2}:\d{2}/))return w.substring(0,5)}return"N/A"}},{key:"duracion_horas",label:"Duracin",render:f=>{var B,ue;if(f.duracion_horas!==void 0&&f.duracion_horas!==null)return`${f.duracion_horas} horas`;const w=f.hora_ini_formatted||(f.hora_ini&&typeof f.hora_ini=="string"?f.hora_ini.includes("T")?(B=f.hora_ini.split("T")[1])==null?void 0:B.substring(0,5):f.hora_ini.substring(0,5):null),V=f.hora_fin_formatted||(f.hora_fin&&typeof f.hora_fin=="string"?f.hora_fin.includes("T")?(ue=f.hora_fin.split("T")[1])==null?void 0:ue.substring(0,5):f.hora_fin.substring(0,5):null);if(w&&V)try{const[ge,_e]=w.split(":").map(Number),[je,Ne]=V.split(":").map(Number),Te=ge*60+_e,ve=je*60+Ne;return`${((ve>=Te?ve-Te:24*60-Te+ve)/60).toFixed(1)} horas`}catch{return"N/A"}return"N/A"}},{key:"grupos_count",label:"Grupos",render:f=>f.grupos_count||0},{key:"actions",label:"Acciones",render:f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),J(f)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),ce(f)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),Z(f)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",disabled:f.grupos_count>0,children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Horarios"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de horarios disponibles para grupos"})]}),e.jsx(W,{onClick:ye,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Horario"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Horarios"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:M.total})]}),e.jsx(Je,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Con Grupos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:M.conGrupos})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por das...",value:n,onChange:f=>{o(f.target.value),h(1)},icon:is})}),e.jsx("div",{className:"w-48",children:e.jsx(we,{type:"text",placeholder:"Filtrar por das...",value:i,onChange:f=>{l(f.target.value),h(1)}})}),e.jsx("div",{className:"w-48",children:e.jsxs("select",{value:d,onChange:f=>{u(f.target.value),h(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los turnos"}),e.jsx("option",{value:"maana",children:"Maana"}),e.jsx("option",{value:"tarde",children:"Tarde"}),e.jsx("option",{value:"noche",children:"Noche"})]})})]})}),e.jsx(ke,{children:e.jsx(ds,{columns:ee,data:s,loading:a,onSort:de,sortBy:v,sortDirection:D,pagination:{currentPage:g,totalPages:y,perPage:E,total:C,from:p,to:_,onPageChange:h,onPerPageChange:S}})}),e.jsx(Fe,{isOpen:A,onClose:()=>{P(!1),$(null),me()},title:T?"Editar Horario":"Nuevo Horario",children:e.jsxs("form",{onSubmit:Q(ae),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das * (Selecciona uno o ms das)"}),e.jsx("select",{multiple:!0,...fe("dias",{required:"Debes seleccionar al menos un da",validate:f=>!Array.isArray(f)||f.length===0?"Debes seleccionar al menos un da":!0}),onChange:q,value:pe,className:`w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 min-h-[120px] ${xe.dias?"border-error-500 focus:border-error-500":"border-gray-300 dark:border-gray-700 focus:border-primary-500"}`,children:oe.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))}),xe.dias&&e.jsx("p",{className:"mt-1 text-sm text-error-600 dark:text-error-400",children:xe.dias.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Mantn presionada la tecla Ctrl (o Cmd en Mac) para seleccionar mltiples das"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora Inicio *"}),e.jsx(we,{type:"time",...fe("hora_ini",{required:"La hora de inicio es requerida"}),error:(se=xe.hora_ini)==null?void 0:se.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora Fin *"}),e.jsx(we,{type:"time",...fe("hora_fin",{required:"La hora de fin es requerida",validate:f=>{const w=le("hora_ini");return w&&f&&f<=w?"La hora de fin debe ser mayor a la hora de inicio":!0}}),error:(re=xe.hora_fin)==null?void 0:re.message,onBlur:()=>ie("hora_fin")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{P(!1),$(null),me()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:T?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:R,onClose:()=>{G(!1),Y(null)},title:"Detalles del Horario",children:L&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Das"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:L.dias})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{var V,B;if(L.duracion_horas!==void 0&&L.duracion_horas!==null)return`${L.duracion_horas} horas`;const f=L.hora_ini_formatted||(L.hora_ini&&typeof L.hora_ini=="string"?L.hora_ini.includes("T")?(V=L.hora_ini.split("T")[1])==null?void 0:V.substring(0,5):L.hora_ini.substring(0,5):null),w=L.hora_fin_formatted||(L.hora_fin&&typeof L.hora_fin=="string"?L.hora_fin.includes("T")?(B=L.hora_fin.split("T")[1])==null?void 0:B.substring(0,5):L.hora_fin.substring(0,5):null);if(f&&w)try{const[ue,ge]=f.split(":").map(Number),[_e,je]=w.split(":").map(Number),Ne=ue*60+ge,Te=_e*60+je;return`${((Te>=Ne?Te-Ne:24*60-Ne+Te)/60).toFixed(1)} horas`}catch{return"N/A"}return"N/A"})()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hora Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{if(L.hora_ini_formatted)return L.hora_ini_formatted;const f=L.hora_ini;if(f&&typeof f=="string"){if(f.includes("T")){const w=f.split("T");if(w[1])return w[1].substring(0,5)}if(f.match(/^\d{2}:\d{2}/))return f.substring(0,5)}return"N/A"})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hora Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(()=>{if(L.hora_fin_formatted)return L.hora_fin_formatted;const f=L.hora_fin;if(f&&typeof f=="string"){if(f.includes("T")){const w=f.split("T");if(w[1])return w[1].substring(0,5)}if(f.match(/^\d{2}:\d{2}/))return f.substring(0,5)}return"N/A"})()})]})]}),L.grupos&&L.grupos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Grupos Asociados (",L.grupos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:L.grupos.map(f=>{var w,V;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((w=f.programa)==null?void 0:w.nombre)||"Sin programa"}),f.modulo&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mdulo: ",f.modulo.nombre]}),((V=f.pivot)==null?void 0:V.aula)&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Aula: ",f.pivot.aula]})]},f.grupo_id)})})]})]})})]})},Gr={async getEstudiantes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await Re("/admin/estudiantes",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiantes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getEstudianteById(s){var r,a;try{const t=await Re(`/admin/estudiantes/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async createEstudiante(s){var r,a,t,n;try{const o=await Be("/admin/estudiantes",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating estudiante:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateEstudiante(s,r){var a,t,n,o;try{const i=await os(`/admin/estudiantes/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating estudiante:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async activarEstudiante(s){var r,a;try{const t=await Be(`/admin/estudiantes/${s}/activar`);return t.data.success?{success:!0,message:t.data.message||"Estudiante activado exitosamente"}:{success:!1,message:t.data.message||"Error al activar estudiante"}}catch(t){return console.error("Error activating estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al activar estudiante"}}},async desactivarEstudiante(s){var r,a;try{const t=await Be(`/admin/estudiantes/${s}/desactivar`);return t.data.success?{success:!0,message:t.data.message||"Estudiante desactivado exitosamente"}:{success:!1,message:t.data.message||"Error al desactivar estudiante"}}catch(t){return console.error("Error deactivating estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al desactivar estudiante"}}},async removeEstudiante(s){var r,a;try{const t=await gs(`/admin/estudiantes/${s}`);return t.data.success?{success:!0,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error removing estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},ak=()=>{var q,ee,se,re,f,w,V;pr();const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("registro_estudiante"),[_,x]=c.useState("desc"),[v,j]=c.useState(null),[D,H]=c.useState(!1),[A,P]=c.useState(!1),[R,G]=c.useState(null),[T,$]=c.useState(null),[L,Y]=c.useState({total:0,activos:0,inactivos:0}),[M,ne]=c.useState(!1),[oe,fe]=c.useState({estado:"",provincia:"",sexo:""}),{register:Q,handleSubmit:me,reset:xe,formState:{errors:ie},trigger:le}=Xe({mode:"onChange"});c.useEffect(()=>{Se()},[n,oe,i,g,p,_]);const Se=async()=>{try{t(!0);const B={page:i,per_page:g,sort_by:p,sort_direction:_};n&&(B.search=n),oe.estado!==""&&(B.estado=oe.estado),oe.provincia&&(B.provincia=oe.provincia),oe.sexo!==""&&(B.sexo=oe.sexo);const ue=await Gr.getEstudiantes(B);if(ue.success){const ge=ue.data;let _e=[];ge.data&&Array.isArray(ge.data)?_e=ge.data:Array.isArray(ge)&&(_e=ge),r(_e),u(ge.last_page||1),k(ge.total||_e.length),S(ge.from||(_e.length>0?1:0)),b(ge.to||_e.length),Y({total:ge.total||_e.length,activos:_e.filter(je=>je.activo===!0||je.estado_id===4).length,inactivos:_e.filter(je=>je.activo!==!0&&je.estado_id!==4).length})}else j("No se pudieron cargar los estudiantes"),m.error(ue.message||"Error al cargar estudiantes"),r([]),u(1),k(0),S(0),b(0)}catch(B){console.error("Error cargando estudiantes:",B),j("Error al cargar los estudiantes"),m.error("Error de conexin al cargar estudiantes"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},pe=async B=>{var ue,ge;try{const _e=B.registro_estudiante||B.id;if(!_e){m.error("No se pudo identificar el estudiante");return}const je=await Gr.getEstudianteById(_e);je.success?($(je.data),P(!0)):m.error(je.message||"Error al cargar detalles del estudiante")}catch(_e){const je=((ge=(ue=_e.response)==null?void 0:ue.data)==null?void 0:ge.message)||_e.message||"Error al cargar el estudiante";m.error(je)}},K=async B=>{var ue,ge;try{const _e=B.registro_estudiante||B.id;if(!_e){m.error("No se pudo identificar el estudiante");return}const je=await Gr.getEstudianteById(_e);if(je.success){const Ne=je.data;G(Ne),xe({ci:Ne.ci||"",nombre:Ne.nombre||"",apellido:Ne.apellido||"",celular:Ne.celular||"",sexo:Ne.sexo||"",fecha_nacimiento:Ne.fecha_nacimiento||"",direccion:Ne.direccion||"",provincia:Ne.provincia||""}),H(!0)}else m.error(je.message||"Error al cargar datos del estudiante")}catch(_e){const je=((ge=(ue=_e.response)==null?void 0:ue.data)==null?void 0:ge.message)||_e.message||"Error al cargar el estudiante";m.error(je)}},ae=()=>{G(null),xe({ci:"",nombre:"",apellido:"",celular:"",sexo:"",fecha_nacimiento:"",direccion:"",provincia:""}),H(!0)},ce=async B=>{var ue,ge,_e,je;try{t(!0);const Ne=[];if(!B.ci||B.ci.trim()===""?Ne.push("El CI es obligatorio"):/^\d+$/.test(B.ci.trim())?B.ci.trim().length>20&&Ne.push("El CI no puede tener ms de 20 caracteres"):Ne.push("El CI solo debe contener nmeros"),!B.nombre||B.nombre.trim()===""?Ne.push("El nombre es obligatorio"):/^[a-zA-Z\s]+$/.test(B.nombre.trim())?B.nombre.trim().length>100&&Ne.push("El nombre no puede tener ms de 100 caracteres"):Ne.push("El nombre solo debe contener letras"),!B.apellido||B.apellido.trim()===""?Ne.push("El apellido es obligatorio"):/^[a-zA-Z\s]+$/.test(B.apellido.trim())?B.apellido.trim().length>100&&Ne.push("El apellido no puede tener ms de 100 caracteres"):Ne.push("El apellido solo debe contener letras"),!B.celular||B.celular.trim()===""?Ne.push("El celular es obligatorio"):/^\d+$/.test(B.celular.trim())?B.celular.trim().length>20?Ne.push("El celular no puede tener ms de 20 caracteres"):B.celular.trim().length<7&&Ne.push("El celular debe tener al menos 7 dgitos"):Ne.push("El celular solo debe contener nmeros"),B.sexo&&!["M","F"].includes(B.sexo)&&Ne.push("El sexo debe ser Masculino (M) o Femenino (F)"),B.fecha_nacimiento){const F=new Date(B.fecha_nacimiento),te=new Date;F>te&&Ne.push("La fecha de nacimiento no puede ser mayor a la fecha actual"),te.getFullYear()-F.getFullYear()<10&&Ne.push("La fecha de nacimiento no es vlida (el estudiante debe tener al menos 10 aos)")}if(B.provincia&&B.provincia.trim().length>50&&Ne.push("La provincia no puede tener ms de 50 caracteres"),B.direccion&&B.direccion.trim().length>255&&Ne.push("La direccin no puede tener ms de 255 caracteres"),Ne.length>0){Ne.forEach(F=>{m.error(F,{duration:4e3})}),t(!1);return}const Te={ci:B.ci.trim(),nombre:B.nombre.trim(),apellido:B.apellido.trim(),celular:B.celular.trim(),sexo:B.sexo||null,fecha_nacimiento:B.fecha_nacimiento||null,direccion:B.direccion?B.direccion.trim():null,provincia:B.provincia?B.provincia.trim():null};let ve;if(R){const F=R.registro_estudiante||R.id;ve=await Gr.updateEstudiante(F,Te)}else ve=await Gr.createEstudiante(Te);ve.success?(m.success(ve.message||(R?"Estudiante actualizado exitosamente":"Estudiante creado exitosamente")),H(!1),xe(),G(null),await Se()):(m.error(ve.message||"Error al guardar estudiante"),ve.errors&&(Array.isArray(ve.errors)?ve.errors:Object.values(ve.errors).flat()).forEach(te=>{typeof te=="string"&&te.trim()?m.error(te,{duration:4e3}):Array.isArray(te)&&te.length>0&&m.error(te[0],{duration:4e3})}))}catch(Ne){const Te=((ge=(ue=Ne.response)==null?void 0:ue.data)==null?void 0:ge.message)||Ne.message||"Error al guardar estudiante";if(m.error(Te),(je=(_e=Ne.response)==null?void 0:_e.data)!=null&&je.errors){const ve=Ne.response.data.errors;(Array.isArray(ve)?ve:Object.values(ve).flat()).forEach(te=>{typeof te=="string"&&te.trim()?m.error(te,{duration:4e3}):Array.isArray(te)&&te.length>0&&m.error(te[0],{duration:4e3})})}}finally{t(!1)}},J=async B=>{var ue,ge;if(window.confirm(`Ests seguro de eliminar a ${B.nombre} ${B.apellido}?`))try{t(!0);const _e=B.registro_estudiante||B.id;if(!_e){m.error("No se pudo identificar el estudiante");return}const je=await Gr.removeEstudiante(_e);je.success?(m.success(je.message||"Estudiante eliminado exitosamente"),await Se()):m.error(je.message||"Error al eliminar estudiante")}catch(_e){const je=((ge=(ue=_e.response)==null?void 0:ue.data)==null?void 0:ge.message)||_e.message||"Error al eliminar estudiante";m.error(je)}finally{t(!1)}},Z=(B,ue)=>{N(B),x(ue),l(1)},ye=async()=>{var B,ue;try{t(!0);const ge={};n&&(ge.search=n),oe.estado!==""&&(ge.estado=oe.estado),oe.provincia&&(ge.provincia=oe.provincia),oe.sexo!==""&&(ge.sexo=oe.sexo),ge.per_page=1e4,ge.page=1;const _e=await Gr.getEstudiantes(ge);if(_e.success&&_e.data){let je=[];if(_e.data.data&&Array.isArray(_e.data.data)?je=_e.data.data:Array.isArray(_e.data)&&(je=_e.data),je.length===0){m.error("No hay estudiantes para exportar");return}const Ne=je.map(Te=>({Registro:Te.registro_estudiante||Te.id||"",CI:Te.ci||"",Nombre:Te.nombre||"",Apellido:Te.apellido||"",Email:Te.email||"N/A",Celular:Te.celular||"N/A",Sexo:Te.sexo==="M"?"Masculino":Te.sexo==="F"?"Femenino":"N/A","Fecha Nacimiento":Te.fecha_nacimiento?new Date(Te.fecha_nacimiento).toLocaleDateString("es-ES"):"N/A",Provincia:Te.provincia||"N/A",Direccin:Te.direccion||"N/A",Estado:Te.activo===!0||Te.estado_id===4?"Activo":"Inactivo","Fecha Inscripcin":Te.fecha_inscripcion?new Date(Te.fecha_inscripcion).toLocaleDateString("es-ES"):"N/A"}));Wt(Ne,`estudiantes_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${Ne.length} estudiantes exitosamente`)}else m.error(_e.message||"Error al exportar estudiantes: No se recibieron datos vlidos"),console.error("Error en exportacin:",_e)}catch(ge){console.error("Error al exportar estudiantes:",ge),m.error(((ue=(B=ge.response)==null?void 0:B.data)==null?void 0:ue.message)||ge.message||"Error al exportar estudiantes")}finally{t(!1)}},de=[{key:"estudiante",label:"Estudiante",sortable:!0,render:B=>{var ue;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((ue=B.nombre)==null?void 0:ue.charAt(0))||"E"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[B.nombre," ",B.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",B.ci]})]})]})}},{key:"registro_estudiante",label:"Registro",sortable:!0,render:B=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:B.registro_estudiante||B.id})},{key:"email",label:"Email",sortable:!0,render:B=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:B.email||"N/A"})},{key:"celular",label:"Telfono",render:B=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:B.celular||"N/A"})},{key:"estado",label:"Estado",sortable:!0,render:B=>{const ge=((_e,je)=>{const Ne=(_e||"").toLowerCase();return je===4||Ne.includes("validado")||Ne.includes("activo")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":Ne.includes("revisin")||Ne.includes("revision")?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":Ne.includes("rechazado")||Ne.includes("rechazado")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":Ne.includes("incompleto")||Ne.includes("incompletos")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":(Ne.includes("pre-registrado")||Ne.includes("preregistrado"),"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300")})(B.estado,B.estado_id);return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${ge}`,children:[e.jsx(ss,{className:"h-3 w-3 mr-1"}),B.estado||"Sin estado"]})}},{key:"activo",label:"Acceso",sortable:!0,render:B=>{const ue=(B.estado||"").toLowerCase(),ge=B.activo===!0||B.estado_id===4||ue==="validado"||ue==="validado - activo"||ue==="activo",_e=B.registro_estudiante||B.id;return e.jsxs("div",{className:"flex items-center space-x-2 group relative",children:[e.jsx("button",{onClick:async je=>{je.stopPropagation();try{t(!0);const Ne=ge?await Gr.desactivarEstudiante(_e):await Gr.activarEstudiante(_e);Ne.success?(m.success(Ne.message),await Se()):m.error(Ne.message||"Error al cambiar el estado")}catch{m.error("Error al cambiar el estado del estudiante")}finally{t(!1)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${ge?"bg-success-500":"bg-gray-300 dark:bg-gray-600"}`,title:ge?"Desactivar acceso (no podr loguear)":"Activar acceso (podr loguear)",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ge?"translate-x-6":"translate-x-1"}`})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fx,{className:`h-4 w-4 ${ge?"text-success-600 dark:text-success-400":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium ${ge?"text-success-600 dark:text-success-400":"text-gray-600 dark:text-gray-400"}`,children:ge?"Puede loguear":"No puede loguear"})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity absolute left-0 top-full mt-1 z-10 bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap pointer-events-none",children:ge?"El estudiante puede iniciar sesin y acceder al portal":"El estudiante no puede iniciar sesin. Solo activo si estado_id = 4 (Validado - Activo)"})]})}},{key:"acciones",label:"Acciones",render:B=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>pe(B),className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K(B),className:"p-2 rounded-xl text-warning-600 hover:bg-warning-50 dark:hover:bg-warning-900/20 transition-colors duration-200",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>J(B),className:"p-2 rounded-xl text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors duration-200",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ts,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Estudiantes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y gestiona todos los estudiantes del sistema"})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:ae,children:"Nuevo Estudiante"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Estudiantes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:L.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Estudiantes Activos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:L.activos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Da,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Estudiantes Inactivos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:L.inactivos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-error-500 to-error-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(m1,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar por CI, nombre, apellido o registro...",value:n,onChange:B=>{o(B.target.value),l(1)},className:"pl-10"})]}),e.jsx(W,{variant:"outline",icon:e.jsx(fa,{className:"h-5 w-5"}),onClick:()=>ne(!M),children:"Filtros"}),e.jsx(W,{variant:"outline",icon:e.jsx(gr,{className:"h-5 w-5"}),onClick:ye,disabled:a,children:"Exportar"})]}),M&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:oe.estado,onChange:B=>fe(ue=>({...ue,estado:B.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"activo",children:"Activos"}),e.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{value:oe.sexo,onChange:B=>fe(ue=>({...ue,sexo:B.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx(we,{type:"text",placeholder:"Filtrar por provincia...",value:oe.provincia,onChange:B=>fe(ue=>({...ue,provincia:B.target.value}))})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{fe({estado:"",provincia:"",sexo:""}),Se()},children:"Limpiar Filtros"})})]})]}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(ko,{className:"h-4 w-4"}),"Informacin sobre los Estados"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Estado ID"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-400",children:"Identificador numrico del estado (1-5). Indica la etapa del proceso del estudiante."})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/10 rounded-lg p-3 border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-1",children:"Estado (Nombre)"}),e.jsx("p",{className:"text-purple-700 dark:text-purple-400",children:"Nombre descriptivo del estado. Muestra el estado actual del proceso de validacin."})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 rounded-lg p-3 border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"font-semibold text-green-800 dark:text-green-300 mb-1",children:"Acceso (Puede Loguear)"}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Indica si el estudiante puede iniciar sesin. Solo activo cuando estado_id = 4 (Validado - Activo)."})]})]})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsx(ds,{columns:de,data:s,loading:a,emptyMessage:"No se encontraron estudiantes",hover:!0,striped:!0,onSort:Z,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null),xe()},title:R?"Editar Estudiante":"Nuevo Estudiante",size:"xl",children:e.jsxs("form",{onSubmit:me(ce),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["CI ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(we,{type:"text",...Q("ci",{required:"El CI es requerido",pattern:{value:/^\d+$/,message:"El CI solo debe contener nmeros"},maxLength:{value:20,message:"El CI no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 12345678",error:(q=ie.ci)==null?void 0:q.message,disabled:!!R,onInput:B=>{B.target.value=B.target.value.replace(/\D/g,""),le("ci")}})]}),!R&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registro Estudiante"}),e.jsx(we,{type:"text",value:"Se generar automticamente",placeholder:"Se generar automticamente",readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Este cdigo se asignar automticamente al crear el estudiante"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nombre ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(we,{type:"text",...Q("nombre",{required:"El nombre es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El nombre solo debe contener letras"},maxLength:{value:100,message:"El nombre no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Juan",error:(ee=ie.nombre)==null?void 0:ee.message,onInput:B=>{B.target.value=B.target.value.replace(/[^a-zA-Z\s]/g,""),le("nombre")}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Apellido ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(we,{type:"text",...Q("apellido",{required:"El apellido es requerido",pattern:{value:/^[a-zA-Z\s]+$/,message:"El apellido solo debe contener letras"},maxLength:{value:100,message:"El apellido no puede tener ms de 100 caracteres"}}),placeholder:"Ej: Prez",error:(se=ie.apellido)==null?void 0:se.message,onInput:B=>{B.target.value=B.target.value.replace(/[^a-zA-Z\s]/g,""),le("apellido")}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Celular ",e.jsx("span",{className:"text-error-500",children:"*"})]}),e.jsx(we,{type:"text",...Q("celular",{required:"El celular es requerido",pattern:{value:/^\d+$/,message:"El celular solo debe contener nmeros"},minLength:{value:7,message:"El celular debe tener al menos 7 dgitos"},maxLength:{value:20,message:"El celular no puede tener ms de 20 caracteres"}}),placeholder:"Ej: 70012345",error:(re=ie.celular)==null?void 0:re.message,onInput:B=>{B.target.value=B.target.value.replace(/\D/g,""),le("celular")}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo"}),e.jsxs("select",{...Q("sexo",{validate:B=>B&&!["M","F"].includes(B)?"El sexo debe ser M o F":!0}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"M",children:"Masculino"}),e.jsx("option",{value:"F",children:"Femenino"})]}),ie.sexo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ie.sexo.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Nacimiento"}),e.jsx(we,{type:"date",...Q("fecha_nacimiento",{validate:B=>{if(B){const ue=new Date(B),ge=new Date;if(ue>ge)return"La fecha de nacimiento no puede ser mayor a la fecha actual";const _e=ge.getFullYear()-ue.getFullYear(),je=ge.getMonth()-ue.getMonth(),Ne=ge.getDate()-ue.getDate();if((je<0||je===0&&Ne<0?_e-1:_e)<10)return"El estudiante debe tener al menos 10 aos"}return!0}}),error:(f=ie.fecha_nacimiento)==null?void 0:f.message,max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx(we,{type:"text",...Q("provincia",{maxLength:{value:50,message:"La provincia no puede tener ms de 50 caracteres"}}),placeholder:"Ej: La Paz",error:(w=ie.provincia)==null?void 0:w.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx(we,{type:"text",...Q("direccion",{maxLength:{value:255,message:"La direccin no puede tener ms de 255 caracteres"}}),placeholder:"Ej: Av. Principal #123",error:(V=ie.direccion)==null?void 0:V.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{H(!1),G(null),xe()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",disabled:a,children:[R?"Actualizar":"Crear"," Estudiante"]})]})]})}),e.jsx(Fe,{isOpen:A,onClose:()=>{P(!1),$(null)},title:"Detalles del Estudiante",size:"xl",children:T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[T.nombre," ",T.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.ci})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.registro_estudiante||T.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.celular||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Sexo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.sexo==="M"?"Masculino":T.sexo==="F"?"Femenino":"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.fecha_nacimiento?new Date(T.fecha_nacimiento).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Provincia"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.provincia||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Direccin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.direccion||"N/A"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ko,{className:"h-5 w-5 text-primary-600"}),"Informacin de Estado"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(ko,{className:"h-4 w-4"}),"Estado ID"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:T.estado_id||"N/A"})}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:[T.estado_id===1&&"Pre-registrado: Recin registrado, sin documentos",T.estado_id===2&&"Documentos incompletos: Faltan algunos documentos",T.estado_id===3&&"En revisin: Documentos pendientes de validacin",T.estado_id===4&&"Validado - Activo: Documentos aprobados, puede inscribirse",T.estado_id===5&&"Rechazado: Documentos rechazados",!T.estado_id&&"Estado no definido"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(ss,{className:"h-4 w-4"}),"Estado (Nombre)"]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${T.estado_id===4?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":T.estado_id===3?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":T.estado_id===5?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":T.estado_id===2?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:T.estado||"Sin estado"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Nombre descriptivo del estado del estudiante en el sistema"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(fx,{className:"h-4 w-4"}),"Acceso (Puede Loguear)"]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${T.activo===!0||T.estado_id===4?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:T.activo===!0||T.estado_id===4?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Puede loguear"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-4 w-4 mr-1"}),"No puede loguear"]})}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Solo activo si estado_id = 4 (Validado - Activo). Determina si el estudiante puede iniciar sesin."})]})]})]}),T.fecha_inscripcion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Inscripcin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:T.fecha_inscripcion})]})]})})]})},Ix=()=>{var F,te,be,z,Ee,Ce,he,O,X;const[s,r]=c.useState([]),[a,t]=c.useState({ramas_academicas:[],versiones:[],tipos_programa:[],instituciones:[],modulos:[]}),[n,o]=c.useState(!0),[i,l]=c.useState(""),[d,u]=c.useState(""),[g,h]=c.useState(""),[y,k]=c.useState(""),[E,S]=c.useState(""),[C,b]=c.useState(1),[p,N]=c.useState(1),[_,x]=c.useState(10),[v,j]=c.useState(0),[D,H]=c.useState(0),[A,P]=c.useState(0),[R,G]=c.useState("nombre"),[T,$]=c.useState("asc"),[L,Y]=c.useState(!1),[M,ne]=c.useState(!1),[oe,fe]=c.useState(null),[Q,me]=c.useState(null),[xe,ie]=c.useState([]),[le,Se]=c.useState([]),[pe,K]=c.useState({total:0,activos:0}),{register:ae,handleSubmit:ce,reset:J,formState:{errors:Z},watch:ye,setValue:de}=Xe();c.useEffect(()=>{q(),ee()},[C,_,i,d,g,y,E,R,T]);const q=async()=>{try{const U=await va.getDatosFormulario();U.success&&U.data&&t(U.data)}catch(U){console.error("Error al cargar datos del formulario:",U)}},ee=async()=>{try{o(!0);const U=await va.getProgramas({page:C,per_page:_,search:i,rama_academica_id:d||void 0,tipo_programa_id:g||void 0,version_id:y||void 0,institucion_id:E||void 0,sort_by:R,sort_direction:T});if(U.success&&U.data){const Ae=U.data.data||[];r(Ae),N(U.data.last_page||1),j(U.data.total||0),H(U.data.from||0),P(U.data.to||0),K({total:U.data.total||0,activos:Ae.length||0})}else m.error(U.message||"Error al cargar programas"),r([]),N(1),j(0),H(0),P(0)}catch{m.error("Error al cargar programas"),r([]),N(1),j(0),H(0),P(0)}finally{o(!1)}},se=()=>{ie([...xe,{id:"",edicion:""}])},re=U=>{ie(xe.filter((Ae,De)=>De!==U))},f=(U,Ae,De)=>{const Le=[...xe];Ae==="id"?Le[U][Ae]=De&&De!==""?De.toString():"":Le[U][Ae]=De,ie(Le)},w=()=>{Se([...le,""])},V=U=>{Se(le.filter((Ae,De)=>De!==U))},B=(U,Ae)=>{const De=[...le];De[U]=Ae,Se(De)},ue=async U=>{var De,Le,Ue,qe;if(!U.nombre||U.nombre.trim()===""){m.error("El nombre del programa es obligatorio");return}if(!U.duracion_meses||parseInt(U.duracion_meses)<1){m.error("La duracin debe ser al menos 1 mes");return}const Ae=xe.filter(He=>!He.id||He.id===""||He.id===null);if(xe.length>0&&Ae.length>0){m.error("Por favor, seleccione un mdulo vlido para todos los mdulos agregados");return}try{o(!0);const He=xe.filter(as=>{var Fa;const cs=(Fa=as.id)==null?void 0:Fa.toString().trim();return cs&&cs!==""&&cs!=="null"&&cs!=="undefined"}).map(as=>{const cs=parseInt(as.id);if(isNaN(cs)||cs<=0)throw new Error(`ID de mdulo invlido: ${as.id}`);return{id:cs,edicion:as.edicion&&as.edicion.trim()!==""?parseInt(as.edicion):null}}),_s={nombre:U.nombre.trim(),duracion_meses:parseInt(U.duracion_meses),total_modulos:U.total_modulos?parseInt(U.total_modulos):null,costo:U.costo?parseFloat(U.costo):null,version_id:parseInt(U.version_id),rama_academica_id:parseInt(U.rama_academica_id),tipo_programa_id:parseInt(U.tipo_programa_id),institucion_id:parseInt(U.institucion_id),modulos:He,subprogramas:le.filter(as=>as).map(as=>parseInt(as))};let rs;if(oe){const as=oe.id||oe.programa_id;if(!as){m.error("No se pudo identificar el ID del programa para actualizar"),o(!1);return}rs=await va.updatePrograma(as,_s)}else rs=await va.createPrograma(_s);rs.success?(m.success(rs.message||(oe?"Programa actualizado exitosamente":"Programa creado exitosamente")),Y(!1),J(),fe(null),ie([]),Se([]),await ee()):(m.error(rs.message||"Error al guardar programa"),rs.errors&&(Array.isArray(rs.errors)?rs.errors:Object.values(rs.errors).flat()).forEach(cs=>{typeof cs=="string"&&cs.trim()?m.error(cs,{duration:4e3}):Array.isArray(cs)&&cs.length>0&&m.error(cs[0],{duration:4e3})}))}catch(He){const _s=((Le=(De=He.response)==null?void 0:De.data)==null?void 0:Le.message)||He.message||"Error al guardar programa";if(m.error(_s),(qe=(Ue=He.response)==null?void 0:Ue.data)!=null&&qe.errors){const rs=He.response.data.errors;(Array.isArray(rs)?rs:Object.values(rs).flat()).forEach(cs=>{typeof cs=="string"&&cs.trim()?m.error(cs,{duration:4e3}):Array.isArray(cs)&&cs.length>0&&m.error(cs[0],{duration:4e3})})}}finally{o(!1)}},ge=async U=>{var De,Le;const Ae=U.id||U.programa_id;if(!Ae){m.error("No se pudo identificar el ID del programa");return}try{const Ue=await va.getProgramaById(Ae);if(Ue.success){const qe=Ue.data;fe(qe),J({nombre:qe.nombre,duracion_meses:qe.duracion_meses,total_modulos:qe.total_modulos||"",costo:qe.costo||"",version_id:qe.version_id,rama_academica_id:qe.rama_academica_id,tipo_programa_id:qe.tipo_programa_id,institucion_id:qe.institucion_id}),qe.modulos&&qe.modulos.length>0?ie(qe.modulos.map(He=>{var rs,as,cs,Fa;return{id:((rs=He.modulo_id)==null?void 0:rs.toString())||((as=He.id)==null?void 0:as.toString())||"",edicion:((Fa=(cs=He.pivot)==null?void 0:cs.edicion)==null?void 0:Fa.toString())||""}})):ie([]),qe.subprogramas&&qe.subprogramas.length>0?Se(qe.subprogramas.map(He=>He.id.toString())):Se([]),Y(!0)}else m.error(Ue.message||"Error al cargar datos del programa")}catch(Ue){const qe=((Le=(De=Ue.response)==null?void 0:De.data)==null?void 0:Le.message)||Ue.message||"Error al cargar datos del programa";m.error(qe)}},_e=async U=>{var De,Le;const Ae=U.id||U.programa_id;if(!Ae){m.error("No se pudo identificar el ID del programa");return}try{const Ue=await va.getProgramaById(Ae);Ue.success?(me(Ue.data),ne(!0)):m.error(Ue.message||"Error al cargar detalles del programa")}catch(Ue){const qe=((Le=(De=Ue.response)==null?void 0:De.data)==null?void 0:Le.message)||Ue.message||"Error al cargar detalles del programa";m.error(qe)}},je=async U=>{var De,Le;const Ae=U.id||U.programa_id;if(!Ae){m.error("No se pudo identificar el ID del programa");return}if(window.confirm(`Est seguro de eliminar el programa "${U.nombre}"?`))try{const Ue=await va.removePrograma(Ae);Ue.success?(m.success(Ue.message||"Programa eliminado exitosamente"),await ee()):m.error(Ue.message||"Error al eliminar programa")}catch(Ue){const qe=((Le=(De=Ue.response)==null?void 0:De.data)==null?void 0:Le.message)||Ue.message||"Error al eliminar programa";m.error(qe)}},Ne=()=>{fe(null),J({nombre:"",duracion_meses:"",total_modulos:"",costo:"",version_id:"",rama_academica_id:"",tipo_programa_id:"",institucion_id:""}),ie([]),Se([]),Y(!0)},Te=(U,Ae)=>{G(U),$(Ae),b(1)},ve=[{key:"nombre",label:"Nombre",render:U=>U.nombre||"-"},{key:"tipo_programa",label:"Tipo",render:U=>{var Ae;return((Ae=U.tipo_programa)==null?void 0:Ae.nombre)||"N/A"}},{key:"rama_academica",label:"Rama",render:U=>{var Ae;return((Ae=U.rama_academica)==null?void 0:Ae.nombre)||"N/A"}},{key:"version",label:"Versin",render:U=>{var Ae;return((Ae=U.version)==null?void 0:Ae.nombre)||"N/A"}},{key:"institucion",label:"Institucin",render:U=>{var Ae;return((Ae=U.institucion)==null?void 0:Ae.nombre)||"N/A"}},{key:"duracion_meses",label:"Duracin (meses)",render:U=>U.duracion_meses||"N/A"},{key:"costo",label:"Costo",render:U=>U.costo?`$${U.costo}`:"N/A"},{key:"actions",label:"Acciones",render:U=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),_e(U)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),ge(U)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),je(U)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Programas Acadmicos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de programas y asociacin con mdulos y subprogramas"})]}),e.jsx(W,{onClick:Ne,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Programa"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Programas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:pe.total})]}),e.jsx(ys,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Programas Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:pe.activos})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre...",value:i,onChange:U=>{l(U.target.value),b(1)},icon:is})}),e.jsx("div",{children:e.jsxs("select",{value:d,onChange:U=>{u(U.target.value),b(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todas las ramas"}),a.ramas_academicas.map(U=>e.jsx("option",{value:U.id,children:U.nombre},U.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:g,onChange:U=>{h(U.target.value),b(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),a.tipos_programa.map(U=>e.jsx("option",{value:U.id,children:U.nombre},U.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:U=>{k(U.target.value),b(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todas las versiones"}),a.versiones.map(U=>e.jsxs("option",{value:U.id,children:[U.nombre," (",U.ao,")"]},U.id))]})})]})}),e.jsx(ke,{children:e.jsx(ds,{columns:ve,data:s,loading:n,onSort:Te,sortBy:R,sortDirection:T,pagination:{currentPage:C,totalPages:p,perPage:_,total:v,from:D,to:A,onPageChange:b,onPerPageChange:x}})}),e.jsx(Fe,{isOpen:L,onClose:()=>{Y(!1),fe(null),ie([]),Se([]),J()},title:oe?"Editar Programa":"Nuevo Programa",size:"xl",children:e.jsxs("form",{onSubmit:ce(ue),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Programa *"}),e.jsx(we,{...ae("nombre",{required:"El nombre es requerido"}),placeholder:"Ej: Maestra en Educacin",error:(F=Z.nombre)==null?void 0:F.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rama Acadmica *"}),e.jsxs("select",{...ae("rama_academica_id",{required:"La rama acadmica es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar rama..."}),a.ramas_academicas.map(U=>e.jsx("option",{value:U.id,children:U.nombre},U.id))]}),Z.rama_academica_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Z.rama_academica_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Programa *"}),e.jsxs("select",{...ae("tipo_programa_id",{required:"El tipo de programa es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),a.tipos_programa.map(U=>e.jsx("option",{value:U.id,children:U.nombre},U.id))]}),Z.tipo_programa_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Z.tipo_programa_id.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Versin *"}),e.jsxs("select",{...ae("version_id",{required:"La versin es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar versin..."}),a.versiones.map(U=>e.jsxs("option",{value:U.id,children:[U.nombre," (",U.ao,")"]},U.id))]}),Z.version_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Z.version_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Institucin *"}),e.jsxs("select",{...ae("institucion_id",{required:"La institucin es requerida"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar institucin..."}),a.instituciones.map(U=>e.jsx("option",{value:U.id,children:U.nombre},U.id))]}),Z.institucion_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:Z.institucion_id.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Duracin (meses) *"}),e.jsx(we,{type:"number",...ae("duracion_meses",{required:"La duracin es requerida",min:{value:1,message:"Mnimo 1 mes"}}),placeholder:"Ej: 24",error:(te=Z.duracion_meses)==null?void 0:te.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total Mdulos"}),e.jsx(we,{type:"number",...ae("total_modulos",{min:{value:0,message:"Mnimo 0"}}),placeholder:"Ej: 12",error:(be=Z.total_modulos)==null?void 0:be.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Costo"}),e.jsx(we,{type:"number",step:"0.01",...ae("costo",{min:{value:0,message:"Mnimo 0"}}),placeholder:"Ej: 5000.00",error:(z=Z.costo)==null?void 0:z.message})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mdulos del Programa"}),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:se,icon:e.jsx(We,{className:"h-4 w-4"}),children:"Agregar Mdulo"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[xe.map((U,Ae)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Mdulo ",Ae+1]}),e.jsx("button",{type:"button",onClick:()=>re(Ae),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(xr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("select",{value:U.id||"",onChange:De=>{const Le=De.target.value;f(Ae,"id",Le)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar mdulo..."}),a.modulos&&Array.isArray(a.modulos)&&a.modulos.filter(De=>{var Ue,qe;const Le=((Ue=De.id)==null?void 0:Ue.toString())||((qe=De.modulo_id)==null?void 0:qe.toString());return!xe.some((He,_s)=>{var as;const rs=(as=He.id)==null?void 0:as.toString();return _s!==Ae&&rs&&rs===Le})}).map(De=>{var Ue,qe;const Le=((Ue=De.id)==null?void 0:Ue.toString())||((qe=De.modulo_id)==null?void 0:qe.toString())||"";return e.jsxs("option",{value:Le,children:[De.nombre," (",De.credito||0," crditos)"]},Le)})]})}),e.jsx("div",{children:e.jsx(we,{type:"number",value:U.edicion||"",onChange:De=>f(Ae,"edicion",De.target.value),placeholder:"Edicin (opcional)",min:"1",className:"w-full"})})]})]},Ae)),xe.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay mdulos agregados. Haga clic en "Agregar Mdulo" para comenzar.'})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subprogramas (Opcional)"}),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:w,icon:e.jsx(We,{className:"h-4 w-4"}),children:"Agregar Subprograma"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[le.map((U,Ae)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Subprograma ",Ae+1]}),e.jsx("button",{type:"button",onClick:()=>V(Ae),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(xr,{className:"h-4 w-4"})})]}),e.jsx("div",{children:e.jsxs("select",{value:U,onChange:De=>B(Ae,De.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar subprograma..."}),s.filter(De=>!oe||De.id!==oe.id).filter(De=>!le.some((Le,Ue)=>Ue!==Ae&&Le===De.id.toString())).map(De=>{var Le;return e.jsxs("option",{value:De.id,children:[De.nombre," - ",((Le=De.tipo_programa)==null?void 0:Le.nombre)||""]},De.id)})]})})]},Ae)),le.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay subprogramas agregados. Haga clic en "Agregar Subprograma" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{Y(!1),fe(null),ie([]),Se([]),J()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:oe?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:M,onClose:()=>{ne(!1),me(null)},title:"Detalles del Programa",size:"xl",children:Q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Q.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((Ee=Q.tipo_programa)==null?void 0:Ee.nombre)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((Ce=Q.rama_academica)==null?void 0:Ce.nombre)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Versin"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[((he=Q.version)==null?void 0:he.nombre)||"N/A"," ",(O=Q.version)!=null&&O.ao?`(${Q.version.ao})`:""]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((X=Q.institucion)==null?void 0:X.nombre)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin (meses)"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.duracion_meses||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Total Mdulos"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.total_modulos||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.costo?`$${Q.costo}`:"N/A"})]})]}),Q.modulos&&Q.modulos.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Mdulos Asociados (",Q.modulos.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Q.modulos.map(U=>{var Ae;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:U.nombre}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Crditos: ",U.credito]}),e.jsxs("span",{children:["Horas: ",U.horas_academicas]}),((Ae=U.pivot)==null?void 0:Ae.edicion)!==void 0&&U.pivot.edicion!==null&&e.jsxs("span",{children:["Edicin: ",U.pivot.edicion]})]})]},U.modulo_id||U.id)})})]}),Q.subprogramas&&Q.subprogramas.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Subprogramas (",Q.subprogramas.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Q.subprogramas.map(U=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:U.nombre}),U.tipo_programa&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.tipo_programa.nombre})]},U.id))})]})]})})]})},vi={async getInscripciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",programa_id:s.programa_id||"",estudiante_id:s.estudiante_id||"",fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||"",sort_by:s.sort_by||"fecha",sort_direction:s.sort_direction||"desc"};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null||t[o]===void 0)&&delete t[o]});const n=await Re("/admin/inscripciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripciones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getInscripcionById(s){var r,a;try{const t=await Re(`/admin/inscripciones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripcion:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getEstadisticas(){var s,r;try{const a=await Re("/admin/inscripciones/estadisticas");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching estadisticas:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}}},tk=()=>{var Z,ye,de,q,ee,se,re,f,w,V,B,ue,ge,_e,je,Ne,Te,ve,F,te,be;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("fecha"),[_,x]=c.useState("desc"),[v,j]=c.useState(null),[D,H]=c.useState(!1),[A,P]=c.useState(!1),[R,G]=c.useState(null),[T,$]=c.useState([]),[L,Y]=c.useState([]),[M,ne]=c.useState({fecha_inicio:"",fecha_fin:"",programa_id:"",estudiante_id:""}),[oe,fe]=c.useState({total:0,este_mes:0,este_anio:0});c.useEffect(()=>{Q(),me()},[]),c.useEffect(()=>{const z=setTimeout(()=>{xe()},500);return()=>clearTimeout(z)},[n,M,i,g,p,_]),c.useEffect(()=>{ie()},[]);const Q=async()=>{try{const z=await va.getProgramas({per_page:100});if(z.success&&z.data){const Ee=z.data.data||z.data;$(Array.isArray(Ee)?Ee:[])}}catch(z){console.error("Error cargando programas:",z)}},me=async()=>{try{const z=await Gr.getEstudiantes({per_page:100});if(z.success&&z.data){const Ee=z.data.data||z.data;Y(Array.isArray(Ee)?Ee:[])}}catch(z){console.error("Error cargando estudiantes:",z)}},xe=async()=>{try{t(!0),j(null);const z={page:i,per_page:g,sort_by:p,sort_direction:_};n&&n.trim()!==""&&(z.search=n.trim()),M.fecha_inicio&&(z.fecha_inicio=M.fecha_inicio),M.fecha_fin&&(z.fecha_fin=M.fecha_fin),M.programa_id&&(z.programa_id=M.programa_id),M.estudiante_id&&(z.estudiante_id=M.estudiante_id);const Ee=await vi.getInscripciones(z);if(Ee.success){const Ce=Ee.data;let he=[];Ce.data&&Array.isArray(Ce.data)?he=Ce.data:Array.isArray(Ce)&&(he=Ce),r(he),u(Ce.last_page||1),k(Ce.total||he.length),S(Ce.from||(he.length>0?1:0)),b(Ce.to||he.length)}else j("No se pudieron cargar las inscripciones"),m.error(Ee.message||"Error al cargar inscripciones"),r([]),u(1),k(0),S(0),b(0)}catch(z){console.error("Error cargando inscripciones:",z),j("Error al cargar las inscripciones"),m.error("Error de conexin al cargar inscripciones"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},ie=async()=>{try{const z=await vi.getEstadisticas();z.success&&fe({total:z.data.total||0,este_mes:z.data.este_mes||0,este_anio:z.data.este_anio||0})}catch(z){console.error("Error cargando estadsticas:",z)}},le=async z=>{var Ee,Ce;try{const he=await vi.getInscripcionById(z.id);he.success?(G(he.data),H(!0)):m.error(he.message||"Error al cargar detalles de la inscripcin")}catch(he){const O=((Ce=(Ee=he.response)==null?void 0:Ee.data)==null?void 0:Ce.message)||he.message||"Error al cargar la inscripcin";m.error(O)}},Se=(z,Ee)=>{N(z),x(Ee),l(1)},pe=()=>{P(!1),l(1),xe()},K=()=>{ne({fecha_inicio:"",fecha_fin:"",programa_id:"",estudiante_id:""}),P(!1)},ae=()=>M.fecha_inicio||M.fecha_fin||M.programa_id||M.estudiante_id,ce=async()=>{var z,Ee;try{t(!0);const Ce={};n&&n.trim()!==""&&(Ce.search=n.trim()),M.fecha_inicio&&(Ce.fecha_inicio=M.fecha_inicio),M.fecha_fin&&(Ce.fecha_fin=M.fecha_fin),M.programa_id&&(Ce.programa_id=M.programa_id),M.estudiante_id&&(Ce.estudiante_id=M.estudiante_id),Ce.per_page=1e4,Ce.page=1;const he=await vi.getInscripciones(Ce);if(he.success&&he.data){let O=[];if(he.data.data&&Array.isArray(he.data.data)?O=he.data.data:Array.isArray(he.data)&&(O=he.data),O.length===0){m.error("No hay inscripciones para exportar");return}const X=O.map(U=>{var Ae,De,Le,Ue,qe,He,_s,rs,as,cs,Fa,jm,vm,Nm,wm,km,Em,_m;return{ID:U.id||"",Fecha:U.fecha_formatted||(U.fecha?new Date(U.fecha).toLocaleDateString("es-ES"):"N/A"),"Registro Estudiante":((Ae=U.estudiante)==null?void 0:Ae.registro_estudiante)||"N/A","CI Estudiante":((De=U.estudiante)==null?void 0:De.ci)||"N/A","Nombre Estudiante":((Le=U.estudiante)==null?void 0:Le.nombre)||"N/A","Apellido Estudiante":((Ue=U.estudiante)==null?void 0:Ue.apellido)||"N/A","Email Estudiante":((qe=U.estudiante)==null?void 0:qe.email)||"N/A","Celular Estudiante":((He=U.estudiante)==null?void 0:He.celular)||"N/A",Programa:((_s=U.programa)==null?void 0:_s.nombre)||"N/A",Institucin:((rs=U.programa)==null?void 0:rs.institucion)||"N/A","Rama Acadmica":((as=U.programa)==null?void 0:as.rama_academica)||"N/A","Tipo Programa":((cs=U.programa)==null?void 0:cs.tipo_programa)||"N/A","Costo Programa":(Fa=U.programa)!=null&&Fa.costo?`$${U.programa.costo.toLocaleString("es-ES")}`:"N/A","Duracin (meses)":((jm=U.programa)==null?void 0:jm.duracion_meses)||"N/A","Monto Total Plan":(vm=U.plan_pago)!=null&&vm.monto_total?`$${U.plan_pago.monto_total.toLocaleString("es-ES")}`:"N/A","Monto Pagado":(Nm=U.plan_pago)!=null&&Nm.monto_pagado?`$${U.plan_pago.monto_pagado.toLocaleString("es-ES")}`:"N/A","Monto Pendiente":(wm=U.plan_pago)!=null&&wm.monto_pendiente?`$${U.plan_pago.monto_pendiente.toLocaleString("es-ES")}`:"N/A","Total Cuotas":((km=U.plan_pago)==null?void 0:km.total_cuotas)||"N/A","Cuotas Pagadas":((Em=U.estado_pagos)==null?void 0:Em.cuotas_pagadas)||0,"Porcentaje Pagado":(_m=U.estado_pagos)!=null&&_m.porcentaje_pagado?`${U.estado_pagos.porcentaje_pagado.toFixed(2)}%`:"0%",Descuento:U.descuento?`${U.descuento.nombre} (${U.descuento.descuento}%)`:"Sin descuento"}});Wt(X,`inscripciones_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${X.length} inscripciones exitosamente`)}else m.error(he.message||"Error al exportar inscripciones: No se recibieron datos vlidos"),console.error("Error en exportacin:",he)}catch(Ce){console.error("Error al exportar inscripciones:",Ce),m.error(((Ee=(z=Ce.response)==null?void 0:z.data)==null?void 0:Ee.message)||Ce.message||"Error al exportar inscripciones")}finally{t(!1)}},J=[{key:"fecha",label:"Fecha",sortable:!0,render:z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:z.fecha_formatted||(z.fecha?new Date(z.fecha).toLocaleDateString("es-ES"):"N/A")})]})},{key:"estudiante",label:"Estudiante",sortable:!0,render:z=>{var Ee,Ce,he,O,X,U;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:((Ce=(Ee=z.estudiante)==null?void 0:Ee.nombre)==null?void 0:Ce.charAt(0))||"E"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(he=z.estudiante)==null?void 0:he.nombre," ",(O=z.estudiante)==null?void 0:O.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",(X=z.estudiante)==null?void 0:X.ci," | Reg: ",(U=z.estudiante)==null?void 0:U.registro_estudiante]})]})]})}},{key:"programa",label:"Programa",sortable:!0,render:z=>{var Ee,Ce,he,O;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((Ee=z.programa)==null?void 0:Ee.nombre)||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(Ce=z.programa)==null?void 0:Ce.tipo_programa," - ",(he=z.programa)==null?void 0:he.rama_academica]}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:(O=z.programa)==null?void 0:O.institucion})]})}},{key:"plan_pago",label:"Plan de Pago",render:z=>{var Ce,he,O;const Ee=z.plan_pago;return Ee?e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[Ee.total_cuotas," cuotas"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: $",((Ce=Ee.monto_total)==null?void 0:Ce.toLocaleString("es-ES"))||"0"]}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Pagado: $",((he=Ee.monto_pagado)==null?void 0:he.toLocaleString("es-ES"))||"0"," | Pendiente: $",((O=Ee.monto_pendiente)==null?void 0:O.toLocaleString("es-ES"))||"0"]})]}):e.jsx("span",{className:"text-gray-400",children:"Sin plan de pago"})}},{key:"estado_pagos",label:"Estado Pagos",render:z=>{const Ee=z.estado_pagos;if(!Ee)return e.jsx("span",{className:"text-gray-400",children:"N/A"});const Ce=Ee.porcentaje_pagado||0,he=Ce>=100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${he?"bg-success-500":Ce>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(Ce,100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:[Ce.toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Ee.cuotas_pagadas,"/",Ee.total_cuotas," cuotas pagadas"]})]})}},{key:"descuento",label:"Descuento",render:z=>z.descuento?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-success-600 dark:text-success-400",children:z.descuento.nombre}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[z.descuento.descuento,"%"]})]}):e.jsx("span",{className:"text-gray-400",children:"Sin descuento"})},{key:"acciones",label:"Acciones",render:z=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>le(z),className:"p-2 rounded-xl text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})})})}];return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Dn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Inscripciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra todas las inscripciones de estudiantes a programas"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:oe.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ss,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Este Mes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:oe.este_mes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(On,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Este Ao"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:oe.este_anio})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Qs,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar por estudiante, CI, programa...",value:n,onChange:z=>{o(z.target.value),l(1)},className:"pl-10"})]}),e.jsxs(W,{variant:"outline",icon:e.jsx(fa,{className:"h-5 w-5"}),onClick:()=>P(!0),className:ae()?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"",children:["Filtros ",ae()&&`(${Object.values(M).filter(z=>z).length})`]}),e.jsx(W,{variant:"outline",icon:e.jsx(gr,{className:"h-5 w-5"}),onClick:ce,disabled:a,children:"Exportar"})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsx(ds,{columns:J,data:s,loading:a,emptyMessage:"No se encontraron inscripciones",hover:!0,striped:!0,onSort:Se,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})}),e.jsx(Fe,{isOpen:D,onClose:()=>{H(!1),G(null)},title:"Detalles de la Inscripcin",size:"xl",children:R&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ir,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[(Z=R.estudiante)==null?void 0:Z.nombre," ",(ye=R.estudiante)==null?void 0:ye.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(de=R.estudiante)==null?void 0:de.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(q=R.estudiante)==null?void 0:q.registro_estudiante})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(ee=R.estudiante)==null?void 0:ee.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((se=R.estudiante)==null?void 0:se.celular)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Direccin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:((re=R.estudiante)==null?void 0:re.direccion)||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:(f=R.programa)==null?void 0:f.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(w=R.programa)==null?void 0:w.institucion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(V=R.programa)==null?void 0:V.rama_academica})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:(B=R.programa)==null?void 0:B.tipo_programa})]}),((ue=R.programa)==null?void 0:ue.duracion_meses)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Duracin"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[R.programa.duracion_meses," meses"]})]}),((ge=R.programa)==null?void 0:ge.costo)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo Base"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["$",parseFloat(R.programa.costo||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),R.costo_base&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo Base (Inscripcin)"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["$",parseFloat(R.costo_base||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),R.costo_final&&R.costo_final!==R.costo_base&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo Final (con descuento)"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",parseFloat(R.costo_final||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),R.descuento&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(On,{className:"h-5 w-5 mr-2 text-green-500"}),"Descuento Aplicado"]}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Descuento"}),e.jsx("p",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:R.descuento.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Porcentaje de Descuento"}),e.jsxs("p",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:[R.descuento.descuento,"%"]})]}),R.costo_base&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo Base"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["$",parseFloat(R.costo_base||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Descuento Aplicado"}),e.jsxs("p",{className:"text-green-600 dark:text-green-400 font-semibold",children:["- $",parseFloat(R.costo_base*(R.descuento.descuento/100)||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),R.costo_final&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Costo Final (con descuento)"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",parseFloat(R.costo_final||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})})]}),R.plan_pago&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin de Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[!R.descuento&&R.costo_base&&e.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Costo Base:"})," $",parseFloat(R.costo_base||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}),R.costo_final&&R.costo_final!==R.costo_base&&e.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Costo Final: $",parseFloat(R.costo_final||0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Total"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",((_e=R.plan_pago.monto_total)==null?void 0:_e.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pagado"}),e.jsxs("p",{className:"text-lg font-bold text-success-600 dark:text-success-400",children:["$",((je=R.plan_pago.monto_pagado)==null?void 0:je.toLocaleString("es-ES"))||"0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pendiente"}),e.jsxs("p",{className:"text-lg font-bold text-error-600 dark:text-error-400",children:["$",((Ne=R.plan_pago.monto_pendiente)==null?void 0:Ne.toLocaleString("es-ES"))||"0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Progreso"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[((ve=(Te=R.estado_pagos)==null?void 0:Te.porcentaje_pagado)==null?void 0:ve.toFixed(1))||"0","%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Cuotas: ",R.plan_pago.cuotas_pagadas,"/",R.plan_pago.total_cuotas," pagadas"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${((F=R.estado_pagos)==null?void 0:F.porcentaje_pagado)>=100?"bg-success-500":((te=R.estado_pagos)==null?void 0:te.porcentaje_pagado)>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(((be=R.estado_pagos)==null?void 0:be.porcentaje_pagado)||0,100)}%`}})})]}),R.plan_pago.cuotas&&R.plan_pago.cuotas.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Detalle de Cuotas"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.plan_pago.cuotas.map((z,Ee)=>{var Ce;return e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Cuota ",Ee+1]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[z.fecha_ini?new Date(z.fecha_ini).toLocaleDateString("es-ES"):"N/A"," -",z.fecha_fin?new Date(z.fecha_fin).toLocaleDateString("es-ES"):"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",((Ce=z.monto)==null?void 0:Ce.toLocaleString("es-ES"))||"0"]}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${z.estado==="Pagado"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":z.estado==="Retrasado"?"bg-error-100 text-error-800 dark:bg-error-900/20 dark:text-error-400":"bg-warning-100 text-warning-800 dark:bg-warning-900/20 dark:text-warning-400"}`,children:[z.estado,z.estado==="Retrasado"&&z.dias_retraso>0&&e.jsxs("span",{className:"ml-1",children:["(",z.dias_retraso," das)"]})]})]})]}),z.pagos&&z.pagos.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagos realizados:"}),z.pagos.map(he=>{var O;return e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["$",(O=he.monto)==null?void 0:O.toLocaleString("es-ES")," - ",he.fecha?new Date(he.fecha).toLocaleDateString("es-ES"):"N/A",he.metodo&&` (${he.metodo})`,he.verificado&&e.jsx("span",{className:"ml-2 text-success-600",children:" Verificado"})]},he.id)})]})]},z.id)})})]})]})]}),R.descuento&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Descuento Aplicado"}),e.jsxs("div",{className:"bg-success-50 dark:bg-success-900/20 p-4 rounded-lg",children:[e.jsx("p",{className:"font-medium text-success-900 dark:text-success-400",children:R.descuento.nombre}),e.jsxs("p",{className:"text-sm text-success-700 dark:text-success-500",children:["Descuento: ",R.descuento.descuento,"%"]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha de Inscripcin:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:R.fecha_formatted||(R.fecha?new Date(R.fecha).toLocaleDateString("es-ES"):"N/A")})]})})]})}),e.jsx(Fe,{isOpen:A,onClose:()=>P(!1),title:"Filtros Avanzados",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio"}),e.jsx(we,{type:"date",value:M.fecha_inicio,onChange:z=>ne({...M,fecha_inicio:z.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin"}),e.jsx(we,{type:"date",value:M.fecha_fin,onChange:z=>ne({...M,fecha_fin:z.target.value}),min:M.fecha_inicio||void 0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsxs("select",{value:M.programa_id,onChange:z=>ne({...M,programa_id:z.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos los programas"}),T.map(z=>e.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("select",{value:M.estudiante_id,onChange:z=>ne({...M,estudiante_id:z.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos los estudiantes"}),L.map(z=>{const Ee=z.id||z.persona_id;return e.jsxs("option",{value:Ee,children:[z.nombre," ",z.apellido," - ",z.ci," ",z.registro_estudiante?`(Reg: ${z.registro_estudiante})`:""]},Ee||z.registro_estudiante)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:K,icon:e.jsx(xr,{className:"h-4 w-4"}),children:"Limpiar Filtros"}),e.jsx(W,{type:"button",variant:"primary",onClick:pe,children:"Aplicar Filtros"})]})]})})]})},Ni={async listar(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||15,search:s.search||"",metodo:s.metodo||"",estudiante_id:s.estudiante_id||""};Object.keys(t).forEach(o=>{(t[o]===""||t[o]===null||t[o]===void 0)&&delete t[o]});const n=await Re("/admin/pagos/verificacion",t);return n.data.success?{success:!0,data:n.data.data,resumen:n.data.resumen,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener pagos"}}catch(t){return console.error("Error fetching pagos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener pagos"}}},async obtener(s){var r,a;try{const t=await Re(`/admin/pagos/verificacion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||"Error al obtener pago"}}catch(t){return console.error("Error fetching pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener pago"}}},async aprobar(s,r=""){var a,t;try{const n=await Be(`/admin/pagos/verificacion/${s}/aprobar`,{observaciones:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Pago aprobado exitosamente"}:{success:!1,message:n.data.message||"Error al aprobar pago"}}catch(n){return console.error("Error aprobando pago:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al aprobar pago"}}},async rechazar(s,r){var a,t,n,o;try{const i=await Be(`/admin/pagos/verificacion/${s}/rechazar`,{motivo:r});return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Pago rechazado exitosamente"}:{success:!1,message:i.data.message||"Error al rechazar pago"}}catch(i){return console.error("Error rechazando pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al rechazar pago",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async obtenerResumenVerificados(s={}){var r,a;try{const t={fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||""};Object.keys(t).forEach(o=>{t[o]===""&&delete t[o]});const n=await Re("/admin/pagos/verificacion/resumen/verificados",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||"Error al obtener resumen"}}catch(t){return console.error("Error fetching resumen:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener resumen"}}}};function nk(s,r=500){const[a,t]=c.useState(s||"");return c.useEffect(()=>{const n=setTimeout(()=>{t(s||"")},r);return()=>{clearTimeout(n)}},[s,r]),a}const ok=()=>{var ce,J;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i]=nk(n,500),[l,d]=c.useState(1),[u,g]=c.useState(1),[h,y]=c.useState(15),[k,E]=c.useState(null),[S,C]=c.useState(!1),[b,p]=c.useState(!1),[N,_]=c.useState(!1),[x,v]=c.useState(null),[j,D]=c.useState(""),[H,A]=c.useState(""),[P,R]=c.useState(""),[G,T]=c.useState(""),[$,L]=c.useState([]),[Y,M]=c.useState(!1);c.useEffect(()=>{ne()},[]),c.useEffect(()=>{oe()},[l,h,i,P,G]);const ne=async()=>{try{const Z=await Gr.getEstudiantes({per_page:1e3});if(Z.success&&Z.data){const ye=Z.data.data||Z.data;L(Array.isArray(ye)?ye:[])}}catch(Z){console.error("Error cargando estudiantes:",Z)}},oe=async()=>{try{t(!0);const Z={page:l,per_page:h,search:i&&typeof i=="string"&&i.trim()?i.trim():void 0,metodo:P||void 0,estudiante_id:G?String(G):void 0};G&&console.log("Filtrando por estudiante_id:",G,"Tipo:",typeof G);const ye=await Ni.listar(Z);if(ye.success){const de=ye.data;de&&de.data?(r(de.data),g(de.last_page||1)):(r([]),g(1)),ye.resumen&&E(ye.resumen)}else m.error(ye.message||"Error al cargar los pagos"),r([])}catch(Z){console.error("Error cargando pagos:",Z),m.error("Error de conexin"),r([])}finally{t(!1)}},fe=async Z=>{try{t(!0);const ye=await Ni.obtener(Z.id);ye.success?(v(ye.data),C(!0)):m.error(ye.message||"Error al cargar el pago")}catch{m.error("Error al cargar el pago")}finally{t(!1)}},Q=Z=>{v(Z),A(""),p(!0)},me=async()=>{if(x)try{t(!0);const Z=await Ni.aprobar(x.id,H);Z.success?(m.success(Z.message||"Pago aprobado exitosamente"),p(!1),v(null),A(""),await oe()):m.error(Z.message||"Error al aprobar el pago")}catch{m.error("Error al aprobar el pago")}finally{t(!1)}},xe=Z=>{v(Z),D(""),_(!0)},ie=async()=>{if(!x||!j.trim()){m.error("Debe proporcionar un motivo para rechazar el pago");return}if(j.trim().length<10){m.error("El motivo debe tener al menos 10 caracteres");return}try{t(!0);const Z=await Ni.rechazar(x.id,j.trim());Z.success?(m.success(Z.message||"Pago rechazado exitosamente"),_(!1),v(null),D(""),await oe()):(m.error(Z.message||"Error al rechazar el pago"),Z.errors&&Object.keys(Z.errors).forEach(ye=>{(Array.isArray(Z.errors[ye])?Z.errors[ye]:[Z.errors[ye]]).forEach(q=>m.error(q))}))}catch{m.error("Error al rechazar el pago")}finally{t(!1)}},le=Z=>Z?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(Me,{className:"h-4 w-4"}),"Verificado"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:[e.jsx(ls,{className:"h-4 w-4"}),"Pendiente"]}),Se=Z=>{const ye={QR:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",TRANSFERENCIA:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",EFECTIVO:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Transferencia:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",Efectivo:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Tarjeta:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ye[Z]||"bg-gray-100 text-gray-800"}`,children:Z||"N/A"})},pe=()=>P!==""||G!=="",K=()=>{R(""),T(""),d(1)},ae=[{key:"fecha",label:"Fecha",render:Z=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:Z.fecha?new Date(Z.fecha).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"})},{key:"estudiante",label:"Estudiante",render:Z=>{var ye,de;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((ye=Z.estudiante)==null?void 0:ye.nombre_completo)||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["CI: ",((de=Z.estudiante)==null?void 0:de.ci)||"N/A"]})]})}},{key:"programa",label:"Programa",render:Z=>{var ye;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((ye=Z.programa)==null?void 0:ye.nombre)||Z.programa||"N/A"})}},{key:"monto",label:"Monto",render:Z=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(Z.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"metodo",label:"Mtodo",render:Z=>Se(Z.metodo)},{key:"verificado",label:"Estado",render:Z=>le(Z.verificado)},{key:"actions",label:"Acciones",render:Z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>fe(Z),title:"Ver detalles"}),!Z.verificado&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Xr,{className:"h-4 w-4 text-green-600"}),onClick:()=>Q(Z),title:"Aprobar pago"}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(xr,{className:"h-4 w-4 text-red-600"}),onClick:()=>xe(Z),title:"Rechazar pago"})]})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ea,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Pagos Realizados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verifica y gestiona los pagos de estudiantes"})]})]})}),k&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ke,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.total_pendientes||0})]}),e.jsx(ls,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx(ke,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.total_verificados||0})]}),e.jsx(Me,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(ke,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Pendiente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(k.total_monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(Tr,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx(ke,{className:"gradient",shadow:"glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Verificado"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(k.total_monto_verificado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(Tr,{className:"h-8 w-8 text-green-500"})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Pagos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar pagos...",value:n,onChange:Z=>{o(Z.target.value),d(1)},className:"pl-10 w-full sm:w-64"})]}),e.jsxs(W,{variant:"outline",icon:e.jsx(fa,{className:"h-4 w-4"}),onClick:()=>M(!0),className:pe()?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"",children:["Filtros",pe()&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary-500 text-white rounded-full text-xs",children:[P,G].filter(Z=>Z).length})]})]})]}),e.jsx(ds,{columns:ae,data:s,loading:a,pagination:{currentPage:l,totalPages:u,perPage:h,onPageChange:d,onPerPageChange:y}})]}),e.jsx(Fe,{isOpen:S,onClose:()=>{C(!1),v(null)},title:"Detalles del Pago",size:"xl",children:x&&e.jsxs("div",{className:"space-y-6",children:[x.estudiante&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ir,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[x.estudiante.nombre_completo||x.estudiante.nombre," ",x.estudiante.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.estudiante.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.estudiante.registro_estudiante||x.estudiante.registro||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.estudiante.email||"N/A"})]}),x.estudiante.celular&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.estudiante.celular})]})]})]}),x.programa&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:typeof x.programa=="string"?x.programa:x.programa.nombre})]}),x.programa.institucion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:typeof x.programa.institucion=="string"?x.programa.institucion:x.programa.institucion.nombre})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:parseFloat(x.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Mtodo"}),e.jsx("div",{className:"mt-1",children:Se(x.metodo)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.fecha?new Date(x.fecha).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Estado"}),e.jsx("div",{className:"mt-1",children:le(x.verificado)})]})]}),x.verificado&&x.fecha_verificacion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha de Verificacin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:new Date(x.fecha_verificacion).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),x.verificado_por&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Verificado por"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:typeof x.verificado_por=="string"?x.verificado_por:`${x.verificado_por.nombre||""} ${x.verificado_por.apellido||""}`.trim()||"N/A"})]}),x.comprobante_url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Comprobante"}),e.jsxs("a",{href:x.comprobante_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 dark:text-primary-400",children:[e.jsx(ss,{className:"h-4 w-4"}),"Ver comprobante"]})]}),x.observaciones&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:x.observaciones})]}),x.cuota&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Informacin de la Cuota"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.cuota.fecha_ini?new Date(x.cuota.fecha_ini).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:x.cuota.fecha_fin?new Date(x.cuota.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]})]})]})]})]})]})}),e.jsx(Fe,{isOpen:b,onClose:()=>{p(!1),v(null),A("")},title:"Aprobar Pago",size:"md",children:x&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Est seguro de aprobar este pago?"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Estudiante: ",((ce=x.estudiante)==null?void 0:ce.nombre_completo)||"N/A"]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Monto: ",parseFloat(x.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones (opcional)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:H,onChange:Z=>A(Z.target.value),placeholder:"Agregar observaciones sobre la aprobacin..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{p(!1),v(null),A("")},children:"Cancelar"}),e.jsx(W,{variant:"primary",icon:e.jsx(Xr,{className:"h-4 w-4"}),onClick:me,children:"Aprobar Pago"})]})]})}),e.jsx(Fe,{isOpen:N,onClose:()=>{_(!1),v(null),D("")},title:"Rechazar Pago",size:"md",children:x&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900 dark:text-red-100",children:"Est seguro de rechazar este pago?"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"El pago ser eliminado y el estudiante deber registrar un nuevo pago."}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["Estudiante: ",((J=x.estudiante)==null?void 0:J.nombre_completo)||"N/A"]}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Monto: ",parseFloat(x.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo del rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:j,onChange:Z=>D(Z.target.value),placeholder:"Explique el motivo del rechazo (mnimo 10 caracteres)...",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[j.length,"/10 caracteres mnimos"]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{_(!1),v(null),D("")},children:"Cancelar"}),e.jsx(W,{variant:"danger",icon:e.jsx(xr,{className:"h-4 w-4"}),onClick:ie,disabled:j.trim().length<10,children:"Rechazar Pago"})]})]})}),e.jsx(Fe,{isOpen:Y,onClose:()=>M(!1),title:"Filtros",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mtodo de Pago"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:P,onChange:Z=>{R(Z.target.value),d(1)},children:[e.jsx("option",{value:"",children:"Todos los mtodos"}),e.jsx("option",{value:"Transferencia",children:"Transferencia"}),e.jsx("option",{value:"Efectivo",children:"Efectivo"}),e.jsx("option",{value:"Tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"QR",children:"QR"}),e.jsx("option",{value:"TRANSFERENCIA",children:"TRANSFERENCIA"}),e.jsx("option",{value:"EFECTIVO",children:"EFECTIVO"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:G,onChange:Z=>{T(Z.target.value),d(1)},children:[e.jsx("option",{value:"",children:"Todos los estudiantes"}),$.map(Z=>{const ye=Z.id;return ye?e.jsxs("option",{value:ye,children:[Z.nombre," ",Z.apellido," - CI: ",Z.ci," ",Z.registro_estudiante?`(Reg: ${Z.registro_estudiante})`:""]},ye):null})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:K,children:"Limpiar Filtros"}),e.jsx(W,{variant:"primary",onClick:()=>M(!1),children:"Aplicar"})]})]})})]})},bt={async getMaterias(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc",gestion_id:s.gestion_id||"",estado:s.estado||""},a=await Re("/materias",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener materias"}}catch(r){return{success:!1,message:r.message||"Error al obtener materias"}}},async getMateria(s){try{const r=await Re(`/materias/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Materia no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener materia"}}},async createMateria(s){var r,a,t,n;try{const o=await Be("/materias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateMateria(s,r){var a,t,n,o;try{const i=await os(`/materias/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteMateria(s){var r,a;try{const t=await gs(`/materias/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async searchMaterias(s){try{const r=await Re("/materias/search",{q:s});return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error en la bsqueda"}}catch(r){return{success:!1,message:r.message||"Error en la bsqueda"}}},async exportarMaterias(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",nivel:s.nivel||"",semestre:s.semestre||"",activa:s.activa||""};n.search||delete n.search,n.nivel||delete n.nivel,n.semestre||delete n.semestre,n.activa===""&&delete n.activa;const o=await Re("/materias",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Materias exportadas exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar materias"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar materias"}}},async importarMaterias(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await qt("/materias/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Materias importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar materias",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar materias",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},ik=()=>{var K,ae,ce,J,Z,ye,de,q,ee,se,re,f,w,V,B,ue,ge,_e,je,Ne,Te,ve,F,te,be,z,Ee,Ce,he;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(!1),[E,S]=c.useState(!1),[C,b]=c.useState(!1),[p,N]=c.useState(!1),[_,x]=c.useState(null),[v,j]=c.useState(null),[D,H]=c.useState(!1),[A,P]=c.useState(null),R=Ke.useRef(null),[G,T]=c.useState({nivel:"",semestre:"",activa:""}),{register:$,handleSubmit:L,reset:Y,formState:{errors:M}}=Xe();c.useEffect(()=>{ne()},[i,g,n,G]);const ne=async()=>{var O,X;try{t(!0);const U={page:i,per_page:g,search:n};G.nivel&&(U.nivel=G.nivel),G.semestre&&(U.semestre=G.semestre),G.activa!==""&&(U.activa=G.activa);const Ae=await bt.getMaterias(U);Ae.success&&Ae.data?(r(Ae.data.data||[]),u(Ae.data.last_page||1)):(m.error(Ae.message||"Error al cargar materias"),r([]),u(1))}catch(U){const Ae=((X=(O=U.response)==null?void 0:O.data)==null?void 0:X.message)||U.message||"Error de conexin: No se pudo cargar las materias";m.error(Ae),console.error("Error al cargar materias:",U),r([]),u(1)}finally{t(!1)}},oe=()=>{x(null),Y({codigo_materia:"",nombre:"",sigla:"",horas_teoricas:0,horas_practicas:0,nivel:1,semestre:1}),k(!0)},fe=O=>{x(O),Y(O),k(!0)},Q=async O=>{var X,U;try{const Ae=await bt.getMateria(O.id);j(Ae.data),S(!0)}catch(Ae){const De=((U=(X=Ae.response)==null?void 0:X.data)==null?void 0:U.message)||Ae.message||"Error al cargar los detalles de la materia";m.error(De)}},me=async O=>{var X,U;if(window.confirm("Est seguro de eliminar esta materia?"))try{const Ae=await bt.deleteMateria(O);Ae.success?(m.success(Ae.message||"Materia eliminada exitosamente"),ne()):m.error(Ae.message||"Error al eliminar la materia")}catch(Ae){const De=((U=(X=Ae.response)==null?void 0:X.data)==null?void 0:U.message)||Ae.message||"Error al eliminar la materia";m.error(De)}},xe=async()=>{var O,X;try{t(!0);const U=await bt.exportarMaterias({search:n,...G});if(U.success&&U.data&&Array.isArray(U.data)){if(U.data.length===0){m.error("No hay materias para exportar");return}const Ae=U.data.map(De=>({Cdigo:De.codigo_materia||"",Nombre:De.nombre||"",Sigla:De.sigla||"","Horas Tericas":De.horas_teoricas||0,"Horas Prcticas":De.horas_practicas||0,Nivel:De.nivel||"",Semestre:De.semestre||"",Estado:De.activa!==!1?"Activa":"Inactiva"}));Wt(Ae,`materias_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${Ae.length} materias exitosamente`)}else m.error(U.message||"Error al exportar materias: No se recibieron datos vlidos"),console.error("Error en exportacin:",U)}catch(U){console.error("Error al exportar materias:",U),m.error(((X=(O=U.response)==null?void 0:O.data)==null?void 0:X.message)||U.message||"Error al exportar materias")}finally{t(!1)}},ie=async O=>{var U,Ae;const X=O.target.files[0];if(X){if(!X.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}H(!0),P(null);try{const De=await bt.importarMaterias(X);De.success?(P(De.data),m.success(De.message||"Materias importadas exitosamente"),await ne(),setTimeout(()=>{b(!1),P(null),R.current&&(R.current.value="")},3e3)):(m.error(De.message||"Error al importar materias"),De.errors&&P({errores:Array.isArray(De.errors)?De.errors:[De.errors]}))}catch(De){const Le=((Ae=(U=De.response)==null?void 0:U.data)==null?void 0:Ae.message)||De.message||"Error al importar materias";m.error(Le)}finally{H(!1)}}},le=()=>{const O=`codigo_materia,nombre,sigla,horas_teoricas,horas_practicas,nivel,semestre
MAT001,Matemticas I,MATE1,4,2,1,1
MAT002,Matemticas II,MATE2,4,2,1,2
`,X=new Blob([O],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a");U.href=URL.createObjectURL(X),U.download="template_materias.csv",U.click()},Se=async O=>{var X,U,Ae,De;try{const Le={...O,horas_teoricas:parseInt(O.horas_teoricas),horas_practicas:parseInt(O.horas_practicas),nivel:parseInt(O.nivel),semestre:parseInt(O.semestre)};let Ue;_?Ue=await bt.updateMateria(_.id,Le):Ue=await bt.createMateria(Le),Ue.success?(m.success(Ue.message||(_?"Materia actualizada exitosamente":"Materia creada exitosamente")),k(!1),ne(),Y()):(m.error(Ue.message||"Error al guardar la materia"),Ue.errors&&Object.keys(Ue.errors).forEach(qe=>{m.error(`${qe}: ${Ue.errors[qe]}`)}))}catch(Le){const Ue=((U=(X=Le.response)==null?void 0:X.data)==null?void 0:U.message)||Le.message||"Error al guardar la materia";m.error(Ue),(De=(Ae=Le.response)==null?void 0:Ae.data)!=null&&De.errors&&Object.keys(Le.response.data.errors).forEach(qe=>{m.error(`${qe}: ${Le.response.data.errors[qe]}`)})}},pe=[{key:"codigo_materia",label:"Cdigo",sortable:!0,render:O=>e.jsx("span",{className:"font-mono font-semibold text-green-600",children:O.codigo_materia})},{key:"nombre",label:"Materia",sortable:!0,render:O=>{var X;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white font-semibold",children:((X=O.sigla)==null?void 0:X.substring(0,2))||"M"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:O.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Sigla: ",O.sigla]})]})]})}},{key:"nivel",label:"Nivel",sortable:!0,render:O=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Nivel ",O.nivel]})},{key:"semestre",label:"Semestre",sortable:!0,render:O=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[O.semestre," Semestre"]})},{key:"horas",label:"Horas",render:O=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(Je,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[O.horas_teoricas+O.horas_practicas,"h"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["T: ",O.horas_teoricas,"h | P: ",O.horas_practicas,"h"]})]})},{key:"actions",label:"Acciones",render:O=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q(O),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>fe(O),className:"p-1.5 text-yellow-600 hover:bg-yellow-50 rounded-md transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me(O.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(ys,{className:"h-8 w-8 mr-3 text-green-600"}),"Gestin de Materias"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Administra el catlogo de materias del sistema"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(W,{variant:"outline",icon:e.jsx(or,{className:"h-4 w-4"}),onClick:()=>b(!0),children:"Importar"}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:oe,children:"Nueva Materia"})]})]})}),e.jsxs(ke,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por nombre, cdigo o sigla...",value:n,onChange:O=>o(O.target.value),icon:e.jsx(is,{className:"h-5 w-5 text-gray-400"})})}),e.jsx(W,{variant:"outline",icon:e.jsx(fa,{className:"h-4 w-4"}),onClick:()=>N(!p),children:"Filtros"}),e.jsx(W,{variant:"outline",icon:e.jsx(or,{className:"h-4 w-4"}),onClick:()=>b(!0),children:"Importar"}),e.jsx(W,{variant:"outline",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:xe,disabled:a,children:"Exportar"})]}),p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nivel"}),e.jsx(we,{type:"number",placeholder:"Filtrar por nivel...",value:G.nivel,onChange:O=>T(X=>({...X,nivel:O.target.value})),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Semestre"}),e.jsx(we,{type:"number",placeholder:"Filtrar por semestre...",value:G.semestre,onChange:O=>T(X=>({...X,semestre:O.target.value})),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:G.activa,onChange:O=>T(X=>({...X,activa:O.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"true",children:"Activas"}),e.jsx("option",{value:"false",children:"Inactivas"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{T({nivel:"",semestre:"",activa:""}),ne()},children:"Limpiar Filtros"})})]})]}),e.jsxs(ke,{children:[e.jsx(ds,{columns:pe,data:s,loading:a,emptyMessage:"No hay materias registradas"}),d>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar"}),e.jsxs("select",{value:g,onChange:O=>h(Number(O.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"por pgina"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"outline",size:"sm",onClick:()=>l(O=>Math.max(1,O-1)),disabled:i===1,children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Pgina ",i," de ",d]}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>l(O=>Math.min(d,O+1)),disabled:i===d,children:"Siguiente"})]})]})]}),e.jsx(Fe,{isOpen:y,onClose:()=>k(!1),title:_?"Editar Materia":"Nueva Materia",size:"lg",children:e.jsxs("form",{onSubmit:L(Se),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Cdigo de Materia",...$("codigo_materia",{required:"El cdigo es obligatorio"}),error:(K=M.codigo_materia)==null?void 0:K.message,placeholder:"Ej: INF-101"}),e.jsx(we,{label:"Sigla",...$("sigla",{required:"La sigla es obligatoria"}),error:(ae=M.sigla)==null?void 0:ae.message,placeholder:"Ej: PROG1"})]}),e.jsx(we,{label:"Nombre de la Materia",...$("nombre",{required:"El nombre es obligatorio"}),error:(ce=M.nombre)==null?void 0:ce.message,placeholder:"Ej: Programacin I"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Horas Tericas",type:"number",min:"0",max:"10",...$("horas_teoricas",{required:"Las horas tericas son obligatorias",min:0,max:10}),error:(J=M.horas_teoricas)==null?void 0:J.message}),e.jsx(we,{label:"Horas Prcticas",type:"number",min:"0",max:"10",...$("horas_practicas",{required:"Las horas prcticas son obligatorias",min:0,max:10}),error:(Z=M.horas_practicas)==null?void 0:Z.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Nivel",type:"number",min:"1",max:"5",...$("nivel",{required:"El nivel es obligatorio",min:1,max:5}),error:(ye=M.nivel)==null?void 0:ye.message}),e.jsx(we,{label:"Semestre",type:"number",min:"1",max:"10",...$("semestre",{required:"El semestre es obligatorio",min:1,max:10}),error:(de=M.semestre)==null?void 0:de.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",children:_?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:E,onClose:()=>S(!1),title:"Detalles de la Materia",size:"lg",children:v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white text-2xl font-bold",children:((se=(ee=(q=v.data)==null?void 0:q.materia)==null?void 0:ee.sigla)==null?void 0:se.substring(0,2))||"M"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:(f=(re=v.data)==null?void 0:re.materia)==null?void 0:f.nombre}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(V=(w=v.data)==null?void 0:w.materia)==null?void 0:V.codigo_materia," - ",(ue=(B=v.data)==null?void 0:B.materia)==null?void 0:ue.sigla]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Nivel"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(ts,{className:"h-4 w-4 mr-2 text-gray-400"}),"Nivel ",(_e=(ge=v.data)==null?void 0:ge.materia)==null?void 0:_e.nivel]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Semestre"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(a1,{className:"h-4 w-4 mr-2 text-gray-400"}),(Ne=(je=v.data)==null?void 0:je.materia)==null?void 0:Ne.semestre," Semestre"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horas Tericas"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-gray-400"}),(ve=(Te=v.data)==null?void 0:Te.materia)==null?void 0:ve.horas_teoricas," horas"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horas Prcticas"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-gray-400"}),(te=(F=v.data)==null?void 0:F.materia)==null?void 0:te.horas_practicas," horas"]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total de Horas"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(((z=(be=v.data)==null?void 0:be.materia)==null?void 0:z.horas_teoricas)||0)+(((Ce=(Ee=v.data)==null?void 0:Ee.materia)==null?void 0:Ce.horas_practicas)||0)," horas semanales"]})]}),((he=v.data)==null?void 0:he.estadisticas)&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.data.estadisticas.total_grupos}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Grupos"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.data.estadisticas.grupos_activos}),e.jsx("p",{className:"text-xs text-gray-600",children:"Grupos Activos"})]})]})]})]})}),e.jsx(Fe,{isOpen:C,onClose:()=>{b(!1),P(null),R.current&&(R.current.value="")},title:"Importar Materias",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-info-900 dark:text-info-100 mb-2",children:"Formato del archivo"}),e.jsx("p",{className:"text-sm text-info-700 dark:text-info-300 mb-2",children:"El archivo debe ser Excel (.xlsx, .xls) o CSV con las siguientes columnas:"}),e.jsxs("ul",{className:"text-sm text-info-700 dark:text-info-300 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"codigo_materia"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"nombre"})," (obligatorio)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"sigla"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"horas_teoricas"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"horas_practicas"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"nivel"})," (opcional)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"semestre"})," (opcional)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar archivo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{ref:R,type:"file",accept:".xlsx,.xls,.csv",onChange:ie,disabled:D,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),e.jsx(W,{type:"button",variant:"outline",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:le,children:"Template"})]})]}),D&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando materias..."})]}),A&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Resultado de la importacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-success-600",children:"Creados:"})," ",A.creados||0]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-info-600",children:"Actualizados:"})," ",A.actualizados||0]}),A.errores&&A.errores.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-semibold text-error-600 mb-2",children:"Errores:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:A.errores.map((O,X)=>e.jsx("p",{className:"text-xs text-error-600",children:O},X))})]})]})]})]})})]})},jt={async getAulas(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,sort_by:s.sort_by||"nombre",sort_direction:s.sort_direction||"asc"};s.search&&s.search.trim()!==""&&(r.search=s.search.trim()),s.tipo&&s.tipo!==""&&(r.tipo=s.tipo),s.edificio&&s.edificio.trim()!==""&&(r.edificio=s.edificio.trim()),s.activa!==void 0&&s.activa!==null&&s.activa!==""&&(r.activa=s.activa);const a=await Re("/aulas",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener aulas"}}catch(r){return{success:!1,message:r.message||"Error al obtener aulas"}}},async getAula(s){try{const r=await Re(`/aulas/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Aula no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener aula"}}},async createAula(s){var r,a,t,n;try{const o=await Be("/aulas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateAula(s,r){var a,t,n,o;try{const i=await os(`/aulas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteAula(s){var r,a;try{const t=await gs(`/aulas/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async getAulasDisponibles(s){try{const r=await Re("/aulas/disponibles",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener aulas disponibles"}}catch(r){return{success:!1,message:r.message||"Error al obtener aulas disponibles"}}},async getOcupacion(s,r={}){try{const a=await Re(`/aulas/${s}/ocupacion`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener ocupacin del aula"}}catch(a){return{success:!1,message:a.message||"Error al obtener ocupacin del aula"}}},async exportarAulas(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",tipo:s.tipo||"",edificio:s.edificio||"",activa:s.activa||""};n.search||delete n.search,n.tipo||delete n.tipo,n.edificio||delete n.edificio,n.activa===""&&delete n.activa;const o=await Re("/aulas",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Aulas exportadas exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar aulas"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar aulas"}}},async importarAulas(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await qt("/aulas/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Aulas importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar aulas",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar aulas",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},lk=()=>{var ce,J,Z,ye,de,q,ee,se,re,f,w,V,B,ue,ge,_e,je,Ne,Te,ve,F,te,be,z,Ee,Ce;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(!1),[E,S]=c.useState(!1),[C,b]=c.useState(!1),[p,N]=c.useState(!1),[_,x]=c.useState(null),[v,j]=c.useState(null),[D,H]=c.useState(!1),[A,P]=c.useState(null),R=Ke.useRef(null),[G,T]=c.useState({tipo:"",edificio:"",activa:""}),{register:$,handleSubmit:L,reset:Y,formState:{errors:M}}=Xe();c.useEffect(()=>{ne()},[i,g,n,G]);const ne=async()=>{var he,O;try{t(!0);const X={page:i,per_page:g,search:n};G.tipo&&(X.tipo=G.tipo),G.edificio&&(X.edificio=G.edificio),G.activa!==""&&(X.activa=G.activa);const U=await jt.getAulas(X);U.success&&U.data?(r(U.data.data||[]),u(U.data.last_page||1)):(m.error(U.message||"Error al cargar aulas"),r([]),u(1))}catch(X){const U=((O=(he=X.response)==null?void 0:he.data)==null?void 0:O.message)||X.message||"Error de conexin: No se pudo cargar las aulas";m.error(U),console.error("Error al cargar aulas:",X),r([]),u(1)}finally{t(!1)}},oe=()=>{x(null),Y({codigo_aula:"",nombre:"",capacidad:30,edificio:"",piso:1,tipo:"aula",activa:!0}),k(!0)},fe=he=>{x(he),Y(he),k(!0)},Q=async he=>{var O,X;try{const U=await jt.getAula(he.id);j(U.data),S(!0)}catch(U){const Ae=((X=(O=U.response)==null?void 0:O.data)==null?void 0:X.message)||U.message||"Error al cargar los detalles del aula";m.error(Ae)}},me=async he=>{var O,X;if(window.confirm("Est seguro de eliminar esta aula?"))try{const U=await jt.deleteAula(he);U.success?(m.success(U.message||"Aula eliminada exitosamente"),ne()):m.error(U.message||"Error al eliminar el aula")}catch(U){const Ae=((X=(O=U.response)==null?void 0:O.data)==null?void 0:X.message)||U.message||"Error al eliminar el aula";m.error(Ae)}},xe=async()=>{var he,O;try{t(!0);const X=await jt.exportarAulas({search:n,...G});if(X.success&&X.data&&Array.isArray(X.data)){if(X.data.length===0){m.error("No hay aulas para exportar");return}const U=X.data.map(Ae=>({Cdigo:Ae.codigo_aula||"",Nombre:Ae.nombre||"",Edificio:Ae.edificio||"",Piso:Ae.piso||"",Capacidad:Ae.capacidad||0,Tipo:Ae.tipo||"",Estado:Ae.activa!==!1?"Activa":"Inactiva"}));Wt(U,`aulas_${new Date().toISOString().split("T")[0]}.csv`),m.success(`Se exportaron ${U.length} aulas exitosamente`)}else m.error(X.message||"Error al exportar aulas: No se recibieron datos vlidos"),console.error("Error en exportacin:",X)}catch(X){console.error("Error al exportar aulas:",X),m.error(((O=(he=X.response)==null?void 0:he.data)==null?void 0:O.message)||X.message||"Error al exportar aulas")}finally{t(!1)}},ie=async()=>{var O,X,U,Ae;const he=(X=(O=R.current)==null?void 0:O.files)==null?void 0:X[0];if(!he){m.error("Por favor selecciona un archivo");return}if(!he.name.match(/\.(xlsx|xls|csv)$/i)){m.error("Por favor, selecciona un archivo Excel o CSV");return}try{H(!0),P(null);const De=await jt.importarAulas(he);De.success?(P({success:!0,message:De.message||"Aulas importadas exitosamente",data:De.data}),m.success(De.message||"Aulas importadas exitosamente"),await ne(),setTimeout(()=>{b(!1),P(null),R.current&&(R.current.value="")},2e3)):(P({success:!1,message:De.message||"Error al importar aulas",errors:De.errors}),m.error(De.message||"Error al importar aulas"))}catch(De){const Le=((Ae=(U=De.response)==null?void 0:U.data)==null?void 0:Ae.message)||De.message||"Error al importar aulas";P({success:!1,message:Le}),m.error(Le)}finally{H(!1)}},le=()=>{const he=`codigo_aula,nombre,edificio,piso,capacidad,tipo,activa
A-101,Aula 101,Edificio A,1,40,aula,true
LAB-201,Laboratorio 201,Edificio B,2,25,laboratorio,true
`,O=new Blob([he],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(O),X.download="template_aulas.csv",X.click()},Se=async he=>{var O,X,U,Ae;try{const De={...he,activa:he.activa==="true"||he.activa===!0||he.activa==="1"||he.activa===1,capacidad:parseInt(he.capacidad),piso:parseInt(he.piso)};let Le;_?Le=await jt.updateAula(_.id,De):Le=await jt.createAula(De),Le.success?(m.success(Le.message||(_?"Aula actualizada exitosamente":"Aula creada exitosamente")),k(!1),ne(),Y()):(m.error(Le.message||"Error al guardar el aula"),Le.errors&&Object.keys(Le.errors).forEach(Ue=>{m.error(`${Ue}: ${Le.errors[Ue]}`)}))}catch(De){const Le=((X=(O=De.response)==null?void 0:O.data)==null?void 0:X.message)||De.message||"Error al guardar el aula";m.error(Le),(Ae=(U=De.response)==null?void 0:U.data)!=null&&Ae.errors&&Object.keys(De.response.data.errors).forEach(Ue=>{m.error(`${Ue}: ${De.response.data.errors[Ue]}`)})}},pe=he=>{switch(he){case"laboratorio":return"bg-blue-100 text-blue-800";case"auditorio":return"bg-purple-100 text-purple-800";default:return"bg-green-100 text-green-800"}},K=he=>{switch(he){case"laboratorio":return"Laboratorio";case"auditorio":return"Auditorio";default:return"Aula"}},ae=[{key:"codigo_aula",label:"Cdigo",sortable:!0,render:he=>e.jsx("span",{className:"font-mono font-semibold text-purple-600",children:he.codigo_aula})},{key:"nombre",label:"Aula",sortable:!0,render:he=>{var O;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:((O=he.codigo_aula)==null?void 0:O.substring(0,1))||"A"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nombre}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Js,{className:"h-3 w-3 mr-1"}),"Edificio ",he.edificio," - Piso ",he.piso]})]})]})}},{key:"tipo",label:"Tipo",sortable:!0,render:he=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${pe(he.tipo)}`,children:K(he.tipo)})},{key:"capacidad",label:"Capacidad",sortable:!0,render:he=>e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[he.capacidad," personas"]})]})},{key:"activa",label:"Estado",render:he=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${he.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:he.activa?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:he=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q(he),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>fe(he),className:"p-1.5 text-yellow-600 hover:bg-yellow-50 rounded-md transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me(he.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ht,{className:"h-8 w-8 mr-3 text-purple-600"}),"Gestin de Aulas"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Administra las aulas y espacios fsicos del sistema"})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:oe,children:"Nueva Aula"})]})}),e.jsxs(ke,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(we,{type:"text",placeholder:"Buscar por cdigo, nombre o edificio...",value:n,onChange:he=>o(he.target.value),icon:e.jsx(is,{className:"h-5 w-5 text-gray-400"})})}),e.jsx(W,{variant:"outline",icon:e.jsx(fa,{className:"h-4 w-4"}),onClick:()=>N(!p),children:"Filtros"}),e.jsx(W,{variant:"outline",icon:e.jsx(or,{className:"h-4 w-4"}),onClick:()=>b(!0),children:"Importar"}),e.jsx(W,{variant:"outline",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:xe,disabled:a,children:"Exportar"})]}),p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo"}),e.jsxs("select",{value:G.tipo,onChange:he=>T(O=>({...O,tipo:he.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"aula",children:"Aula"}),e.jsx("option",{value:"laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"auditorio",children:"Auditorio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Edificio"}),e.jsx(we,{type:"text",placeholder:"Filtrar por edificio...",value:G.edificio,onChange:he=>T(O=>({...O,edificio:he.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:G.activa,onChange:he=>T(O=>({...O,activa:he.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"true",children:"Activas"}),e.jsx("option",{value:"false",children:"Inactivas"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{T({tipo:"",edificio:"",activa:""}),ne()},children:"Limpiar Filtros"})})]})]}),e.jsxs(ke,{children:[e.jsx(ds,{columns:ae,data:s,loading:a,emptyMessage:"No hay aulas registradas"}),d>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar"}),e.jsxs("select",{value:g,onChange:he=>h(Number(he.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"por pgina"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"outline",size:"sm",onClick:()=>l(he=>Math.max(1,he-1)),disabled:i===1,children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Pgina ",i," de ",d]}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>l(he=>Math.min(d,he+1)),disabled:i===d,children:"Siguiente"})]})]})]}),e.jsx(Fe,{isOpen:y,onClose:()=>k(!1),title:_?"Editar Aula":"Nueva Aula",size:"lg",children:e.jsxs("form",{onSubmit:L(Se),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Cdigo de Aula",...$("codigo_aula",{required:"El cdigo es obligatorio"}),error:(ce=M.codigo_aula)==null?void 0:ce.message,placeholder:"Ej: A-101"}),e.jsx(we,{label:"Nombre",...$("nombre",{required:"El nombre es obligatorio"}),error:(J=M.nombre)==null?void 0:J.message,placeholder:"Ej: Aula 101"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(we,{label:"Edificio",...$("edificio",{required:"El edificio es obligatorio"}),error:(Z=M.edificio)==null?void 0:Z.message,placeholder:"Ej: A"}),e.jsx(we,{label:"Piso",type:"number",min:"1",max:"10",...$("piso",{required:"El piso es obligatorio",min:1,max:10}),error:(ye=M.piso)==null?void 0:ye.message}),e.jsx(we,{label:"Capacidad",type:"number",min:"1",max:"500",...$("capacidad",{required:"La capacidad es obligatoria",min:1,max:500}),error:(de=M.capacidad)==null?void 0:de.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Aula"}),e.jsxs("select",{...$("tipo",{required:"El tipo es obligatorio"}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"aula",children:"Aula"}),e.jsx("option",{value:"laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"auditorio",children:"Auditorio"})]}),M.tipo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:M.tipo.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{...$("activa",{setValueAs:he=>he==="true"||he===!0||he==="1"||he===1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"true",children:"Activa"}),e.jsx("option",{value:"false",children:"Inactiva"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",children:_?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:E,onClose:()=>S(!1),title:"Detalles del Aula",size:"lg",children:v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:((se=(ee=(q=v.data)==null?void 0:q.aula)==null?void 0:ee.codigo_aula)==null?void 0:se.substring(0,1))||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:(f=(re=v.data)==null?void 0:re.aula)==null?void 0:f.nombre}),e.jsx("p",{className:"text-sm text-gray-500",children:(V=(w=v.data)==null?void 0:w.aula)==null?void 0:V.codigo_aula})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Edificio"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2 text-gray-400"}),"Edificio ",(ue=(B=v.data)==null?void 0:B.aula)==null?void 0:ue.edificio]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Piso"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(n1,{className:"h-4 w-4 mr-2 text-gray-400"}),"Piso ",(_e=(ge=v.data)==null?void 0:ge.aula)==null?void 0:_e.piso]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Capacidad"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2 text-gray-400"}),(Ne=(je=v.data)==null?void 0:je.aula)==null?void 0:Ne.capacidad," personas"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tipo"}),e.jsx("p",{className:"font-medium",children:K((ve=(Te=v.data)==null?void 0:Te.aula)==null?void 0:ve.tipo)})]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${(te=(F=v.data)==null?void 0:F.aula)!=null&&te.activa?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),e.jsx("p",{className:`text-lg font-bold ${(z=(be=v.data)==null?void 0:be.aula)!=null&&z.activa?"text-green-600":"text-red-600"}`,children:(Ce=(Ee=v.data)==null?void 0:Ee.aula)!=null&&Ce.activa?"Activa":"Inactiva"})]})]})}),e.jsx(Fe,{isOpen:C,onClose:()=>{b(!1),P(null),R.current&&(R.current.value="")},title:"Importar Aulas",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Selecciona un archivo CSV o Excel con las aulas. Puedes descargar el template para ver el formato requerido."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Archivo (CSV o Excel)"}),e.jsx("input",{ref:R,type:"file",accept:".csv,.xlsx,.xls",className:`block w-full text-sm text-gray-500 dark:text-gray-400
                file:mr-4 file:py-2 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary-500 file:text-white
                hover:file:bg-primary-600
                file:cursor-pointer
                border border-gray-300 dark:border-gray-600 rounded-lg`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(W,{variant:"outline",size:"sm",onClick:le,children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Descargar Template"]})}),D&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Importando aulas..."})]}),A&&e.jsxs("div",{className:`p-4 rounded-lg ${A.success?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("p",{className:`text-sm ${A.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:A.message}),A.errors&&e.jsx("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside",children:Object.entries(A.errors).map(([he,O])=>e.jsxs("li",{children:[he,": ",Array.isArray(O)?O.join(", "):O]},he))}),A.data&&e.jsxs("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:["Creados: ",A.data.creados||0]}),e.jsxs("p",{children:["Actualizados: ",A.data.actualizados||0]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{b(!1),P(null),R.current&&(R.current.value="")},children:"Cancelar"}),e.jsx(W,{variant:"primary",onClick:ie,disabled:D,children:D?"Importando...":"Importar"})]})]})})]})},ba={async getGrupos(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,sort_by:s.sort_by||"codigo",sort_direction:s.sort_direction||"asc"};s.search&&s.search.trim()!==""&&(r.search=s.search.trim()),s.gestion_id&&s.gestion_id!==""&&(r.gestion_id=s.gestion_id),s.materia_id&&s.materia_id!==""&&(r.materia_id=s.materia_id),s.activo!==void 0&&s.activo!==null&&s.activo!==""&&(r.activo=s.activo);const a=await Re("/admin/grupos",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener grupos"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupos"}}},async getGrupo(s){try{const r=await Re(`/admin/grupos/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Grupo no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupo"}}},async createGrupo(s){var r,a,t,n;try{const o=await Be("/admin/grupos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateGrupo(s,r){var a,t,n,o;try{const i=await os(`/admin/grupos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteGrupo(s){var r,a;try{const t=await gs(`/admin/grupos/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async getDatosFormulario(){var s,r;try{const a=await Re("/admin/grupos/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener datos del formulario"}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||"Error al obtener datos del formulario"}}},async getModulosPorPrograma(s){var r,a;try{const t=await Re(`/admin/grupos/modulos-por-programa/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||"Error al obtener mdulos del programa"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al obtener mdulos del programa"}}},async getGruposPorGestion(s){try{const r=await Re("/admin/grupos",{gestion_id:s});return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener grupos de la gestin"}}catch(r){return{success:!1,message:r.message||"Error al obtener grupos de la gestin"}}},async exportarGrupos(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",gestion_id:s.gestion_id||"",materia_id:s.materia_id||"",activo:s.activo||""};n.search||delete n.search,n.gestion_id||delete n.gestion_id,n.materia_id||delete n.materia_id,n.activo===""&&delete n.activo;const o=await Re("/admin/grupos",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[],message:"Grupos exportados exitosamente"}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar grupos"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar grupos"}}},async importarGrupos(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await qt("/admin/grupos/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Grupos importados exitosamente"}:{success:!1,message:i.data.message||"Error al importar grupos",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar grupos",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},Fx=()=>{var je,Ne,Te,ve;const[s,r]=c.useState([]),[a,t]=c.useState({programas:[],modulos:[],docentes:[],horarios:[]}),[n,o]=c.useState([]),[i,l]=c.useState(!0),[d,u]=c.useState(""),[g,h]=c.useState(""),[y,k]=c.useState(""),[E,S]=c.useState(""),[C,b]=c.useState(1),[p,N]=c.useState(1),[_,x]=c.useState(10),[v,j]=c.useState(0),[D,H]=c.useState(0),[A,P]=c.useState(0),[R,G]=c.useState("fecha_ini"),[T,$]=c.useState("desc"),[L,Y]=c.useState(!1),[M,ne]=c.useState(!1),[oe,fe]=c.useState(null),[Q,me]=c.useState(null),[xe,ie]=c.useState([]),[le,Se]=c.useState({total:0,activos:0}),{register:pe,handleSubmit:K,reset:ae,formState:{errors:ce},watch:J,trigger:Z}=Xe({mode:"onChange"}),ye=J("programa_id");c.useEffect(()=>{de()},[]),c.useEffect(()=>{q()},[C,_,d,g,y,E,R,T]),c.useEffect(()=>{(async()=>{if(ye&&ye!=="")try{const te=await ba.getModulosPorPrograma(ye);if(te.success&&te.data){o(te.data);const be=J("modulo_id");if(be&&!te.data.some(z=>(z.id||z.modulo_id)===parseInt(be))){const z=J();ae({...z,modulo_id:""})}}else o([]),te.message&&m.error(te.message)}catch(te){console.error("Error al cargar mdulos:",te),o([])}else{o([]);const te=J();te.modulo_id&&ae({...te,modulo_id:""})}})()},[ye]);const de=async()=>{var F,te,be,z,Ee,Ce,he,O;try{console.log(" Iniciando carga de datos del formulario...");const X=await ba.getDatosFormulario();console.log(" Respuesta completa del servicio:",X),X.success&&X.data?(console.log(" Datos del formulario cargados:",X.data),console.log(" Programas:",((F=X.data.programas)==null?void 0:F.length)||0),console.log(" Mdulos:",((te=X.data.modulos)==null?void 0:te.length)||0),console.log(" Docentes:",((be=X.data.docentes)==null?void 0:be.length)||0),console.log(" Horarios:",((z=X.data.horarios)==null?void 0:z.length)||0),t({programas:Array.isArray(X.data.programas)?X.data.programas:[],modulos:Array.isArray(X.data.modulos)?X.data.modulos:[],docentes:Array.isArray(X.data.docentes)?X.data.docentes:[],horarios:Array.isArray(X.data.horarios)?X.data.horarios:[]})):(console.error(" Error en respuesta:",X),m.error(X.message||"Error al cargar datos del formulario"))}catch(X){console.error(" Error al cargar datos del formulario:",X),console.error(" Detalles del error:",{message:X.message,response:(Ee=X.response)==null?void 0:Ee.data,status:(Ce=X.response)==null?void 0:Ce.status});const U=((O=(he=X.response)==null?void 0:he.data)==null?void 0:O.message)||X.message||"Error al cargar datos del formulario";m.error(U)}},q=async()=>{try{l(!0);const F=await ba.getGrupos({page:C,per_page:_,search:d,programa_id:g||void 0,modulo_id:y||void 0,docente_id:E||void 0,sort_by:R,sort_direction:T});if(F.success&&F.data){const te=F.data.data||[];r(te),N(F.data.last_page||1),j(F.data.total||0),H(F.data.from||0),P(F.data.to||0),Se({total:F.data.total||0,activos:te.filter(be=>be.fecha_fin?new Date(be.fecha_fin)>=new Date:!1).length||0})}else m.error(F.message||"Error al cargar grupos"),r([]),N(1),j(0),H(0),P(0)}catch{m.error("Error al cargar grupos"),r([]),N(1),j(0),H(0),P(0)}finally{l(!1)}},ee=()=>{ie([...xe,{horario_id:"",aula:""}])},se=F=>{ie(xe.filter((te,be)=>be!==F))},re=(F,te,be)=>{const z=[...xe];z[F][te]=be,ie(z)},f=async F=>{var te,be,z,Ee;if(!F.fecha_ini){m.error("La fecha de inicio es obligatoria");return}if(!F.fecha_fin){m.error("La fecha de fin es obligatoria");return}if(F.fecha_fin<=F.fecha_ini){m.error("La fecha de fin debe ser mayor a la fecha de inicio");return}if(!F.programa_id){m.error("El programa es obligatorio");return}if(!F.modulo_id){m.error("El mdulo es obligatorio");return}if(!F.docente_id){m.error("El docente es obligatorio");return}try{l(!0);const Ce=X=>{if(!X)return null;const U=X.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(U))return U;if(X instanceof Date){const Ae=X.getFullYear(),De=String(X.getMonth()+1).padStart(2,"0"),Le=String(X.getDate()).padStart(2,"0");return`${Ae}-${De}-${Le}`}return U},he={fecha_ini:Ce(F.fecha_ini),fecha_fin:Ce(F.fecha_fin),programa_id:parseInt(F.programa_id),modulo_id:parseInt(F.modulo_id),docente_id:parseInt(F.docente_id),horarios:xe.filter(X=>X.horario_id).map(X=>({horario_id:parseInt(X.horario_id),aula:X.aula&&X.aula.trim()!==""?X.aula.trim():null}))};let O;if(oe){const X=oe.grupo_id||oe.id;if(!X){m.error("No se pudo identificar el grupo. Por favor, recarga la pgina."),l(!1);return}O=await ba.updateGrupo(X,he)}else O=await ba.createGrupo(he);O.success?(m.success(O.message||(oe?"Grupo actualizado exitosamente":"Grupo creado exitosamente")),Y(!1),ae(),fe(null),ie([]),await q()):(m.error(O.message||"Error al guardar grupo"),O.errors&&(Array.isArray(O.errors)?O.errors:Object.values(O.errors).flat()).forEach(U=>{typeof U=="string"&&U.trim()?m.error(U,{duration:4e3}):Array.isArray(U)&&U.length>0&&m.error(U[0],{duration:4e3})}))}catch(Ce){const he=((be=(te=Ce.response)==null?void 0:te.data)==null?void 0:be.message)||Ce.message||"Error al guardar grupo";if(m.error(he),(Ee=(z=Ce.response)==null?void 0:z.data)!=null&&Ee.errors){const O=Ce.response.data.errors;(Array.isArray(O)?O:Object.values(O).flat()).forEach(U=>{typeof U=="string"&&U.trim()?m.error(U,{duration:4e3}):Array.isArray(U)&&U.length>0&&m.error(U[0],{duration:4e3})})}}finally{l(!1)}},w=async F=>{var be,z,Ee,Ce,he;const te=F.grupo_id||F.id;if(!te){m.error("No se pudo identificar el grupo");return}try{l(!0);const O=await ba.getGrupo(te);if(O.success){const X=O.data;fe(X);const U=X.fecha_ini?typeof X.fecha_ini=="string"?X.fecha_ini.split("T")[0]:X.fecha_ini:"",Ae=X.fecha_fin?typeof X.fecha_fin=="string"?X.fecha_fin.split("T")[0]:X.fecha_fin:"";ae({fecha_ini:U,fecha_fin:Ae,programa_id:((be=X.programa_id)==null?void 0:be.toString())||"",modulo_id:((z=X.modulo_id)==null?void 0:z.toString())||"",docente_id:((Ee=X.docente_id)==null?void 0:Ee.toString())||""}),X.programa_id&&ba.getModulosPorPrograma(X.programa_id).then(De=>{De.success&&De.data&&o(De.data)}).catch(De=>{console.error("Error al cargar mdulos:",De)}),X.horarios&&X.horarios.length>0?ie(X.horarios.map(De=>{var Le,Ue;return{horario_id:((Le=De.horario_id||De.id)==null?void 0:Le.toString())||"",aula:((Ue=De.pivot)==null?void 0:Ue.aula)||""}})):ie([]),Y(!0)}else m.error(O.message||"Error al cargar datos del grupo")}catch(O){const X=((he=(Ce=O.response)==null?void 0:Ce.data)==null?void 0:he.message)||O.message||"Error al cargar datos del grupo";m.error(X)}finally{l(!1)}},V=async F=>{var be,z;const te=F.grupo_id||F.id;if(!te){m.error("No se pudo identificar el grupo");return}try{const Ee=await ba.getGrupo(te);Ee.success?(me(Ee.data),ne(!0)):m.error(Ee.message||"Error al cargar detalles del grupo")}catch(Ee){const Ce=((z=(be=Ee.response)==null?void 0:be.data)==null?void 0:z.message)||Ee.message||"Error al cargar detalles del grupo";m.error(Ce)}},B=async F=>{var Ee,Ce,he,O;const te=F.grupo_id||F.id;if(!te){m.error("No se pudo identificar el grupo");return}const be=((Ee=F.programa)==null?void 0:Ee.nombre)||"N/A",z=((Ce=F.modulo)==null?void 0:Ce.nombre)||"N/A";if(window.confirm(`Est seguro de eliminar el grupo "${be} - ${z}"?`))try{const X=await ba.deleteGrupo(te);X.success?(m.success(X.message),q()):m.error(X.message)}catch(X){const U=((O=(he=X.response)==null?void 0:he.data)==null?void 0:O.message)||X.message||"Error al eliminar grupo";m.error(U)}},ue=()=>{fe(null),ae({fecha_ini:"",fecha_fin:"",programa_id:"",modulo_id:"",docente_id:""}),ie([]),Y(!0)},ge=(F,te)=>{G(F),$(te),b(1)},_e=[{key:"programa",label:"Programa",render:F=>{var te;return((te=F.programa)==null?void 0:te.nombre)||"N/A"}},{key:"modulo",label:"Mdulo",render:F=>{var te;return((te=F.modulo)==null?void 0:te.nombre)||"N/A"}},{key:"docente",label:"Docente",render:F=>F.docente&&`${F.docente.nombre||""} ${F.docente.apellido||""}`.trim()||"N/A"},{key:"fecha_ini",label:"Fecha Inicio",render:F=>F.fecha_ini?new Date(F.fecha_ini).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"},{key:"fecha_fin",label:"Fecha Fin",render:F=>F.fecha_fin?new Date(F.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"},{key:"estudiantes_count",label:"Estudiantes",render:F=>F.estudiantes_count||0},{key:"actions",label:"Acciones",render:F=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),V(F)},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),w(F)},className:"p-2 text-accent-600 hover:bg-accent-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),B(F)},className:"p-2 text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(ks,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Grupos de Enseanza"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gestin de grupos con asignacin de programa, mdulo, docente y horarios"})]}),e.jsx(W,{onClick:ue,icon:e.jsx(We,{className:"h-5 w-5"}),children:"Nuevo Grupo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Grupos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:le.total})]}),e.jsx(Rs,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-100 text-sm",children:"Grupos Activos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:le.activos})]}),e.jsx(Me,{className:"h-12 w-12 text-accent-200"})]})})]}),e.jsx(ke,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(we,{type:"text",placeholder:"Buscar por programa, mdulo o docente...",value:d,onChange:F=>{u(F.target.value),b(1)},icon:is})}),e.jsx("div",{children:e.jsxs("select",{value:g,onChange:F=>{h(F.target.value),b(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los programas"}),a.programas&&a.programas.length>0&&a.programas.map(F=>e.jsx("option",{value:F.id,children:F.nombre},F.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:E,onChange:F=>{S(F.target.value),b(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Todos los docentes"}),a.docentes&&a.docentes.length>0&&a.docentes.map(F=>e.jsx("option",{value:F.id,children:F.nombre_completo},F.id))]})})]})}),e.jsx(ke,{children:e.jsx(ds,{columns:_e,data:s,loading:i,onSort:ge,sortBy:R,sortDirection:T,pagination:{currentPage:C,totalPages:p,perPage:_,total:v,from:D,to:A,onPageChange:b,onPerPageChange:x}})}),e.jsx(Fe,{isOpen:L,onClose:()=>{Y(!1),fe(null),ie([]),ae()},title:oe?"Editar Grupo":"Nuevo Grupo",size:"xl",children:e.jsxs("form",{onSubmit:K(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa *"}),e.jsxs("select",{...pe("programa_id",{required:"El programa es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar programa..."}),Array.isArray(a.programas)&&a.programas.length>0?a.programas.map(F=>e.jsx("option",{value:F.id||F.programa_id,children:F.nombre||"Sin nombre"},F.id||F.programa_id)):e.jsx("option",{value:"",disabled:!0,children:i?"Cargando programas...":"No hay programas disponibles"})]}),ce.programa_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ce.programa_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mdulo *"}),e.jsxs("select",{...pe("modulo_id",{required:"El mdulo es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",disabled:!ye||ye==="",children:[e.jsx("option",{value:"",children:!ye||ye===""?"Primero seleccione un programa...":n.length===0?i?"Cargando mdulos...":"No hay mdulos disponibles para este programa":"Seleccionar mdulo..."}),Array.isArray(n)&&n.length>0?n.map(F=>{const te=F.id||F.modulo_id;return e.jsxs("option",{value:te,children:[F.nombre||"Sin nombre"," (",F.credito||0," crditos)"]},te)}):null]}),ce.modulo_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ce.modulo_id.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente Responsable *"}),e.jsxs("select",{...pe("docente_id",{required:"El docente es requerido"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),Array.isArray(a.docentes)&&a.docentes.length>0?a.docentes.map(F=>e.jsxs("option",{value:F.id,children:[F.nombre_completo||`${F.nombre||""} ${F.apellido||""}`.trim()," - CI: ",F.ci||"N/A"]},F.id)):e.jsx("option",{value:"",disabled:!0,children:i?"Cargando docentes...":"No hay docentes disponibles"})]}),ce.docente_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:ce.docente_id.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio *"}),e.jsx(we,{type:"date",...pe("fecha_ini",{required:"La fecha de inicio es requerida"}),error:(je=ce.fecha_ini)==null?void 0:je.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin *"}),e.jsx(we,{type:"date",...pe("fecha_fin",{required:"La fecha de fin es requerida",validate:F=>{const te=J("fecha_ini");return te&&F&&F<=te?"La fecha de fin debe ser mayor a la fecha de inicio":!0}}),error:(Ne=ce.fecha_fin)==null?void 0:Ne.message,onBlur:()=>Z("fecha_fin")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Horarios del Grupo"}),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:ee,icon:e.jsx(We,{className:"h-4 w-4"}),children:"Agregar Horario"})]}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[xe.map((F,te)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Horario ",te+1]}),e.jsx("button",{type:"button",onClick:()=>se(te),className:"p-1 text-error-600 hover:bg-error-50 rounded",children:e.jsx(xr,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("select",{value:F.horario_id,onChange:be=>re(te,"horario_id",be.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-800",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),a.horarios&&a.horarios.length>0?a.horarios.filter(be=>!xe.some((z,Ee)=>Ee!==te&&z.horario_id===be.id.toString())).map(be=>{var O,X;const z=be.hora_ini_formatted||be.hora_ini||"N/A",Ee=be.hora_fin_formatted||be.hora_fin||"N/A",Ce=typeof z=="string"&&z.includes("T")?(O=z.split("T")[1])==null?void 0:O.substring(0,5):typeof z=="string"?z.substring(0,5):"N/A",he=typeof Ee=="string"&&Ee.includes("T")?(X=Ee.split("T")[1])==null?void 0:X.substring(0,5):typeof Ee=="string"?Ee.substring(0,5):"N/A";return e.jsxs("option",{value:be.id,children:[be.dias," - ",Ce," a ",he]},be.id)}):e.jsx("option",{value:"",disabled:!0,children:"Cargando horarios..."})]})}),e.jsx("div",{children:e.jsx(we,{type:"text",placeholder:"Aula (opcional)",value:F.aula,onChange:be=>re(te,"aula",be.target.value)})})]})]},te)),xe.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No hay horarios agregados. Haga clic en "Agregar Horario" para comenzar.'})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{Y(!1),fe(null),ie([]),ae()},children:"Cancelar"}),e.jsx(W,{type:"submit",children:oe?"Actualizar":"Crear"})]})]})}),e.jsx(Fe,{isOpen:M,onClose:()=>{ne(!1),me(null)},title:"Detalles del Grupo",size:"xl",children:Q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Programa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((Te=Q.programa)==null?void 0:Te.nombre)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Mdulo"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((ve=Q.modulo)==null?void 0:ve.nombre)||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Docente Responsable"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.docente?`${Q.docente.nombre} ${Q.docente.apellido}`:"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.fecha_ini?new Date(Q.fecha_ini).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:Q.fecha_fin?new Date(Q.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]}),Q.horarios&&Q.horarios.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Horarios Asociados (",Q.horarios.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Q.horarios.map(F=>{var te;return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.dias}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:(()=>{var he,O;const be=F.hora_ini_formatted||F.hora_ini,z=F.hora_fin_formatted||F.hora_fin;let Ee="N/A",Ce="N/A";return be&&typeof be=="string"&&(be.includes("T")?Ee=((he=be.split("T")[1])==null?void 0:he.substring(0,5))||be.substring(0,5):Ee=be.substring(0,5)),z&&typeof z=="string"&&(z.includes("T")?Ce=((O=z.split("T")[1])==null?void 0:O.substring(0,5))||z.substring(0,5):Ce=z.substring(0,5)),`${Ee} - ${Ce}`})()}),((te=F.pivot)==null?void 0:te.aula)&&e.jsxs("span",{children:["Aula: ",F.pivot.aula]})]})]},F.horario_id||F.id)})})]}),Q.estudiantes&&Q.estudiantes.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Estudiantes Asignados (",Q.estudiantes.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Q.estudiantes.map(F=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[F.nombre," ",F.apellido]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["CI: ",F.ci]})]},F.registro_estudiante||F.id))})]})]})})]})},Mx={async getHorarios(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"dia",sort_direction:s.sort_direction||"asc",gestion_id:s.gestion_id||"",docente_id:s.docente_id||"",grupo_id:s.grupo_id||"",aula_id:s.aula_id||"",dia:s.dia||"",estado:s.estado||""},a=await Re("/horarios",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener horarios"}}catch(r){return{success:!1,message:r.message||"Error al obtener horarios"}}},async getHorario(s){try{const r=await Re(`/horarios/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Horario no encontrado"}}catch(r){return{success:!1,message:r.message||"Error al obtener horario"}}},async createHorario(s){var r,a,t,n;try{const o=await Be("/horarios",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateHorario(s,r){var a,t,n,o;try{const i=await os(`/horarios/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteHorario(s){var r,a;try{const t=await gs(`/horarios/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async validarHorario(s){try{const r=await Be("/horarios/validar",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error en la validacin"}}catch(r){return{success:!1,message:r.message||"Error en la validacin"}}},async getHorarioSemanal(s={}){try{const r=await Re("/horarios/semanal",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener horario semanal"}}catch(r){return{success:!1,message:r.message||"Error al obtener horario semanal"}}},async getHorariosDocente(s,r={}){try{const a=await Re(`/horarios/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del docente"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del docente"}}},async getHorariosGrupo(s,r={}){try{const a=await Re(`/horarios/grupo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del grupo"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del grupo"}}},async getHorariosAula(s,r={}){try{const a=await Re(`/horarios/aula/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener horarios del aula"}}catch(a){return{success:!1,message:a.message||"Error al obtener horarios del aula"}}},async verificarConflictos(s){try{const r=await Be("/horarios/verificar-conflictos",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al verificar conflictos"}}catch(r){return{success:!1,message:r.message||"Error al verificar conflictos"}}},async getDisponibilidadDocente(s,r){try{const a=await Be(`/horarios/disponibilidad/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar disponibilidad"}}catch(a){return{success:!1,message:a.message||"Error al verificar disponibilidad"}}},async getDisponibilidadAula(s,r){try{const a=await Be(`/horarios/disponibilidad/aula/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar disponibilidad"}}catch(a){return{success:!1,message:a.message||"Error al verificar disponibilidad"}}},async duplicarHorarios(s){try{const r=await Be("/horarios/duplicar",s);return r.data.success?{success:!0,data:r.data.data,message:"Horarios duplicados exitosamente"}:{success:!1,message:r.data.message||"Error al duplicar horarios"}}catch(r){return{success:!1,message:r.message||"Error al duplicar horarios"}}},async exportarHorarios(s={}){try{const r=await Re("/horarios/export",s,{responseType:"blob"});return r.data?{success:!0,data:r.data,message:I.SUCCESS.EXPORT}:{success:!1,message:"Error al exportar horarios"}}catch(r){return{success:!1,message:r.message||I.ERROR.EXPORT}}},async getEstadisticas(s={}){try{const r=await Re("/horarios/estadisticas",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener estadsticas"}}catch(r){return{success:!1,message:r.message||"Error al obtener estadsticas"}}},async generarAutomatico(s={}){try{const r=await Be("/horarios/generar-automatico",s);return r.data.success?{success:!0,data:r.data.data,message:r.data.message||"Horarios generados exitosamente"}:{success:!1,message:r.data.message||"Error al generar horarios automticamente"}}catch(r){return{success:!1,message:r.message||"Error al generar horarios automticamente"}}}},Ga={async registrarAsistencia(s){var r,a,t,n;try{const o=await Be("/asistencias",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Asistencia registrada exitosamente"}:{success:!1,message:o.data.message||"Error al registrar asistencia",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al registrar asistencia",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async registrarConGeolocalizacion(s){var r,a;try{const t=await Be("/asistencias/geolocalizacion",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Asistencia registrada exitosamente mediante geolocalizacin"}:{success:!1,message:t.data.message||"Error al registrar asistencia con geolocalizacin"}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||"Error al registrar asistencia con geolocalizacin"}}},async registrarConQR(s,r={}){try{const a=await Be("/asistencias/qr",{codigo_qr:s,...r});return a.data.success?{success:!0,data:a.data.data,message:"Asistencia registrada exitosamente"}:{success:!1,message:a.data.message||"Error al registrar asistencia"}}catch(a){return{success:!1,message:a.message||"Error al registrar asistencia"}}},async generarQR(s,r){var a,t;try{const n=await Re(`/asistencias/generar-qr/${s}`);return n.data.success?{success:!0,data:n.data.data,message:"Cdigo QR generado exitosamente"}:{success:!1,message:n.data.message||"Error al generar cdigo QR"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al generar cdigo QR"}}},async getAsistencias(s={}){try{const r={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"fecha",sort_direction:s.sort_direction||"desc",gestion_id:s.gestion_id||"",docente_id:s.docente_id||"",grupo_id:s.grupo_id||"",materia_id:s.materia_id||"",fecha_inicio:s.fecha_inicio||"",fecha_fin:s.fecha_fin||"",estado:s.estado||""},a=await Re("/asistencias",r);return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener asistencias"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencias"}}},async getAsistencia(s){try{const r=await Re(`/asistencias/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Asistencia no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencia"}}},async updateAsistencia(s,r){try{const a=await os(`/asistencias/${s}`,r);return a.data.success?{success:!0,data:a.data.data,message:I.SUCCESS.UPDATE}:{success:!1,message:a.data.message||I.ERROR.UPDATE}}catch(a){return{success:!1,message:a.message||I.ERROR.UPDATE}}},async deleteAsistencia(s){try{const r=await gs(`/asistencias/${s}`);return r.data.success?{success:!0,message:I.SUCCESS.DELETE}:{success:!1,message:r.data.message||I.ERROR.DELETE}}catch(r){return{success:!1,message:r.message||I.ERROR.DELETE}}},async getEstadisticas(s={}){try{const r=await Re("/asistencias/estadisticas",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener estadsticas"}}catch(r){return{success:!1,message:r.message||"Error al obtener estadsticas"}}},async getAsistenciasDocente(s,r={}){try{const a=await Re(`/asistencias/docente/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias del docente"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias del docente"}}},async getAsistenciasGrupo(s,r={}){try{const a=await Re(`/asistencias/grupo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias del grupo"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias del grupo"}}},async getAsistenciasMateria(s,r={}){try{const a=await Re(`/asistencias/materia/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener asistencias de la materia"}}catch(a){return{success:!1,message:a.message||"Error al obtener asistencias de la materia"}}},async getAsistenciasHoy(s={}){try{const r=await Re("/asistencias/hoy",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener asistencias del da"}}catch(r){return{success:!1,message:r.message||"Error al obtener asistencias del da"}}},async verificarAsistenciaExistente(s,r){try{const a=await Re(`/asistencias/verificar/${s}/${r}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al verificar asistencia"}}catch(a){return{success:!1,message:a.message||"Error al verificar asistencia"}}},async getResumenAsistencias(s={}){try{const r=await Re("/asistencias/resumen",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener resumen"}}catch(r){return{success:!1,message:r.message||"Error al obtener resumen"}}},async exportarAsistencias(s={}){try{const r=await Re("/asistencias/export",s,{responseType:"blob"});return r.data?{success:!0,data:r.data,message:I.SUCCESS.EXPORT}:{success:!1,message:"Error al exportar asistencias"}}catch(r){return{success:!1,message:r.message||I.ERROR.EXPORT}}},async getQRActivos(s={}){try{const r=await Re("/asistencias/qr-activos",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener cdigos QR activos"}}catch(r){return{success:!1,message:r.message||"Error al obtener cdigos QR activos"}}},async invalidarQR(s){try{const r=await Be("/asistencias/invalidar-qr",{codigo_qr:s});return r.data.success?{success:!0,message:"Cdigo QR invalidado exitosamente"}:{success:!1,message:r.data.message||"Error al invalidar cdigo QR"}}catch(r){return{success:!1,message:r.message||"Error al invalidar cdigo QR"}}}},ck=({isOpen:s,onClose:r,horario:a,docente:t,docenteId:n,fecha:o,onSuccess:i})=>{var P,R,G,T;const[l,d]=c.useState(null),[u,g]=c.useState(!1),[h,y]=c.useState(!1),[k,E]=c.useState(null),[S,C]=c.useState(null),[b,p]=c.useState(""),[N,_]=c.useState(!1),[x,v]=c.useState({latitud:"",longitud:""});c.useEffect(()=>{s&&a&&j()},[s,a]);const j=()=>{if(g(!0),E(null),_(!1),!navigator.geolocation){E("La geolocalizacin no est disponible en tu dispositivo. Por favor, ingresa las coordenadas manualmente."),g(!1),_(!0);return}if(!(window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1")){E("La geolocalizacin solo funciona en conexiones HTTPS o en localhost. Por favor, ingresa las coordenadas manualmente o accede desde localhost."),g(!1),_(!0);return}navigator.geolocation.getCurrentPosition(L=>{const Y={latitud:L.coords.latitude,longitud:L.coords.longitude,precision:L.coords.accuracy};d(Y),g(!1),_(!1)},L=>{let Y="Error al obtener ubicacin";switch(L.code){case L.PERMISSION_DENIED:Y="Permiso de geolocalizacin denegado. Por favor, ingresa las coordenadas manualmente.";break;case L.POSITION_UNAVAILABLE:Y="La informacin de ubicacin no est disponible. Por favor, ingresa las coordenadas manualmente.";break;case L.TIMEOUT:Y="Tiempo de espera agotado. Por favor, intenta nuevamente o ingresa las coordenadas manualmente.";break;default:L.message&&L.message.includes("secure")?Y="La geolocalizacin requiere HTTPS o localhost. Por favor, ingresa las coordenadas manualmente.":Y=`Error: ${L.message}. Por favor, ingresa las coordenadas manualmente.`}E(Y),g(!1),_(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},D=async()=>{const $=(t==null?void 0:t.id)||n||(a==null?void 0:a.docente_id);if(!a||!$){m.error("Faltan datos para registrar la asistencia. Por favor, selecciona un horario.");return}let L,Y;if(N&&x.latitud&&x.longitud){if(L=parseFloat(x.latitud),Y=parseFloat(x.longitud),isNaN(L)||isNaN(Y)){m.error("Las coordenadas deben ser nmeros vlidos");return}if(L<-90||L>90){m.error("La latitud debe estar entre -90 y 90");return}if(Y<-180||Y>180){m.error("La longitud debe estar entre -180 y 180");return}}else if(l)L=l.latitud,Y=l.longitud;else{m.error("Debes proporcionar las coordenadas (automticas o manuales)");return}y(!0);try{const M={horario_id:a.id,docente_id:$,fecha:o||new Date().toISOString().split("T")[0],latitud:L,longitud:Y,observaciones:b+(N?" (Coordenadas ingresadas manualmente)":"")},ne=await Ga.registrarConGeolocalizacion(M);ne.success?(m.success("Asistencia registrada exitosamente con geolocalizacin"),i&&i(ne.data),r(),H()):m.error(ne.message||"Error al registrar asistencia")}catch{m.error("Error al registrar asistencia con geolocalizacin")}finally{y(!1)}},H=()=>{d(null),E(null),C(null),p(""),_(!1),v({latitud:"",longitud:""})},A=()=>{H(),r()};return e.jsx(Fe,{isOpen:s,onClose:A,title:"Registrar Asistencia con Geolocalizacin",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[k&&e.jsxs("div",{className:"p-4 bg-error-50 dark:bg-error-900/20 border border-error-200 dark:border-error-800 rounded-xl flex items-start space-x-3",children:[e.jsx(ws,{className:"h-5 w-5 text-error-600 dark:text-error-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-error-900 dark:text-error-100",children:"Error de geolocalizacin"}),e.jsx("p",{className:"text-sm text-error-700 dark:text-error-300 mt-1",children:k})]})]}),a&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Informacin del Horario"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Materia:"})," ",((R=(P=a.grupo)==null?void 0:P.materia)==null?void 0:R.nombre)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Grupo:"})," ",((G=a.grupo)==null?void 0:G.numero_grupo)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Aula:"})," ",((T=a.aula)==null?void 0:T.nombre)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Hora:"})," ",a.hora_inicio," - ",a.hora_fin]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ubicacin Actual"}),u?e.jsxs("div",{className:"flex items-center justify-center p-8 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Obteniendo ubicacin..."})]}):l?e.jsx("div",{className:"p-4 bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-800 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Js,{className:"h-5 w-5 text-success-600 dark:text-success-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-success-900 dark:text-success-100",children:"Ubicacin obtenida"}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-success-700 dark:text-success-300",children:[e.jsxs("p",{children:["Latitud: ",l.latitud.toFixed(6)]}),e.jsxs("p",{children:["Longitud: ",l.longitud.toFixed(6)]}),e.jsxs("p",{children:["Precisin: ",l.precision.toFixed(0)," metros"]})]})]})]})}):e.jsx("div",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-xl",children:e.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-300",children:"No se pudo obtener la ubicacin. Por favor, intenta nuevamente."})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{onClick:j,variant:"outline",size:"sm",icon:e.jsx(Js,{className:"h-4 w-4"}),disabled:u,children:"Intentar Obtener Ubicacin"}),e.jsx(W,{onClick:()=>{_(!0),E(null)},variant:"outline",size:"sm",icon:e.jsx(ep,{className:"h-4 w-4"}),children:"Ingresar Manualmente"})]}),N&&e.jsxs("div",{className:"p-4 bg-info-50 dark:bg-info-900/20 border border-info-200 dark:border-info-800 rounded-xl space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ws,{className:"h-5 w-5 text-info-600 dark:text-info-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-info-900 dark:text-info-100 mb-2",children:"Ingreso Manual de Coordenadas"}),e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300 mb-4",children:"Ingresa las coordenadas GPS del aula. Puedes obtenerlas usando una aplicacin de mapas o GPS."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(we,{label:"Latitud",type:"number",step:"any",value:x.latitud,onChange:$=>v(L=>({...L,latitud:$.target.value})),placeholder:"Ej: -17.8321",error:x.latitud&&(parseFloat(x.latitud)<-90||parseFloat(x.latitud)>90)?"La latitud debe estar entre -90 y 90":""}),e.jsx(we,{label:"Longitud",type:"number",step:"any",value:x.longitud,onChange:$=>v(L=>({...L,longitud:$.target.value})),placeholder:"Ej: -63.1528",error:x.longitud&&(parseFloat(x.longitud)<-180||parseFloat(x.longitud)>180)?"La longitud debe estar entre -180 y 180":""})]}),(a==null?void 0:a.aula)&&a.aula.latitud&&a.aula.longitud&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Coordenadas del Aula (referencia):"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Lat: ",a.aula.latitud,", Lon: ",a.aula.longitud]}),e.jsx(W,{onClick:()=>{v({latitud:a.aula.latitud.toString(),longitud:a.aula.longitud.toString()})},variant:"ghost",size:"sm",className:"mt-2 text-xs",children:"Usar coordenadas del aula"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones (opcional)"}),e.jsx("textarea",{value:b,onChange:$=>p($.target.value),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Ingresa cualquier observacin relevante..."})]}),S&&e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-info-700 dark:text-info-300",children:["Distancia al aula: ",S.toFixed(2)," metros"]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:A,disabled:h,children:"Cancelar"}),e.jsx(W,{variant:"primary",onClick:D,disabled:!l&&!N||N&&(!x.latitud||!x.longitud)||h,loading:h,icon:e.jsx(Xr,{className:"h-4 w-4"}),children:"Registrar Asistencia"})]})]})})},dk=({onScan:s,onClose:r})=>{const[a,t]=c.useState(!1),[n,o]=c.useState(null),[i,l]=c.useState(""),d=c.useRef(null),u=c.useRef(null),{user:g}=Ts();c.useEffect(()=>()=>{u.current&&u.current.getTracks().forEach(S=>S.stop())},[]);const h=async()=>{try{if(o(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){o("Tu navegador no soporta el acceso a la cmara. Puedes ingresar el cdigo manualmente.");return}const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});u.current=S,d.current&&(d.current.srcObject=S,t(!0))}catch(S){console.error("Error al acceder a la cmara:",S),o("No se pudo acceder a la cmara. Puedes ingresar el cdigo manualmente.")}},y=()=>{u.current&&(u.current.getTracks().forEach(S=>S.stop()),u.current=null),t(!1),d.current&&(d.current.srcObject=null)},k=()=>{if(!i.trim()){m.error("Ingresa el cdigo QR");return}E(i.trim())},E=async S=>{try{const C=await Ga.registrarConQR(S,{observaciones:"Registrado mediante escner QR"});C.success?(m.success("Asistencia registrada exitosamente mediante QR"),s&&s(S),y()):m.error(C.message||"Error al registrar asistencia")}catch(C){m.error("Error al procesar el cdigo QR"),console.error("Error al escanear QR:",C)}};return e.jsxs("div",{className:"space-y-4",children:[n&&e.jsx("div",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-xl",children:e.jsx("p",{className:"text-sm text-warning-700 dark:text-warning-300",children:n})}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden",style:{aspectRatio:"1"},children:[e.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"border-4 border-primary-500 rounded-lg",style:{width:"70%",height:"70%"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-primary-500"}),e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-primary-500"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-primary-500"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-primary-500"})]})})]}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300 text-center",children:"Apunta la cmara hacia el cdigo QR. El escaneo es automtico."})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{onClick:y,variant:"outline",fullWidth:!0,icon:e.jsx(xr,{className:"h-5 w-5"}),children:"Detener Escner"}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:i,onChange:S=>l(S.target.value),placeholder:"O ingresa cdigo manualmente...",className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onKeyPress:S=>{S.key==="Enter"&&k()}})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx(xa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Inicia el escner para leer el cdigo QR"}),e.jsx(W,{onClick:h,variant:"primary",icon:e.jsx(Zw,{className:"h-5 w-5"}),children:"Iniciar Escner"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center",children:"O ingresa el cdigo manualmente"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:i,onChange:S=>l(S.target.value),placeholder:"Pega el cdigo QR aqu...",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onKeyPress:S=>{S.key==="Enter"&&k()}}),e.jsx(W,{onClick:k,variant:"primary",icon:e.jsx(Xr,{className:"h-5 w-5"}),disabled:!i.trim(),children:"Registrar"})]})]})]})]})},uk=()=>{var f,w,V,B,ue,ge,_e,je,Ne,Te;const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState(!0),[o,i]=c.useState(""),[l,d]=c.useState(1),[u,g]=c.useState(1),[h,y]=c.useState(10),[k,E]=c.useState(!1),[S,C]=c.useState(!1),[b,p]=c.useState(!1),[N,_]=c.useState(!1),[x,v]=c.useState(!1),[j,D]=c.useState(null),[H,A]=c.useState(null),[P,R]=c.useState(null),[G,T]=c.useState(null),[$,L]=c.useState([]),[Y,M]=c.useState([]),[ne,oe]=c.useState(!1),[fe,Q]=c.useState(null),{register:me,handleSubmit:xe,reset:ie,formState:{errors:le},getValues:Se}=Xe();c.useEffect(()=>{pe(),(s==null?void 0:s.rol)==="docente"?K():(ae(),ce())},[l,h,o,s]);const pe=async()=>{var ve,F;try{n(!0);const te=await Ga.getAsistencias({page:l,per_page:h,search:o});if(te.success&&te.data){const be=te.data.data||[];a(be),g(te.data.last_page||1)}else m.error(te.message||"Error al cargar asistencias"),a([])}catch(te){const be=((F=(ve=te.response)==null?void 0:ve.data)==null?void 0:F.message)||te.message||"Error de conexin: No se pudo cargar las asistencias";m.error(be),console.error("Error al cargar asistencias:",te),a([])}finally{n(!1)}},K=async()=>{var ve,F,te;try{const be=await Ha.getDocentes({search:s.email});if(be.success&&((F=(ve=be.data)==null?void 0:ve.data)==null?void 0:F.length)>0){const z=be.data.data[0];T(z);const Ee=await Mx.getHorarios({docente_id:z.id});Ee.success&&L(((te=Ee.data)==null?void 0:te.data)||[])}}catch(be){console.error("Error al obtener docente:",be)}},ae=async()=>{var ve;try{const F=await Ha.getDocentes({per_page:100});F.success&&M(((ve=F.data)==null?void 0:ve.data)||[])}catch(F){console.error("Error al cargar docentes:",F)}},ce=async(ve=null)=>{var F;try{oe(!0);const te={};ve&&(te.docente_id=ve);const be=await Mx.getHorarios({...te,per_page:100});be.success&&L(((F=be.data)==null?void 0:F.data)||[])}catch(te){console.error("Error al cargar horarios:",te),m.error("Error al cargar horarios")}finally{oe(!1)}},J=async()=>{try{(s==null?void 0:s.rol)==="docente"?(G||await K(),G&&$.length>0?(R($[0]),T(G),p(!0)):G&&$.length===0?m.error("No tienes horarios asignados para registrar asistencia"):m.error("No se pudo obtener tu informacin de docente")):p(!0)}catch(ve){console.error("Error al abrir modal de geolocalizacin:",ve),m.error("Error al abrir el modal de geolocalizacin")}},Z=async ve=>{var F,te,be;try{let z=ve.horario_id;if(!z&&ve.horario&&(z=ve.horario.id||ve.horario),!z&&ve.horario_id===void 0&&(F=ve.horario)!=null&&F.id&&(z=ve.horario.id),z=parseInt(z),!z||isNaN(z)||z<=0){if(m.error("No se pudo obtener un horario vlido para generar el cdigo QR. Por favor, selecciona un horario primero."),console.error("Horario ID invlido:",ve),(s==null?void 0:s.rol)==="docente"&&$.length>0){const Ce=$[0];if(Ce&&Ce.id){const he=await Ga.generarQR(Ce.id);he.success&&(Q(he.data),_(!0),m.success("Cdigo QR generado usando tu prximo horario"))}}return}const Ee=await Ga.generarQR(z);Ee.success?(Q(Ee.data),_(!0),m.success("Cdigo QR generado exitosamente")):m.error(Ee.message||"Error al generar cdigo QR")}catch(z){console.error("Error al generar QR:",z),console.error("Asistencia recibida:",ve);const Ee=((be=(te=z.response)==null?void 0:te.data)==null?void 0:be.message)||z.message||"Error al generar cdigo QR";m.error(Ee)}},ye=[{key:"docente",label:"Docente",sortable:!0,render:ve=>{var be,z,Ee,Ce,he,O,X,U;const F=((z=(be=ve.docente)==null?void 0:be.user)==null?void 0:z.name)||ve.docente||((he=(Ce=(Ee=ve.horario)==null?void 0:Ee.docente)==null?void 0:Ce.user)==null?void 0:he.name)||"N/A",te=((U=(X=(O=ve.horario)==null?void 0:O.grupo)==null?void 0:X.materia)==null?void 0:U.nombre)||ve.materia||"N/A";return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(ts,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:F}),e.jsx("div",{className:"text-sm text-gray-500",children:te})]})]})}},{key:"grupo",label:"Grupo",sortable:!0,render:ve=>{var te,be;const F=((be=(te=ve.horario)==null?void 0:te.grupo)==null?void 0:be.numero_grupo)||ve.grupo||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Da,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:F})]})}},{key:"aula",label:"Aula",sortable:!0,render:ve=>{var te,be;const F=((be=(te=ve.horario)==null?void 0:te.aula)==null?void 0:be.nombre)||ve.aula||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:F})]})}},{key:"fecha",label:"Fecha",sortable:!0,render:ve=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:ve.fecha})]})},{key:"hora_inicio",label:"Horario",sortable:!0,render:ve=>{var be,z;const F=((be=ve.horario)==null?void 0:be.hora_inicio)||ve.hora_inicio||"N/A",te=((z=ve.horario)==null?void 0:z.hora_fin)||ve.hora_fin||"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-900",children:[F," - ",te]})]})}},{key:"estado",label:"Estado",sortable:!0,render:ve=>e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ve.estado==="presente"?"bg-success-100 text-success-800":ve.estado==="tardanza"?"bg-warning-100 text-warning-800":"bg-error-100 text-error-800"}`,children:[ve.estado==="presente"?e.jsx(Me,{className:"h-3 w-3 mr-1"}):ve.estado==="tardanza"?e.jsx(Je,{className:"h-3 w-3 mr-1"}):e.jsx(ls,{className:"h-3 w-3 mr-1"}),ve.estado]})},{key:"porcentaje_asistencia",label:"Asistencia",sortable:!0,render:ve=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[ve.porcentaje_asistencia,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ve.estudiantes_presentes,"/",ve.estudiantes_totales]})]})},{key:"actions",label:"Acciones",render:ve=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>de(ve)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(xa,{className:"h-4 w-4"}),onClick:()=>Z(ve),title:"Generar cdigo QR para este horario"}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>q(ve)})]})}],de=ve=>{A(ve),C(!0)},q=ve=>{D(ve),ie(ve),E(!0)},ee=async()=>{var ve,F;try{n(!0);const te=await Ga.exportarAsistencias({search:o,docente_id:G==null?void 0:G.id});if(te.success&&te.data)if(te.data instanceof Blob){const be=window.URL.createObjectURL(te.data),z=document.createElement("a");z.href=be,z.download=`asistencias_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(be),m.success("Asistencias exportadas exitosamente")}else{const be=te.data.map(z=>{var Ee,Ce,he,O,X,U,Ae,De,Le,Ue,qe,He;return{Fecha:z.fecha||"",Docente:z.docente||((he=(Ce=(Ee=z.horario)==null?void 0:Ee.docente)==null?void 0:Ce.user)==null?void 0:he.name)||"",Materia:((U=(X=(O=z.horario)==null?void 0:O.grupo)==null?void 0:X.materia)==null?void 0:U.nombre)||z.materia||"",Grupo:((De=(Ae=z.horario)==null?void 0:Ae.grupo)==null?void 0:De.numero_grupo)||z.grupo||"",Aula:((Ue=(Le=z.horario)==null?void 0:Le.aula)==null?void 0:Ue.nombre)||z.aula||"",Estado:z.estado||"","Hora Inicio":((qe=z.horario)==null?void 0:qe.hora_inicio)||"","Hora Fin":((He=z.horario)==null?void 0:He.hora_fin)||""}});Wt(be,`asistencias_${new Date().toISOString().split("T")[0]}.csv`),m.success("Asistencias exportadas exitosamente")}else m.error(te.message||"Error al exportar asistencias")}catch(te){m.error(((F=(ve=te.response)==null?void 0:ve.data)==null?void 0:F.message)||te.message||"Error al exportar asistencias")}finally{n(!1)}},se=async ve=>{var F,te;try{if(n(!0),j){const be=await Ga.updateAsistencia(j.id,{horario_id:ve.horario_id||j.horario_id,docente_id:ve.docente_id||j.docente_id,fecha:ve.fecha,estado:ve.estado||"presente",observaciones:ve.observaciones});be.success?(m.success("Asistencia actualizada exitosamente"),await pe(),E(!1),D(null),ie()):m.error(be.message||"Error al actualizar asistencia")}else{if(!ve.horario_id||!ve.docente_id){m.error("Debes seleccionar un horario y docente");return}const be=await Ga.registrarAsistencia({horario_id:ve.horario_id,docente_id:ve.docente_id,fecha:ve.fecha,estado:ve.estado||"presente",observaciones:ve.observaciones,latitud:ve.latitud,longitud:ve.longitud});be.success?(m.success("Asistencia registrada exitosamente"),await pe(),E(!1),D(null),ie()):(m.error(be.message||"Error al registrar asistencia"),be.errors&&console.error("Errores de validacin:",be.errors))}}catch(be){const z=((te=(F=be.response)==null?void 0:F.data)==null?void 0:te.message)||be.message||"Error al guardar asistencia";m.error(z),console.error("Error al guardar asistencia:",be)}finally{n(!1)}},re=()=>{E(!1),D(null),ie()};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Dn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Control de Asistencias"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registra y gestiona las asistencias"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:()=>E(!0),children:"Nueva Asistencia"}),e.jsx(W,{variant:"success",icon:e.jsx(Js,{className:"h-5 w-5"}),onClick:J,children:"Geolocalizacin"}),e.jsx(W,{variant:"info",icon:e.jsx(xa,{className:"h-5 w-5"}),onClick:()=>v(!0),children:"Escanear QR"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Dn,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Presentes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(ve=>ve.estado==="presente").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tardanzas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(ve=>ve.estado==="tardanza").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Je,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Promedio Asistencia"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[r.length>0?Math.round(r.reduce((ve,F)=>ve+F.porcentaje_asistencia,0)/r.length):0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Da,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Registro de Asistencias"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar asistencias...",value:o,onChange:ve=>i(ve.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[(s==null?void 0:s.rol)==="docente"&&$.length>0&&e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(xa,{className:"h-4 w-4"}),onClick:()=>Z({horario_id:$[0].id}),children:"Generar QR"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:ee,disabled:t,children:"Exportar"})]})]})]}),e.jsx(ds,{columns:ye,data:r,loading:t,pagination:{currentPage:l,totalPages:u,perPage:h,onPageChange:d,onPerPageChange:y}})]}),e.jsx(Fe,{isOpen:k,onClose:re,title:j?"Editar Asistencia":"Nueva Asistencia",size:"lg",children:e.jsxs("form",{onSubmit:xe(se),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente *"}),e.jsxs("select",{...me("docente_id",{required:"El docente es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),Y.map(ve=>{var F;return e.jsx("option",{value:ve.id,children:((F=ve.user)==null?void 0:F.name)||ve.codigo_docente},ve.id)})]}),le.docente_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:le.docente_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario *"}),e.jsxs("select",{...me("horario_id",{required:"El horario es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",onChange:ve=>{const F=ve.target.value;if(F){const te=$.find(be=>be.id==F);te&&!j&&ie({...Se(),horario_id:F,docente_id:te.docente_id||Se("docente_id")})}},children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),$.map(ve=>{var F,te,be,z;return e.jsxs("option",{value:ve.id,children:[((te=(F=ve.grupo)==null?void 0:F.materia)==null?void 0:te.nombre)||"N/A"," - ",((be=ve.grupo)==null?void 0:be.numero_grupo)||"N/A"," - ",((z=ve.aula)==null?void 0:z.nombre)||"N/A"," (",ve.hora_inicio," - ",ve.hora_fin,")"]},ve.id)})]}),le.horario_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:le.horario_id.message})]}),e.jsx(we,{label:"Fecha",type:"date",error:(f=le.fecha)==null?void 0:f.message,...me("fecha",{required:"La fecha es obligatoria"}),defaultValue:new Date().toISOString().split("T")[0]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado *"}),e.jsxs("select",{...me("estado",{required:"El estado es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"presente",children:"Presente"}),e.jsx("option",{value:"ausente",children:"Ausente"}),e.jsx("option",{value:"tardanza",children:"Tardanza"}),e.jsx("option",{value:"justificado",children:"Justificado"})]}),le.estado&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:le.estado.message})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones"}),e.jsx("textarea",{...me("observaciones"),rows:3,className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",placeholder:"Observaciones adicionales (opcional)"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:re,children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[j?"Actualizar":"Registrar"," Asistencia"]})]})]})}),e.jsx(Fe,{isOpen:S,onClose:()=>C(!1),title:"Detalles de la Asistencia",size:"lg",children:H&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:H.docente})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Materia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:H.materia})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grupo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:H.grupo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Aula"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:H.aula})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:H.fecha})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[H.hora_inicio," - ",H.hora_fin]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.estado==="presente"?"bg-success-100 text-success-800":H.estado==="tardanza"?"bg-warning-100 text-warning-800":"bg-error-100 text-error-800"}`,children:H.estado})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asistencia"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[H.estudiantes_presentes,"/",H.estudiantes_totales," (",H.porcentaje_asistencia,"%)"]})]})]})})}),e.jsx(Fe,{isOpen:b&&!P&&(s==null?void 0:s.rol)!=="docente",onClose:()=>{p(!1),R(null),T(null)},title:"Seleccionar Horario para Registro con Geolocalizacin",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[(s==null?void 0:s.rol)!=="docente"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Docente"}),e.jsxs("select",{value:(G==null?void 0:G.id)||"",onChange:ve=>{const F=ve.target.value,te=Y.find(be=>be.id==F);T(te),F&&ce(F)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar docente..."}),Y.map(ve=>{var F;return e.jsx("option",{value:ve.id,children:((F=ve.user)==null?void 0:F.name)||ve.codigo_docente},ve.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Horario"}),e.jsxs("select",{value:(P==null?void 0:P.id)||"",onChange:ve=>{const F=ve.target.value,te=$.find(be=>be.id==F);R(te)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",disabled:ne||!G&&(s==null?void 0:s.rol)!=="docente",children:[e.jsx("option",{value:"",children:"Seleccionar horario..."}),$.map(ve=>{var F,te,be,z;return e.jsxs("option",{value:ve.id,children:[((te=(F=ve.grupo)==null?void 0:F.materia)==null?void 0:te.nombre)||"N/A"," - ",((be=ve.grupo)==null?void 0:be.numero_grupo)||"N/A"," - ",((z=ve.aula)==null?void 0:z.nombre)||"N/A"," (",ve.hora_inicio," - ",ve.hora_fin,")"]},ve.id)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{p(!1),R(null),T(null)},children:"Cancelar"}),e.jsx(W,{variant:"primary",onClick:()=>{P?p(!0):m.error("Selecciona un horario primero")},disabled:!P,children:"Continuar"})]})]})}),e.jsx(ck,{isOpen:b&&(P||(s==null?void 0:s.rol)==="docente"),onClose:()=>{p(!1),R(null),T(null)},horario:P||$.length>0&&$[0],docente:G,docenteId:(G==null?void 0:G.id)||(P==null?void 0:P.docente_id),fecha:new Date().toISOString().split("T")[0],onSuccess:ve=>{pe(),p(!1),R(null)}}),e.jsx(Fe,{isOpen:N,onClose:()=>{_(!1),Q(null)},title:"Cdigo QR para Asistencia",size:"md",children:fe&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[((B=(V=(w=fe.horario)==null?void 0:w.grupo)==null?void 0:V.materia)==null?void 0:B.nombre)||"N/A"," - Grupo ",((ge=(ue=fe.horario)==null?void 0:ue.grupo)==null?void 0:ge.numero_grupo)||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[((je=(_e=fe.horario)==null?void 0:_e.aula)==null?void 0:je.nombre)||"N/A"," - ",(Ne=fe.horario)==null?void 0:Ne.hora_inicio," - ",(Te=fe.horario)==null?void 0:Te.hora_fin]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Fecha: ",fe.fecha]})]}),fe.qr_image&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:fe.qr_image,alt:"Cdigo QR",className:"border-4 border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-white"})}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300",children:"Presenta este cdigo QR al inicio de la clase para registrar la asistencia"})})]})}),e.jsx(Fe,{isOpen:x,onClose:()=>v(!1),title:"Escanear Cdigo QR",size:"lg",children:e.jsx(dk,{onScan:ve=>{pe(),v(!1)},onClose:()=>v(!1)})})]})},Rr=c.forwardRef(({label:s,error:r,helperText:a,required:t=!1,disabled:n=!1,readOnly:o=!1,className:i,containerClassName:l,labelClassName:d,errorClassName:u,helperClassName:g,leftIcon:h,rightIcon:y,size:k="md",variant:E="default",options:S=[],placeholder:C,...b},p)=>{const N="select",_={default:"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-primary-500",error:"border-error-300 dark:border-error-600 focus:border-error-500 focus:ring-error-500",success:"border-success-300 dark:border-success-600 focus:border-success-500 focus:ring-success-500"},x={sm:"h-9 px-3 text-sm rounded-lg",md:"h-11 px-4 text-sm rounded-xl",lg:"h-12 px-4 text-base rounded-xl"},v=Ge(N,"w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","border transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-opacity-20",_[r?"error":E],x[k],n&&"bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed",o&&"bg-gray-50 dark:bg-gray-800",h&&"pl-10",y&&"pr-10",i);return e.jsxs("div",{className:Ge("space-y-1",l),children:[s&&e.jsx("label",{className:Ge("block text-sm font-medium text-gray-700 dark:text-gray-300",t&&"after:content-['*'] after:ml-1 after:text-error-500",d),children:s}),e.jsxs("div",{className:"relative",children:[h&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500",children:h}),e.jsxs("select",{ref:p,className:v,disabled:n,readOnly:o,...b,children:[C&&e.jsx("option",{value:"",disabled:!0,children:C}),S.map((j,D)=>typeof j=="string"?e.jsx("option",{value:j,children:j},D):e.jsx("option",{value:j.value,children:j.label},j.value??D))]}),y&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",children:y})]}),r&&e.jsx("p",{className:Ge("text-sm text-error-500 dark:text-error-400",u),children:r}),a&&!r&&e.jsx("p",{className:Ge("text-sm text-gray-500 dark:text-gray-400",g),children:a})]})});Rr.displayName="Select";const vt={async getConveniosActivos(s={}){var r,a;try{const t=await Re("/admin/reportes/convenios-activos",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getProgramasOfrecidos(s={}){var r,a;try{const t=await Re("/admin/reportes/programas-ofrecidos",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getEstadoAcademicoEstudiantes(s={}){var r,a;try{const t=await Re("/admin/reportes/estado-academico-estudiantes",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getMovimientosFinancieros(s={}){var r,a;try{const t=await Re("/admin/reportes/movimientos-financieros",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getActividadPorUsuario(s={}){var r,a;try{const t=await Re("/admin/reportes/actividad-usuario",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getActividadPorInstitucion(s={}){var r,a;try{const t=await Re("/admin/reportes/actividad-institucion",s);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await Re("/admin/reportes/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||I.ERROR_FETCH}}}},mk=()=>{const[s,r]=c.useState("convenios-activos"),[a,t]=c.useState(!1),[n,o]=c.useState(null),[i,l]=c.useState(null),[d,u]=c.useState({}),{register:g,handleSubmit:h,watch:y,reset:k}=Xe(),E=x=>{if(!x)return"N/A";try{const v=new Date(x);return isNaN(v.getTime())?"N/A":v.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"N/A"}};c.useEffect(()=>{S()},[]),c.useEffect(()=>{s&&(k(),o(null))},[s]);const S=async()=>{try{const x=await vt.getDatosFormulario();x.success&&l(x.data)}catch(x){console.error("Error al cargar datos del formulario:",x)}},C=async x=>{try{t(!0),u(x);let v;switch(s){case"convenios-activos":v=await vt.getConveniosActivos(x);break;case"programas-ofrecidos":v=await vt.getProgramasOfrecidos(x);break;case"estado-academico":v=await vt.getEstadoAcademicoEstudiantes(x);break;case"movimientos-financieros":v=await vt.getMovimientosFinancieros(x);break;case"actividad-usuario":v=await vt.getActividadPorUsuario(x);break;case"actividad-institucion":v=await vt.getActividadPorInstitucion(x);break;default:return}v.success?(o(v.data),m.success("Reporte generado exitosamente")):m.error(v.message||"Error al generar reporte")}catch{m.error("Error de conexin")}finally{t(!1)}},b=()=>{if(!n){m.error("Debe generar un reporte primero");return}let x="",v=[],j=[];switch(s){case"convenios-activos":v=["ID","Nmero Convenio","Tipo","Fecha Inicio","Fecha Fin","Monto Total","Estado"],j=(n.convenios||[]).map(P=>[P.id,P.numero_convenio,P.tipo,E(P.fecha_inicio),E(P.fecha_fin),P.monto_total,P.estado]);break;case"programas-ofrecidos":v=["ID","Nombre","Rama Acadmica","Tipo","Institucin","Costo","Duracin (meses)","Inscripciones","Grupos Activos"],j=(n.programas||[]).map(P=>[P.id,P.nombre,P.rama_academica,P.tipo_programa,P.institucion,P.costo,P.duracion_meses,P.total_inscripciones,P.grupos_activos]);break;case"estado-academico":v=["Registro","Nombre","Apellido","CI","Estado","Inscripciones","Grupos","Aprobados","Reprobados","Promedio","Tasa Aprobacin"],j=(n.estudiantes||[]).map(P=>[P.registro_estudiante,P.nombre,P.apellido,P.ci,P.estado,P.total_inscripciones,P.rendimiento.total_grupos,P.rendimiento.aprobados,P.rendimiento.reprobados,P.rendimiento.promedio_notas||"N/A",P.rendimiento.tasa_aprobacion+"%"]);break;case"movimientos-financieros":v=["ID","Fecha","Monto","Verificado","Estudiante","Programa","Token"],j=(n.pagos||[]).map(P=>[P.id,E(P.fecha),P.monto,P.verificado?"S":"No",P.estudiante,P.programa,P.token]);break;case"actividad-usuario":v=["Usuario ID","Nombre","Apellido","Email","CI","Total Acciones","Acciones por Tabla"],j=(n.actividad_por_usuario||[]).map(P=>{const R=P.usuario||{},G=(P.acciones_por_tabla||[]).map(T=>`${T.tabla}: ${T.cantidad}`).join("; ");return[R.id||"N/A",R.nombre||"N/A",R.apellido||"N/A",R.email||"N/A",R.ci||"N/A",P.total_acciones||0,G||"N/A"]});break;case"actividad-institucion":v=["Institucin ID","Nombre","Estado","Total Inscripciones","Convenios Activos","Programas Activos","Total Programas"],j=(n.actividad_por_institucion||[]).map(P=>{const R=P.actividad||{};return[P.institucion_id||"N/A",P.nombre||"N/A",P.estado||"N/A",R.total_inscripciones||0,R.convenios_activos||0,R.programas_activos||0,R.total_programas||0]});break;default:m.error("Tipo de reporte no soportado para exportacin");return}x=v.join(",")+`
`,j.forEach(P=>{x+=P.map(R=>`"${R}"`).join(",")+`
`});const D=new Blob([x],{type:"text/csv;charset=utf-8;"}),H=document.createElement("a"),A=URL.createObjectURL(D);H.setAttribute("href",A),H.setAttribute("download",`reporte-${s}-${new Date().toISOString().split("T")[0]}.csv`),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H),m.success("Reporte exportado exitosamente")},p=()=>{switch(s){case"convenios-activos":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(we,{label:"Fecha Desde",type:"date",...g("fecha_desde")}),e.jsx(we,{label:"Fecha Hasta",type:"date",...g("fecha_hasta")}),i&&e.jsx(Rr,{label:"Tipo de Convenio",name:"tipo_convenio_id",options:[{value:"",label:"Todos"},...i.tipos_convenio.map(x=>({value:x.id,label:x.nombre}))],...g("tipo_convenio_id")})]});case"programas-ofrecidos":return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i&&e.jsxs(e.Fragment,{children:[e.jsx(Rr,{label:"Rama Acadmica",name:"rama_academica_id",options:[{value:"",label:"Todas"},...i.ramas_academicas.map(x=>({value:x.id,label:x.nombre}))],...g("rama_academica_id")}),e.jsx(Rr,{label:"Tipo de Programa",name:"tipo_programa_id",options:[{value:"",label:"Todos"},...i.tipos_programa.map(x=>({value:x.id,label:x.nombre}))],...g("tipo_programa_id")}),e.jsx(Rr,{label:"Institucin",name:"institucion_id",options:[{value:"",label:"Todas"},...i.instituciones.map(x=>({value:x.id,label:x.nombre}))],...g("institucion_id")})]})});case"estado-academico":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsxs(e.Fragment,{children:[e.jsx(Rr,{label:"Programa",name:"programa_id",options:[{value:"",label:"Todos"}],...g("programa_id")}),e.jsx(Rr,{label:"Estado del Estudiante",name:"estado_id",options:[{value:"",label:"Todos"},...i.estados_estudiante.map(x=>({value:x.id,label:x.nombre}))],...g("estado_id")})]}),e.jsx(we,{label:"Fecha Desde",type:"date",...g("fecha_desde")}),e.jsx(we,{label:"Fecha Hasta",type:"date",...g("fecha_hasta")})]});case"movimientos-financieros":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Fecha Desde",type:"date",defaultValue:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(we,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});case"actividad-usuario":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsx(Rr,{label:"Usuario",name:"usuario_id",options:[{value:"",label:"Todos"},...i.usuarios.map(x=>({value:x.id,label:`${x.email} (${x.ci})`}))],...g("usuario_id")}),e.jsx(we,{label:"Fecha Desde",type:"date",defaultValue:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(we,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});case"actividad-institucion":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i&&e.jsx(Rr,{label:"Institucin",name:"institucion_id",options:[{value:"",label:"Todas"},...i.instituciones.map(x=>({value:x.id,label:x.nombre}))],...g("institucion_id")}),e.jsx(we,{label:"Fecha Desde",type:"date",defaultValue:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],...g("fecha_desde")}),e.jsx(we,{label:"Fecha Hasta",type:"date",defaultValue:new Date().toISOString().split("T")[0],...g("fecha_hasta")})]});default:return null}},N=()=>{var x;if(!n)return null;switch(s){case"convenios-activos":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Convenios"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_convenios})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instituciones Participantes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.instituciones_participantes})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:parseFloat(n.estadisticas.monto_total_convenios||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Convenios Activos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Nmero"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Fechas"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Monto"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Instituciones"})]})}),e.jsx("tbody",{children:n.convenios&&n.convenios.length>0?n.convenios.map((v,j)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:v.numero_convenio}),e.jsx("td",{className:"py-3 px-4",children:v.tipo}),e.jsxs("td",{className:"py-3 px-4",children:[E(v.fecha_inicio)," - ",E(v.fecha_fin)]}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(v.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:v.instituciones.map(D=>D.nombre).join(", ")})]},j)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay convenios activos para mostrar"})})})]})})]})]});case"programas-ofrecidos":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Programas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_programas})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grupos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_grupos_activos})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Programas Ofrecidos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Nombre"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Rama"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Institucin"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Costo"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Inscripciones"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Grupos Activos"})]})}),e.jsx("tbody",{children:n.programas&&n.programas.length>0?n.programas.map((v,j)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:v.nombre}),e.jsx("td",{className:"py-3 px-4",children:v.rama_academica}),e.jsx("td",{className:"py-3 px-4",children:v.tipo_programa}),e.jsx("td",{className:"py-3 px-4",children:v.institucion}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(v.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:v.total_inscripciones}),e.jsx("td",{className:"py-3 px-4",children:v.grupos_activos})]},j)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay programas para mostrar"})})})]})})]})]});case"estado-academico":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Estudiantes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_estudiantes})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Promedio Aprobacin"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[((x=n.estadisticas.promedio_aprobacion)==null?void 0:x.toFixed(1))||0,"%"]})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Estado Acadmico de Estudiantes"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"CI"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Inscripciones"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Grupos"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Aprobados"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Promedio"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Tasa Aprobacin"})]})}),e.jsx("tbody",{children:n.estudiantes&&n.estudiantes.length>0?n.estudiantes.map((v,j)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("td",{className:"py-3 px-4",children:[v.nombre," ",v.apellido]}),e.jsx("td",{className:"py-3 px-4",children:v.ci}),e.jsx("td",{className:"py-3 px-4",children:v.estado}),e.jsx("td",{className:"py-3 px-4",children:v.total_inscripciones}),e.jsx("td",{className:"py-3 px-4",children:v.rendimiento.total_grupos}),e.jsx("td",{className:"py-3 px-4",children:v.rendimiento.aprobados}),e.jsx("td",{className:"py-3 px-4",children:v.rendimiento.promedio_notas||"N/A"}),e.jsxs("td",{className:"py-3 px-4",children:[v.rendimiento.tasa_aprobacion,"%"]})]},j)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay estudiantes para mostrar"})})})]})})]})]});case"movimientos-financieros":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&n.estadisticas.ingresos&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingresos Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:parseFloat(n.estadisticas.ingresos.total_verificado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingresos Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:parseFloat(n.estadisticas.ingresos.total_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Ingresos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:parseFloat(n.estadisticas.ingresos.total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cantidad Pagos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.ingresos.cantidad_pagos||0})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Movimientos Financieros"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Monto"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Verificado"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Programa"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Token"})]})}),e.jsx("tbody",{children:n.pagos&&n.pagos.length>0?n.pagos.map((v,j)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:E(v.fecha)}),e.jsx("td",{className:"py-3 px-4",children:parseFloat(v.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.verificado?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:v.verificado?"S":"No"})}),e.jsx("td",{className:"py-3 px-4",children:v.estudiante}),e.jsx("td",{className:"py-3 px-4",children:v.programa}),e.jsx("td",{className:"py-3 px-4",children:v.token||"N/A"})]},j)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay pagos para mostrar"})})})]})})]})]});case"actividad-usuario":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Registros"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_registros})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.usuarios_activos})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Actividad por Usuario"}),e.jsx("div",{className:"space-y-4",children:n.actividad_por_usuario&&n.actividad_por_usuario.length>0?n.actividad_por_usuario.map((v,j)=>{var D;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:v.usuario?`${v.usuario.nombre} ${v.usuario.apellido}`:"Usuario Desconocido"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[((D=v.usuario)==null?void 0:D.email)||"N/A"," - ",v.total_acciones," acciones"]})]})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Acciones por tabla:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.acciones_por_tabla.map((H,A)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs",children:[H.tabla,": ",H.cantidad]},A))})]})]},j)}):e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay actividad de usuarios para mostrar"})})]})]});case"actividad-institucion":return e.jsxs("div",{className:"space-y-6",children:[n.estadisticas&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Instituciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_instituciones})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Inscripciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_inscripciones})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Convenios Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_convenios_activos})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Programas Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.estadisticas.total_programas_activos})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"Actividad por Institucin"}),e.jsx("div",{className:"space-y-4",children:n.actividad_por_institucion&&n.actividad_por_institucion.length>0?n.actividad_por_institucion.map((v,j)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:v.nombre}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Estado: ",v.estado]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inscripciones"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:v.actividad.total_inscripciones})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Convenios Activos"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:v.actividad.convenios_activos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Programas Activos"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:v.actividad.programas_activos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Programas"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:v.actividad.total_programas})]})]})]},j)):e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No hay actividad de instituciones para mostrar"})})]})]});default:return null}},_=[{value:"convenios-activos",label:"Convenios Activos",icon:Ht},{value:"programas-ofrecidos",label:"Programas Ofrecidos",icon:ys},{value:"estado-academico",label:"Estado Acadmico Estudiantes",icon:ts},{value:"movimientos-financieros",label:"Movimientos Financieros",icon:Tr},{value:"actividad-usuario",label:"Actividad por Usuario",icon:Rs},{value:"actividad-institucion",label:"Actividad por Institucin",icon:Ht}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ss,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Reportes y Bitcora"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Genera reportes detallados del sistema"})]})]}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Reporte"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:_.map(x=>{const v=x.icon;return e.jsxs("button",{type:"button",onClick:()=>r(x.value),className:`p-4 border-2 rounded-lg transition-all ${s===x.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-primary-300"}`,children:[e.jsx(v,{className:"h-6 w-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-center",children:x.label})]},x.value)})})]}),e.jsxs("form",{onSubmit:h(C),className:"space-y-4",children:[p(),e.jsx("div",{className:"flex justify-end space-x-4",children:e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(fa,{className:"h-5 w-5"}),disabled:a,children:a?"Generando...":"Generar Reporte"})})]})]})}),a&&e.jsx(er,{}),n&&!a&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(W,{variant:"secondary",icon:e.jsx(gr,{className:"h-5 w-5"}),onClick:b,children:"Exportar CSV"})}),N()]})]})},Wc=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(0),[n,o]=c.useState(!0),[i,l]=c.useState("todas"),[d,u]=c.useState("todas"),[g,h]=c.useState(1),[y,k]=c.useState(0),[E,S]=c.useState(1);c.useEffect(()=>{C(),b()},[i,d,g]);const C=async()=>{var D,H,A,P;o(!0);try{const R={page:g,per_page:15};i==="leidas"?R.leida="true":i==="no_leidas"&&(R.leida="false"),d!=="todas"&&(R.tipo=d);const G=await ca.getNotificaciones(R);if(G.success){const T=((D=G.data)==null?void 0:D.data)||G.data;r((T==null?void 0:T.data)||T||[]),k((T==null?void 0:T.total)||((H=G.data)==null?void 0:H.total)||0),S((T==null?void 0:T.last_page)||((A=G.data)==null?void 0:A.last_page)||1),t(((P=G.data)==null?void 0:P.no_leidas)||G.noLeidas||0)}}catch{m.error("Error al cargar notificaciones")}finally{o(!1)}},b=async()=>{const D=await ca.contarNoLeidas();D.success&&t(D.count)},p=async D=>{(await ca.marcarLeida(D)).success&&(r(A=>A.map(P=>P.id===D?{...P,leida:!0,leida_at:new Date().toISOString()}:P)),t(A=>Math.max(0,A-1)),m.success("Notificacin marcada como leda"))},N=async()=>{(await ca.marcarTodasLeidas()).success&&(r(H=>H.map(A=>({...A,leida:!0}))),t(0),m.success("Todas las notificaciones marcadas como ledas"),C())},_=async D=>{window.confirm("Ests seguro de eliminar esta notificacin?")&&(await ca.eliminarNotificacion(D)).success&&(r(A=>A.filter(P=>P.id!==D)),m.success("Notificacin eliminada"),C())},x=D=>{switch(D){case"horario_cambio":return e.jsx(Qs,{className:"h-5 w-5"});case"asistencia":return e.jsx(Xr,{className:"h-5 w-5"});case"alerta":return e.jsx(ws,{className:"h-5 w-5"});default:return e.jsx(Br,{className:"h-5 w-5"})}},v=D=>{switch(D){case"horario_cambio":return"text-primary-500 bg-primary-100 dark:bg-primary-900/30";case"asistencia":return"text-success-500 bg-success-100 dark:bg-success-900/30";case"alerta":return"text-warning-500 bg-warning-100 dark:bg-warning-900/30";default:return"text-gray-500 bg-gray-100 dark:bg-gray-800"}},j=D=>{switch(D){case"horario_cambio":return"Cambio de Horario";case"asistencia":return"Asistencia";case"alerta":return"Alerta";default:return D}};return n&&s.length===0?e.jsx("div",{className:"p-8",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Notificaciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a>0?`${a} no ledas`:"Todas las notificaciones ledas"})]}),a>0&&e.jsx(W,{onClick:N,variant:"primary",icon:e.jsx(Yw,{className:"h-4 w-4"}),children:"Marcar todas como ledas"})]}),e.jsx(ke,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),e.jsxs("select",{value:i,onChange:D=>{l(D.target.value),h(1)},className:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"todas",children:"Todas"}),e.jsx("option",{value:"no_leidas",children:"No ledas"}),e.jsx("option",{value:"leidas",children:"Ledas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo:"}),e.jsxs("select",{value:d,onChange:D=>{u(D.target.value),h(1)},className:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"todas",children:"Todos"}),e.jsx("option",{value:"horario_cambio",children:"Cambios de Horario"}),e.jsx("option",{value:"asistencia",children:"Asistencias"}),e.jsx("option",{value:"alerta",children:"Alertas"})]})]})]})}),s.length===0?e.jsx(ke,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Br,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tienes notificaciones que coincidan con los filtros seleccionados"})]})}):e.jsx("div",{className:"space-y-4",children:s.map(D=>e.jsx(ke,{className:D.leida?"":"border-l-4 border-l-primary-500",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ${v(D.tipo)}`,children:x(D.tipo)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:`text-lg font-semibold ${D.leida?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-gray-100"}`,children:D.titulo}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",children:j(D.tipo)}),!D.leida&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300",children:"Nueva"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:D.mensaje}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:Px(D.created_at||D.fecha_envio)})]}),D.leida_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xr,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Leda ",Px(D.leida_at||D.fecha_lectura)]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsx("span",{className:"font-medium",children:"Fecha y hora:"}),e.jsx("span",{children:D.fecha_formateada||(D.created_at?new Date(D.created_at).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):D.fecha_envio?new Date(D.fecha_envio).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"No disponible")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!D.leida&&e.jsx(W,{onClick:()=>p(D.id),variant:"ghost",size:"sm",icon:e.jsx(Xr,{className:"h-4 w-4"}),title:"Marcar como leda"}),e.jsx(W,{onClick:()=>_(D.id),variant:"ghost",size:"sm",icon:e.jsx(xr,{className:"h-4 w-4"}),title:"Eliminar"})]})]})})]})},D.id))}),E>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(W,{onClick:()=>h(D=>Math.max(1,D-1)),disabled:g===1,variant:"outline",size:"sm",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pgina ",g," de ",E]}),e.jsx(W,{onClick:()=>h(D=>Math.min(E,D+1)),disabled:g===E,variant:"outline",size:"sm",children:"Siguiente"})]})]})},gk={async getAuditoria(s={}){try{const r=await Re("/auditoria",s);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Error al obtener auditora"}}catch(r){return{success:!1,message:r.message||"Error al obtener auditora"}}},async getAuditoriaPorModelo(s,r={}){try{const a=await Re(`/auditoria/modelo/${s}`,r);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:a.data.message||"Error al obtener auditora"}}catch(a){return{success:!1,message:a.message||"Error al obtener auditora"}}}},xk=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState({modelo:"",accion:"",user_id:"",fecha_inicio:"",fecha_fin:""}),[i,l]=c.useState(1),[d,u]=c.useState(0),[g,h]=c.useState(1),[y,k]=c.useState("");c.useEffect(()=>{E()},[n,i]);const E=async()=>{var x,v,j;t(!0);try{const D={page:i,per_page:20,...n};Object.keys(D).forEach(A=>{(D[A]===""||D[A]===null)&&delete D[A]});const H=await gk.getAuditoria(D);H.success?(r(((x=H.data)==null?void 0:x.data)||[]),u(((v=H.data)==null?void 0:v.total)||0),h(((j=H.data)==null?void 0:j.last_page)||1)):m.error(H.message||"Error al cargar auditora")}catch{m.error("Error al cargar registros de auditora")}finally{t(!1)}},S=(x,v)=>{o(j=>({...j,[x]:v})),l(1)},C=()=>{o({modelo:"",accion:"",user_id:"",fecha_inicio:"",fecha_fin:""}),k(""),l(1)},b=x=>{switch(x){case"create":return e.jsx(We,{className:"h-4 w-4 text-success-500"});case"update":return e.jsx(ep,{className:"h-4 w-4 text-primary-500"});case"delete":return e.jsx(d1,{className:"h-4 w-4 text-error-500"});case"view":return e.jsx(Qe,{className:"h-4 w-4 text-info-500"});default:return e.jsx(vl,{className:"h-4 w-4 text-gray-500"})}},p=x=>{switch(x){case"create":return"bg-success-100 dark:bg-success-900/30 text-success-700 dark:text-success-300";case"update":return"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300";case"delete":return"bg-error-100 dark:bg-error-900/30 text-error-700 dark:text-error-300";case"view":return"bg-info-100 dark:bg-info-900/30 text-info-700 dark:text-info-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}},N=x=>({create:"Crear",update:"Actualizar",delete:"Eliminar",view:"Ver",export:"Exportar",import:"Importar"})[x]||x,_=y?s.filter(x=>{var v,j,D,H;return((v=x.descripcion)==null?void 0:v.toLowerCase().includes(y.toLowerCase()))||((j=x.modelo)==null?void 0:j.toLowerCase().includes(y.toLowerCase()))||((H=(D=x.user)==null?void 0:D.name)==null?void 0:H.toLowerCase().includes(y.toLowerCase()))}):s;return a&&s.length===0?e.jsx("div",{className:"p-8",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Auditora del Sistema"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registro de todas las acciones realizadas en el sistema"})]})}),e.jsx(ke,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(is,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar en descripcin, modelo o usuario...",value:y,onChange:x=>k(x.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Modelo"}),e.jsxs("select",{value:n.modelo,onChange:x=>S("modelo",x.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"Docente",children:"Docente"}),e.jsx("option",{value:"Horario",children:"Horario"}),e.jsx("option",{value:"Asistencia",children:"Asistencia"}),e.jsx("option",{value:"Aula",children:"Aula"}),e.jsx("option",{value:"Grupo",children:"Grupo"}),e.jsx("option",{value:"Materia",children:"Materia"}),e.jsx("option",{value:"User",children:"Usuario"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Accin"}),e.jsxs("select",{value:n.accion,onChange:x=>S("accion",x.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"create",children:"Crear"}),e.jsx("option",{value:"update",children:"Actualizar"}),e.jsx("option",{value:"delete",children:"Eliminar"}),e.jsx("option",{value:"view",children:"Ver"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha Inicio"}),e.jsx("input",{type:"date",value:n.fecha_inicio,onChange:x=>S("fecha_inicio",x.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha Fin"}),e.jsx("input",{type:"date",value:n.fecha_fin,onChange:x=>S("fecha_fin",x.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(W,{onClick:C,variant:"outline",fullWidth:!0,icon:e.jsx(fa,{className:"h-4 w-4"}),children:"Limpiar"})})]})]})}),e.jsx(ke,{children:_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vl,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay registros"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron registros de auditora con los filtros seleccionados"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha/Hora"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Accin"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Modelo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map(x=>{var v;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:H1(x.created_at)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ir,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((v=x.user)==null?void 0:v.name)||"Sistema"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.accion)}`,children:[b(x.accion),e.jsx("span",{className:"ml-1",children:N(x.accion)})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:[x.modelo,x.modelo_id&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["(#",x.modelo_id,")"]})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:x.descripcion}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:x.ip_address||"-"})]},x.id)})})]})}),g>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",_.length," de ",d," registros"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{onClick:()=>l(x=>Math.max(1,x-1)),disabled:i===1,variant:"outline",size:"sm",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pgina ",i," de ",g]}),e.jsx(W,{onClick:()=>l(x=>Math.min(g,x+1)),disabled:i===g,variant:"outline",size:"sm",children:"Siguiente"})]})]})]})})]})},$a={async getGestiones(s={}){var r,a,t,n,o,i,l;try{const d={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",sort_by:s.sort_by||"ao",sort_order:s.sort_order||"desc",ao:s.ao||"",periodo:s.periodo||"",activa:s.activa||""},u=await Re("/gestiones-academicas",d);if(console.log(" gestionAcademicaService.getGestiones - Response completa:",u),console.log(" gestionAcademicaService.getGestiones - response.data:",u.data),console.log(" gestionAcademicaService.getGestiones - response.data.success:",(r=u.data)==null?void 0:r.success),console.log(" gestionAcademicaService.getGestiones - response.data.data:",(a=u.data)==null?void 0:a.data),u.data&&u.data.success){const g=u.data.data;return console.log(" gestionAcademicaService.getGestiones - Datos paginados:",g),console.log(" gestionAcademicaService.getGestiones - Total items:",g==null?void 0:g.total),console.log(" gestionAcademicaService.getGestiones - Array data:",g==null?void 0:g.data),{success:!0,data:g,message:u.data.message}}else return console.error(" gestionAcademicaService.getGestiones - Response sin success:",u.data),{success:!1,message:((t=u.data)==null?void 0:t.message)||"Error al obtener gestiones acadmicas",data:null}}catch(d){return console.error(" Error en gestionAcademicaService.getGestiones:",d),console.error(" Response error:",(n=d.response)==null?void 0:n.data),console.error(" Status:",(o=d.response)==null?void 0:o.status),{success:!1,message:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||d.message||"Error al obtener gestiones acadmicas",data:null}}},async getGestionActiva(){try{const s=await Re("/gestiones-academicas/activa");return s.data.success?{success:!0,data:s.data.data}:{success:!1,message:s.data.message||"No hay gestin acadmica activa"}}catch(s){return{success:!1,message:s.message||"Error al obtener gestin acadmica activa"}}},async getGestion(s){try{const r=await Re(`/gestiones-academicas/${s}`);return r.data.success?{success:!0,data:r.data.data}:{success:!1,message:r.data.message||"Gestin acadmica no encontrada"}}catch(r){return{success:!1,message:r.message||"Error al obtener gestin acadmica"}}},async createGestion(s){var r,a,t,n;try{const o=await Be("/gestiones-academicas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS.SAVE}:{success:!1,message:o.data.message||I.ERROR.SAVE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR.SAVE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async updateGestion(s,r){var a,t,n,o;try{const i=await os(`/gestiones-academicas/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS.UPDATE}:{success:!1,message:i.data.message||I.ERROR.UPDATE,errors:i.data.errors}}catch(i){return{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||i.message||I.ERROR.UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async deleteGestion(s){var r,a;try{const t=await gs(`/gestiones-academicas/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS.DELETE}:{success:!1,message:t.data.message||I.ERROR.DELETE}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR.DELETE}}},async activarGestion(s){try{const r=await os(`/gestiones-academicas/${s}/activar`);return r.data.success?{success:!0,data:r.data.data,message:"Gestin acadmica activada exitosamente"}:{success:!1,message:r.data.message||"Error al activar la gestin acadmica"}}catch(r){return{success:!1,message:r.message||"Error al activar la gestin acadmica"}}},async exportarGestiones(s={}){var r,a,t;try{const n={page:1,per_page:1e4,search:s.search||"",ao:s.ao||"",periodo:s.periodo||"",activa:s.activa||""},o=await Re("/gestiones-academicas",n);return o.data&&o.data.success&&o.data.data?{success:!0,data:o.data.data.data||[]}:{success:!1,message:((r=o.data)==null?void 0:r.message)||"Error al exportar gestiones acadmicas"}}catch(n){return{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||n.message||"Error al exportar gestiones acadmicas"}}},async importarGestiones(s){var r,a,t,n;try{const o=new FormData;o.append("file",s);const i=await Be("/gestiones-academicas/import",o);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Gestiones acadmicas importadas exitosamente"}:{success:!1,message:i.data.message||"Error al importar gestiones acadmicas",errors:i.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al importar gestiones acadmicas",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},hk=()=>{var ce,J,Z,ye,de;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(!1),[E,S]=c.useState(!1),[C,b]=c.useState(null),[p,N]=c.useState(null),[_,x]=c.useState(!1),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),R=c.useRef(null),[G,T]=c.useState({ao:"",periodo:"",activa:""}),{register:$,handleSubmit:L,reset:Y,formState:{errors:M}}=Xe();c.useEffect(()=>{ne()},[i,g,n,G]);const ne=async()=>{var q,ee;try{t(!0);const se=await $a.getGestiones({page:i,per_page:g,search:n,...G});if(console.log(" GestionesAcademicas.jsx - Response recibida:",se),console.log(" GestionesAcademicas.jsx - response.success:",se.success),console.log(" GestionesAcademicas.jsx - response.data:",se.data),se.success&&se.data){const re=se.data.data||[],f=se.data.last_page||1;console.log(" GestionesAcademicas.jsx - Gestiones array:",re),console.log(" GestionesAcademicas.jsx - Total gestiones:",re.length),console.log(" GestionesAcademicas.jsx - Last page:",f),r(re),u(f)}else console.error(" GestionesAcademicas.jsx - Response sin xito:",se),m.error(se.message||"Error al cargar gestiones acadmicas"),r([]),u(1)}catch(se){const re=((ee=(q=se.response)==null?void 0:q.data)==null?void 0:ee.message)||se.message||"Error de conexin: No se pudo cargar las gestiones acadmicas";m.error(re),console.error("Error al cargar gestiones acadmicas:",se),r([]),u(1)}finally{t(!1)}},oe=()=>{b(null),Y({nombre:"",ao:new Date().getFullYear(),periodo:1,fecha_inicio:"",fecha_fin:"",activa:!1}),k(!0)},fe=q=>{b(q),Y({nombre:q.nombre,ao:q.ao||q.anio,periodo:q.periodo,fecha_inicio:q.fecha_inicio?q.fecha_inicio.split("T")[0]:"",fecha_fin:q.fecha_fin?q.fecha_fin.split("T")[0]:"",activa:q.activa||!1}),k(!0)},Q=async q=>{var ee,se;try{const re=await $a.getGestion(q.id);re.success?(N(re.data),S(!0)):m.error(re.message||"Error al cargar los detalles de la gestin")}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error al cargar los detalles de la gestin";m.error(f)}},me=async q=>{var ee,se;if(window.confirm("Ests seguro de que quieres eliminar esta gestin acadmica?"))try{t(!0);const re=await $a.deleteGestion(q);re.success?(m.success(re.message||"Gestin acadmica eliminada exitosamente"),await ne()):m.error(re.message||"Error al eliminar la gestin acadmica")}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error al eliminar la gestin acadmica";m.error(f),console.error("Error al eliminar gestin acadmica:",re)}finally{t(!1)}},xe=async q=>{var ee,se;try{const re=await $a.activarGestion(q);re.success?(m.success("Gestin acadmica activada exitosamente"),await ne()):m.error(re.message||"Error al activar la gestin acadmica")}catch(re){const f=((se=(ee=re.response)==null?void 0:ee.data)==null?void 0:se.message)||re.message||"Error al activar la gestin acadmica";m.error(f)}},ie=async q=>{var ee,se,re,f;try{t(!0);const w={nombre:q.nombre,ao:parseInt(q.ao),periodo:parseInt(q.periodo),fecha_inicio:q.fecha_inicio,fecha_fin:q.fecha_fin,activa:q.activa==="true"||q.activa===!0||q.activa==="1"||q.activa===1};let V;C?V=await $a.updateGestion(C.id,w):V=await $a.createGestion(w),V.success?(m.success(V.message||(C?"Gestin acadmica actualizada exitosamente":"Gestin acadmica creada exitosamente")),k(!1),b(null),Y(),await ne()):(m.error(V.message||"Error al guardar la gestin acadmica"),V.errors&&Object.keys(V.errors).forEach(B=>{m.error(`${B}: ${V.errors[B]}`)}))}catch(w){const V=((se=(ee=w.response)==null?void 0:ee.data)==null?void 0:se.message)||w.message||"Error al guardar la gestin acadmica";m.error(V),console.error("Error al guardar gestin acadmica:",w),(f=(re=w.response)==null?void 0:re.data)!=null&&f.errors&&Object.keys(w.response.data.errors).forEach(B=>{m.error(`${B}: ${w.response.data.errors[B]}`)})}finally{t(!1)}},le=()=>{k(!1),b(null),Y()},Se=async()=>{var q,ee;try{t(!0);const se=await $a.exportarGestiones({search:n,...G});if(se.success&&se.data){const re=se.data.map(f=>({Nombre:f.nombre||"",Ao:f.ao||f.anio||"",Periodo:f.periodo||"","Fecha Inicio":f.fecha_inicio||"","Fecha Fin":f.fecha_fin||"",Activa:f.activa?"S":"No",Creado:f.created_at||""}));Wt(re,`gestiones_academicas_${new Date().toISOString().split("T")[0]}.csv`),m.success("Gestiones acadmicas exportadas exitosamente")}else m.error(se.message||"Error al exportar gestiones acadmicas")}catch(se){m.error(((ee=(q=se.response)==null?void 0:q.data)==null?void 0:ee.message)||se.message||"Error al exportar gestiones acadmicas")}finally{t(!1)}},pe=async()=>{var ee,se,re,f;const q=(se=(ee=R.current)==null?void 0:ee.files)==null?void 0:se[0];if(!q){m.error("Por favor selecciona un archivo");return}try{H(!0),P(null);const w=await $a.importarGestiones(q);w.success?(P({success:!0,message:w.message||"Gestiones acadmicas importadas exitosamente",data:w.data}),m.success(w.message||"Gestiones acadmicas importadas exitosamente"),await ne(),setTimeout(()=>{j(!1),P(null),R.current&&(R.current.value="")},2e3)):(P({success:!1,message:w.message||"Error al importar gestiones acadmicas",errors:w.errors}),m.error(w.message||"Error al importar gestiones acadmicas"))}catch(w){const V=((f=(re=w.response)==null?void 0:re.data)==null?void 0:f.message)||w.message||"Error al importar gestiones acadmicas";P({success:!1,message:V}),m.error(V)}finally{H(!1)}},K=()=>{const q=`nombre,ao,periodo,fecha_inicio,fecha_fin,activa
Gestin 2024,2024,1,2024-01-01,2024-06-30,0
Gestin 2024-2,2024,2,2024-07-01,2024-12-31,0
`,ee=new Blob([q],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(ee),se.download="template_gestiones_academicas.csv",se.click()},ae=[{key:"nombre",label:"Nombre",sortable:!0,render:q=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(ga,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:q.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[q.ao||q.anio," - Periodo ",q.periodo]})]})]})},{key:"periodo",label:"Ao/Periodo",sortable:!0,render:q=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-900 dark:text-gray-100",children:[q.ao||q.anio," - P",q.periodo]})]})},{key:"fecha_inicio",label:"Fecha Inicio",sortable:!0,render:q=>{const ee=q.fecha_inicio?new Date(q.fecha_inicio).toLocaleDateString("es-ES"):"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ee})]})}},{key:"fecha_fin",label:"Fecha Fin",sortable:!0,render:q=>{const ee=q.fecha_fin?new Date(q.fecha_fin).toLocaleDateString("es-ES"):"N/A";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ee})]})}},{key:"activa",label:"Estado",sortable:!0,render:q=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.activa?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:q.activa?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:q=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Q(q)}),!q.activa&&e.jsx(W,{variant:"success",size:"sm",icon:e.jsx(Me,{className:"h-4 w-4"}),onClick:()=>xe(q.id),title:"Activar gestin"}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>fe(q)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>me(q.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ga,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin Acadmica"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los periodos acadmicos"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:oe,children:"Nueva Gestin"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Gestiones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ga,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Gestiones Activas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(q=>q.activa).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Ao Actual"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:new Date().getFullYear()})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(On,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Gestin Activa"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:((ce=s.find(q=>q.activa))==null?void 0:ce.nombre)||"Ninguna"})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Ht,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Gestiones Acadmicas"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar gestiones...",value:n,onChange:q=>o(q.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(fa,{className:"h-4 w-4"}),onClick:()=>x(!_),children:"Filtros"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:Se,disabled:a,children:"Exportar"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(or,{className:"h-4 w-4"}),onClick:()=>j(!0),children:"Importar"})]})]})]}),_&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Filtros Avanzados"}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(xr,{className:"h-4 w-4"}),onClick:()=>{x(!1),T({ao:"",periodo:"",activa:""})},children:"Limpiar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ao"}),e.jsx(we,{type:"number",placeholder:"Ej: 2024",value:G.ao,onChange:q=>T({...G,ao:q.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Periodo"}),e.jsx(we,{type:"number",placeholder:"Ej: 1",value:G.periodo,onChange:q=>T({...G,periodo:q.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:G.activa,onChange:q=>T({...G,activa:q.target.value}),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]})]})]})]}),e.jsx(ds,{columns:ae,data:s,loading:a,pagination:{currentPage:i,totalPages:d,perPage:g,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:y,onClose:le,title:C?"Editar Gestin Acadmica":"Nueva Gestin Acadmica",size:"lg",children:e.jsxs("form",{onSubmit:L(ie),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(we,{label:"Nombre *",placeholder:"Ej: Gestin 2024-I",error:(J=M.nombre)==null?void 0:J.message,...$("nombre",{required:"El nombre es obligatorio"})}),e.jsx(we,{label:"Ao *",type:"number",min:"2000",max:"2100",placeholder:"Ej: 2024",error:(Z=M.ao)==null?void 0:Z.message,...$("ao",{required:"El ao es obligatorio",min:{value:2e3,message:"El ao mnimo es 2000"},max:{value:2100,message:"El ao mximo es 2100"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Perodo *"}),e.jsxs("select",{...$("periodo",{required:"El perodo es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar perodo"}),e.jsx("option",{value:"1",children:"Primer Semestre (I)"}),e.jsx("option",{value:"2",children:"Segundo Semestre (II)"})]}),M.periodo&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:M.periodo.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{...$("activa",{setValueAs:q=>q==="true"||q===!0||q==="1"||q===1}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"false",children:"Inactiva"}),e.jsx("option",{value:"true",children:"Activa"})]})]}),e.jsx(we,{label:"Fecha Inicio *",type:"date",error:(ye=M.fecha_inicio)==null?void 0:ye.message,...$("fecha_inicio",{required:"La fecha de inicio es obligatoria"})}),e.jsx(we,{label:"Fecha Fin *",type:"date",error:(de=M.fecha_fin)==null?void 0:de.message,...$("fecha_fin",{required:"La fecha de fin es obligatoria",validate:q=>{var se;const ee=(se=document.querySelector('input[name="fecha_inicio"]'))==null?void 0:se.value;return ee&&q<=ee?"La fecha de fin debe ser posterior a la fecha de inicio":!0}})})]}),e.jsx("div",{className:"p-3 bg-info-50 dark:bg-info-900/20 rounded-lg",children:e.jsx("p",{className:"text-xs text-info-700 dark:text-info-300",children:"Nota: Si marcas esta gestin como activa, las dems gestiones se desactivarn automticamente."})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:le,children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Gestin"]})]})]})}),e.jsx(Fe,{isOpen:E,onClose:()=>S(!1),title:"Detalles de la Gestin Acadmica",size:"lg",children:p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ao"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.ao||p.anio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Perodo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.periodo===1?"Primer Semestre (I)":"Segundo Semestre (II)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.activa?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:p.activa?"Activa":"Inactiva"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Inicio"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.fecha_inicio?new Date(p.fecha_inicio).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Fin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.fecha_fin?new Date(p.fecha_fin).toLocaleDateString("es-ES"):"N/A"})]})]}),p.grupos&&p.grupos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grupos Asociados"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[p.grupos.length," grupos"]})]})]})}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),R.current&&(R.current.value="")},title:"Importar Gestiones Acadmicas",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Selecciona un archivo CSV o Excel con las gestiones acadmicas. Puedes descargar el template para ver el formato requerido."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Archivo (CSV o Excel)"}),e.jsx("input",{ref:R,type:"file",accept:".csv,.xlsx,.xls",className:`block w-full text-sm text-gray-500 dark:text-gray-400
                file:mr-4 file:py-2 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary-500 file:text-white
                hover:file:bg-primary-600
                file:cursor-pointer
                border border-gray-300 dark:border-gray-600 rounded-lg`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(W,{variant:"outline",size:"sm",onClick:K,children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Descargar Template"]})}),A&&e.jsxs("div",{className:`p-4 rounded-lg ${A.success?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("p",{className:`text-sm ${A.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:A.message}),A.errors&&e.jsx("ul",{className:"mt-2 text-sm text-red-700 dark:text-red-300 list-disc list-inside",children:Object.entries(A.errors).map(([q,ee])=>e.jsxs("li",{children:[q,": ",Array.isArray(ee)?ee.join(", "):ee]},q))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{j(!1),P(null),R.current&&(R.current.value="")},children:"Cancelar"}),e.jsx(W,{variant:"primary",onClick:pe,disabled:D,children:D?"Importando...":"Importar"})]})]})})]})},fk=()=>{var K,ae,ce;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre_pais"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),{register:T,handleSubmit:$,reset:L,formState:{errors:Y},trigger:M,setValue:ne,watch:oe}=Xe({mode:"onChange",defaultValues:{nombre_pais:"",codigo_iso:"",codigo_telefono:""}});c.useEffect(()=>{fe()},[i,g,n,p,_]);const fe=async()=>{var J,Z;try{t(!0);const ye=await en.getPaises({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});if(ye.success&&ye.data)r(ye.data.data||[]),u(ye.data.last_page||1),k(ye.data.total||0),S(ye.data.from||0),b(ye.data.to||0);else{const de=ye.message||"Error al cargar pases";m.error(de),r([]),u(1),k(0),S(0),b(0)}}catch(ye){const de=((Z=(J=ye.response)==null?void 0:J.data)==null?void 0:Z.message)||ye.message||"Error de conexin. Por favor, verifica tu conexin a internet";m.error(de),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},Q=(J,Z)=>{N(J),x(Z),l(1)},me=()=>{P(null),L({nombre_pais:"",codigo_iso:"",codigo_telefono:""}),j(!0)},xe=J=>{P(J),L({nombre_pais:J.nombre_pais,codigo_iso:J.codigo_iso||"",codigo_telefono:J.codigo_telefono||""}),j(!0)},ie=async J=>{var Z,ye;try{const de=await en.getPais(J.id);de.success?(G(de.data),H(!0)):m.error(de.message||"Error al cargar el pas")}catch(de){const q=((ye=(Z=de.response)==null?void 0:Z.data)==null?void 0:ye.message)||de.message||"Error al cargar el pas";m.error(q)}},le=async J=>{var Z,ye;if(window.confirm("Ests seguro de que quieres eliminar este pas?"))try{t(!0);const de=await en.deletePais(J);de.success?(m.success(de.message||"Pas eliminado exitosamente"),await fe()):m.error(de.message||"Error al eliminar el pas")}catch(de){m.error(((ye=(Z=de.response)==null?void 0:Z.data)==null?void 0:ye.message)||de.message||"Error al eliminar el pas")}finally{t(!1)}},Se=async J=>{var Z,ye,de,q;if(!J.nombre_pais||J.nombre_pais.trim()===""){m.error("El nombre del pas es obligatorio");return}if(J.nombre_pais.length>100){m.error("El nombre del pas no puede tener ms de 100 caracteres");return}if(J.codigo_iso&&J.codigo_iso.length>3){m.error("El cdigo ISO no puede tener ms de 3 caracteres");return}if(J.codigo_telefono&&J.codigo_telefono.length>10){m.error("El cdigo telefnico no puede tener ms de 10 caracteres");return}try{t(!0);const ee={nombre_pais:J.nombre_pais.trim(),codigo_iso:J.codigo_iso?J.codigo_iso.trim().toUpperCase():null,codigo_telefono:J.codigo_telefono?J.codigo_telefono.trim():null};ee.codigo_iso||delete ee.codigo_iso,ee.codigo_telefono||delete ee.codigo_telefono;let se;A?se=await en.updatePais(A.id,ee):se=await en.createPais(ee),se.success?(m.success(se.message||(A?"Pas actualizado exitosamente":"Pas creado exitosamente")),j(!1),P(null),L(),await fe()):(m.error(se.message||"Error al guardar el pas"),se.errors&&(Array.isArray(se.errors)?se.errors:Object.values(se.errors).flat()).forEach(f=>{typeof f=="string"&&f.trim()&&m.error(f,{duration:4e3})}))}catch(ee){const se=((ye=(Z=ee.response)==null?void 0:Z.data)==null?void 0:ye.message)||ee.message||"Error al guardar el pas";if(m.error(se),(q=(de=ee.response)==null?void 0:de.data)!=null&&q.errors){const re=ee.response.data.errors;(Array.isArray(re)?re:Object.values(re).flat()).forEach(w=>{typeof w=="string"&&w.trim()&&m.error(w,{duration:4e3})})}}finally{t(!1)}},pe=[{key:"nombre_pais",label:"Pas",sortable:!0,render:J=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(wo,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:J.nombre_pais}),J.codigo_iso&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ISO: ",J.codigo_iso]})]})]})},{key:"codigo_telefono",label:"Cdigo Tel.",render:J=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:J.codigo_telefono||"-"})},{key:"actions",label:"Acciones",render:J=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>ie(J)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>xe(J)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>le(J.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(wo,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Pases"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los pases del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:me,children:"Nuevo Pas"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Pases"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:y}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n?`${y} resultados encontrados`:"Registros en el sistema"})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(wo,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pgina Actual"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[i," / ",d]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Mostrando ",E," - ",C]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Js,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Por Pgina"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:g}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Registros mostrados"})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Pases"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar pases...",value:n,onChange:J=>o(J.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:pe,data:s,loading:a,onSort:Q,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),L()},title:A?"Editar Pas":"Nuevo Pas",size:"lg",children:e.jsxs("form",{onSubmit:$(Se),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(we,{label:"Nombre del Pas *",placeholder:"Ej: Bolivia",error:(K=Y.nombre_pais)==null?void 0:K.message,...T("nombre_pais",{required:"El nombre del pas es obligatorio",maxLength:{value:100,message:"El nombre del pas no puede tener ms de 100 caracteres"},validate:J=>J&&J.trim().length===0?"El nombre del pas no puede estar vaco":!0}),onBlur:()=>M("nombre_pais")}),e.jsx(we,{label:"Cdigo ISO",placeholder:"Ej: BOL",error:(ae=Y.codigo_iso)==null?void 0:ae.message,...T("codigo_iso",{maxLength:{value:3,message:"El cdigo ISO no puede tener ms de 3 caracteres"},pattern:{value:/^[A-Za-z]*$/,message:"El cdigo ISO solo puede contener letras"}}),onBlur:()=>M("codigo_iso"),onChange:J=>{const Z=J.target.value.toUpperCase().replace(/[^A-Za-z]/g,"");ne("codigo_iso",Z,{shouldValidate:!0})}}),e.jsx(we,{label:"Cdigo Telefnico",placeholder:"Ej: +591",error:(ce=Y.codigo_telefono)==null?void 0:ce.message,...T("codigo_telefono",{maxLength:{value:10,message:"El cdigo telefnico no puede tener ms de 10 caracteres"},pattern:{value:/^[+]?[0-9]*$/,message:"El cdigo telefnico solo puede contener nmeros y el smbolo +"}}),onBlur:()=>M("codigo_telefono")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),L()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[A?"Actualizar":"Crear"," Pas"]})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>H(!1),title:"Detalles del Pas",size:"lg",children:R&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.nombre_pais})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo ISO"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.codigo_iso||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Telefnico"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.codigo_telefono||"-"})]}),R.provincias&&R.provincias.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincias"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[R.provincias.length," provincias"]})]})]})})})]})},pk=()=>{var fe,Q,me;const[s,r]=c.useState([]),[a,t]=c.useState([]),[n,o]=c.useState(!0),[i,l]=c.useState(""),[d,u]=c.useState(""),[g,h]=c.useState(1),[y,k]=c.useState(1),[E,S]=c.useState(10),[C,b]=c.useState(!1),[p,N]=c.useState(!1),[_,x]=c.useState(null),[v,j]=c.useState(null),{register:D,handleSubmit:H,reset:A,formState:{errors:P},watch:R}=Xe();c.useEffect(()=>{G()},[]),c.useEffect(()=>{T()},[g,E,i,d]);const G=async()=>{try{const xe=await en.getPaises({per_page:1e3});xe.success&&xe.data&&t(xe.data.data||[])}catch(xe){console.error("Error al cargar pases:",xe)}},T=async()=>{var xe,ie;try{o(!0);const le=await sn.getProvincias({page:g,per_page:E,search:i,pais_id:d||void 0});le.success&&le.data?(r(le.data.data||[]),k(le.data.last_page||1)):(m.error(le.message||"Error al cargar provincias"),r([]),k(1))}catch(le){m.error(((ie=(xe=le.response)==null?void 0:xe.data)==null?void 0:ie.message)||le.message||"Error de conexin"),r([]),k(1)}finally{o(!1)}},$=()=>{x(null),A({nombre_provincia:"",codigo_provincia:"",pais_id:""}),b(!0)},L=xe=>{var ie;x(xe),A({nombre_provincia:xe.nombre_provincia,codigo_provincia:xe.codigo_provincia||"",pais_id:xe.pais_id||((ie=xe.pais)==null?void 0:ie.id)||""}),b(!0)},Y=async xe=>{try{const ie=await sn.getProvincia(xe.id);ie.success&&(j(ie.data),N(!0))}catch{m.error("Error al cargar la provincia")}},M=async xe=>{var ie,le;if(window.confirm("Ests seguro de que quieres eliminar esta provincia?"))try{o(!0);const Se=await sn.deleteProvincia(xe);Se.success?(m.success(Se.message||"Provincia eliminada exitosamente"),await T()):m.error(Se.message||"Error al eliminar la provincia")}catch(Se){m.error(((le=(ie=Se.response)==null?void 0:ie.data)==null?void 0:le.message)||Se.message||"Error al eliminar la provincia")}finally{o(!1)}},ne=async xe=>{var ie,le,Se,pe;try{o(!0);let K;_?K=await sn.updateProvincia(_.id,xe):K=await sn.createProvincia(xe),K.success?(m.success(K.message||(_?"Provincia actualizada exitosamente":"Provincia creada exitosamente")),b(!1),x(null),A(),await T()):(m.error(K.message||"Error al guardar la provincia"),K.errors&&Object.keys(K.errors).forEach(ae=>{m.error(`${ae}: ${K.errors[ae]}`)}))}catch(K){m.error(((le=(ie=K.response)==null?void 0:ie.data)==null?void 0:le.message)||K.message||"Error al guardar la provincia"),(pe=(Se=K.response)==null?void 0:Se.data)!=null&&pe.errors&&Object.keys(K.response.data.errors).forEach(ae=>{m.error(`${ae}: ${K.response.data.errors[ae]}`)})}finally{o(!1)}},oe=[{key:"nombre_provincia",label:"Provincia",sortable:!0,render:xe=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-accent-500 to-primary-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Eo,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:xe.nombre_provincia}),xe.pais&&e.jsx("div",{className:"text-sm text-gray-500",children:xe.pais.nombre_pais})]})]})},{key:"codigo_provincia",label:"Cdigo",render:xe=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:xe.codigo_provincia||"-"})},{key:"actions",label:"Acciones",render:xe=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Y(xe)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>L(xe)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>M(xe.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-primary-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Eo,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Provincias"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las provincias del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:$,children:"Nueva Provincia"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Provincias"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Eo,{className:"h-6 w-6 text-white"})})]})})}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Provincias"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar provincias...",value:i,onChange:xe=>l(xe.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:d,onChange:xe=>u(xe.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los pases"}),a.map(xe=>e.jsx("option",{value:xe.id,children:xe.nombre_pais},xe.id))]})]})]}),e.jsx(ds,{columns:oe,data:s,loading:n,pagination:{currentPage:g,totalPages:y,perPage:E,onPageChange:h,onPerPageChange:S}})]}),e.jsx(Fe,{isOpen:C,onClose:()=>{b(!1),x(null),A()},title:_?"Editar Provincia":"Nueva Provincia",size:"lg",children:e.jsxs("form",{onSubmit:H(ne),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas *"}),e.jsxs("select",{...D("pais_id",{required:"El pas es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar pas..."}),a.map(xe=>e.jsx("option",{value:xe.id,children:xe.nombre_pais},xe.id))]}),P.pais_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:P.pais_id.message})]}),e.jsx(we,{label:"Nombre de la Provincia *",placeholder:"Ej: La Paz",error:(fe=P.nombre_provincia)==null?void 0:fe.message,...D("nombre_provincia",{required:"El nombre de la provincia es obligatorio"})}),e.jsx(we,{label:"Cdigo de la Provincia",placeholder:"Ej: LP",error:(Q=P.codigo_provincia)==null?void 0:Q.message,...D("codigo_provincia")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{b(!1),x(null),A()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[_?"Actualizar":"Crear"," Provincia"]})]})]})}),e.jsx(Fe,{isOpen:p,onClose:()=>N(!1),title:"Detalles de la Provincia",size:"lg",children:v&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Provincia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:v.nombre_provincia})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((me=v.pais)==null?void 0:me.nombre_pais)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:v.codigo_provincia||"-"})]}),v.ciudades&&v.ciudades.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudades"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[v.ciudades.length," ciudades"]})]})]})})})]})},yk=()=>{var oe,fe,Q,me,xe;const[s,r]=c.useState([]),[a,t]=c.useState([]),[n,o]=c.useState(!0),[i,l]=c.useState(""),[d,u]=c.useState(""),[g,h]=c.useState(1),[y,k]=c.useState(1),[E,S]=c.useState(10),[C,b]=c.useState(!1),[p,N]=c.useState(!1),[_,x]=c.useState(null),[v,j]=c.useState(null),{register:D,handleSubmit:H,reset:A,formState:{errors:P}}=Xe();c.useEffect(()=>{R()},[]),c.useEffect(()=>{G()},[g,E,i,d]);const R=async()=>{try{const ie=await sn.getProvincias({per_page:1e3});ie.success&&ie.data&&t(ie.data.data||[])}catch(ie){console.error("Error al cargar provincias:",ie)}},G=async()=>{var ie,le;try{o(!0);const Se=await rn.getCiudades({page:g,per_page:E,search:i,provincia_id:d||void 0});Se.success&&Se.data?(r(Se.data.data||[]),k(Se.data.last_page||1)):(m.error(Se.message||"Error al cargar ciudades"),r([]),k(1))}catch(Se){m.error(((le=(ie=Se.response)==null?void 0:ie.data)==null?void 0:le.message)||Se.message||"Error de conexin"),r([]),k(1)}finally{o(!1)}},T=()=>{x(null),A({nombre_ciudad:"",codigo_postal:"",provincia_id:""}),b(!0)},$=ie=>{var le;x(ie),A({nombre_ciudad:ie.nombre_ciudad,codigo_postal:ie.codigo_postal||"",provincia_id:ie.provincia_id||((le=ie.provincia)==null?void 0:le.id)||""}),b(!0)},L=async ie=>{try{const le=await rn.getCiudad(ie.id);le.success&&(j(le.data),N(!0))}catch{m.error("Error al cargar la ciudad")}},Y=async ie=>{var le,Se;if(window.confirm("Ests seguro de que quieres eliminar esta ciudad?"))try{o(!0);const pe=await rn.deleteCiudad(ie);pe.success?(m.success(pe.message||"Ciudad eliminada exitosamente"),await G()):m.error(pe.message||"Error al eliminar la ciudad")}catch(pe){m.error(((Se=(le=pe.response)==null?void 0:le.data)==null?void 0:Se.message)||pe.message||"Error al eliminar la ciudad")}finally{o(!1)}},M=async ie=>{var le,Se,pe,K;try{o(!0);let ae;_?ae=await rn.updateCiudad(_.id,ie):ae=await rn.createCiudad(ie),ae.success?(m.success(ae.message||(_?"Ciudad actualizada exitosamente":"Ciudad creada exitosamente")),b(!1),x(null),A(),await G()):(m.error(ae.message||"Error al guardar la ciudad"),ae.errors&&Object.keys(ae.errors).forEach(ce=>{m.error(`${ce}: ${ae.errors[ce]}`)}))}catch(ae){m.error(((Se=(le=ae.response)==null?void 0:le.data)==null?void 0:Se.message)||ae.message||"Error al guardar la ciudad"),(K=(pe=ae.response)==null?void 0:pe.data)!=null&&K.errors&&Object.keys(ae.response.data.errors).forEach(ce=>{m.error(`${ce}: ${ae.response.data.errors[ce]}`)})}finally{o(!1)}},ne=[{key:"nombre_ciudad",label:"Ciudad",sortable:!0,render:ie=>{var le;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-info-500 to-primary-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Js,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ie.nombre_ciudad}),ie.provincia&&e.jsxs("div",{className:"text-sm text-gray-500",children:[ie.provincia.nombre_provincia," - ",(le=ie.provincia.pais)==null?void 0:le.nombre_pais]})]})]})}},{key:"codigo_postal",label:"Cdigo Postal",render:ie=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:ie.codigo_postal||"-"})},{key:"actions",label:"Acciones",render:ie=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>L(ie)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>$(ie)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>Y(ie.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-primary-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Js,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Ciudades"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las ciudades del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:T,children:"Nueva Ciudad"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Ciudades"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-info-500 to-info-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Js,{className:"h-6 w-6 text-white"})})]})})}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Ciudades"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar ciudades...",value:i,onChange:ie=>l(ie.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:d,onChange:ie=>u(ie.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las provincias"}),a.map(ie=>e.jsx("option",{value:ie.id,children:ie.nombre_provincia},ie.id))]})]})]}),e.jsx(ds,{columns:ne,data:s,loading:n,pagination:{currentPage:g,totalPages:y,perPage:E,onPageChange:h,onPerPageChange:S}})]}),e.jsx(Fe,{isOpen:C,onClose:()=>{b(!1),x(null),A()},title:_?"Editar Ciudad":"Nueva Ciudad",size:"lg",children:e.jsxs("form",{onSubmit:H(M),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia *"}),e.jsxs("select",{...D("provincia_id",{required:"La provincia es obligatoria"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar provincia..."}),a.map(ie=>e.jsx("option",{value:ie.id,children:ie.nombre_provincia},ie.id))]}),P.provincia_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:P.provincia_id.message})]}),e.jsx(we,{label:"Nombre de la Ciudad *",placeholder:"Ej: La Paz",error:(oe=P.nombre_ciudad)==null?void 0:oe.message,...D("nombre_ciudad",{required:"El nombre de la ciudad es obligatorio"})}),e.jsx(we,{label:"Cdigo Postal",placeholder:"Ej: 0000",error:(fe=P.codigo_postal)==null?void 0:fe.message,...D("codigo_postal")})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{b(!1),x(null),A()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[_?"Actualizar":"Crear"," Ciudad"]})]})]})}),e.jsx(Fe,{isOpen:p,onClose:()=>N(!1),title:"Detalles de la Ciudad",size:"lg",children:v&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de la Ciudad"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:v.nombre_ciudad})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provincia"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((Q=v.provincia)==null?void 0:Q.nombre_provincia)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pas"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((xe=(me=v.provincia)==null?void 0:me.pais)==null?void 0:xe.nombre_pais)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Postal"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:v.codigo_postal||"-"})]}),v.instituciones&&v.instituciones.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instituciones"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[v.instituciones.length," instituciones"]})]})]})})})]})},bk=()=>{var Q,me,xe,ie,le,Se,pe;const[s,r]=c.useState([]),[a,t]=c.useState([]),[n,o]=c.useState(!0),[i,l]=c.useState(""),[d,u]=c.useState(""),[g,h]=c.useState(""),[y,k]=c.useState(1),[E,S]=c.useState(1),[C,b]=c.useState(10),[p,N]=c.useState(!1),[_,x]=c.useState(!1),[v,j]=c.useState(null),[D,H]=c.useState(null),{register:A,handleSubmit:P,reset:R,formState:{errors:G}}=Xe();c.useEffect(()=>{T()},[]),c.useEffect(()=>{$()},[y,C,i,d,g]);const T=async()=>{try{const K=await rn.getCiudades({per_page:1e3});K.success&&K.data&&t(K.data.data||[])}catch(K){console.error("Error al cargar ciudades:",K)}},$=async()=>{var K,ae;try{o(!0);const ce=await Xn.getInstituciones({page:y,per_page:C,search:i,ciudad_id:d||void 0,estado:g!==""?g:void 0});ce.success&&ce.data?(r(ce.data.data||[]),S(ce.data.last_page||1)):(m.error(ce.message||"Error al cargar instituciones"),r([]),S(1))}catch(ce){m.error(((ae=(K=ce.response)==null?void 0:K.data)==null?void 0:ae.message)||ce.message||"Error de conexin"),r([]),S(1)}finally{o(!1)}},L=()=>{j(null),R({nombre:"",direccion:"",telefono:"",email:"",sitio_web:"",fecha_fundacion:"",estado:1,ciudad_id:""}),N(!0)},Y=K=>{var ae;j(K),R({nombre:K.nombre,direccion:K.direccion||"",telefono:K.telefono||"",email:K.email||"",sitio_web:K.sitio_web||"",fecha_fundacion:K.fecha_fundacion?K.fecha_fundacion.split("T")[0]:"",estado:K.estado,ciudad_id:K.ciudad_id||((ae=K.ciudad)==null?void 0:ae.id)||""}),N(!0)},M=async K=>{try{const ae=await Xn.getInstitucion(K.id);ae.success&&(H(ae.data),x(!0))}catch{m.error("Error al cargar la institucin")}},ne=async K=>{var ae,ce;if(window.confirm("Ests seguro de que quieres eliminar esta institucin?"))try{o(!0);const J=await Xn.deleteInstitucion(K);J.success?(m.success(J.message||"Institucin eliminada exitosamente"),await $()):m.error(J.message||"Error al eliminar la institucin")}catch(J){m.error(((ce=(ae=J.response)==null?void 0:ae.data)==null?void 0:ce.message)||J.message||"Error al eliminar la institucin")}finally{o(!1)}},oe=async K=>{var ae,ce,J,Z;try{o(!0);const ye={...K,estado:parseInt(K.estado),ciudad_id:parseInt(K.ciudad_id)};let de;v?de=await Xn.updateInstitucion(v.id,ye):de=await Xn.createInstitucion(ye),de.success?(m.success(de.message||(v?"Institucin actualizada exitosamente":"Institucin creada exitosamente")),N(!1),j(null),R(),await $()):(m.error(de.message||"Error al guardar la institucin"),de.errors&&Object.keys(de.errors).forEach(q=>{m.error(`${q}: ${de.errors[q]}`)}))}catch(ye){m.error(((ce=(ae=ye.response)==null?void 0:ae.data)==null?void 0:ce.message)||ye.message||"Error al guardar la institucin"),(Z=(J=ye.response)==null?void 0:J.data)!=null&&Z.errors&&Object.keys(ye.response.data.errors).forEach(de=>{m.error(`${de}: ${ye.response.data.errors[de]}`)})}finally{o(!1)}},fe=[{key:"nombre",label:"Institucin",sortable:!0,render:K=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-warning-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(Mt,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:K.nombre}),K.ciudad&&e.jsx("div",{className:"text-sm text-gray-500",children:K.ciudad.nombre_ciudad})]})]})},{key:"estado",label:"Estado",render:K=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K.estado===1||K.estado==="1"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:K.estado===1||K.estado==="1"?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Activa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"Inactiva"]})})},{key:"actions",label:"Acciones",render:K=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>M(K)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>Y(K)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>ne(K.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Mt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Instituciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las instituciones del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:L,children:"Nueva Institucin"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Instituciones"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-warning-500 to-warning-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Mt,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Instituciones Activas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(K=>K.estado===1||K.estado==="1").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-success-500 to-success-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Instituciones"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar instituciones...",value:i,onChange:K=>l(K.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{value:d,onChange:K=>u(K.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las ciudades"}),a.map(K=>e.jsx("option",{value:K.id,children:K.nombre_ciudad},K.id))]}),e.jsxs("select",{value:g,onChange:K=>h(K.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"1",children:"Activas"}),e.jsx("option",{value:"0",children:"Inactivas"})]})]})]}),e.jsx(ds,{columns:fe,data:s,loading:n,pagination:{currentPage:y,totalPages:E,perPage:C,onPageChange:k,onPerPageChange:b}})]}),e.jsx(Fe,{isOpen:p,onClose:()=>{N(!1),j(null),R()},title:v?"Editar Institucin":"Nueva Institucin",size:"lg",children:e.jsxs("form",{onSubmit:P(oe),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(we,{label:"Nombre de la Institucin *",placeholder:"Ej: Universidad Mayor de San Andrs",error:(Q=G.nombre)==null?void 0:Q.message,...A("nombre",{required:"El nombre es obligatorio"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad *"}),e.jsxs("select",{...A("ciudad_id",{required:"La ciudad es obligatoria"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar ciudad..."}),a.map(K=>e.jsx("option",{value:K.id,children:K.nombre_ciudad},K.id))]}),G.ciudad_id&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:G.ciudad_id.message})]}),e.jsx(we,{label:"Direccin",placeholder:"Ej: Av. Villazn N 1995",error:(me=G.direccion)==null?void 0:me.message,...A("direccion")}),e.jsx(we,{label:"Telfono",placeholder:"Ej: +591 2 2440000",error:(xe=G.telefono)==null?void 0:xe.message,...A("telefono")}),e.jsx(we,{label:"Email",type:"email",placeholder:"Ej: contacto@umsa.edu.bo",error:(ie=G.email)==null?void 0:ie.message,...A("email")}),e.jsx(we,{label:"Sitio Web",type:"url",placeholder:"Ej: https://www.umsa.edu.bo",error:(le=G.sitio_web)==null?void 0:le.message,...A("sitio_web")}),e.jsx(we,{label:"Fecha de Fundacin",type:"date",error:(Se=G.fecha_fundacion)==null?void 0:Se.message,...A("fecha_fundacion")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado *"}),e.jsxs("select",{...A("estado",{required:"El estado es obligatorio"}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]}),G.estado&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:G.estado.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{N(!1),j(null),R()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[v?"Actualizar":"Crear"," Institucin"]})]})]})}),e.jsx(Fe,{isOpen:_,onClose:()=>x(!1),title:"Detalles de la Institucin",size:"lg",children:D&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:D.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((pe=D.ciudad)==null?void 0:pe.nombre_ciudad)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:D.direccion||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telfono"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:D.telefono||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:D.email||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sitio Web"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:D.sitio_web||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.estado===1||D.estado==="1"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:D.estado===1||D.estado==="1"?"Activa":"Inactiva"})]})]})})})]})},oo={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await Re("/admin/tipos-documento",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipos documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await Re(`/admin/tipos-documento/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching tipo documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Be("/admin/tipos-documento",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS_CREATE}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating tipo documento:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await os(`/admin/tipos-documento/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS_UPDATE}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating tipo documento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await gs(`/admin/tipos-documento/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS_DELETE}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error deleting tipo documento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},Jt={async getEstudiantesPendientes(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await Re("/admin/documentos/validacion",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching estudiantes pendientes:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getDocumentosEstudiante(s){var r,a;try{const t=await Re(`/admin/documentos/validacion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching documentos estudiante:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async aprobarDocumento(s,r=""){var a,t;try{const n=await Be(`/admin/documentos/validacion/${s}/aprobar`,{observaciones:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Documento aprobado exitosamente"}:{success:!1,message:n.data.message||"Error al aprobar documento"}}catch(n){return console.error("Error aprobando documento:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al aprobar documento"}}},async rechazarDocumento(s,r){var a,t;try{const n=await Be("/admin/documentos/validacion/rechazar",{documento_id:s,motivo:r});return n.data.success?{success:!0,data:n.data.data,message:n.data.message||"Documento rechazado exitosamente"}:{success:!1,message:n.data.message||"Error al rechazar documento"}}catch(n){return console.error("Error rechazando documento:",n),{success:!1,message:((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al rechazar documento"}}},async aprobarTodos(s){var r,a;try{const t=await Be(`/admin/documentos/validacion/${s}/aprobar-todos`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message||"Todos los documentos aprobados exitosamente"}:{success:!1,message:t.data.message||"Error al aprobar documentos"}}catch(t){return console.error("Error aprobando todos los documentos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al aprobar documentos"}}}},Lx={async getMisDocumentos(){var s,r;try{const a=await Re("/estudiante/documentos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching mis documentos:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async subirDocumento(s,r){var a,t,n,o;try{const i=new FormData;i.append("tipo_documento_id",s),i.append("archivo",r);const l=await qt("/estudiante/documentos/subir",i);return l.data.success?{success:!0,data:l.data.data,message:l.data.message||"Documento subido exitosamente"}:{success:!1,message:l.data.message||"Error al subir documento",errors:l.data.errors}}catch(i){return console.error("Error subiendo documento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al subir documento",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}}},jk=()=>{var $;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(!1),[E,S]=c.useState(!1),[C,b]=c.useState(null),[p,N]=c.useState(null),{register:_,handleSubmit:x,reset:v,formState:{errors:j}}=Xe();c.useEffect(()=>{D()},[i,g,n]);const D=async()=>{try{t(!0);const L=await oo.get({page:i,per_page:g,search:n});L.success&&L.data?(r(L.data.data||[]),u(L.data.last_page||1)):(m.error(L.message||"Error al cargar tipos de documento"),r([]),u(1))}catch{m.error("Error de conexin"),r([]),u(1)}finally{t(!1)}},H=()=>{b(null),v({nombre_entidad:""}),k(!0)},A=L=>{b(L),v({nombre_entidad:L.nombre_entidad}),k(!0)},P=async L=>{try{const Y=await oo.getById(L.tipo_documento_id);Y.success&&(N(Y.data),S(!0))}catch{m.error("Error al cargar el tipo de documento")}},R=async L=>{if(window.confirm("Ests seguro de que quieres eliminar este tipo de documento?"))try{t(!0);const Y=await oo.remove(L);Y.success?(m.success(Y.message||"Tipo de documento eliminado exitosamente"),await D()):m.error(Y.message||"Error al eliminar el tipo de documento")}catch{m.error("Error al eliminar el tipo de documento")}finally{t(!1)}},G=async L=>{try{t(!0);let Y;C?Y=await oo.update(C.tipo_documento_id,L):Y=await oo.create(L),Y.success?(m.success(Y.message||(C?"Tipo de documento actualizado exitosamente":"Tipo de documento creado exitosamente")),k(!1),b(null),v(),await D()):(m.error(Y.message||"Error al guardar el tipo de documento"),Y.errors&&Object.keys(Y.errors).forEach(M=>{m.error(`${M}: ${Y.errors[M]}`)}))}catch{m.error("Error al guardar el tipo de documento")}finally{t(!1)}},T=[{key:"nombre_entidad",label:"Nombre",sortable:!0,render:L=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(ss,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:L.nombre_entidad}),L.documentos_count!==void 0&&e.jsxs("div",{className:"text-sm text-gray-500",children:[L.documentos_count," documentos"]})]})]})},{key:"actions",label:"Acciones",render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>P(L)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>A(L)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>R(L.tipo_documento_id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ss,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Tipos de Documento"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los tipos de documento del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:H,children:"Nuevo Tipo"})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Tipos"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar tipos...",value:n,onChange:L=>o(L.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:T,data:s,loading:a,pagination:{currentPage:i,totalPages:d,perPage:g,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:y,onClose:()=>{k(!1),b(null),v()},title:C?"Editar Tipo de Documento":"Nuevo Tipo de Documento",size:"lg",children:e.jsxs("form",{onSubmit:x(G),className:"space-y-6",children:[e.jsx(we,{label:"Nombre del Tipo *",placeholder:"Ej: Estudiante, Docente, etc.",error:($=j.nombre_entidad)==null?void 0:$.message,..._("nombre_entidad",{required:"El nombre es obligatorio"})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{k(!1),b(null),v()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[C?"Actualizar":"Crear"," Tipo"]})]})]})}),e.jsx(Fe,{isOpen:E,onClose:()=>S(!1),title:"Detalles del Tipo de Documento",size:"lg",children:p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:p.nombre_entidad})]}),p.documentos&&p.documentos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Documentos Asociados"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[p.documentos.length," documentos"]})]})]})})]})},vk=({isOpen:s,onClose:r,documento:a,estudiante:t,onAprobar:n,onRechazar:o,loading:i=!1})=>{const[l,d]=c.useState(!1),[u,g]=c.useState(!1),[h,y]=c.useState(!1),[k,E]=c.useState("");if(!a||!s)return null;let S=a.url_descarga||a.path;if(S&&!S.startsWith("http://")&&!S.startsWith("https://")){const D=um.apiUrl.replace("/api","");S.startsWith("/storage/")?S=`${D}${S}`:S.startsWith("/")?S=`${D}/storage${S}`:S=`${D}/storage/${S}`}const C=S&&/\.(jpg|jpeg|png|gif|webp)$/i.test(S),b=S&&/\.pdf$/i.test(S),p=a.nombre_documento||a.nombre||"Documento",N=async()=>{n&&await n(a.id||a.documento_id)},_=async()=>{if(!k||k.trim().length<10){m.error("El motivo del rechazo debe tener al menos 10 caracteres");return}o&&(await o(a.id||a.documento_id,k),y(!1),E(""))},x=()=>{if(S){const j=document.createElement("a");j.href=S,j.download=p,j.target="_blank",j.rel="noopener noreferrer",document.body.appendChild(j),j.click(),document.body.removeChild(j)}},v=a.estado==="0"||a.estado===0;return e.jsx(Fe,{isOpen:s,onClose:r,title:`Vista Previa: ${p}`,size:"xl",className:"max-w-6xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Estudiante:"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[t.nombre," ",t.apellido]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"CI:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:t.ci})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Versin:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.version||"1.0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.estado==="0"||a.estado===0?"Pendiente":a.estado==="1"||a.estado===1?"Aprobado":a.estado==="2"||a.estado===2?"Rechazado":"Desconocido"})]}),a.fecha_subida&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Fecha de subida:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:new Date(a.fecha_subida).toLocaleDateString()})]}),a.observaciones&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Observaciones:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.observaciones})]})]})}),e.jsx("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:S?C?e.jsx("div",{className:"relative bg-white dark:bg-gray-800",children:l?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ws,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar la imagen"}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{d(!1),window.open(S,"_blank")},children:"Abrir en nueva pestaa"})]}):e.jsxs("div",{className:"relative w-full",style:{minHeight:"400px",maxHeight:"70vh"},children:[e.jsx("img",{src:S,alt:p,className:"w-full h-auto object-contain",style:{maxHeight:"70vh"},onError:()=>d(!0),onLoad:()=>d(!1)}),i&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx(qa,{className:"h-8 w-8 animate-spin text-white"})})]})}):b?e.jsx("div",{className:"relative w-full",style:{minHeight:"600px",maxHeight:"70vh"},children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ws,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar el PDF. Puede que el navegador no soporte la visualizacin."}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>window.open(S,"_blank"),children:"Abrir en nueva pestaa"})]}):e.jsx("iframe",{src:S,className:"w-full h-full",style:{minHeight:"600px",maxHeight:"70vh"},title:p,onError:()=>g(!0)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Tipo de archivo no soportado para vista previa"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:x,children:"Descargar archivo"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"No hay archivo disponible para este documento"})]})}),h&&e.jsxs("div",{className:"border-2 border-red-200 dark:border-red-800 rounded-lg p-4 bg-red-50 dark:bg-red-900/20",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3",children:"Motivo del Rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:k,onChange:j=>E(j.target.value),placeholder:"Describe el motivo del rechazo (mnimo 10 caracteres)..."}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[k.length,"/500 caracteres"]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{y(!1),E("")},children:"Cancelar"}),e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:_,disabled:i||!k||k.trim().length<10,children:"Confirmar Rechazo"})]})]}),v&&!h&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:x,children:"Descargar"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:()=>y(!0),className:"border-red-300 text-red-700 hover:bg-red-50",children:"Rechazar"}),e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(Me,{className:"h-4 w-4"}),onClick:N,disabled:i,children:i?"Procesando...":"Aprobar"})]})]}),!v&&e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(gr,{className:"h-4 w-4"}),onClick:x,children:"Descargar"})})]})})},zx=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(!1),[E,S]=c.useState(null),[C,b]=c.useState([]),[p,N]=c.useState(!1),[_,x]=c.useState(!1),[v,j]=c.useState(null),[D,H]=c.useState(""),[A,P]=c.useState(!1),[R,G]=c.useState(null);c.useEffect(()=>{T()},[i,g,n]);const T=async()=>{try{t(!0);const me=await Jt.getEstudiantesPendientes({page:i,per_page:g,search:n});me.success&&me.data?(r(me.data.data||[]),u(me.data.last_page||1)):(m.error(me.message||"Error al cargar estudiantes"),r([]),u(1))}catch{m.error("Error de conexin"),r([]),u(1)}finally{t(!1)}},$=async me=>{try{N(!0),S(me);const xe=await Jt.getDocumentosEstudiante(me.id);xe.success?(b(xe.data.documentos||[]),k(!0)):m.error(xe.message||"Error al cargar documentos")}catch{m.error("Error al cargar documentos")}finally{N(!1)}},L=async(me,xe="")=>{try{N(!0);const ie=await Jt.aprobarDocumento(me,xe);ie.success?(m.success(ie.message||"Documento aprobado exitosamente"),P(!1),G(null),E&&await $(E),await T()):m.error(ie.message||"Error al aprobar documento")}catch{m.error("Error al aprobar documento")}finally{N(!1)}},Y=async(me,xe)=>{try{N(!0);const ie=await Jt.rechazarDocumento(me,xe);ie.success?(m.success(ie.message||"Documento rechazado exitosamente"),P(!1),G(null),E&&await $(E),await T()):m.error(ie.message||"Error al rechazar documento")}catch{m.error("Error al rechazar documento")}finally{N(!1)}},M=me=>{G(me),P(!0)},ne=async()=>{if(!D||D.length<10){m.error("El motivo del rechazo debe tener al menos 10 caracteres");return}try{N(!0);const me=await Jt.rechazarDocumento(v.id,D);me.success?(m.success(me.message||"Documento rechazado exitosamente"),x(!1),H(""),j(null),E&&await $(E),await T()):m.error(me.message||"Error al rechazar documento")}catch{m.error("Error al rechazar documento")}finally{N(!1)}},oe=async me=>{if(window.confirm("Ests seguro de aprobar todos los documentos de este estudiante?"))try{t(!0);const xe=await Jt.aprobarTodos(me);xe.success?(m.success(xe.message||"Todos los documentos aprobados exitosamente"),await T(),E&&E.id===me&&k(!1)):m.error(xe.message||"Error al aprobar documentos")}catch{m.error("Error al aprobar documentos")}finally{t(!1)}},fe=me=>{const xe={0:{label:"Pendiente",color:"bg-yellow-100 text-yellow-800",icon:ss},1:{label:"Aprobado",color:"bg-green-100 text-green-800",icon:Me},2:{label:"Rechazado",color:"bg-red-100 text-red-800",icon:ls}},ie=xe[me]||xe[0],le=ie.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${ie.color}`,children:[e.jsx(le,{className:"h-3 w-3"}),ie.label]})},Q=[{key:"nombre",label:"Estudiante",render:me=>e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[me.nombre," ",me.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",me.ci]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Registro: ",me.registro_estudiante]})]})},{key:"documentos_pendientes",label:"Documentos Pendientes",render:me=>e.jsx("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:me.documentos_pendientes||0})},{key:"actions",label:"Acciones",render:me=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>$(me),children:"Ver Documentos"}),e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(Me,{className:"h-4 w-4"}),onClick:()=>oe(me.id),children:"Aprobar Todos"})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Xf,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Validacin de Documentos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Revisa y aprueba documentos de estudiantes"})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Estudiantes con Documentos Pendientes"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar estudiantes...",value:n,onChange:me=>o(me.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:Q,data:s,loading:a,pagination:{currentPage:i,totalPages:d,perPage:g,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:y,onClose:()=>{k(!1),S(null),b([])},title:E?`Documentos de ${E.nombre} ${E.apellido}`:"Documentos",size:"xl",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(er,{})}):e.jsx("div",{className:"space-y-6",children:C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No hay documentos para este estudiante"})]}):C.map((me,xe)=>{var ie,le;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-4",children:((ie=me.tipo_documento)==null?void 0:ie.nombre_entidad)||"Documento"}),e.jsx("div",{className:"space-y-3",children:(le=me.versiones)==null?void 0:le.map((Se,pe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[fe(Se.estado),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Versin ",Se.version]})]}),Se.observaciones&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Se.observaciones}),Se.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Subido: ",new Date(Se.fecha_subida).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Se.url_descarga&&e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>M(Se),title:"Ver documento en vista previa",children:"Ver"}),Se.estado==="0"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(Me,{className:"h-4 w-4"}),onClick:()=>L(Se.id),title:"Aprobar documento",children:"Aprobar"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(ls,{className:"h-4 w-4"}),onClick:()=>{j(Se),x(!0)},title:"Rechazar documento",children:"Rechazar"})]})]})]},pe))})]},xe)})})}),e.jsx(Fe,{isOpen:_,onClose:()=>{x(!1),j(null),H("")},title:"Rechazar Documento",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo del Rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",value:D,onChange:me=>H(me.target.value),placeholder:"Describe el motivo del rechazo (mnimo 10 caracteres)..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[D.length,"/500 caracteres"]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{variant:"outline",onClick:()=>{x(!1),j(null),H("")},children:"Cancelar"}),e.jsx(W,{variant:"primary",icon:e.jsx(ls,{className:"h-5 w-5"}),onClick:ne,children:"Rechazar Documento"})]})]})}),e.jsx(vk,{isOpen:A,onClose:()=>{P(!1),G(null)},documento:R,estudiante:E,onAprobar:L,onRechazar:Y,loading:p})]})},Nt={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",programa_id:s.programa_id||""};t.search||delete t.search,t.programa_id||delete t.programa_id;const n=await Re("/admin/planes-pago",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching planes pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await Re(`/admin/planes-pago/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching plan pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getDatosFormulario(){var s,r;try{const a=await Re("/admin/planes-pago/datos-formulario");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching datos formulario:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Be("/admin/planes-pago",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS_CREATE}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating plan pago:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await os(`/admin/planes-pago/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS_UPDATE}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating plan pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await gs(`/admin/planes-pago/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS_DELETE}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error deleting plan pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},io={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||""};t.search||delete t.search;const n=await Re("/admin/descuentos",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching descuentos:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getInscripcionesSinDescuento(){var s,r;try{const a=await Re("/admin/descuentos/inscripciones-sin-descuento");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching inscripciones sin descuento:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await Re(`/admin/descuentos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching descuento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async create(s){var r,a,t,n;try{const o=await Be("/admin/descuentos",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||I.SUCCESS_CREATE}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return console.error("Error creating descuento:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async update(s,r){var a,t,n,o;try{const i=await os(`/admin/descuentos/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||I.SUCCESS_UPDATE}:{success:!1,message:i.data.message||I.ERROR_UPDATE,errors:i.data.errors}}catch(i){return console.error("Error updating descuento:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||I.ERROR_UPDATE,errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async remove(s){var r,a;try{const t=await gs(`/admin/descuentos/${s}`);return t.data.success?{success:!0,message:t.data.message||I.SUCCESS_DELETE}:{success:!1,message:t.data.message||I.ERROR_DELETE}}catch(t){return console.error("Error deleting descuento:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_DELETE}}}},St={async getMisCuotas(){var s,r;try{const a=await Re("/estudiante/pagos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching mis cuotas:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async getCuotaById(s){var r,a;try{const t=await Re(`/estudiante/pagos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching cuota:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async registrarPago(s,r,a,t,n=null){var o,i,l,d;try{const u=new FormData;u.append("cuota_id",s),u.append("monto",r),u.append("metodo",a),u.append("comprobante",t),n&&u.append("token",n);const g=await qt("/estudiante/pagos",u);return g.data.success?{success:!0,data:g.data.data,message:g.data.message||"Pago registrado exitosamente"}:{success:!1,message:g.data.message||"Error al registrar pago",errors:g.data.errors}}catch(u){return console.error("Error registrando pago:",u),{success:!1,message:((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||"Error al registrar pago",errors:(d=(l=u.response)==null?void 0:l.data)==null?void 0:d.errors}}},async getInfoQR(s){var r,a;try{const t=await Re(`/estudiante/pagos/${s}/info-qr`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching QR info:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async generarPagoQR(s,r){var a,t,n,o,i,l;try{const d=await Be("/estudiante/pagos",{cuota_id:s,monto:r,metodo:"QR"});return d.data.success?{success:!0,data:d.data.data,message:d.data.message}:{success:!1,message:d.data.message||"Error al generar QR",error:d.data.error||d.data.message,errors:d.data.errors}}catch(d){console.error("Error generando QR:",d);const u=((t=(a=d.response)==null?void 0:a.data)==null?void 0:t.error)||((o=(n=d.response)==null?void 0:n.data)==null?void 0:o.message)||d.message||"Error al generar QR";return{success:!1,message:u,error:u,errors:(l=(i=d.response)==null?void 0:i.data)==null?void 0:l.errors}}},async consultarEstadoQR(s){var r,a;try{const t=await Re(`/estudiante/pagos/${s}/consultar-estado-qr`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error consultando estado QR:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async subirComprobanteQR(s,r){var a,t,n,o;try{const i=new FormData;i.append("comprobante",r);const l=await qt(`/estudiante/pagos/${s}/subir-comprobante-qr`,i);return l.data.success?{success:!0,data:l.data.data,message:l.data.message||"Comprobante subido exitosamente"}:{success:!1,message:l.data.message||"Error al subir comprobante",errors:l.data.errors}}catch(i){return console.error("Error subiendo comprobante:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al subir comprobante",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}}},Nk=()=>{var ee,se,re,f,w,V,B,ue,ge,_e,je,Ne,Te,ve,F,te,be;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("id"),[_,x]=c.useState("desc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState({inscripciones:[],programas:[]}),[L,Y]=c.useState(null),{register:M,handleSubmit:ne,reset:oe,control:fe,watch:Q,formState:{errors:me}}=Xe({defaultValues:{inscripcion_id:"",monto_total:"",total_cuotas:1,cuotas:[{fecha_ini:"",fecha_fin:"",monto:""}]}}),{fields:xe,append:ie,remove:le}=z1({control:fe,name:"cuotas"});Q("monto_total");const Se=Q("total_cuotas");c.useEffect(()=>{pe(),ae()},[i,g,n,p,_]),c.useEffect(()=>{const z=xe.length;if(Se&&Se>z)for(let Ee=z;Ee<Se;Ee++)ie({fecha_ini:"",fecha_fin:"",monto:""});else if(Se&&Se<z)for(let Ee=z-1;Ee>=Se;Ee--)le(Ee)},[Se]);const pe=async()=>{try{t(!0);const z=await Nt.get({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});z.success&&z.data?(r(z.data.data||[]),u(z.data.last_page||1),k(z.data.total||0),S(z.data.from||0),b(z.data.to||0)):(m.error(z.message||"Error al cargar planes de pago"),r([]),u(1),k(0),S(0),b(0))}catch{m.error("Error de conexin"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},K=(z,Ee)=>{N(z),x(Ee),l(1)},ae=async()=>{try{const z=await Nt.getDatosFormulario();z.success&&$(z.data)}catch(z){console.error("Error fetching datos formulario:",z)}},ce=()=>{P(null),Y(null),oe({inscripcion_id:"",monto_total:"",total_cuotas:1,cuotas:[{fecha_ini:"",fecha_fin:"",monto:""}]}),j(!0)},J=async z=>{var Ee;try{t(!0);const Ce=await Nt.getById(z.id);if(Ce.success){const he=Ce.data;P(he),he.inscripcion&&Y({id:he.inscripcion.id,estudiante:he.inscripcion.estudiante,programa:he.inscripcion.programa,fecha_formatted:he.inscripcion.fecha_formatted});const O=X=>{if(!X)return"";const U=new Date(X);return isNaN(U.getTime())?"":U.toISOString().split("T")[0]};oe({inscripcion_id:he.inscripcion_id||((Ee=he.inscripcion)==null?void 0:Ee.id)||"",monto_total:he.monto_total||"",total_cuotas:he.total_cuotas||1,cuotas:he.cuotas&&he.cuotas.length>0?he.cuotas.map(X=>({fecha_ini:O(X.fecha_ini),fecha_fin:O(X.fecha_fin),monto:X.monto||""})):[{fecha_ini:"",fecha_fin:"",monto:""}]}),j(!0)}else m.error(Ce.message||"Error al cargar los datos del plan de pago")}catch(Ce){console.error("Error al cargar plan para editar:",Ce),m.error("Error al cargar los datos del plan de pago")}finally{t(!1)}},Z=async z=>{try{const Ee=await Nt.getById(z.id);Ee.success&&(G(Ee.data),H(!0))}catch{m.error("Error al cargar el plan de pago")}},ye=async z=>{if(window.confirm("Ests seguro de que quieres eliminar este plan de pago?"))try{t(!0);const Ee=await Nt.remove(z);Ee.success?(m.success(Ee.message||"Plan de pago eliminado exitosamente"),await pe()):m.error(Ee.message||"Error al eliminar el plan de pago")}catch{m.error("Error al eliminar el plan de pago")}finally{t(!1)}},de=async z=>{try{t(!0);const Ee=z.cuotas.reduce((he,O)=>he+parseFloat(O.monto||0),0);if(Math.abs(Ee-parseFloat(z.monto_total))>.01){m.error("El monto total debe coincidir con la suma de las cuotas");return}if(z.cuotas.length!==parseInt(z.total_cuotas)){m.error("El nmero de cuotas debe coincidir con el total de cuotas");return}let Ce;A?Ce=await Nt.update(A.id,z):Ce=await Nt.create(z),Ce.success?(m.success(Ce.message||(A?"Plan de pago actualizado exitosamente":"Plan de pago creado exitosamente")),j(!1),P(null),oe(),await pe()):(m.error(Ce.message||"Error al guardar el plan de pago"),Ce.errors&&Object.keys(Ce.errors).forEach(he=>{(Array.isArray(Ce.errors[he])?Ce.errors[he]:[Ce.errors[he]]).forEach(X=>{let U=he;if(he.includes("cuotas.")){const Ae=he.match(/cuotas\.(\d+)\.(.+)/);if(Ae){const De=parseInt(Ae[1])+1,Le=Ae[2];U=`Cuota ${De} - ${{fecha_ini:"Fecha de inicio",fecha_fin:"Fecha de fin",monto:"Monto"}[Le]||Le}`}}else U={inscripcion_id:"Inscripcin",monto_total:"Monto total",total_cuotas:"Total de cuotas"}[he]||he;m.error(`${U}: ${X}`,{duration:5e3})})}))}catch{m.error("Error al guardar el plan de pago")}finally{t(!1)}},q=[{key:"estudiante",label:"Estudiante",render:z=>{var Ee,Ce,he,O,X,U;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(Ce=(Ee=z.inscripcion)==null?void 0:Ee.estudiante)==null?void 0:Ce.nombre," ",(O=(he=z.inscripcion)==null?void 0:he.estudiante)==null?void 0:O.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",(U=(X=z.inscripcion)==null?void 0:X.estudiante)==null?void 0:U.ci]})]})}},{key:"programa",label:"Programa",render:z=>{var Ee,Ce;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((Ce=(Ee=z.inscripcion)==null?void 0:Ee.programa)==null?void 0:Ce.nombre)||"-"})}},{key:"monto_total",label:"Monto Total",render:z=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(z.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"total_cuotas",label:"Cuotas",render:z=>e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:z.total_cuotas||0})},{key:"estado",label:"Estado",render:z=>{const Ee=z.monto_pagado||0,Ce=parseFloat(z.monto_total||0),he=Ce>0?Ee/Ce*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[he.toFixed(0),"% Pagado"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(he,100)}%`}})})]})}},{key:"actions",label:"Acciones",render:z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Z(z)}),!z.esta_completo&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>J(z)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>ye(z.id)})]})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Tr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Planes de Pago"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los planes de pago del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:ce,children:"Nuevo Plan"})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Planes"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar planes...",value:n,onChange:z=>o(z.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:q,data:s,loading:a,onSort:K,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),Y(null),oe()},title:A?"Editar Plan de Pago":"Nuevo Plan de Pago",size:"xl",children:e.jsxs("form",{onSubmit:ne(de),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inscripcin *"}),A&&L?e.jsxs("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"font-medium",children:[(ee=L.estudiante)==null?void 0:ee.nombre," ",(se=L.estudiante)==null?void 0:se.apellido," (CI: ",(re=L.estudiante)==null?void 0:re.ci,")"]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(f=L.programa)==null?void 0:f.nombre," - ",L.fecha_formatted]}),e.jsx("input",{type:"hidden",...M("inscripcion_id"),value:L.id})]}):e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",...M("inscripcion_id",{required:"La inscripcin es obligatoria"}),children:[e.jsx("option",{value:"",children:"Seleccionar inscripcin"}),((w=T.inscripciones)==null?void 0:w.length)>0?T.inscripciones.map(z=>{var Ee,Ce,he,O;return e.jsxs("option",{value:z.id,children:[(Ee=z.estudiante)==null?void 0:Ee.nombre," ",(Ce=z.estudiante)==null?void 0:Ce.apellido," (CI: ",(he=z.estudiante)==null?void 0:he.ci,") - ",(O=z.programa)==null?void 0:O.nombre," - ",z.fecha_formatted||z.fecha]},z.id)}):e.jsx("option",{value:"",disabled:!0,children:"No hay inscripciones sin plan de pago"})]}),me.inscripcion_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:me.inscripcion_id.message})]}),e.jsx(we,{label:"Monto Total *",type:"number",step:"0.01",placeholder:"0.00",error:(V=me.monto_total)==null?void 0:V.message,...M("monto_total",{required:"El monto total es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})}),e.jsx(we,{label:"Total de Cuotas *",type:"number",min:"1",placeholder:"1",error:(B=me.total_cuotas)==null?void 0:B.message,...M("total_cuotas",{required:"El total de cuotas es obligatorio",min:{value:1,message:"Debe haber al menos 1 cuota"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Cuotas *"}),e.jsx("div",{className:"space-y-4",children:xe.map((z,Ee)=>{var Ce,he,O,X,U,Ae,De,Le,Ue;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Cuota ",Ee+1]}),xe.length>1&&e.jsx(W,{type:"button",variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>le(Ee),children:"Eliminar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(we,{label:"Fecha Inicio *",type:"date",error:(O=(he=(Ce=me.cuotas)==null?void 0:Ce[Ee])==null?void 0:he.fecha_ini)==null?void 0:O.message,...M(`cuotas.${Ee}.fecha_ini`,{required:"La fecha de inicio es obligatoria"})}),e.jsx(we,{label:"Fecha Fin *",type:"date",error:(Ae=(U=(X=me.cuotas)==null?void 0:X[Ee])==null?void 0:U.fecha_fin)==null?void 0:Ae.message,...M(`cuotas.${Ee}.fecha_fin`,{required:"La fecha de fin es obligatoria"})}),e.jsx(we,{label:"Monto *",type:"number",step:"0.01",placeholder:"0.00",error:(Ue=(Le=(De=me.cuotas)==null?void 0:De[Ee])==null?void 0:Le.monto)==null?void 0:Ue.message,...M(`cuotas.${Ee}.monto`,{required:"El monto es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})})]})]},z.id)})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),Y(null),oe()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[A?"Actualizar":"Crear"," Plan"]})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>H(!1),title:"Detalles del Plan de Pago",size:"xl",children:R&&e.jsxs("div",{className:"space-y-6",children:[((ue=R.inscripcion)==null?void 0:ue.estudiante)&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ir,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Estudiante"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Completo"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[R.inscripcion.estudiante.nombre," ",R.inscripcion.estudiante.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"CI"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.estudiante.ci})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registro Estudiante"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.estudiante.registro_estudiante})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.estudiante.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Celular"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.estudiante.celular||"N/A"})]})]})]}),((ge=R.inscripcion)==null?void 0:ge.programa)&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin del Programa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre del Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:R.inscripcion.programa.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Institucin"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.programa.institucion})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rama Acadmica"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.programa.rama_academica})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Tipo de Programa"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:R.inscripcion.programa.tipo_programa})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Tr,{className:"h-5 w-5 mr-2 text-primary-500"}),"Informacin de Pago"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:parseFloat(R.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pagado"}),e.jsx("p",{className:"text-lg font-bold text-success-600 dark:text-success-400",children:parseFloat(R.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Monto Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-error-600 dark:text-error-400",children:parseFloat(R.monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Progreso"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[((_e=R.porcentaje_pagado)==null?void 0:_e.toFixed(1))||((Ne=(je=R.estado_pagos)==null?void 0:je.porcentaje_pagado)==null?void 0:Ne.toFixed(1))||"0","%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Cuotas: ",((Te=R.estado_pagos)==null?void 0:Te.cuotas_pagadas)||0,"/",R.total_cuotas||0," pagadas"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${(R.porcentaje_pagado||((ve=R.estado_pagos)==null?void 0:ve.porcentaje_pagado)||0)>=100?"bg-success-500":(R.porcentaje_pagado||((F=R.estado_pagos)==null?void 0:F.porcentaje_pagado)||0)>50?"bg-warning-500":"bg-error-500"}`,style:{width:`${Math.min(R.porcentaje_pagado||((te=R.estado_pagos)==null?void 0:te.porcentaje_pagado)||0,100)}%`}})})]})]})]}),R.cuotas&&R.cuotas.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Detalle de Cuotas"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.cuotas.map((z,Ee)=>e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Cuota ",Ee+1]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[z.fecha_ini?new Date(z.fecha_ini).toLocaleDateString("es-ES"):"N/A"," -",z.fecha_fin?new Date(z.fecha_fin).toLocaleDateString("es-ES"):"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:parseFloat(z.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${z.estado==="Pagado"?"bg-success-100 text-success-800 dark:bg-success-900/20 dark:text-success-400":z.estado==="Retrasado"?"bg-error-100 text-error-800 dark:bg-error-900/20 dark:text-error-400":"bg-warning-100 text-warning-800 dark:bg-warning-900/20 dark:text-warning-400"}`,children:[z.estado,z.estado==="Retrasado"&&z.dias_retraso>0&&e.jsxs("span",{className:"ml-1",children:["(",z.dias_retraso," das)"]})]})]})]}),z.pagos&&z.pagos.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagos realizados:"}),z.pagos.map(Ce=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[parseFloat(Ce.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})," - ",Ce.fecha?new Date(Ce.fecha).toLocaleDateString("es-ES"):"N/A",Ce.metodo&&` (${Ce.metodo})`,Ce.verificado&&e.jsx("span",{className:"ml-2 text-success-600",children:" Verificado"})]},Ce.id))]})]},z.id||Ee))})]}),((be=R.inscripcion)==null?void 0:be.fecha_formatted)&&e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha de Inscripcin:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:R.inscripcion.fecha_formatted})]})})]})})]})},wk=()=>{var ce,J,Z,ye,de;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(1),[d,u]=c.useState(1),[g,h]=c.useState(10),[y,k]=c.useState(0),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState("nombre"),[_,x]=c.useState("asc"),[v,j]=c.useState(!1),[D,H]=c.useState(!1),[A,P]=c.useState(null),[R,G]=c.useState(null),[T,$]=c.useState([]),[L,Y]=c.useState(!1),{register:M,handleSubmit:ne,reset:oe,formState:{errors:fe}}=Xe();c.useEffect(()=>{Q(),xe()},[i,g,n,p,_]);const Q=async()=>{try{t(!0);const q=await io.get({page:i,per_page:g,search:n,sort_by:p,sort_direction:_});q.success&&q.data?(r(q.data.data||[]),u(q.data.last_page||1),k(q.data.total||0),S(q.data.from||0),b(q.data.to||0)):(m.error(q.message||"Error al cargar descuentos"),r([]),u(1),k(0),S(0),b(0))}catch{m.error("Error de conexin"),r([]),u(1),k(0),S(0),b(0)}finally{t(!1)}},me=(q,ee)=>{N(q),x(ee),l(1)},xe=async()=>{try{Y(!0);const q=await va.getProgramas({per_page:1e3});q.success&&q.data&&$(q.data.data||[])}catch(q){console.error("Error fetching programas:",q)}finally{Y(!1)}},ie=()=>{P(null),oe({programa_id:"",nombre:"",descuento:"",fecha_inicio:"",fecha_fin:""}),j(!0)},le=q=>{P(q),oe({programa_id:q.programa_id||"",nombre:q.nombre,descuento:q.descuento,fecha_inicio:q.fecha_inicio||"",fecha_fin:q.fecha_fin||""}),j(!0)},Se=async q=>{try{const ee=await io.getById(q.id);ee.success&&(G(ee.data),H(!0))}catch{m.error("Error al cargar el descuento")}},pe=async q=>{if(window.confirm("Ests seguro de que quieres eliminar este descuento?"))try{t(!0);const ee=await io.remove(q);ee.success?(m.success(ee.message||"Descuento eliminado exitosamente"),await Q()):m.error(ee.message||"Error al eliminar el descuento")}catch{m.error("Error al eliminar el descuento")}finally{t(!1)}},K=async q=>{try{t(!0);let ee;A?ee=await io.update(A.id,q):ee=await io.create(q),ee.success?(m.success(ee.message||(A?"Descuento actualizado exitosamente":"Descuento creado exitosamente")),j(!1),P(null),oe(),await Q()):(m.error(ee.message||"Error al guardar el descuento"),ee.errors&&Object.keys(ee.errors).forEach(se=>{m.error(`${se}: ${ee.errors[se]}`)}))}catch{m.error("Error al guardar el descuento")}finally{t(!1)}},ae=[{key:"nombre",label:"Nombre",sortable:!0,render:q=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-semibold",children:e.jsx(su,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:q.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[q.descuento,"% de descuento"]})]})]})},{key:"programa",label:"Programa",render:q=>{var ee;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:((ee=q.programa)==null?void 0:ee.nombre)||"-"}),q.programa&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Costo: ",parseFloat(q.programa.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]})}},{key:"vigencia",label:"Vigencia",render:q=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:q.fecha_inicio?new Date(q.fecha_inicio).toLocaleDateString("es-ES"):"-"}),e.jsxs("div",{className:"text-gray-500",children:["hasta ",q.fecha_fin?new Date(q.fecha_fin).toLocaleDateString("es-ES"):"-"]})]})},{key:"descuento",label:"Descuento",render:q=>e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[q.descuento,"%"]})},{key:"actions",label:"Acciones",render:q=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>Se(q)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Es,{className:"h-4 w-4"}),onClick:()=>le(q)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(ks,{className:"h-4 w-4"}),onClick:()=>pe(q.id)})]})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(su,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Descuentos y Becas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los descuentos y becas del sistema"})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),onClick:ie,children:"Nuevo Descuento"})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Lista de Descuentos"}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar descuentos...",value:n,onChange:q=>o(q.target.value),className:"pl-10 w-full sm:w-64"})]})]}),e.jsx(ds,{columns:ae,data:s,loading:a,onSort:me,sortBy:p,sortDirection:_,pagination:{currentPage:i,totalPages:d,perPage:g,total:y,from:E,to:C,onPageChange:l,onPerPageChange:h}})]}),e.jsx(Fe,{isOpen:v,onClose:()=>{j(!1),P(null),oe()},title:A?"Editar Descuento":"Nuevo Descuento",size:"lg",children:e.jsxs("form",{onSubmit:ne(K),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa *"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",...M("programa_id",{required:"El programa es obligatorio"}),disabled:L,children:[e.jsx("option",{value:"",children:L?"Cargando programas...":"Seleccionar programa"}),T.map(q=>e.jsxs("option",{value:q.id,children:[q.nombre," - ",parseFloat(q.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]},q.id))]}),fe.programa_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:fe.programa_id.message})]}),e.jsx(we,{label:"Nombre del Descuento *",placeholder:"Ej: Promo Febrero 20%, Descuento por Convenio, etc.",error:(ce=fe.nombre)==null?void 0:ce.message,...M("nombre",{required:"El nombre es obligatorio"})}),e.jsx(we,{label:"Porcentaje de Descuento *",type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",error:(J=fe.descuento)==null?void 0:J.message,...M("descuento",{required:"El porcentaje es obligatorio",min:{value:0,message:"El porcentaje debe ser mayor o igual a 0"},max:{value:100,message:"El porcentaje no puede ser mayor a 100"}})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(we,{label:"Fecha de Inicio *",type:"date",error:(Z=fe.fecha_inicio)==null?void 0:Z.message,...M("fecha_inicio",{required:"La fecha de inicio es obligatoria"})}),e.jsx(we,{label:"Fecha de Fin *",type:"date",error:(ye=fe.fecha_fin)==null?void 0:ye.message,...M("fecha_fin",{required:"La fecha de fin es obligatoria",validate:q=>{var se;const ee=(se=document.querySelector('input[name="fecha_inicio"]'))==null?void 0:se.value;return ee&&q&&new Date(q)<new Date(ee)?"La fecha de fin debe ser posterior a la fecha de inicio":!0}})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{j(!1),P(null),oe()},children:"Cancelar"}),e.jsxs(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:[A?"Actualizar":"Crear"," Descuento"]})]})]})}),e.jsx(Fe,{isOpen:D,onClose:()=>H(!1),title:"Detalles del Descuento",size:"lg",children:R&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Porcentaje"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100 font-semibold text-green-600",children:[R.descuento,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((de=R.programa)==null?void 0:de.nombre)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Inicio"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.fecha_inicio?new Date(R.fecha_inicio).toLocaleDateString("es-ES"):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Fin"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:R.fecha_fin?new Date(R.fecha_fin).toLocaleDateString("es-ES"):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsx("p",{className:`font-semibold ${R.fecha_inicio&&R.fecha_fin&&new Date>=new Date(R.fecha_inicio)&&new Date<=new Date(R.fecha_fin)?"text-green-600 dark:text-green-400":"text-gray-500"}`,children:R.fecha_inicio&&R.fecha_fin&&new Date>=new Date(R.fecha_inicio)&&new Date<=new Date(R.fecha_fin)?"Vigente":"No vigente"})]})]})})})]})},wi={async get(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||xs.DEFAULT_PAGE_SIZE,search:s.search||"",estado:s.estado||"",fecha_desde:s.fecha_desde||"",fecha_hasta:s.fecha_hasta||""};t.search||delete t.search,t.estado||delete t.estado,t.fecha_desde||delete t.fecha_desde,t.fecha_hasta||delete t.fecha_hasta;const n=await Re("/admin/pagos/gestion",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching planes de pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getById(s){var r,a;try{const t=await Re(`/admin/pagos/gestion/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching plan de pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async registrarPago(s){var r,a,t,n;try{const o=await Be("/admin/pagos/gestion/registrar",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Pago registrado exitosamente"}:{success:!1,message:o.data.message||"Error al registrar pago",errors:o.data.errors}}catch(o){return console.error("Error registrando pago:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al registrar pago",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async actualizarPago(s,r){var a,t,n,o;try{const i=await os(`/admin/pagos/gestion/${s}`,r);return i.data.success?{success:!0,data:i.data.data,message:i.data.message||"Pago actualizado exitosamente"}:{success:!1,message:i.data.message||"Error al actualizar pago",errors:i.data.errors}}catch(i){return console.error("Error actualizando pago:",i),{success:!1,message:((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Error al actualizar pago",errors:(o=(n=i.response)==null?void 0:n.data)==null?void 0:o.errors}}},async eliminarPago(s){var r,a;try{const t=await gs(`/admin/pagos/gestion/${s}`);return t.data.success?{success:!0,message:t.data.message||"Pago eliminado exitosamente"}:{success:!1,message:t.data.message||"Error al eliminar pago"}}catch(t){return console.error("Error eliminando pago:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al eliminar pago"}}},async aplicarPenalidad(s){var r,a,t,n;try{const o=await Be("/admin/pagos/gestion/aplicar-penalidad",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Penalidad aplicada exitosamente"}:{success:!1,message:o.data.message||"Error al aplicar penalidad",errors:o.data.errors}}catch(o){return console.error("Error aplicando penalidad:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al aplicar penalidad",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},kk=()=>{var ye,de,q,ee,se,re,f,w,V,B,ue,ge,_e;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(""),[i,l]=c.useState(""),[d,u]=c.useState(1),[g,h]=c.useState(1),[y,k]=c.useState(10),[E,S]=c.useState(0),[C,b]=c.useState(0),[p,N]=c.useState(0),[_,x]=c.useState("id"),[v,j]=c.useState("desc"),[D,H]=c.useState(!1),[A,P]=c.useState(!1),[R,G]=c.useState(!1),[T,$]=c.useState(null),[L,Y]=c.useState(null),{register:M,handleSubmit:ne,reset:oe,formState:{errors:fe}}=Xe(),{register:Q,handleSubmit:me,reset:xe,formState:{errors:ie}}=Xe();c.useEffect(()=>{le()},[d,y,n,i,_,v]);const le=async()=>{try{t(!0);const je=await wi.get({page:d,per_page:y,search:n,estado:i,sort_by:_,sort_direction:v});je.success&&je.data?(r(je.data.data||[]),h(je.data.last_page||1),S(je.data.total||0),b(je.data.from||0),N(je.data.to||0)):(m.error(je.message||"Error al cargar planes de pago"),r([]),h(1),S(0),b(0),N(0))}catch{m.error("Error de conexin"),r([]),h(1),S(0),b(0),N(0)}finally{t(!1)}},Se=(je,Ne)=>{x(je),j(Ne),u(1)},pe=async je=>{try{const Ne=await wi.getById(je.id);Ne.success&&($(Ne.data),H(!0))}catch{m.error("Error al cargar el plan de pago")}},K=je=>{Y(je),oe({cuota_id:je.id,monto:je.saldo_pendiente||je.monto,token:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),P(!0)},ae=je=>{Y(je),xe({cuota_id:je.id,monto_penalidad:"",motivo:""}),G(!0)},ce=async je=>{try{t(!0);const Ne=await wi.registrarPago(je);Ne.success?(m.success(Ne.message||"Pago registrado exitosamente"),P(!1),Y(null),oe(),await le()):(m.error(Ne.message||"Error al registrar pago"),Ne.errors&&Object.keys(Ne.errors).forEach(Te=>{m.error(`${Te}: ${Ne.errors[Te]}`)}))}catch{m.error("Error al registrar pago")}finally{t(!1)}},J=async je=>{try{t(!0);const Ne=await wi.aplicarPenalidad(je);Ne.success?(m.success(Ne.message||"Penalidad aplicada exitosamente"),G(!1),Y(null),xe(),await le()):(m.error(Ne.message||"Error al aplicar penalidad"),Ne.errors&&Object.keys(Ne.errors).forEach(Te=>{m.error(`${Te}: ${Ne.errors[Te]}`)}))}catch{m.error("Error al aplicar penalidad")}finally{t(!1)}},Z=[{key:"estudiante",label:"Estudiante",render:je=>{var Ne,Te,ve,F,te,be;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(Te=(Ne=je.inscripcion)==null?void 0:Ne.estudiante)==null?void 0:Te.nombre," ",(F=(ve=je.inscripcion)==null?void 0:ve.estudiante)==null?void 0:F.apellido]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["CI: ",(be=(te=je.inscripcion)==null?void 0:te.estudiante)==null?void 0:be.ci]})]})}},{key:"programa",label:"Programa",render:je=>{var Ne,Te;return e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:((Te=(Ne=je.inscripcion)==null?void 0:Ne.programa)==null?void 0:Te.nombre)||"-"})}},{key:"monto",label:"Monto Total",render:je=>e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(je.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})},{key:"estado",label:"Estado",render:je=>{const Ne=je.estado_plan||{},Te=Ne.porcentaje_pagado||0;return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:Ne.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-3 w-3"}),"Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Je,{className:"h-3 w-3"}),"Pendiente"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:`${Math.min(Te,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Te.toFixed(1),"% pagado"]})]})}},{key:"cuotas",label:"Cuotas",render:je=>{const Ne=je.estado_plan||{};return e.jsxs("span",{className:"text-gray-900 dark:text-gray-100",children:[Ne.cuotas_pagadas||0,"/",Ne.total_cuotas||0]})}},{key:"actions",label:"Acciones",render:je=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>pe(je)})})}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Tr,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Gestin de Pagos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y controla los pagos de los estudiantes"})]})]})}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4 sm:mb-0",children:"Planes de Pago"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Buscar estudiantes...",value:n,onChange:je=>o(je.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",value:i,onChange:je=>l(je.target.value),children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"completo",children:"Completos"}),e.jsx("option",{value:"pendiente",children:"Pendientes"})]})]})]}),e.jsx(ds,{columns:Z,data:s,loading:a,onSort:Se,sortBy:_,sortDirection:v,pagination:{currentPage:d,totalPages:g,perPage:y,total:E,from:C,to:p,onPageChange:u,onPerPageChange:k}})]}),e.jsx(Fe,{isOpen:D,onClose:()=>H(!1),title:"Detalles del Plan de Pago",size:"xl",children:T&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estudiante"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:[(de=(ye=T.inscripcion)==null?void 0:ye.estudiante)==null?void 0:de.nombre," ",(ee=(q=T.inscripcion)==null?void 0:q.estudiante)==null?void 0:ee.apellido]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Programa"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:((re=(se=T.inscripcion)==null?void 0:se.programa)==null?void 0:re.nombre)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monto Total"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:parseFloat(T.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),(f=T.estado_plan)!=null&&f.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-4 w-4"}),"Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Je,{className:"h-4 w-4"}),"Pendiente"]})]})]}),T.cuotas&&T.cuotas.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Cuotas"}),e.jsx("div",{className:"space-y-3",children:T.cuotas.map((je,Ne)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Cuota ",Ne+1]}),je.monto_pagado>=je.monto?e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-3 w-3"}),"Pagada"]}):je.esta_vencida?e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-3 w-3"}),"Vencida"]}):e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Je,{className:"h-3 w-3"}),"Pendiente"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:parseFloat(je.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),je.monto_pagado<je.monto&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(We,{className:"h-4 w-4"}),onClick:()=>K(je)}),e.jsx(W,{variant:"ghost",size:"sm",icon:e.jsx(No,{className:"h-4 w-4"}),onClick:()=>ae(je)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vencimiento"}),e.jsx("p",{className:"font-medium",children:new Date(je.fecha_fin).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Pagado"}),e.jsx("p",{className:"font-medium text-green-600",children:parseFloat(je.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Pendiente"}),e.jsx("p",{className:"font-medium text-yellow-600",children:parseFloat(je.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),je.pagos&&je.pagos.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos:"}),e.jsx("div",{className:"space-y-1",children:je.pagos.map((Te,ve)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{children:parseFloat(Te.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"text-gray-500",children:[new Date(Te.fecha).toLocaleDateString()," ",Te.token&&`- ${Te.token}`]})]},ve))})]})]},Ne))})]})]})}),e.jsx(Fe,{isOpen:A,onClose:()=>{P(!1),Y(null),oe()},title:"Registrar Pago Manual",size:"md",children:L&&e.jsxs("form",{onSubmit:ne(ce),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:parseFloat(L.saldo_pendiente||L.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(we,{label:"Monto a Pagar *",type:"number",step:"0.01",placeholder:"0.00",error:(w=fe.monto)==null?void 0:w.message,...M("monto",{required:"El monto es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"},max:{value:L.saldo_pendiente||L.monto||0,message:"El monto no puede exceder el saldo pendiente"}})}),e.jsx(we,{label:"Fecha del Pago *",type:"date",error:(V=fe.fecha)==null?void 0:V.message,...M("fecha",{required:"La fecha es obligatoria"})}),e.jsx(we,{label:"Token/Nmero de Transaccin",placeholder:"Opcional",error:(B=fe.token)==null?void 0:B.message,...M("token")}),e.jsx(we,{label:"Observaciones",placeholder:"Opcional",error:(ue=fe.observaciones)==null?void 0:ue.message,...M("observaciones")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{P(!1),Y(null),oe()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(We,{className:"h-5 w-5"}),children:"Registrar Pago"})]})]})}),e.jsx(Fe,{isOpen:R,onClose:()=>{G(!1),Y(null),xe()},title:"Aplicar Penalidad",size:"md",children:L&&e.jsxs("form",{onSubmit:me(J),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(No,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"font-semibold text-red-900 dark:text-red-100",children:"Atencin"})]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"La penalidad aumentar el monto de la cuota. Esta accin quedar registrada en la bitcora."})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Monto Actual de la Cuota"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:parseFloat(L.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsx(we,{label:"Monto de Penalidad *",type:"number",step:"0.01",placeholder:"0.00",error:(ge=ie.monto_penalidad)==null?void 0:ge.message,...Q("monto_penalidad",{required:"El monto de penalidad es obligatorio",min:{value:.01,message:"El monto debe ser mayor a 0"}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo de la Penalidad *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-800 dark:text-gray-100",rows:"4",placeholder:"Describe el motivo de la penalidad...",error:(_e=ie.motivo)==null?void 0:_e.message,...Q("motivo",{required:"El motivo es obligatorio",minLength:{value:10,message:"El motivo debe tener al menos 10 caracteres"}})}),ie.motivo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ie.motivo.message})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{G(!1),Y(null),xe()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(No,{className:"h-5 w-5"}),children:"Aplicar Penalidad"})]})]})})]})},mp={async getMisGrupos(){var s,r;try{const a=await Re("/docente/grupos");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||I.ERROR_FETCH}}},async getGrupoById(s){var r,a;try{const t=await Re(`/docente/grupos/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||t.message||I.ERROR_FETCH}}}},ki={async registrarNota(s){var r,a,t,n;try{const o=await Be("/docente/evaluaciones/nota",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async actualizarEstado(s){var r,a,t,n;try{const o=await Be("/docente/evaluaciones/estado",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_UPDATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR_UPDATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async registrarNotasMasivas(s){var r,a,t,n;try{const o=await Be("/docente/evaluaciones/notas-masivas",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||I.ERROR_CREATE,errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||I.ERROR_CREATE,errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async enviarNotificacionEstudiantes(s){var r,a,t,n;try{const o=await Be("/docente/evaluaciones/enviar-notificacion",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||"Error al enviar notificacin",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al enviar notificacin",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},Ek={async getEstadisticas(){var s,r;try{const a=await Re("/docente/dashboard/estadisticas");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||I.ERROR_FETCH}}}},$x={async getPerfil(){var s,r;try{const a=await Re("/docente/perfil");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||a.message||I.ERROR_FETCH}}},async cambiarPassword(s){var r,a,t,n;try{const o=await Be("/docente/perfil/cambiar-password",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||"Error al cambiar contrasea",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al cambiar contrasea",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async cambiarEmail(s){var r,a,t,n;try{const o=await Be("/docente/perfil/cambiar-email",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message}:{success:!1,message:o.data.message||"Error al cambiar email",errors:o.data.errors}}catch(o){return{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error al cambiar email",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}}},_k=()=>{const{user:s}=Ts(),r=pr(),[a,t]=c.useState(null),[n,o]=c.useState([]),[i,l]=c.useState(0),[d,u]=c.useState(!0);c.useEffect(()=>{g()},[]);const g=async()=>{var y;try{u(!0);const[k,E]=await Promise.all([Ek.getEstadisticas(),ca.getNotificaciones({per_page:5,leida:!1})]);k.success&&t(k.data),E.success&&(o(((y=E.data)==null?void 0:y.data)||[]),l(E.noLeidas||0))}catch(k){console.error("Error fetching dashboard data:",k),m.error("Error al cargar datos del dashboard")}finally{u(!1)}},h=a?[{title:"Mis Grupos",value:a.total_grupos||0,subtitle:`${a.grupos_activos||0} activos`,icon:e.jsx(Rs,{className:"h-8 w-8"}),color:"bg-blue-500",link:"/docente/grupos"},{title:"Total Estudiantes",value:a.total_estudiantes||0,subtitle:`${a.estudiantes_en_curso||0} en curso`,icon:e.jsx(ts,{className:"h-8 w-8"}),color:"bg-green-500",link:"/docente/grupos"},{title:"Calificaciones Pendientes",value:a.calificaciones_pendientes||0,subtitle:"Sin nota registrada",icon:e.jsx(ys,{className:"h-8 w-8"}),color:"bg-yellow-500",link:"/docente/grupos"},{title:"Estudiantes Aprobados",value:a.estudiantes_aprobados||0,subtitle:`${a.estudiantes_reprobados||0} reprobados`,icon:e.jsx(Me,{className:"h-8 w-8"}),color:"bg-emerald-500",link:"/docente/grupos"}]:[];return d?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-6 text-white shadow-glow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bienvenido, ",(s==null?void 0:s.nombre)||"Docente","!"]}),e.jsx("p",{className:"text-blue-100",children:"Portal del Docente - Gestiona tus grupos y evaluaciones"})]}),i>0&&e.jsxs("button",{onClick:()=>r("/docente/notificaciones"),className:"relative hover:scale-110 transition-transform",children:[e.jsx(Br,{className:"h-8 w-8 text-white"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center animate-pulse",children:i})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((y,k)=>e.jsxs(ke,{className:"gradient cursor-pointer hover:shadow-glow-lg transition-all duration-200",onClick:()=>r(y.link),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${y.color} p-3 rounded-lg text-white shadow-lg`,children:y.icon}),e.jsx(On,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("h3",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium mb-1",children:y.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:y.value}),y.subtitle&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.subtitle})]},k))}),n.length>0&&e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(Br,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),"Notificaciones Recientes"]}),e.jsx("button",{onClick:()=>r("/docente/notificaciones"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Ver todas"})]}),e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((y,k)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${y.tipo==="success"?"border-green-500 bg-green-50 dark:bg-green-900/20":y.tipo==="error"?"border-red-500 bg-red-50 dark:bg-red-900/20":y.tipo==="warning"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-500 bg-blue-50 dark:bg-blue-900/20"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:y.titulo}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.mensaje}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:new Date(y.fecha_envio||y.created_at).toLocaleString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),!y.leida&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2 mt-1"})]})},k))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(ys,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),"Accesos Rpidos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>r("/docente/grupos"),className:"w-full text-left p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl hover:shadow-lg transition-all duration-200 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(Rs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 block",children:"Mis Grupos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ver grupos, horarios y estudiantes"})]})]})}),e.jsx("button",{onClick:()=>r("/docente/grupos"),className:"w-full text-left p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:e.jsx(ys,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 block",children:"Registrar Calificaciones"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Subir notas y actualizar estados"})]})]})}),e.jsx("button",{onClick:()=>r("/docente/notificaciones"),className:"w-full text-left p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl hover:shadow-lg transition-all duration-200 border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center",children:e.jsx(Br,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 block",children:"Mis Notificaciones"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revisa avisos y mensajes del sistema"})]})]})})]})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(mt,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"}),"Tu Informacin"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Rol"})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Docente"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Email"})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 break-all",children:(s==null?void 0:s.email)||"No disponible"})]}),e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 leading-relaxed",children:[e.jsx("strong",{children:" Flujo de trabajo:"}),e.jsx("br",{}),"1. Revisa tus grupos asignados",e.jsx("br",{}),"2. Accede a cada grupo para ver estudiantes",e.jsx("br",{}),"3. Registra notas y actualiza estados",e.jsx("br",{}),"4. Mantente al da con las notificaciones"]})})]})]})]})]})},Sk=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(!0),n=pr();c.useEffect(()=>{o()},[]);const o=async()=>{try{t(!0);const l=await mp.getMisGrupos();l.success?r(l.data||[]):(m.error(l.message||"Error al cargar grupos"),r([]))}catch{m.error("Error de conexin"),r([])}finally{t(!1)}},i=l=>{n(`/docente/grupos/${l}`)};return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(Rs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Grupos Asignados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualiza los grupos y horarios que te han sido asignados"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de grupos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]})]}),e.jsx(ke,{className:"gradient border-l-4 border-l-blue-500",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ko,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Informacin sobre tus grupos"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Aqu puedes ver todos los grupos que te han sido asignados por el administrador, junto con sus horarios, aulas y fechas. Para gestionar mdulos o crear nuevos grupos, contacta con el administrador del sistema."})]})]})}),s.length===0?e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes grupos asignados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para que te asignen grupos"})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(l=>{var d,u;return e.jsx(ke,{className:"gradient hover:shadow-glow-lg transition-all duration-200",shadow:"glow-lg",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-start justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:e.jsx(ys,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold gradient-text",children:((d=l.programa)==null?void 0:d.nombre)||"Sin programa"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1 mt-1",children:[e.jsx(ys,{className:"h-3.5 w-3.5"}),"Mdulo: ",((u=l.modulo)==null?void 0:u.nombre)||"Sin mdulo"]})]})]})}),l.esta_activo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:[e.jsx(Me,{className:"h-3 w-3"}),"Activo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300",children:[e.jsx(ls,{className:"h-3 w-3"}),"Finalizado"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Qs,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Perodo del Grupo"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[new Date(l.fecha_ini).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})," - ",new Date(l.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ts,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Estudiantes Inscritos"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[l.numero_estudiantes||0," estudiante",l.numero_estudiantes!==1?"s":""]})]})]}),l.horarios&&l.horarios.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Horarios y Aulas"}),e.jsx("div",{className:"space-y-2",children:l.horarios.map((g,h)=>e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 dark:bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ga,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:g.dias||"Sin das asignados"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[g.hora_ini||"N/A"," - ",g.hora_fin||"N/A"]})]}),g.aula&&g.aula!=="N/A"&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-blue-200 dark:border-blue-800",children:[e.jsx(Js,{className:"h-3.5 w-3.5 text-primary-600 dark:text-primary-400"}),e.jsxs("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:["Aula: ",g.aula]})]})]})]})},h))})]}):e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Sin horarios asignados"]})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(W,{variant:"primary",fullWidth:!0,icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>i(l.grupo_id),children:"Ver Detalle y Evaluar Estudiantes"})})]})},l.grupo_id)})})]})},gp=Ke.forwardRef(({label:s,error:r,className:a="",rows:t=4,...n},o)=>e.jsxs("div",{className:"space-y-2",children:[s&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),e.jsx("textarea",{ref:o,rows:t,className:`
          w-full px-4 py-2 border rounded-lg
          bg-white dark:bg-gray-800
          text-gray-900 dark:text-gray-100
          border-gray-300 dark:border-gray-600
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
          placeholder-gray-400 dark:placeholder-gray-500
          ${r?"border-red-500 dark:border-red-500":""}
          ${a}
        `,...n}),r&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));gp.displayName="Textarea";const Ck=()=>{var pe,K,ae,ce,J,Z,ye,de,q,ee,se;const{grupoId:s}=vj(),r=pr(),[a,t]=c.useState(null),[n,o]=c.useState([]),[i,l]=c.useState(!0),[d,u]=c.useState(!1),[g,h]=c.useState(!1),[y,k]=c.useState(!1),[E,S]=c.useState(null),[C,b]=c.useState({}),[p,N]=c.useState(!1),{register:_,handleSubmit:x,reset:v,formState:{errors:j}}=Xe(),{register:D,handleSubmit:H,reset:A,formState:{errors:P}}=Xe(),{register:R,handleSubmit:G,reset:T,formState:{errors:$}}=Xe();c.useEffect(()=>{s&&L()},[s]);const L=async()=>{try{l(!0);const re=await mp.getGrupoById(s);re.success?(t(re.data.grupo),o(re.data.estudiantes||[])):(m.error(re.message||"Error al cargar el grupo"),r("/docente/grupos"))}catch{m.error("Error de conexin"),r("/docente/grupos")}finally{l(!1)}},Y=re=>{S(re),v({grupo_id:s,estudiante_registro:re.registro_estudiante,nota:re.nota||"",estado:re.estado||""}),u(!0)},M=re=>{S(re),A({grupo_id:s,estudiante_registro:re.registro_estudiante,estado:re.estado||"EN_CURSO"}),h(!0)},ne=async re=>{try{N(!0);const f=await ki.registrarNota(re);f.success?(m.success(f.message||"Nota registrada exitosamente. El estudiante ha sido notificado."),u(!1),S(null),v(),await L()):(m.error(f.message||"Error al registrar nota"),f.errors&&Object.keys(f.errors).forEach(w=>{m.error(`${w}: ${f.errors[w]}`)}))}catch{m.error("Error al registrar nota")}finally{N(!1)}},oe=async re=>{try{N(!0);const f=await ki.actualizarEstado(re);f.success?(m.success(f.message||"Estado actualizado exitosamente"),h(!1),S(null),A(),await L()):(m.error(f.message||"Error al actualizar estado"),f.errors&&Object.keys(f.errors).forEach(w=>{m.error(`${w}: ${f.errors[w]}`)}))}catch{m.error("Error al actualizar estado")}finally{N(!1)}},fe=async re=>{try{N(!0);const f=await ki.enviarNotificacionEstudiantes({grupo_id:s,titulo:re.titulo,mensaje:re.mensaje,tipo:re.tipo||"info",estudiante_registro:re.estudiante_registro||null});f.success?(m.success(f.message||"Notificacin enviada exitosamente"),k(!1),T()):m.error(f.message||"Error al enviar notificacin")}catch{m.error("Error al enviar notificacin")}finally{N(!1)}},Q=(re,f,w)=>{b(V=>({...V,[re]:{...V[re],[f]:w}}))},me=async()=>{try{N(!0);const re=Object.keys(C).map(w=>({estudiante_registro:w,nota:parseFloat(C[w].nota)||null,estado:C[w].estado||null})).filter(w=>w.nota!==null);if(re.length===0){m.error("Debe ingresar al menos una nota");return}const f=await ki.registrarNotasMasivas({grupo_id:s,notas:re});f.success?(m.success(f.message||"Notas registradas exitosamente. Los estudiantes han sido notificados."),b({}),await L()):m.error(f.message||"Error al registrar notas")}catch{m.error("Error al registrar notas")}finally{N(!1)}},xe=re=>{const f={APROBADO:{color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",icon:Me,label:"Aprobado"},REPROBADO:{color:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",icon:ls,label:"Reprobado"},RETIRADO:{color:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300",icon:ws,label:"Retirado"},EN_CURSO:{color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300",icon:Je,label:"En Curso"}},w=f[re]||f.EN_CURSO,V=w.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${w.color}`,children:[e.jsx(V,{className:"h-3 w-3"}),w.label]})},ie=re=>!re&&re!==0?"text-gray-500":re>=51?"text-green-600 dark:text-green-400 font-semibold":"text-red-600 dark:text-red-400 font-semibold";if(i&&!a)return e.jsx(er,{});if(!a)return null;const le=n.filter(re=>re.nota!==null&&re.nota!==void 0).length,Se=n.length-le;return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(W,{variant:"ghost",icon:e.jsx(Jl,{className:"h-4 w-4"}),onClick:()=>r("/docente/grupos"),children:"Volver"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Evaluacin de Grupo"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[((pe=a.programa)==null?void 0:pe.nombre)||"Programa"," - ",((K=a.modulo)==null?void 0:K.nombre)||"Mdulo"]})]})]}),e.jsx(W,{variant:"primary",icon:e.jsx(Br,{className:"h-4 w-4"}),onClick:()=>{T({grupo_id:s,titulo:"",mensaje:"",tipo:"info"}),k(!0)},children:"Enviar Aviso"})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Programa"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:((ae=a.programa)==null?void 0:ae.nombre)||"-"})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Mdulo"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:((ce=a.modulo)==null?void 0:ce.nombre)||"-"})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Perodo"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:[new Date(a.fecha_ini).toLocaleDateString("es-ES",{day:"numeric",month:"short"})," - ",new Date(a.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Estudiantes"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n.length}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[le," con nota, ",Se," pendientes"]})]})]}),a.horarios&&a.horarios.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Horarios y Aulas"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.horarios.map((re,f)=>e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ga,{className:"h-3.5 w-3.5 text-primary-600 dark:text-primary-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:re.dias||"Sin das"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[re.hora_ini," - ",re.hora_fin]})]}),re.aula&&re.aula!=="N/A"&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[e.jsx(Js,{className:"h-3.5 w-3.5 text-primary-600 dark:text-primary-400"}),e.jsxs("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:["Aula: ",re.aula]})]})]},f))})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold gradient-text",children:["Estudiantes (",n.length,")"]}),Object.keys(C).length>0&&e.jsxs(W,{variant:"primary",icon:e.jsx(Ic,{className:"h-4 w-4"}),onClick:me,disabled:p,children:["Guardar Notas Masivas (",Object.keys(C).length,")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Estudiante"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"CI"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Nota"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Estado"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:"Acciones"})]})}),e.jsx("tbody",{children:n.map((re,f)=>{var w;return e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:((w=re.nombre)==null?void 0:w.charAt(0))||"E"}),e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[re.nombre," ",re.apellido]})})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:re.ci}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(we,{type:"number",min:"0",max:"100",step:"0.01",className:"w-24 text-center",defaultValue:re.nota||"",onChange:V=>Q(re.registro_estudiante,"nota",V.target.value),placeholder:"0-100"}),re.nota!==null&&re.nota!==void 0&&e.jsx("span",{className:`text-sm font-semibold ${ie(re.nota)}`,children:parseFloat(re.nota).toFixed(2)})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:xe(re.estado||"EN_CURSO")})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(W,{variant:"ghost",size:"sm",onClick:()=>Y(re),icon:e.jsx(ys,{className:"h-4 w-4"}),children:"Nota"}),e.jsx(W,{variant:"ghost",size:"sm",onClick:()=>M(re),icon:e.jsx(ws,{className:"h-4 w-4"}),children:"Estado"})]})})]},f)})})]})})]}),e.jsx(Fe,{isOpen:d,onClose:()=>{u(!1),S(null),v()},title:"Registrar Nota",size:"md",children:E&&e.jsxs("form",{onSubmit:x(ne),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[E.nombre," ",E.apellido]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["CI: ",E.ci]})]}),e.jsx(we,{label:"Nota (0-100) *",type:"number",step:"0.01",min:"0",max:"100",placeholder:"0-100",error:(J=j.nota)==null?void 0:J.message,..._("nota",{required:"La nota es obligatoria",min:{value:0,message:"La nota debe ser mayor o igual a 0"},max:{value:100,message:"La nota debe ser menor o igual a 100"}})}),e.jsx(Rr,{label:"Estado Acadmico",name:"estado",options:[{value:"",label:"Automtico (segn nota)"},{value:"APROBADO",label:"Aprobado"},{value:"REPROBADO",label:"Reprobado"},{value:"RETIRADO",label:"Retirado"},{value:"EN_CURSO",label:"En Curso"}],..._("estado"),error:(Z=j.estado)==null?void 0:Z.message}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" El estudiante ser notificado automticamente cuando se registre la nota."})}),e.jsx("input",{type:"hidden",..._("grupo_id")}),e.jsx("input",{type:"hidden",..._("estudiante_registro")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{u(!1),S(null),v()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(Ic,{className:"h-5 w-5"}),disabled:p,children:p?"Guardando...":"Guardar Nota"})]})]})}),e.jsx(Fe,{isOpen:g,onClose:()=>{h(!1),S(null),A()},title:"Actualizar Estado Acadmico",size:"md",children:E&&e.jsxs("form",{onSubmit:H(oe),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Estudiante"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[E.nombre," ",E.apellido]}),E.nota!==null&&E.nota!==void 0&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Nota actual: ",e.jsx("span",{className:"font-semibold",children:E.nota})]})]}),e.jsx(Rr,{label:"Estado Acadmico *",name:"estado",options:[{value:"APROBADO",label:"Aprobado"},{value:"REPROBADO",label:"Reprobado"},{value:"RETIRADO",label:"Retirado"},{value:"EN_CURSO",label:"En Curso"}],...D("estado",{required:"El estado es obligatorio"}),error:(ye=P.estado)==null?void 0:ye.message}),e.jsx("input",{type:"hidden",...D("grupo_id")}),e.jsx("input",{type:"hidden",...D("estudiante_registro")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{h(!1),S(null),A()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(Ic,{className:"h-5 w-5"}),disabled:p,children:p?"Actualizando...":"Actualizar Estado"})]})]})}),e.jsx(Fe,{isOpen:y,onClose:()=>{k(!1),T()},title:"Enviar Aviso a Estudiantes",size:"md",children:e.jsxs("form",{onSubmit:G(fe),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Grupo"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[((de=a.programa)==null?void 0:de.nombre)||"Programa"," - ",((q=a.modulo)==null?void 0:q.nombre)||"Mdulo"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n.length," estudiante",n.length!==1?"s":""," en el grupo"]})]}),e.jsx(Rr,{label:"Enviar a",name:"estudiante_registro",options:[{value:"",label:"Todos los estudiantes del grupo"},...n.map(re=>({value:re.registro_estudiante,label:`${re.nombre} ${re.apellido} (CI: ${re.ci})`}))],...R("estudiante_registro")}),e.jsx(we,{label:"Ttulo *",placeholder:"Ej: Recordatorio de entrega de tarea",error:(ee=$.titulo)==null?void 0:ee.message,...R("titulo",{required:"El ttulo es obligatorio"})}),e.jsx(gp,{label:"Mensaje *",placeholder:"Escribe el mensaje que recibirn los estudiantes...",rows:4,error:(se=$.mensaje)==null?void 0:se.message,...R("mensaje",{required:"El mensaje es obligatorio"})}),e.jsx(Rr,{label:"Tipo de Notificacin",name:"tipo",options:[{value:"info",label:"Informativa"},{value:"success",label:"xito"},{value:"warning",label:"Advertencia"},{value:"error",label:"Error"},{value:"academico",label:"Acadmica"}],...R("tipo")}),e.jsx("input",{type:"hidden",...R("grupo_id")}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{k(!1),T()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(i1,{className:"h-5 w-5"}),disabled:p,children:p?"Enviando...":"Enviar Aviso"})]})]})})]})},Rk=()=>{var P,R,G,T,$;const s=pr(),r=Oa(),{user:a,logout:t}=Ts(),[n,o]=c.useState(!1),[i,l]=c.useState(!1),[d,u]=c.useState(!1),[g,h]=c.useState(!1),[y,k]=c.useState(!1),[E,S]=c.useState(!1),[C,b]=c.useState(!0),{register:p,handleSubmit:N,formState:{errors:_},watch:x}=Xe(),v=x("password_nuevo"),j={longitud:(v==null?void 0:v.length)>=8,mayuscula:/[A-Z]/.test(v),minuscula:/[a-z]/.test(v),numero:/\d/.test(v)};c.useEffect(()=>{var L,Y,M,ne,oe;if(console.log(" CambiarPassword - Verificando estado:"),console.log("   - location.state:",r.state),console.log("   - fromLogin:",(L=r.state)==null?void 0:L.fromLogin),console.log("   - requiereCambio desde state:",(Y=r.state)==null?void 0:Y.requiereCambio),(M=r.state)!=null&&M.fromLogin&&((ne=r.state)!=null&&ne.requiereCambio)){console.log("    Requiere cambio (desde login) - MOSTRANDO INMEDIATAMENTE"),h(!0),b(!1);return}(oe=r.state)!=null&&oe.requiereCambio?(console.log("    Requiere cambio (desde state)"),h(!0),b(!1)):(console.log("    Verificando en perfil..."),D())},[]);const D=async()=>{var L,Y;try{b(!0);const M=await $x.getPerfil();console.log("   - Respuesta del perfil:",M),console.log("   - debe_cambiar_password:",(L=M.data)==null?void 0:L.debe_cambiar_password),M.success&&((Y=M.data)!=null&&Y.debe_cambiar_password)?(console.log("    Requiere cambio (desde perfil)"),h(!0)):M.success?(console.log("    No requiere cambio - redirigiendo a dashboard"),s("/docente/dashboard")):(console.log("    Error obteniendo perfil - redirigiendo a login"),s("/docente/login"))}catch(M){console.error("Error verificando estado de contrasea:",M),s("/docente/login")}finally{b(!1)}},H=async L=>{var Y,M,ne,oe,fe,Q,me,xe;try{k(!0),console.log(" [CAMBIAR PASSWORD] Iniciando..."),console.log("   - Datos a enviar:",{password_actual:"***",password_nuevo:"*** (longitud: "+((Y=L.password_nuevo)==null?void 0:Y.length)+")",password_nuevo_confirmacion:"*** (longitud: "+((M=L.password_nuevo_confirmacion)==null?void 0:M.length)+")",coinciden:L.password_nuevo===L.password_nuevo_confirmacion});const ie=await $x.cambiarPassword({password_actual:L.password_actual,password_nuevo:L.password_nuevo,password_nuevo_confirmacion:L.password_nuevo_confirmacion});console.log("    Respuesta del backend:",{success:ie.success,message:ie.message,hasErrors:!!ie.errors}),ie.success?(console.log("    Contrasea cambiada exitosamente"),console.log("    El backend actualiz debe_cambiar_password a false"),h(!1),m.success("Contrasea cambiada exitosamente!",{duration:3e3,icon:""}),console.log("    Redirigiendo al dashboard AHORA..."),setTimeout(()=>{window.location.href="/docente/dashboard"},800)):(console.error("    Error del backend:",{message:ie.message,errors:ie.errors}),m.error(ie.message||"Error al cambiar contrasea"),ie.errors&&Object.keys(ie.errors).forEach(le=>{(Array.isArray(ie.errors[le])?ie.errors[le]:[ie.errors[le]]).forEach(pe=>{console.error(`    Error en ${le}:`,pe),m.error(pe,{duration:5e3})})}))}catch(ie){console.error(" [CAMBIAR PASSWORD] Error en la peticin:",{message:ie.message,response:(ne=ie.response)==null?void 0:ne.data,status:(oe=ie.response)==null?void 0:oe.status});const le=((Q=(fe=ie.response)==null?void 0:fe.data)==null?void 0:Q.message)||ie.message||"Error al cambiar contrasea";m.error(le,{duration:6e3}),(xe=(me=ie.response)==null?void 0:me.data)!=null&&xe.errors&&Object.keys(ie.response.data.errors).forEach(Se=>{const pe=ie.response.data.errors[Se];(Array.isArray(pe)?pe:[pe]).forEach(ae=>{console.error(`    Error en ${Se}:`,ae),m.error(ae,{duration:5e3})})})}finally{k(!1)}},A=()=>{console.log("    Click en Continuar - Redirigiendo inmediatamente..."),S(!1),window.location.href="/docente/dashboard"};return C&&!((P=r.state)!=null&&P.fromLogin)?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verificando..."})]})}):g?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(nr,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold gradient-text mb-2",children:"Cambio de Contrasea Requerido"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((R=r.state)==null?void 0:R.mensaje)||"Por seguridad, debes cambiar tu contrasea temporal antes de continuar."})]}),e.jsxs("form",{onSubmit:N(H),className:"space-y-5",children:[e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ws,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Importante"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:"Tu nueva contrasea debe tener al menos 8 caracteres, incluyendo una mayscula, una minscula y un nmero."})]})]})}),e.jsx(we,{label:"Contrasea Actual *",type:n?"text":"password",placeholder:"Ingresa tu contrasea temporal",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>o(!n),className:"text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(G=_.password_actual)==null?void 0:G.message,...p("password_actual",{required:"La contrasea actual es obligatoria"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{label:"Nueva Contrasea *",type:i?"text":"password",placeholder:"Mnimo 8 caracteres (mayscula, minscula, nmero)",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>l(!i),className:"text-gray-400 hover:text-gray-600 transition-colors",children:i?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:(T=_.password_nuevo)==null?void 0:T.message,...p("password_nuevo",{required:"La nueva contrasea es obligatoria",minLength:{value:8,message:"La contrasea debe tener al menos 8 caracteres"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/,message:"Debe contener al menos una mayscula, una minscula y un nmero"}})}),v&&v.length>0&&e.jsxs("div",{className:"px-1 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.longitud?e.jsx(Me,{className:"h-4 w-4 text-green-600"}):e.jsx(ls,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:j.longitud?"text-green-600":"text-gray-500",children:"Mnimo 8 caracteres"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.mayuscula?e.jsx(Me,{className:"h-4 w-4 text-green-600"}):e.jsx(ls,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:j.mayuscula?"text-green-600":"text-gray-500",children:"Al menos una letra MAYSCULA"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.minuscula?e.jsx(Me,{className:"h-4 w-4 text-green-600"}):e.jsx(ls,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:j.minuscula?"text-green-600":"text-gray-500",children:"Al menos una letra minscula"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[j.numero?e.jsx(Me,{className:"h-4 w-4 text-green-600"}):e.jsx(ls,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:j.numero?"text-green-600":"text-gray-500",children:"Al menos un nmero"})]})]})]}),e.jsx(we,{label:"Confirmar Nueva Contrasea *",type:d?"text":"password",placeholder:"Repite tu nueva contrasea",icon:e.jsx(vr,{className:"h-5 w-5"}),rightIcon:e.jsx("button",{type:"button",onClick:()=>u(!d),className:"text-gray-400 hover:text-gray-600 transition-colors",children:d?e.jsx(ct,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})}),error:($=_.password_nuevo_confirmacion)==null?void 0:$.message,...p("password_nuevo_confirmacion",{required:"La confirmacin de contrasea es obligatoria",validate:L=>L===v||"Las contraseas no coinciden"})}),e.jsx("div",{className:"pt-4",children:e.jsx(W,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,icon:e.jsx(nr,{className:"h-5 w-5"}),loading:y,disabled:y,children:y?"Cambiando contrasea...":"Cambiar Contrasea"})})]})]})}),e.jsx(Fe,{isOpen:E,onClose:A,title:"Contrasea Cambiada Exitosamente",size:"md",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Contrasea actualizada!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tu contrasea ha sido cambiada exitosamente. Ahora puedes acceder a tu portal."})]}),e.jsx(W,{variant:"primary",fullWidth:!0,onClick:A,icon:e.jsx(Me,{className:"h-5 w-5"}),children:"Continuar al Portal"})]})})]}):null},Ak=(s,r=1920,a=1920,t=.8,n=2)=>new Promise((o,i)=>{if(!s.type.startsWith("image/")){o(s);return}if(s.type==="application/pdf"){o(s);return}const l=new FileReader;l.onload=d=>{const u=new Image;u.onload=()=>{let g=u.width,h=u.height;if(g>r||h>a){const E=Math.min(r/g,a/h);g=g*E,h=h*E}const y=document.createElement("canvas");y.width=g,y.height=h,y.getContext("2d").drawImage(u,0,0,g,h),y.toBlob(E=>{if(!E){i(new Error("Error al comprimir la imagen"));return}if(E.size/(1024*1024)>n)y.toBlob(C=>{if(!C){i(new Error("Error al comprimir la imagen"));return}const b=new File([C],s.name,{type:s.type,lastModified:Date.now()});o(b)},s.type,Math.max(.5,t-.2));else{const C=new File([E],s.name,{type:s.type,lastModified:Date.now()});o(C)}},s.type,t)},u.onerror=()=>i(new Error("Error al cargar la imagen")),u.src=d.target.result},l.onerror=()=>i(new Error("Error al leer el archivo")),l.readAsDataURL(s)}),wt=s=>{if(s===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(r));return Math.round(s/Math.pow(r,t)*100)/100+" "+a[t]},bm=({isOpen:s,onClose:r,tiposDocumento:a,tipoDocumentoSeleccionado:t,onSuccess:n})=>{var j,D;const[o,i]=c.useState(t||""),[l,d]=c.useState(null),[u,g]=c.useState(null),[h,y]=c.useState(!1),[k,E]=c.useState(0),[S,C]=c.useState(0),b=c.useRef(null);c.useEffect(()=>{s&&t?i(t):s||(d(null),g(null),E(0),C(0),b.current&&(b.current.value=""))},[s,t]);const p=[{tipo_documento_id:1,nombre:"Carnet de Identidad - Anverso",requerido:!0},{tipo_documento_id:2,nombre:"Carnet de Identidad - Reverso",requerido:!0},{tipo_documento_id:3,nombre:"Certificado de Nacimiento",requerido:!0},{tipo_documento_id:4,nombre:"Ttulo de Bachiller",requerido:!1}],N=a&&a.length>0?a.map(H=>({tipo_documento_id:H.tipo_documento_id,nombre:H.nombre||H.nombre_entidad||"Documento",requerido:H.requerido!==!1})):p,_=async H=>{var G;const A=(G=H.target.files)==null?void 0:G[0];if(!A)return;if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(A.type)){m.error("Solo se permiten archivos JPG, PNG o PDF");return}const R=10*1024*1024;if(A.size>R){m.error("El archivo es muy grande. Mximo 10MB");return}if(E(A.size),d(A),A.type.startsWith("image/")){const T=new FileReader;T.onload=$=>{g($.target.result)},T.readAsDataURL(A)}else g(null);if(A.type.startsWith("image/"))try{y(!0);const T=await Ak(A,1920,1920,.8,2);C(T.size),d(T),m.success(`Imagen comprimida: ${wt(k)}  ${wt(T.size)}`)}catch(T){console.error("Error comprimiendo imagen:",T),m.error("Error al comprimir la imagen")}finally{y(!1)}else C(A.size)},x=async()=>{var P,R,G,T,$,L,Y,M,ne,oe;if(!o){m.error("Selecciona un tipo de documento");return}if(!l){m.error("Selecciona un archivo");return}const H=N.find(fe=>fe.tipo_documento_id==o||String(fe.tipo_documento_id)===String(o));if(!H||!H.tipo_documento_id){m.error("Tipo de documento no vlido");return}const A=new FormData;A.append("archivo",l),A.append("tipo_documento_id",H.tipo_documento_id);try{y(!0),console.log("Subiendo documento:",{tipo_documento_id:H.tipo_documento_id,archivo:l.name,tamao:l.size});const fe=await qt("/estudiante/documentos/subir",A);console.log("Respuesta del servidor:",fe.data),fe.data.success?(m.success("Documento subido exitosamente"),setTimeout(()=>{n==null||n(),v()},500)):m.error(fe.data.message||"Error al subir el documento")}catch(fe){console.error("Error subiendo documento:",fe);const Q=((R=(P=fe.response)==null?void 0:P.data)==null?void 0:R.message)||((L=($=(T=(G=fe.response)==null?void 0:G.data)==null?void 0:T.errors)==null?void 0:$.archivo)==null?void 0:L[0])||((oe=(ne=(M=(Y=fe.response)==null?void 0:Y.data)==null?void 0:M.errors)==null?void 0:ne.tipo_documento_id)==null?void 0:oe[0])||"Error al subir el documento";m.error(Q)}finally{y(!1)}},v=()=>{t||i(""),d(null),g(null),E(0),C(0),b.current&&(b.current.value=""),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(or,{className:"h-6 w-6"}),"Subir Documento"]}),e.jsx("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:e.jsx(xr,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[(!t||N.length>1)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipo de Documento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:H=>i(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:h||!!t,children:[e.jsx("option",{value:"",children:"Selecciona un tipo de documento"}),N.map(H=>e.jsxs("option",{value:H.tipo_documento_id,children:[H.nombre||H.nombre_entidad||"Documento",H.requerido===!1&&" (Opcional)"]},H.tipo_documento_id))]})]}),t&&N.length===1&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Subiendo: ",((j=N[0])==null?void 0:j.nombre)||((D=N[0])==null?void 0:D.nombre_entidad)||"Documento"]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Archivo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-green-500 transition-colors",children:e.jsx("div",{className:"space-y-1 text-center",children:u?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:u,alt:"Preview",className:"mx-auto max-h-48 rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-600",children:l==null?void 0:l.name}),k>0&&S>0&&k!==S&&e.jsxs("p",{className:"text-xs text-green-600",children:["Comprimido: ",wt(k),"  ",wt(S)]})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ss,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:wt(l.size)})]}):e.jsxs(e.Fragment,{children:[e.jsx(t1,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-green-600 hover:text-green-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-green-500",children:[e.jsx("span",{children:"Selecciona un archivo"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:_,ref:b,disabled:h})]}),e.jsx("p",{className:"pl-1",children:"o arrastra y suelta"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF hasta 10MB"})]})})})})]}),k>0&&S>0&&k!==S&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Imagen comprimida exitosamente"}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Tamao original: ",wt(k),"  Tamao comprimido: ",wt(S)," ","(",Math.round((1-S/k)*100),"% de reduccin)"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:h,children:"Cancelar"}),e.jsx("button",{onClick:x,disabled:!o||!l||h,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"h-4 w-4 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"h-4 w-4"}),"Subir Documento"]})})]})]})}):null},Pk=({documento:s,onUploadSuccess:r})=>{var u,g,h,y;const[a,t]=c.useState(!1),o=(()=>{if(!s.subido)return{icon:e.jsx(or,{className:"h-5 w-5"}),color:"text-gray-400",bgColor:"bg-gray-50",borderColor:"border-gray-300",estado:"Pendiente",badge:"bg-gray-100 text-gray-600"};switch(s.estado){case"aprobado":case"1":return{icon:e.jsx(Me,{className:"h-5 w-5"}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-300",estado:"Aprobado",badge:"bg-green-100 text-green-700"};case"rechazado":case"2":return{icon:e.jsx(ls,{className:"h-5 w-5"}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-300",estado:"Rechazado",badge:"bg-red-100 text-red-700"};case"pendiente":case"0":default:return{icon:e.jsx(Je,{className:"h-5 w-5"}),color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",estado:"En Revisin",badge:"bg-yellow-100 text-yellow-700"}}})(),i={Estudiante:"Documento","Carnet de Identidad - Anverso":"CI - Anverso","Carnet de Identidad - Reverso":"CI - Reverso","Certificado de Nacimiento":"Certificado de Nacimiento","Ttulo de Bachiller":"Ttulo de Bachiller","CI - Anverso":"CI - Anverso","CI - Reverso":"CI - Reverso"},l=((u=s.nombre)==null?void 0:u.toLowerCase().includes("ttulo"))||((g=s.nombre)==null?void 0:g.toLowerCase().includes("bachiller"))||((h=s.nombre_entidad)==null?void 0:h.toLowerCase().includes("ttulo"))||((y=s.nombre_entidad)==null?void 0:y.toLowerCase().includes("bachiller")),d=i[s.nombre]||i[s.nombre_entidad]||s.nombre||s.nombre_entidad||"Documento";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative border-2 rounded-lg p-4 transition-all ${s.subido?`${o.borderColor} ${o.bgColor}`:"border-dashed border-gray-300 bg-white hover:border-green-400 hover:bg-green-50"}`,children:[s.subido&&e.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ${o.badge} flex items-center gap-1`,children:[o.icon,o.estado]}),e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.subido?o.bgColor:"bg-gray-100"}`,children:s.subido?o.icon:e.jsx(ss,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:d}),(!s.requerido||l)&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Opcional"}),s.requerido&&!l&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Requerido"}),s.subido&&e.jsxs("div",{className:"mt-2 space-y-1",children:[s.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Subido: ",new Date(s.fecha_subida).toLocaleDateString()]}),s.observaciones&&s.estado==="rechazado"&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"Observaciones:"}),e.jsx("p",{children:s.observaciones})]})]})]}),e.jsx("button",{onClick:()=>t(!0),className:`w-full py-2 px-4 rounded-lg font-medium text-sm transition-colors flex items-center justify-center gap-2 ${s.subido&&s.estado==="rechazado"?"bg-red-600 text-white hover:bg-red-700":s.subido?"bg-blue-600 text-white hover:bg-blue-700":"bg-green-600 text-white hover:bg-green-700"}`,children:s.subido&&s.estado==="rechazado"?e.jsxs(e.Fragment,{children:[e.jsx(Tn,{className:"h-4 w-4"}),"Re-subir"]}):s.subido?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-4 w-4"}),"Ver/Actualizar"]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"h-4 w-4"}),"Subir"]})})]})]}),e.jsx(bm,{isOpen:a,onClose:()=>t(!1),tiposDocumento:[{tipo_documento_id:s.tipo_documento_id,nombre:s.nombre||s.nombre_entidad,nombre_entidad:s.nombre_entidad||s.nombre,requerido:s.requerido}],tipoDocumentoSeleccionado:s.tipo_documento_id,onSuccess:()=>{t(!1),setTimeout(()=>{r==null||r()},1e3)}})]})},Dk=()=>{const{user:s}=Ts(),r=pr(),[a,t]=c.useState({materias:0,notas:0,documentos:0,pagos:0}),[n,o]=c.useState(null),[i,l]=c.useState([]),[d,u]=c.useState(!0),[g,h]=c.useState(!1),[y,k]=c.useState([]),[E,S]=c.useState([]),[C,b]=c.useState(null);c.useEffect(()=>{const j=async()=>{var H,A,P,R,G,T;try{const $=await Re("/estudiante/dashboard");if($.data.success){const L=$.data.data||$.data;if(t({materias:((H=L.estadisticas)==null?void 0:H.grupos_activos)||0,notas:((A=L.estadisticas)==null?void 0:A.grupos_con_notas)||0,documentos:((P=L.estadisticas)==null?void 0:P.documentos_subidos)||0,pagos:((R=L.estadisticas)==null?void 0:R.pagos_pendientes)||0}),L.estudiante&&b({estado_id:L.estudiante.estado_id,estado_nombre:L.estudiante.estado_nombre}),L.alert&&(o(L.alert),L.alert.documentos_faltantes?l(L.alert.documentos_faltantes):(G=L.documentos)!=null&&G.faltantes&&l(L.documentos.faltantes.map(Y=>Y.nombre))),(T=L.documentos)!=null&&T.requeridos){const Y=L.documentos.requeridos.map(M=>{var oe,fe;const ne=((oe=M.nombre)==null?void 0:oe.toLowerCase().includes("ttulo"))||((fe=M.nombre)==null?void 0:fe.toLowerCase().includes("bachiller"));return{tipo_documento_id:M.tipo_documento_id,nombre:M.nombre||"Documento",nombre_entidad:M.nombre,requerido:!ne,subido:M.subido||!1,estado:M.estado||null,observaciones:M.observaciones||null,fecha_subida:M.fecha_subida||null}});S(Y),k(Y)}}}catch($){console.error("Error cargando dashboard:",$)}finally{u(!1)}},D=async()=>{try{const H=await Re("/estudiante/documentos");if(H.data.success&&H.data.data){const A=Array.isArray(H.data.data)?H.data.data:[];k(A.map(P=>({tipo_documento_id:P.tipo_documento_id,nombre:P.nombre_entidad||P.nombre||"Documento",nombre_entidad:P.nombre_entidad||P.nombre,requerido:!0})))}}catch(H){console.error("Error cargando tipos de documento:",H)}};s&&(j(),D())},[s]);const p=async()=>{var j,D,H,A,P,R;u(!0);try{console.log("Recargando datos del dashboard despus de subir documento...");const G=await Re("/estudiante/dashboard");if(G.data.success){const T=G.data.data||G.data;if(console.log("Datos del dashboard recargados:",T),t({materias:((j=T.estadisticas)==null?void 0:j.grupos_activos)||0,notas:((D=T.estadisticas)==null?void 0:D.grupos_con_notas)||0,documentos:((H=T.estadisticas)==null?void 0:H.documentos_subidos)||0,pagos:((A=T.estadisticas)==null?void 0:A.pagos_pendientes)||0}),T.estudiante&&b({estado_id:T.estudiante.estado_id,estado_nombre:T.estudiante.estado_nombre}),T.alert&&(o(T.alert),T.alert.documentos_faltantes?l(T.alert.documentos_faltantes):(P=T.documentos)!=null&&P.faltantes&&l(T.documentos.faltantes.map($=>$.nombre))),(R=T.documentos)!=null&&R.requeridos){const $=T.documentos.requeridos.map(L=>{var M,ne;const Y=((M=L.nombre)==null?void 0:M.toLowerCase().includes("ttulo"))||((ne=L.nombre)==null?void 0:ne.toLowerCase().includes("bachiller"));return{tipo_documento_id:L.tipo_documento_id,nombre:L.nombre||"Documento",nombre_entidad:L.nombre,requerido:!Y,subido:L.subido||!1,estado:L.estado||null,observaciones:L.observaciones||null,fecha_subida:L.fecha_subida||null}});console.log("Documentos actualizados:",$),S($),k($)}}else console.error("Error en respuesta del dashboard:",G.data)}catch(G){console.error("Error recargando dashboard:",G),m.error("Error al recargar los datos. Por favor, recarga la pgina.")}finally{u(!1)}},N=j=>{switch(j){case"error":return e.jsx(ws,{className:"h-6 w-6"});case"warning":return e.jsx(ws,{className:"h-6 w-6"});case"success":return e.jsx(Me,{className:"h-6 w-6"});case"info":return e.jsx(Je,{className:"h-6 w-6"});default:return e.jsx(ws,{className:"h-6 w-6"})}},_=j=>{switch(j){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},x=[{title:"Mis Materias",value:a.materias||"0",icon:e.jsx(ys,{className:"h-8 w-8"}),color:"bg-blue-500",link:"/estudiante/materias"},{title:"Calificaciones",value:a.notas>0?`${a.notas} disponibles`:"Sin notas",icon:e.jsx(mt,{className:"h-8 w-8"}),color:"bg-green-500",link:"/estudiante/notas"},{title:"Documentos",value:a.documentos||"0",icon:e.jsx(ss,{className:"h-8 w-8"}),color:"bg-yellow-500",link:"/estudiante/documentos"},{title:"Pagos",value:a.pagos>0?`${a.pagos} pendientes`:"Al da",icon:e.jsx(ea,{className:"h-8 w-8"}),color:"bg-purple-500",link:"/estudiante/pagos"}],v=(C==null?void 0:C.estado_id)===4;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bienvenido, ",(s==null?void 0:s.nombre)||(s==null?void 0:s.nombre_completo)||`${(s==null?void 0:s.nombre)||""} ${(s==null?void 0:s.apellido)||""}`.trim()||"Estudiante"]}),e.jsx("p",{className:"text-green-100",children:"Portal del Estudiante - ICAP UAGRM"})]}),v&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 border border-white/30",children:[e.jsx(Me,{className:"h-6 w-6 text-white"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Cuenta Verificada"}),e.jsx("p",{className:"text-xs text-green-100",children:"Documentos Aprobados"})]})]})]})}),v&&e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg border-2 border-green-400",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-3",children:e.jsx(Me,{className:"h-8 w-8 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:"Felicidades! Tu cuenta est activa"}),e.jsx("p",{className:"text-lg mb-4 text-green-50",children:"Todos tus documentos han sido verificados y aprobados por el rea administrativa. Ya puedes inscribirte a los programas disponibles."}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>r("/estudiante/inscripciones"),className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-lg font-semibold hover:bg-green-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:["Ver Programas Disponibles",e.jsx(wa,{className:"h-5 w-5"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/documentos"),className:"inline-flex items-center gap-2 px-6 py-3 bg-white/20 backdrop-blur-sm text-white rounded-lg font-semibold hover:bg-white/30 transition-all border border-white/30",children:["Ver Mis Documentos",e.jsx(ss,{className:"h-5 w-5"})]})]})]})]})}),n&&n.type!=="success"&&e.jsx("div",{className:`rounded-lg border-2 p-6 ${_(n.type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:N(n.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:n.title}),e.jsx("p",{className:"mb-4",children:n.message}),e.jsxs("div",{className:"mb-4 p-4 bg-white/50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Tu progreso:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:`flex-1 p-2 rounded ${n.type==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[e.jsx("div",{className:"font-medium",children:"1. Subir Documentos"}),e.jsx("div",{className:"text-xs opacity-75",children:"Completa la documentacin"})]}),e.jsx(wa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"2. Verificacin"}),e.jsx("div",{className:"text-xs opacity-75",children:"Espera aprobacin"})]}),e.jsx(wa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"3. Inscripcin"}),e.jsx("div",{className:"text-xs opacity-75",children:"Elige tu programa"})]}),e.jsx(wa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex-1 p-2 rounded bg-gray-100 text-gray-600",children:[e.jsx("div",{className:"font-medium",children:"4. Pago"}),e.jsx("div",{className:"text-xs opacity-75",children:"Realiza el pago"})]})]})]}),i&&i.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Documentos que debes subir:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 mb-4",children:i.map((j,D)=>e.jsx("li",{className:"text-sm",children:j},D))}),n.edad_minima&&e.jsx("p",{className:"text-sm font-medium mb-3",children:n.edad_minima})]}),n.progress!==void 0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${n.type==="error"?"bg-red-600":"bg-yellow-600"}`,style:{width:`${n.progress}%`}})}),e.jsxs("p",{className:"text-xs mt-1",children:["Progreso: ",Math.round(n.progress),"%"]})]}),n.actions&&n.actions.includes("upload_documents")&&e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-white rounded-lg font-medium hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(or,{className:"h-5 w-5"}),"Subir Documentos"]})]})]})}),n&&n.type==="success"&&e.jsx("div",{className:`rounded-lg border-2 p-6 ${_(n.type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:N(n.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:n.title}),e.jsx("p",{className:"mb-3",children:n.message}),n.actions&&n.actions.includes("view_programs")&&e.jsxs("button",{onClick:()=>r("/estudiante/inscripciones"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-sm",children:["Ver Programas Disponibles",e.jsx(wa,{className:"h-5 w-5"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map((j,D)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all cursor-pointer border border-gray-100",onClick:()=>r(j.link),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${j.color} p-3 rounded-lg text-white shadow-sm`,children:j.icon}),e.jsx(wa,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:j.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d?"...":j.value})]},D))}),n&&n.type!=="success"&&E.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ss,{className:"h-6 w-6 text-green-600"}),"Documentos Requeridos"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Sube cada documento individualmente. Las imgenes se comprimirn automticamente."})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:[E.filter(j=>j.subido&&j.requerido).length," / ",E.filter(j=>j.requerido).length," requeridos"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(E.filter(j=>j.subido&&j.requerido).length/E.filter(j=>j.requerido).length*100)||0,"%)"]})]}),e.jsx("div",{className:"w-40 h-3 bg-gray-200 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 rounded-full transition-all duration-500 flex items-center justify-center",style:{width:`${Math.min(E.filter(j=>j.subido&&j.requerido).length/E.filter(j=>j.requerido).length*100,100)}%`},children:E.filter(j=>j.subido&&j.requerido).length>0&&e.jsxs("span",{className:"text-xs font-bold text-white",children:[Math.round(E.filter(j=>j.subido&&j.requerido).length/E.filter(j=>j.requerido).length*100),"%"]})})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:E.map(j=>e.jsx(Pk,{documento:j,onUploadSuccess:p},j.tipo_documento_id))}),E.filter(j=>j.requerido).length>0&&E.filter(j=>j.subido&&j.requerido).length===E.filter(j=>j.requerido).length&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("p",{className:"font-medium",children:"Todos los documentos requeridos han sido subidos! Tus documentos estn siendo revisados por el rea administrativa."})]}),e.jsx("p",{className:"text-sm text-green-700 mt-2",children:"Sers notificado cuando tus documentos sean validados. Mientras tanto, puedes subir el Ttulo de Bachiller si lo deseas (opcional)."})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ys,{className:"h-6 w-6 text-green-600"}),"Accesos Rpidos"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>r("/estudiante/materias"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Materias"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulta tus materias inscritas"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/notas"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Calificaciones"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revisa tus notas y promedios"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/documentos"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Documentos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona tus documentos"})]}),e.jsxs("button",{onClick:()=>r("/estudiante/pagos"),className:"w-full text-left block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Mis Pagos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulta y realiza pagos"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ts,{className:"h-6 w-6 text-blue-600"}),"Informacin"]}),e.jsxs("div",{className:"space-y-3 text-gray-700",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"CI:"})," ",(s==null?void 0:s.ci)||"No disponible"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Email:"})," ",(s==null?void 0:s.email)||"No disponible"]}),e.jsx("p",{className:"text-sm",children:"Desde este portal puedes consultar toda la informacin relacionada con tu proceso acadmico en ICAP."})]})]})]}),e.jsx(bm,{isOpen:g,onClose:()=>h(!1),tiposDocumento:y,onSuccess:p})]})},Tk=()=>{const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState(!0),[o,i]=c.useState(null);return c.useEffect(()=>{s&&(async()=>{try{n(!0);const d=await Re("/estudiante/inscripciones");if(console.log(" Respuesta de inscripciones:",d.data),d.data.success){let u=[];d.data.data?d.data.data.data&&Array.isArray(d.data.data.data)?u=d.data.data.data:Array.isArray(d.data.data)?u=d.data.data:d.data.data.inscripciones&&Array.isArray(d.data.data.inscripciones)&&(u=d.data.data.inscripciones):d.data.inscripciones&&Array.isArray(d.data.inscripciones)&&(u=d.data.inscripciones),Array.isArray(u)||(console.warn(" inscripcionesData no es un array:",u),u=[]),a(u)}else i("No se pudieron cargar las materias"),a([])}catch(d){console.error("Error cargando materias:",d),i("Error al cargar las materias"),a([])}finally{n(!1)}})()},[s]),t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ys,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Materias"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Consulta todas tus materias y grupos inscritos"})]})]}),Array.isArray(r)&&r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Total Materias"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:r.length})]}),e.jsx(ys,{className:"h-12 w-12 text-primary-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Aprobadas"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:r.filter(l=>l.estado==="aprobada"||l.estado==="aprobado").length})]}),e.jsx(Me,{className:"h-12 w-12 text-green-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm",children:"En Curso"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:r.filter(l=>l.estado==="pendiente"||l.estado==="en_curso"||!l.estado).length})]}),e.jsx(gx,{className:"h-12 w-12 text-yellow-200"})]})})]}),!Array.isArray(r)||r.length===0?e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ys,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes materias inscritas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Inscrbete en programas disponibles desde la seccin de Inscripciones"})]})}):e.jsx("div",{className:"space-y-6",children:Array.isArray(r)&&r.map((l,d)=>{var y,k,E,S,C,b,p,N,_,x,v;const u=((y=l.programa)==null?void 0:y.nombre)||l.nombre||"Programa sin nombre",g=((E=(k=l.grupo)==null?void 0:k.modulo)==null?void 0:E.nombre)||((S=l.grupo)==null?void 0:S.modulo)||((C=l.grupo)==null?void 0:C.nombre)||"Sin mdulo",h=l.estado||"pendiente";return e.jsx(ke,{className:"gradient hover:shadow-glow-lg transition-all duration-200 border-2 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-1",children:u}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g})]})]})]})}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold flex items-center gap-1.5 ${h==="aprobada"||h==="aprobado"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":h==="pendiente"||h==="en_curso"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":h==="rechazada"||h==="rechazado"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:h==="aprobada"||h==="aprobado"?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3.5 w-3.5"}),"Aprobada"]}):h==="pendiente"||h==="en_curso"?e.jsxs(e.Fragment,{children:[e.jsx(gx,{className:"h-3.5 w-3.5"}),"En Curso"]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"h-3.5 w-3.5"}),h]})})})]}),l.programa&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-800 dark:to-slate-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ts,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Informacin del Programa"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.programa.duracion_meses&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Qs,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duracin"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[l.programa.duracion_meses," ",l.programa.duracion_meses===1?"mes":"meses"]})]})]}),l.programa.costo&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Tr,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Costo del Programa"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(l.programa.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),l.descuento&&e.jsxs("div",{className:"mt-1 p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[e.jsx("span",{className:"font-semibold",children:"Descuento aplicado:"})," ",l.descuento.nombre," (",l.descuento.descuento,"%)"]}),l.costo_base&&l.costo_final&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Base: ",parseFloat(l.costo_base||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"}),"  Final: ",e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:parseFloat(l.costo_final||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]})]})]}),(l.programa.institucion||l.programa.rama_academica||l.programa.tipo_programa)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Mt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:l.programa.institucion?"Institucin":l.programa.rama_academica?"Rama Acadmica":"Tipo"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:((b=l.programa.institucion)==null?void 0:b.nombre)||l.programa.institucion||((p=l.programa.rama_academica)==null?void 0:p.nombre)||l.programa.rama_academica||((N=l.programa.tipo_programa)==null?void 0:N.nombre)||l.programa.tipo_programa||"N/A"})]})]})]})]}),l.estado_pagos&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tr,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Estado de Pagos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total a Pagar"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:parseFloat(l.estado_pagos.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagado"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:parseFloat(l.estado_pagos.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:parseFloat(l.estado_pagos.monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progreso de Pago"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[l.estado_pagos.cuotas_pagadas||0," / ",l.estado_pagos.total_cuotas||0," cuotas"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300",style:{width:`${l.estado_pagos.total_cuotas>0?(l.estado_pagos.cuotas_pagadas||0)/l.estado_pagos.total_cuotas*100:0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[l.estado_pagos.cuotas_pagadas||0," pagadas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[l.estado_pagos.cuotas_pendientes||0," pendientes"]})]})]})]}),l.grupo&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Rs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Informacin del Grupo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.grupo.docente&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(ir,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Docente Responsable"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:typeof l.grupo.docente=="string"?l.grupo.docente:`${((_=l.grupo.docente)==null?void 0:_.nombre)||""} ${((x=l.grupo.docente)==null?void 0:x.apellido)||""}`.trim()||"Sin asignar"})]})]}),(l.fecha_inscripcion||l.fecha)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Qs,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fecha de Inscripcin"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:new Date(l.fecha_inscripcion||l.fecha).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})})]})]}),l.grupo.fecha_ini&&l.grupo.fecha_fin&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg md:col-span-2",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Perodo del Grupo"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx("span",{children:new Date(l.grupo.fecha_ini).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:new Date(l.grupo.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})})]})]})]})]})]}),((v=l.grupo)==null?void 0:v.horarios)&&l.grupo.horarios.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Je,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Horarios y Aulas"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.grupo.horarios.map((j,D)=>e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 dark:bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ga,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:j.dias||"Sin das asignados"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Je,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[j.hora_ini||"N/A"," - ",j.hora_fin||"N/A"]})]}),j.aula&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-blue-200 dark:border-blue-800",children:[e.jsx(Js,{className:"h-4 w-4 text-primary-600 dark:text-primary-400"}),e.jsxs("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:["Aula: ",j.aula]})]})]})]})},D))})]})]})},d)})})]})},Ok=()=>{const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState(!0),[o,i]=c.useState(null);c.useEffect(()=>{s&&(async()=>{try{n(!0);const g=await Re("/estudiante/notas");if(console.log(" Respuesta de notas:",g.data),g.data.success){let h=[];g.data.data?g.data.data.notas&&Array.isArray(g.data.data.notas)?h=g.data.data.notas:Array.isArray(g.data.data)&&(h=g.data.data):g.data.notas&&Array.isArray(g.data.notas)&&(h=g.data.notas),Array.isArray(h)||(console.warn(" notasData no es un array:",h),h=[]),a(h)}else i("No se pudieron cargar las notas"),a([])}catch(g){console.error("Error cargando notas:",g),i("Error al cargar las notas"),a([])}finally{n(!1)}})()},[s]);const l=u=>u?u>=70?"text-green-600":u>=51?"text-blue-600":"text-red-600":"text-gray-500",d=u=>u===null?null:u?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-4 w-4"}),"Aprobado"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Reprobado"]});return t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(mt,{className:"h-8 w-8"}),"Mis Calificaciones"]}),e.jsx("p",{className:"text-green-100",children:"Consulta tus notas y promedios por materia"})]}),!Array.isArray(r)||r.length===0?e.jsx(ke,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes notas registradas"}),e.jsx("p",{className:"text-gray-600",children:"Las notas aparecern aqu una vez que los docentes las registren"})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((u,g)=>{var h;return e.jsx(ke,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:((h=u.programa)==null?void 0:h.nombre)||u.materia||"Materia"}),u.docente&&e.jsxs("p",{className:"text-gray-600 text-sm flex items-center gap-2",children:[e.jsx(ir,{className:"h-4 w-4"}),u.docente]})]}),e.jsxs("div",{className:"text-right",children:[u.nota!==null?e.jsx("div",{className:`text-4xl font-bold ${l(u.nota)}`,children:u.nota}):e.jsx("div",{className:"text-gray-400 text-sm",children:"Sin calificar"}),d(u.aprobado)]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[u.fecha_ini&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Qs,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Inicio:"})," ",new Date(u.fecha_ini).toLocaleDateString()]})]}),u.fecha_fin&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Qs,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Fin:"})," ",new Date(u.fecha_fin).toLocaleDateString()]})]}),u.estado&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ys,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Estado:"})," ",u.estado]})]})]})]})},g)})})]})},xp=({isOpen:s,onClose:r,documento:a})=>{const[t,n]=c.useState(!1),[o,i]=c.useState(!1);if(!a||!s)return null;let l=a.url_descarga||a.path;if(l&&!l.startsWith("http://")&&!l.startsWith("https://")){const k=um.apiUrl.replace("/api","");l.startsWith("/storage/")?l=`${k}${l}`:l.startsWith("/")?l=`${k}/storage${l}`:l=`${k}/storage/${l}`}const d=l&&/\.(jpg|jpeg|png|gif|webp)$/i.test(l),u=l&&/\.pdf$/i.test(l),g=a.nombre_documento||a.nombre_entidad||a.nombre||"Documento",h=()=>{if(l)if(d){const y=window.open("","_blank");y&&(y.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>${g}</title>
              <style>
                @media print {
                  @page {
                    margin: 0.5cm;
                    size: auto;
                  }
                  body {
                    margin: 0;
                    padding: 0;
                  }
                  img {
                    max-width: 100%;
                    height: auto;
                    page-break-inside: avoid;
                    display: block;
                    margin: 0 auto;
                  }
                }
                @media screen {
                  body {
                    margin: 20px;
                    text-align: center;
                    background: #f5f5f5;
                  }
                  img {
                    max-width: 90%;
                    height: auto;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                    border-radius: 8px;
                  }
                }
              </style>
            </head>
            <body>
              <img src="${l}" alt="${g}" onload="setTimeout(() => { window.print(); }, 500); window.onafterprint = function() { setTimeout(() => { window.close(); }, 100); }" />
            </body>
          </html>
        `),y.document.close())}else if(u){const y=window.open(l,"_blank");if(y){const k=setInterval(()=>{try{y.document&&y.document.readyState==="complete"&&(clearInterval(k),setTimeout(()=>{y.print()},1e3))}catch{clearInterval(k),setTimeout(()=>{y.print()},2e3)}},100);setTimeout(()=>{clearInterval(k);try{y.print()}catch(E){console.error("Error al imprimir PDF:",E)}},5e3)}}else{const y=window.open(l,"_blank");y&&(y.onload=()=>{setTimeout(()=>{y.print()},1e3)})}};return e.jsx(Fe,{isOpen:s,onClose:r,title:g,size:"xl",className:"max-w-7xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Versin:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.version||"1.0"})]}),a.fecha_subida&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Fecha de subida:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:new Date(a.fecha_subida).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:a.estado==="0"||a.estado===0?"Pendiente":a.estado==="1"||a.estado===1?"Aprobado":a.estado==="2"||a.estado===2?"Rechazado":"No subido"})]}),a.observaciones&&e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Observaciones:"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 mt-1",children:a.observaciones})]})]})}),e.jsx("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:l?d?e.jsx("div",{className:"relative bg-white dark:bg-gray-800",children:t?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ws,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar la imagen"}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>{n(!1)},children:"Reintentar"})]}):e.jsx("div",{className:"relative w-full flex items-center justify-center bg-white dark:bg-gray-800 p-4",style:{minHeight:"500px",maxHeight:"80vh"},children:e.jsx("img",{src:l,alt:g,className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-lg",onError:()=>n(!0),onLoad:()=>n(!1)})})}):u?e.jsx("div",{className:"relative w-full bg-white dark:bg-gray-800",style:{minHeight:"600px",maxHeight:"80vh"},children:o?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ws,{className:"h-12 w-12 text-red-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Error al cargar el PDF. Puede que el navegador no soporte la visualizacin."}),e.jsx(W,{variant:"outline",size:"sm",onClick:()=>window.open(l,"_blank"),children:"Abrir en nueva pestaa"})]}):e.jsx("iframe",{src:l,className:"w-full h-full rounded-lg",style:{minHeight:"600px",maxHeight:"80vh"},title:g,onError:()=>i(!0)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Tipo de archivo no soportado para vista previa"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(Nl,{className:"h-4 w-4"}),onClick:h,children:"Imprimir archivo"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"No hay archivo disponible para este documento"})]})}),l&&e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(W,{variant:"primary",size:"md",icon:e.jsx(Nl,{className:"h-5 w-5"}),onClick:h,children:"Imprimir"})})]})})},Ik=()=>{const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState(!0),[o,i]=c.useState(null),[l,d]=c.useState(!1),[u,g]=c.useState(null),[h,y]=c.useState(!1),[k,E]=c.useState(null);c.useEffect(()=>{s&&(async()=>{try{n(!0);const v=await Re("/estudiante/documentos");if(console.log(" Respuesta de documentos:",v.data),v.data.success){let j=[];v.data.data?Array.isArray(v.data.data)?j=v.data.data:v.data.data.documentos&&Array.isArray(v.data.data.documentos)&&(j=v.data.data.documentos):v.data.documentos&&Array.isArray(v.data.documentos)&&(j=v.data.documentos),Array.isArray(j)||(console.warn(" documentosData no es un array:",j),j=[]),a(j)}else i("No se pudieron cargar los documentos"),a([])}catch(v){console.error("Error cargando documentos:",v),i("Error al cargar los documentos"),a([])}finally{n(!1)}})()},[s]);const S=x=>{switch(x){case"1":case 1:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(Me,{className:"h-4 w-4"}),"Aprobado"]});case"2":case 2:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:[e.jsx(ls,{className:"h-4 w-4"}),"Rechazado"]});case"0":case 0:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:[e.jsx(Je,{className:"h-4 w-4"}),"Pendiente"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400",children:[e.jsx(ws,{className:"h-4 w-4"}),"No subido"]})}},C=async()=>{try{const x=await Re("/estudiante/documentos");x.data.success&&Array.isArray(x.data.data)&&(a(x.data.data),m.success("Documento subido exitosamente"))}catch(x){console.error("Error recargando documentos:",x)}d(!1),g(null)},b=x=>{g(x),d(!0)},p=x=>{E(x),y(!0)},N=x=>{const v=_(x.url_descarga);if(!v){m.error("No hay archivo disponible para imprimir");return}const j=/\.(jpg|jpeg|png|gif|webp)$/i.test(v),D=/\.pdf$/i.test(v),H=x.nombre_documento||x.nombre_entidad||"Documento";if(j){const A=window.open("","_blank");A&&(A.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>${H}</title>
              <style>
                @media print {
                  body { margin: 0; padding: 0; }
                  img { max-width: 100%; height: auto; page-break-inside: avoid; }
                }
                body { margin: 20px; text-align: center; }
                img { max-width: 100%; height: auto; }
              </style>
            </head>
            <body>
              <img src="${v}" alt="${H}" onload="setTimeout(() => { window.print(); }, 500);" />
            </body>
          </html>
        `),A.document.close())}else if(D){const A=window.open(v,"_blank");A&&(A.onload=()=>{setTimeout(()=>{A.print()},500)})}else{const A=window.open(v,"_blank");A&&(A.onload=()=>{setTimeout(()=>{A.print()},500)})}},_=x=>x?x.startsWith("http://")||x.startsWith("https://")?x:`https://icap.lat/api${x.startsWith("/")?"":"/"}${x}`:null;return t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):o?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:o})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(ss,{className:"h-8 w-8"}),"Mis Documentos"]}),e.jsx("p",{className:"text-green-100",children:"Gestiona y consulta tus documentos acadmicos"})]}),e.jsxs(W,{variant:"secondary",onClick:()=>d(!0),className:"bg-white text-green-700 hover:bg-green-50",children:[e.jsx(or,{className:"h-5 w-5 mr-2"}),"Subir Documento"]})]})}),!Array.isArray(r)||r.length===0?e.jsx(ke,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes documentos subidos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sube tus documentos acadmicos para que sean validados"}),e.jsxs(W,{variant:"primary",onClick:()=>d(!0),children:[e.jsx(or,{className:"h-5 w-5 mr-2"}),"Subir Primer Documento"]})]})}):e.jsx("div",{className:"grid gap-6",children:Array.isArray(r)&&r.map((x,v)=>{var A,P;const j=x.documento_id!==null&&x.documento_id!==void 0,D=((A=x.nombre_entidad)==null?void 0:A.toLowerCase().includes("ttulo"))||((P=x.nombre_entidad)==null?void 0:P.toLowerCase().includes("bachiller")),H=_(x.url_descarga);return e.jsx(ke,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:x.nombre_entidad||x.nombre||"Documento"}),D&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Opcional"})]}),x.version&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Versin: ",x.version]}),x.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Subido el ",new Date(x.fecha_subida).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),!j&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Este documento an no ha sido subido"})]}),e.jsx("div",{className:"ml-4",children:S(x.estado)})]}),x.observaciones&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ws,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observaciones:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.observaciones})]})]})}),e.jsx("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:j&&H?e.jsxs(e.Fragment,{children:[e.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p(x),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Ver"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:()=>N(x),children:[e.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Imprimir"]}),(x.estado==="2"||x.estado==="0"||x.estado===2||x.estado===0)&&e.jsxs(W,{variant:"primary",size:"sm",onClick:()=>b(x),children:[e.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Re-subir"]})]}):e.jsxs(W,{variant:"primary",size:"sm",onClick:()=>b(x),children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),"Subir Documento"]})})]})},x.tipo_documento_id||v)})}),e.jsx(bm,{isOpen:l,onClose:()=>{d(!1),g(null)},tiposDocumento:r.map(x=>{var v,j;return{tipo_documento_id:x.tipo_documento_id,nombre:x.nombre_entidad||x.nombre,nombre_entidad:x.nombre_entidad||x.nombre,requerido:!((v=x.nombre_entidad)!=null&&v.toLowerCase().includes("ttulo")||(j=x.nombre_entidad)!=null&&j.toLowerCase().includes("bachiller"))}}),tipoDocumentoSeleccionado:u==null?void 0:u.tipo_documento_id,onSuccess:C}),e.jsx(xp,{isOpen:h,onClose:()=>{y(!1),E(null)},documento:k})]})},Fk=()=>{const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState({}),[i,l]=c.useState(!1),[d,u]=c.useState(null);c.useEffect(()=>{g()},[]);const g=async()=>{try{t(!0);const C=await Lx.getMisDocumentos();C.success?r(C.data||[]):(m.error(C.message||"Error al cargar documentos"),r([]))}catch{m.error("Error de conexin"),r([])}finally{t(!1)}},h=async(C,b)=>{var _,x,v,j,D,H,A,P,R,G,T;const p=(_=b.target.files)==null?void 0:_[0];if(!p){console.log("No se seleccion ningn archivo");return}if(console.log("Archivo seleccionado:",{nombre:p.name,tipo:p.type,tamao:p.size,tipoDocumentoId:C}),!["application/pdf","image/jpeg","image/jpg","image/png"].includes(p.type)){m.error("Solo se permiten archivos PDF, JPG, JPEG o PNG"),b.target.value="";return}if(p.size>10*1024*1024){m.error("El archivo no debe exceder 10MB"),b.target.value="";return}try{o(L=>({...L,[C]:!0})),console.log("Iniciando subida de documento...",{tipoDocumentoId:C,fileName:p.name});const $=await Lx.subirDocumento(C,p);console.log("Respuesta del servicio:",$),$.success?(m.success($.message||"Documento subido exitosamente"),await g()):(m.error($.message||"Error al subir documento"),$.errors&&Object.keys($.errors).forEach(L=>{const Y=Array.isArray($.errors[L])?$.errors[L].join(", "):$.errors[L];m.error(`${L}: ${Y}`)}))}catch($){console.error("Error al subir documento:",$);const L=((v=(x=$.response)==null?void 0:x.data)==null?void 0:v.message)||((A=(H=(D=(j=$.response)==null?void 0:j.data)==null?void 0:D.errors)==null?void 0:H.archivo)==null?void 0:A[0])||((T=(G=(R=(P=$.response)==null?void 0:P.data)==null?void 0:R.errors)==null?void 0:G.tipo_documento_id)==null?void 0:T[0])||"Error al subir documento";m.error(L)}finally{o($=>({...$,[C]:!1})),b.target&&(b.target.value="")}},y=C=>{u(C),l(!0)},k=C=>{const b=E(C.url_descarga);if(!b){m.error("No hay archivo disponible para imprimir");return}const p=/\.(jpg|jpeg|png|gif|webp)$/i.test(b),N=/\.pdf$/i.test(b),_=C.nombre_documento||C.nombre_entidad||"Documento";if(p){const x=window.open("","_blank");x&&(x.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>${_}</title>
              <style>
                @media print {
                  @page {
                    margin: 0.5cm;
                    size: auto;
                  }
                  body {
                    margin: 0;
                    padding: 0;
                  }
                  img {
                    max-width: 100%;
                    height: auto;
                    page-break-inside: avoid;
                    display: block;
                    margin: 0 auto;
                  }
                }
                @media screen {
                  body {
                    margin: 20px;
                    text-align: center;
                    background: #f5f5f5;
                  }
                  img {
                    max-width: 90%;
                    height: auto;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                    border-radius: 8px;
                  }
                }
              </style>
            </head>
            <body>
              <img src="${b}" alt="${_}" onload="setTimeout(() => { window.print(); }, 500); window.onafterprint = function() { setTimeout(() => { window.close(); }, 100); }" />
            </body>
          </html>
        `),x.document.close())}else if(N){const x=window.open(b,"_blank");if(x){const v=setInterval(()=>{try{x.document&&x.document.readyState==="complete"&&(clearInterval(v),setTimeout(()=>{x.print()},1e3))}catch{clearInterval(v),setTimeout(()=>{x.print()},2e3)}},100);setTimeout(()=>{clearInterval(v);try{x.print()}catch(j){console.error("Error al imprimir PDF:",j)}},5e3)}}else{const x=window.open(b,"_blank");x&&(x.onload=()=>{setTimeout(()=>{x.print()},1e3)})}},E=C=>C?C.startsWith("http://")||C.startsWith("https://")?C:`https://icap.lat/api${C.startsWith("/")?"":"/"}${C}`:null,S=C=>{const b={0:{label:"Pendiente de Revisin",color:"bg-yellow-100 text-yellow-800",icon:Je},1:{label:"Aprobado",color:"bg-green-100 text-green-800",icon:Me},2:{label:"Rechazado",color:"bg-red-100 text-red-800",icon:ls},null:{label:"No Subido",color:"bg-gray-100 text-gray-800",icon:ss}},p=b[C]||b[null],N=p.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${p.color}`,children:[e.jsx(N,{className:"h-4 w-4"}),p.label]})};return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ss,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Documentos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sube y gestiona tus documentos acadmicos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Documentos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ss,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Aprobados"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.filter(C=>C.estado==="1").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.filter(C=>C.estado==="0"||C.estado===null).length})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Je,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-6",children:"Documentos Requeridos"}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ss,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No hay documentos requeridos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para ms informacin"})]}):s.map((C,b)=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:C.nombre_entidad}),S(C.estado)]}),C.version&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Versin: ",C.version]}),C.observaciones&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observaciones:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.observaciones})]}),C.fecha_subida&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Subido: ",new Date(C.fecha_subida).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3 ml-4",children:[C.url_descarga&&C.documento_id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(Qe,{className:"h-4 w-4"}),onClick:()=>y(C),children:"Ver"}),e.jsx(W,{variant:"outline",size:"sm",icon:e.jsx(Nl,{className:"h-4 w-4"}),onClick:()=>k(C),children:"Imprimir"})]}):null,e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:`file-${C.tipo_documento_id}`,accept:".pdf,.jpg,.jpeg,.png",onChange:p=>h(C.tipo_documento_id,p),className:"hidden",disabled:n[C.tipo_documento_id]}),e.jsx(W,{variant:"primary",size:"sm",disabled:n[C.tipo_documento_id],onClick:p=>{p.preventDefault(),p.stopPropagation();const N=document.getElementById(`file-${C.tipo_documento_id}`);N&&!n[C.tipo_documento_id]?(console.log("Haciendo click en input file:",`file-${C.tipo_documento_id}`),N.click()):console.warn("Input no encontrado o est deshabilitado:",{input:!!N,uploading:n[C.tipo_documento_id],tipoDocumentoId:C.tipo_documento_id})},className:"cursor-pointer",type:"button",children:n[C.tipo_documento_id]?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2 inline-block",children:""}),"Subiendo..."]}):C.documento_id?e.jsxs(e.Fragment,{children:[e.jsx(Tn,{className:"h-4 w-4 mr-2 inline-block"}),"Reemplazar"]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"h-4 w-4 mr-2 inline-block"}),"Subir Documento"]})})]})]})]})},b))})]}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Informacin Importante"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:" Los documentos deben estar en formato PDF, JPG, JPEG o PNG"}),e.jsx("li",{children:" El tamao mximo por archivo es de 10MB"}),e.jsx("li",{children:" Una vez subido, el documento ser revisado por el administrador"}),e.jsx("li",{children:" Si un documento es rechazado, podrs subir una nueva versin"}),e.jsx("li",{children:" Solo los estudiantes con todos los documentos aprobados podrn inscribirse"})]})]}),e.jsx(xp,{isOpen:i,onClose:()=>{l(!1),u(null)},documento:d})]})},hp=({isOpen:s,onClose:r,cuotaId:a,cuotaInfo:t,onPaymentSuccess:n})=>{const[o,i]=c.useState(null),[l,d]=c.useState(!1),[u,g]=c.useState(!1),[h,y]=c.useState(!1),[k,E]=c.useState(!1),[S,C]=c.useState(!1),[b,p]=c.useState(null),[N,_]=c.useState(!1),[x,v]=c.useState(null),[j,D]=c.useState(null),H=c.useRef(null),A=c.useRef(null);c.useEffect(()=>(s&&a?R():P(),()=>{P()}),[s,a]);const P=()=>{H.current&&(clearInterval(H.current),H.current=null),A.current&&(clearInterval(A.current),A.current=null),i(null),C(!1),p(null)},R=async()=>{try{d(!0);const le=await St.getInfoQR(a);if(le.success&&le.data.pago_id)if(le.data.qr_base64){const Se={id:le.data.pago_id,monto:le.data.monto,nro_pago:le.data.nro_pago,qr_expires_at:le.data.qr_expires_at,estado_pagofacil:"pendiente",verificado:!1,qr_image:`data:image/png;base64,${le.data.qr_base64}`};i(Se),le.data.qr_expires_at&&$(le.data.qr_expires_at),Y(le.data.pago_id)}else await G(le.data.pago_id)}catch(le){console.error("Error checking existing QR:",le)}finally{d(!1)}},G=async le=>{try{const Se=await St.consultarEstadoQR(le);if(Se.success){const pe=Se.data.pago;i(pe),pe.qr_expires_at&&$(pe.qr_expires_at),pe.estado_pagofacil==="pendiente"&&Y(le)}}catch(Se){console.error("Error loading pago info:",Se)}},T=async()=>{var le,Se,pe,K;try{g(!0);const ae=(t==null?void 0:t.saldo_pendiente)||(t==null?void 0:t.monto)||0,ce=await St.generarPagoQR(a,ae);if(ce.success){const J={...ce.data.pago,qr_image:ce.data.qr_base64?`data:image/png;base64,${ce.data.qr_base64}`:ce.data.qr_image||ce.data.pago.qr_image};i(J),m.success("QR generado exitosamente. Escanea el cdigo para pagar."),ce.data.pago.qr_expires_at&&$(ce.data.pago.qr_expires_at),ce.data.pago.id&&Y(ce.data.pago.id)}else{const J=ce.message||ce.error||"Error al generar QR";m.error(J),fe(J,a)}}catch(ae){console.error("Error generating QR:",ae);let ce="Error al generar QR. Por favor intenta nuevamente.";(Se=(le=ae.response)==null?void 0:le.data)!=null&&Se.error?ce=ae.response.data.error:(K=(pe=ae.response)==null?void 0:pe.data)!=null&&K.message?ce=ae.response.data.message:ae.message&&(ce=ae.message),m.error(ce),fe(ce,a)}finally{g(!1)}},$=le=>{A.current&&clearInterval(A.current);const Se=()=>{const pe=new Date,ae=new Date(le)-pe;if(ae<=0){v(null),D(null),A.current&&clearInterval(A.current);return}const ce=Math.floor(ae/(1e3*60*60)),J=Math.floor(ae%(1e3*60*60)/(1e3*60)),Z=Math.floor(ae%(1e3*60)/1e3);D(ce),v(`${ce.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`)};Se(),A.current=setInterval(Se,1e3)},L=()=>{if(!(o!=null&&o.qr_expires_at))return null;const le=new Date,pe=new Date(o.qr_expires_at)-le;return pe<=0?null:Math.floor(pe/(1e3*60))},Y=le=>{H.current&&clearInterval(H.current),setTimeout(()=>{M(le),H.current=setInterval(async()=>{await M(le)},3e4)},12e4)},M=async le=>{try{y(!0);const Se=await St.consultarEstadoQR(le);if(Se.success&&Se.data.pago){const pe=Se.data.pago;i(pe),pe.estado_pagofacil==="completado"&&pe.verificado&&(clearInterval(H.current),H.current=null,m.success("Pago confirmado exitosamente!"),C(!0),n&&n(pe))}}catch(Se){console.error("Error checking payment status:",Se)}finally{y(!1)}},ne=async()=>{if(!b){m.error("Por favor selecciona un archivo de comprobante");return}try{E(!0);const le=await St.subirComprobanteQR(o.id,b);le.success?(m.success("Comprobante subido exitosamente"),C(!1),p(null),r()):m.error(le.message||"Error al subir comprobante")}catch(le){console.error("Error uploading comprobante:",le),m.error("Error al subir comprobante. Por favor intenta nuevamente.")}finally{E(!1)}},oe=async()=>{if(o!=null&&o.id)try{y(!0);const le=await St.consultarEstadoQR(o.id);if(le.success){const Se=le.data.pago;i(Se),Se.estado_pagofacil==="completado"&&Se.verificado?(m.success("Pago confirmado exitosamente!"),C(!0),n&&n(Se)):m.info("El pago an est pendiente")}}catch(le){console.error("Error checking status:",le),m.error("Error al consultar estado del pago")}finally{y(!1)}},fe=async(le,Se)=>{try{console.error("Error de pago que requiere atencin del admin:",{error:le,cuotaId:Se,timestamp:new Date().toISOString()}),m.error("Se ha notificado al administrador sobre este error. Por favor contacta con soporte si el problema persiste.")}catch(pe){console.error("Error al notificar admin:",pe)}},Q=le=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(le||0),me=le=>le?new Date(le).toLocaleString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ie=(()=>{if(!(t!=null&&t.fecha_inscripcion)&&!(t!=null&&t.fecha_ini))return null;const le=t.fecha_inscripcion?new Date(t.fecha_inscripcion):new Date(t.fecha_ini),ae=14-(new Date-le)/(1e3*60*60);return ae>0?ae:0})();return e.jsxs(Fe,{isOpen:s,onClose:r,title:"Pago por QR - PagoFcil",size:"lg",children:[ie!==null&&ie>0&&ie<=14&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(No,{className:"h-6 w-6 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-red-900 dark:text-red-100 mb-1",children:" Importante: Tiempo Restante"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Tienes ",e.jsxs("span",{className:"font-bold",children:[Math.floor(ie)," horas"]})," restantes para realizar el pago. Si no pagas dentro de este tiempo, tu inscripcin ser cancelada automticamente."]})]})]})}),l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(qa,{className:"h-8 w-8 animate-spin text-primary-600"})}):o?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`p-4 rounded-lg border-2 ${o.estado_pagofacil==="completado"&&o.verificado?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":o.estado_pagofacil==="pendiente"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-700":"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700"}`,children:e.jsx("div",{className:"flex items-center gap-3",children:o.estado_pagofacil==="completado"&&o.verificado?e.jsxs(e.Fragment,{children:[e.jsx(Jw,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-900 dark:text-green-100",children:"Pago Confirmado"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Tu pago ha sido verificado exitosamente"})]})]}):o.estado_pagofacil==="pendiente"?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-yellow-900 dark:text-yellow-100",children:"Pago Pendiente"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["Esperando confirmacin del pago...",h&&e.jsxs("span",{className:"ml-2 inline-flex items-center gap-1",children:[e.jsx(qa,{className:"h-3 w-3 animate-spin"}),"Verificando"]})]}),e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:" El sistema verificar automticamente despus de 2 minutos desde la generacin del QR"})]}),e.jsx(W,{variant:"outline",size:"sm",onClick:oe,disabled:h,icon:h?e.jsx(qa,{className:"h-4 w-4 animate-spin"}):e.jsx(Tn,{className:"h-4 w-4"}),children:"Verificar Ahora"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-6 w-6 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-red-900 dark:text-red-100",children:"Error en el Pago"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Hubo un problema con el pago. Por favor contacta al administrador."})]})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monto:"}),e.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:Q(o.monto||0)})]}),o.nro_pago&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Nmero de Pago:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-mono text-sm",children:o.nro_pago})]}),o.qr_expires_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expira:"}),e.jsxs("span",{className:"text-gray-900 dark:text-gray-100 text-sm",children:[me(o.qr_expires_at),x&&e.jsxs("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400 font-semibold",children:["(",x,")"]})]})]})]}),o.qr_image&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200 dark:border-gray-700 shadow-lg",children:e.jsx("img",{src:o.qr_image,alt:"Cdigo QR de Pago",className:"w-64 h-64 mx-auto",onError:le=>{console.error("Error loading QR image:",o.qr_image),le.target.style.display="none",m.error("Error al cargar la imagen del QR. Por favor intenta generar un nuevo QR.")}})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center max-w-sm",children:"Escanea este cdigo QR con tu aplicacin bancaria para realizar el pago"}),(()=>{const le=L();return le!==null&&le<=2?e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-semibold",children:[" El QR expirar en ",le," minuto",le!==1?"s":""]}):null})()]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Instrucciones:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("li",{children:"Abre tu aplicacin bancaria"}),e.jsx("li",{children:"Selecciona la opcin de pago por QR"}),e.jsx("li",{children:"Escanea el cdigo QR mostrado arriba"}),e.jsx("li",{children:"Verifica el monto y confirma el pago"}),e.jsx("li",{children:"El sistema verificar automticamente tu pago"})]})]}),S&&o.estado_pagofacil==="completado"&&e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900 dark:text-green-100 mb-1",children:"Pago Confirmado"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Tu pago ha sido verificado. Puedes subir el comprobante como respaldo."})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subir Comprobante (Opcional)"}),e.jsx(we,{type:"file",accept:"image/*,application/pdf",onChange:le=>p(le.target.files[0])}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formatos aceptados: PDF, JPG, PNG (mx. 5MB)"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(W,{variant:"outline",onClick:()=>{C(!1),p(null)},children:"Omitir"}),e.jsx(W,{variant:"primary",onClick:ne,disabled:!b||k,icon:k?e.jsx(qa,{className:"h-4 w-4 animate-spin"}):e.jsx(or,{className:"h-4 w-4"}),children:k?"Subiendo...":"Subir Comprobante"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx(W,{variant:"outline",onClick:r,children:"Cerrar"}),o.estado_pagofacil==="pendiente"&&e.jsx(W,{variant:"primary",onClick:oe,disabled:h,icon:h?e.jsx(qa,{className:"h-4 w-4 animate-spin"}):e.jsx(Tn,{className:"h-4 w-4"}),children:h?"Verificando...":"Verificar Pago"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 dark:bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(xa,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Generar Cdigo QR de Pago"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Se generar un cdigo QR nico para esta cuota"})]})]}),t&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monto a Pagar:"}),e.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:Q(t.saldo_pendiente||t.monto||0)})]}),t.concepto&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Concepto:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.concepto})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ws,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Instrucciones:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsx("li",{children:'Haz clic en "Generar QR" para crear el cdigo de pago'}),e.jsx("li",{children:"Escanea el QR con tu aplicacin bancaria"}),e.jsx("li",{children:"Confirma el pago en tu banco"}),e.jsx("li",{children:"El sistema verificar automticamente tu pago"}),e.jsx("li",{children:"Opcionalmente, puedes subir el comprobante despus"})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(W,{variant:"outline",onClick:r,children:"Cancelar"}),e.jsx(W,{variant:"primary",onClick:T,disabled:u,icon:u?e.jsx(qa,{className:"h-4 w-4 animate-spin"}):e.jsx(xa,{className:"h-4 w-4"}),children:u?"Generando QR...":"Generar QR"})]})]})]})},Mk=()=>{const{user:s}=Ts(),[r,a]=c.useState([]),[t,n]=c.useState([]),[o,i]=c.useState(!0),[l,d]=c.useState(null),[u,g]=c.useState(!1),[h,y]=c.useState(null),[k,E]=c.useState(null),[S,C]=c.useState({}),[b,p]=c.useState({total_cuotas:0,cuotas_pagadas:0,cuotas_pendientes:0,cuotas_vencidas:0});c.useEffect(()=>{s&&(async()=>{try{i(!0);const P=await Re("/estudiante/pagos");if(console.log(" Respuesta de pagos:",P.data),P.data.success){const R=P.data.data||{},G=Array.isArray(R.planes)?R.planes:[];a(G);const T=Array.isArray(R.cuotas)?R.cuotas:[];n(T),R.total_cuotas!==void 0&&p({total_cuotas:R.total_cuotas||0,cuotas_pagadas:R.cuotas_pagadas||0,cuotas_pendientes:R.cuotas_pendientes||0,cuotas_vencidas:R.cuotas_vencidas||0})}else d("No se pudieron cargar los pagos"),a([]),n([])}catch(P){console.error("Error cargando pagos:",P),d("Error al cargar los pagos"),a([]),n([])}finally{i(!1)}})()},[s]);const N=A=>{const P=(A==null?void 0:A.toLowerCase())||"";return P==="pagada"||P==="pagado"||P==="verificado"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:[e.jsx(Me,{className:"h-3.5 w-3.5"}),"Pagada"]}):P==="vencida"||P==="vencido"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:[e.jsx(ls,{className:"h-3.5 w-3.5"}),"Vencida"]}):P==="pendiente"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:[e.jsx(Je,{className:"h-3.5 w-3.5"}),"Pendiente"]}):e.jsx("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:A||"Sin estado"})},_=A=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(A||0);if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})});if(l)return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:l})});const x=A=>{C(P=>({...P,[A]:!P[A]}))},v=t.filter(A=>A.estado==="PENDIENTE"||A.esta_pendiente),j=v.reduce((A,P)=>A+(parseFloat(P.saldo_pendiente||P.monto)||0),0),D=r.reduce((A,P)=>A+(parseFloat(P.monto_pagado||0)||0),0),H=r.reduce((A,P)=>A+(parseFloat(P.monto_total||0)||0),0);return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ea,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Pagos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Consulta y gestiona tus pagos y cuotas acadmicas"})]})]}),r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ke,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Total a Pagar"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:_(H)})]}),e.jsx(Tr,{className:"h-10 w-10 text-blue-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Pagado"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:_(D)})]}),e.jsx(Me,{className:"h-10 w-10 text-green-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm",children:"Pendiente"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:_(j)})]}),e.jsx(Je,{className:"h-10 w-10 text-yellow-200"})]})}),e.jsx(ke,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Cuotas Pendientes"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:b.cuotas_pendientes||v.length})]}),e.jsx(ss,{className:"h-10 w-10 text-purple-200"})]})})]}),v.length>0&&(()=>{const P=(()=>{if(r.length===0)return null;let G=null;if(r.forEach(M=>{if(M.fecha_inscripcion){const ne=new Date(M.fecha_inscripcion);(!G||ne>G)&&(G=ne)}}),!G)return null;const Y=14-(new Date-G)/(1e3*60*60);return Y>0?Y:0})();return P!==null&&P<=14&&P>0?e.jsx(ke,{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border-2 border-red-300 dark:border-red-700 animate-pulse",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-6 w-6 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0 animate-bounce"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:" Alerta Crtica: Pago Pendiente"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Tienes ",e.jsxs("span",{className:"font-bold text-red-700 dark:text-red-300",children:[v.length," ",v.length===1?"cuota pendiente":"cuotas pendientes"]})," por un total de ",e.jsx("span",{className:"font-bold text-red-700 dark:text-red-300",children:_(j)})]}),e.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg p-3 mt-3",children:[e.jsxs("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-1",children:[" Tiempo Restante: ",Math.floor(P)," ",Math.floor(P)===1?"hora":"horas"," ",Math.floor(P%1*60)," minutos"]}),e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Si no realizas el pago dentro de ",e.jsx("span",{className:"font-bold",children:"14 horas"})," desde la inscripcin, tu inscripcin ser ",e.jsx("span",{className:"font-bold",children:"cancelada automticamente"}),". Realiza el pago ahora para mantener tu lugar en el programa."]})]})]})]})})}):v.length>0?e.jsx(ke,{className:"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border-2 border-yellow-300 dark:border-yellow-700",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:["Tienes ",v.length," ",v.length===1?"cuota pendiente":"cuotas pendientes"]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Total pendiente: ",e.jsx("span",{className:"font-bold text-yellow-700 dark:text-yellow-300",children:_(j)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Realiza tus pagos a tiempo para mantener tu inscripcin activa"})]})]})})}):null})(),r.length===0?e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ea,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes pagos registrados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Los pagos aparecern aqu cuando te inscribas en un programa"})]})}):e.jsx("div",{className:"space-y-6",children:r.map(A=>{var T;const P=S[A.plan_id],R=A.cuotas||[],G=R.filter($=>$.estado==="PENDIENTE"||$.esta_pendiente);return e.jsx(ke,{className:"gradient hover:shadow-glow-lg transition-all duration-200 border-2 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-1",children:A.programa?typeof A.programa=="string"?A.programa:typeof A.programa=="object"&&A.programa.nombre?A.programa.nombre:"Programa sin nombre":"Programa sin nombre"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Plan de Pago - ",A.total_cuotas||0," ",A.total_cuotas===1?"cuota":"cuotas"]})]})]}),A.descuento&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(On,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsxs("p",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:["Descuento Aplicado: ",A.descuento.nombre," (",A.descuento.descuento,"%)"]})]}),A.costo_base&&A.costo_final&&A.costo_base!==A.costo_final&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Costo Base: ",_(A.costo_base)]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["Costo Final: ",_(A.costo_final)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Monto Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:_(A.monto_total||0)}),A.costo_base&&A.costo_base!==A.monto_total&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-through",children:_(A.costo_base)})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pagado"}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:_(A.monto_pagado||0)})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Pendiente"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:_(A.monto_pendiente||0)})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Progreso"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[((T=A.porcentaje_pagado)==null?void 0:T.toFixed(0))||0,"%"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300",style:{width:`${A.porcentaje_pagado||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[A.cuotas_pagadas||0," / ",A.total_cuotas||0," cuotas pagadas"]}),A.esta_completo&&e.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-semibold",children:[e.jsx(Me,{className:"h-4 w-4"}),"Completado"]})]})]})]}),e.jsx("button",{onClick:()=>x(A.plan_id),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:P?e.jsx(eu,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):e.jsx(Jf,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),P&&R.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Cuotas del Plan"}),e.jsx("div",{className:"space-y-3",children:R.map(($,L)=>{const Y=$.estado==="PENDIENTE"||$.esta_pendiente,M=$.estado==="PAGADA"||$.esta_pagada,ne=$.estado==="VENCIDA"||$.esta_vencida;return e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${M?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":ne?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${M?"bg-green-500":ne?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(ss,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Cuota ",L+1," de ",A.total_cuotas]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:$.fecha_ini&&$.fecha_fin&&e.jsxs(e.Fragment,{children:[new Date($.fecha_ini).toLocaleDateString("es-ES",{day:"numeric",month:"short"})," - ",new Date($.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Monto: "}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:_($.monto||0)})]}),!M&&$.saldo_pendiente!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Pendiente: "}),e.jsx("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:_($.saldo_pendiente||$.monto||0)})]}),M&&$.monto_pagado!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Pagado: "}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:_($.monto_pagado||0)})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[N($.estado),Y&&e.jsx(W,{variant:"primary",size:"sm",onClick:()=>{$.id?(y($.id),E({saldo_pendiente:$.saldo_pendiente||$.monto,monto:$.monto,concepto:`Cuota ${L+1} - ${A.programa?typeof A.programa=="string"?A.programa:typeof A.programa=="object"&&A.programa.nombre?A.programa.nombre:"Programa":"Programa"}`,fecha_ini:$.fecha_ini,fecha_inscripcion:A.fecha_inscripcion||$.fecha_inscripcion}),g(!0)):m.error("No se pudo obtener la informacin de la cuota")},icon:e.jsx(xa,{className:"h-4 w-4"}),children:"Pagar con QR"})]})]}),$.pagos&&$.pagos.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"Pagos Realizados:"}),e.jsx("div",{className:"space-y-1",children:$.pagos.map((oe,fe)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white dark:bg-gray-800 rounded p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-3.5 w-3.5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:oe.fecha&&new Date(oe.fecha).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})})]}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:_(oe.monto||0)})]},oe.id||fe))})]})]},$.id||L)})})]}),G.length>0&&!P&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[G.length," ",G.length===1?"cuota pendiente":"cuotas pendientes"]}),e.jsx("p",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:_(G.reduce(($,L)=>$+(parseFloat(L.saldo_pendiente||L.monto)||0),0))})]}),e.jsx(W,{variant:"primary",onClick:()=>{if(G.length>0&&G[0].id){const $=G[0];y($.id),E({saldo_pendiente:$.saldo_pendiente||$.monto,monto:$.monto,concepto:`Cuota - ${A.programa?typeof A.programa=="string"?A.programa:typeof A.programa=="object"&&A.programa.nombre?A.programa.nombre:"Programa":"Programa"}`,fecha_ini:$.fecha_ini,fecha_inscripcion:A.fecha_inscripcion||$.fecha_inscripcion}),g(!0)}},icon:e.jsx(xa,{className:"h-4 w-4"}),children:"Pagar Cuota Pendiente"})]})})]})},A.plan_id)})}),e.jsx(hp,{isOpen:u,onClose:()=>{g(!1),y(null),E(null)},cuotaId:h,cuotaInfo:k,onPaymentSuccess:()=>{(async()=>{try{i(!0);const P=await Re("/estudiante/pagos");if(P.data.success){const R=P.data.data||{};a(Array.isArray(R.planes)?R.planes:[]),n(Array.isArray(R.cuotas)?R.cuotas:[]),R.total_cuotas!==void 0&&p({total_cuotas:R.total_cuotas||0,cuotas_pagadas:R.cuotas_pagadas||0,cuotas_pendientes:R.cuotas_pendientes||0,cuotas_vencidas:R.cuotas_vencidas||0})}}catch(P){console.error("Error recargando pagos:",P)}finally{i(!1)}})()}})]})},Lk=()=>{var _;const[s,r]=c.useState([]),[a,t]=c.useState([]),[n,o]=c.useState(!0),[i,l]=c.useState(!1),[d,u]=c.useState(!1),[g,h]=c.useState(null),[y,k]=c.useState(null),[E,S]=c.useState({total_cuotas:0,cuotas_pagadas:0,cuotas_pendientes:0,cuotas_vencidas:0,planes_completos:0,planes_pendientes:0});c.useEffect(()=>{C()},[]);const C=async()=>{try{o(!0);const x=await St.getMisCuotas();x.success?(r(x.data.cuotas||[]),t(x.data.planes||[]),S({total_cuotas:x.data.total_cuotas||0,cuotas_pagadas:x.data.cuotas_pagadas||0,cuotas_pendientes:x.data.cuotas_pendientes||0,cuotas_vencidas:x.data.cuotas_vencidas||0,planes_completos:x.data.planes_completos||0,planes_pendientes:x.data.planes_pendientes||0})):(m.error(x.message||"Error al cargar cuotas"),r([]))}catch{m.error("Error de conexin"),r([])}finally{o(!1)}},b=x=>{h(x),l(!0)},p=async x=>{l(!1),h(null),k(x),u(!0),await C(),m.success("Pago confirmado exitosamente. Se ha notificado al administrador.")},N=x=>x.esta_pagada?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-4 w-4"}),"Pagada"]}):x.esta_vencida?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[e.jsx(ls,{className:"h-4 w-4"}),"Vencida"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Je,{className:"h-4 w-4"}),"Pendiente"]});return n&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ea,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Mis Pagos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona tus cuotas y pagos acadmicos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-6 gap-6",children:[e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Cuotas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:E.total_cuotas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ea,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pagadas"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:E.cuotas_pagadas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:E.cuotas_pendientes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Je,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Vencidas"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:E.cuotas_vencidas})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(ls,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Planes Completos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:E.planes_completos})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"h-6 w-6 text-white"})})]})}),e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Planes Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:E.planes_pendientes})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(Je,{className:"h-6 w-6 text-white"})})]})})]}),a.length>0&&e.jsx("div",{className:"space-y-6",children:a.map((x,v)=>{var j,D;return e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold gradient-text",children:typeof x.programa=="string"?x.programa:((j=x.programa)==null?void 0:j.nombre)||"Programa sin nombre"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Plan de Pago #",x.plan_id]})]}),x.esta_completo?e.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-4 w-4"}),"Plan Completo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Je,{className:"h-4 w-4"}),"En Proceso"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Total"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(x.monto_total||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto Pagado"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:parseFloat(x.monto_pagado||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:parseFloat(x.monto_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progreso"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(x.porcentaje_pagado||0,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((D=x.porcentaje_pagado)==null?void 0:D.toFixed(1))||0,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Cuotas (",x.cuotas_pagadas,"/",x.total_cuotas," pagadas)"]}),x.cuotas&&x.cuotas.map((H,A)=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h5",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Cuota ",A+1]}),N(H)]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monto"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(H.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vencimiento"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:new Date(H.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Saldo"}),e.jsx("p",{className:"font-semibold text-yellow-600",children:parseFloat(H.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),H.pagos&&H.pagos.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos Registrados:"}),e.jsx("div",{className:"space-y-1",children:H.pagos.map((P,R)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{className:"font-medium",children:parseFloat(P.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"text-gray-500",children:[new Date(P.fecha).toLocaleDateString()," ",P.token&&`- ${P.token}`]})]},R))})]})]}),!H.esta_pagada&&e.jsx("div",{className:"ml-4",children:e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(xa,{className:"h-4 w-4"}),onClick:()=>b(H),children:"Pagar con QR"})})]})},A))]})]},v)})}),e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-6",children:"Todas mis Cuotas"}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ea,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tienes cuotas registradas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contacta con el administrador para ms informacin"})]}):s.map((x,v)=>{var j;return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:typeof x.programa=="string"?x.programa:((j=x.programa)==null?void 0:j.nombre)||"Programa sin nombre"}),N(x)]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monto"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:parseFloat(x.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fecha Vencimiento"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:new Date(x.fecha_fin).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Saldo Pendiente"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:parseFloat(x.saldo_pendiente||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]})]}),x.pagos&&x.pagos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pagos Registrados:"}),e.jsx("div",{className:"space-y-2",children:x.pagos.map((D,H)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:parseFloat(D.monto||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["- ",new Date(D.fecha).toLocaleDateString()]})]}),D.token&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Token: ",D.token]})]},H))})]})]}),!x.esta_pagada&&e.jsx("div",{className:"ml-4",children:e.jsx(W,{variant:"primary",size:"sm",icon:e.jsx(xa,{className:"h-4 w-4"}),onClick:()=>b(x),children:"Pagar con QR"})})]})},v)})})]}),g&&e.jsx(hp,{isOpen:i,onClose:()=>{l(!1),h(null)},cuotaId:g.id,cuotaInfo:{saldo_pendiente:g.saldo_pendiente||g.monto,monto:g.monto,concepto:`Cuota - ${typeof g.programa=="string"?g.programa:((_=g.programa)==null?void 0:_.nombre)||"Programa"}`,fecha_ini:g.fecha_ini,fecha_inscripcion:g.fecha_inscripcion},onPaymentSuccess:p}),e.jsx(Fe,{isOpen:d,onClose:()=>{u(!1),k(null)},title:"Pago Confirmado",size:"md",children:y&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"h-12 w-12 text-green-600 dark:text-green-400"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Pago Confirmado Exitosamente!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Tu pago ha sido verificado y aplicado a tu cuenta"})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monto Pagado:"}),e.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(y.monto||0)})]}),y.nro_pago&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Nmero de Pago:"}),e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-gray-100",children:y.nro_pago})]}),y.fecha_verificacion&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Fecha de Pago:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(y.fecha_verificacion).toLocaleString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Notificacin Enviada"}),e.jsx("p",{children:"Se ha notificado automticamente al administrador sobre tu pago. Tu comprobante ha sido registrado en el sistema."})]})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(W,{variant:"primary",onClick:()=>{u(!1),k(null)},icon:e.jsx(Me,{className:"h-4 w-4"}),children:"Entendido"})})]})})]})},Ei={async getProgramasDisponibles(){var s,r;try{const a=await Re("/estudiante/inscripciones/programas-disponibles");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||I.ERROR_FETCH}}catch(a){return console.error("Error fetching programas disponibles:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||I.ERROR_FETCH}}},async verificarHorarios(s){var r,a;try{const t=await Be("/estudiante/inscripciones/verificar-horarios",{grupo_id:s});return t.data.success?{success:!0,tieneConflictos:t.data.tiene_conflictos,conflictos:t.data.conflictos||[],message:t.data.message}:{success:!1,message:t.data.message||"Error al verificar horarios"}}catch(t){return console.error("Error verificando horarios:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al verificar horarios"}}},async getMisInscripciones(s={}){var r,a;try{const t={page:s.page||1,per_page:s.per_page||15},n=await Re("/estudiante/inscripciones",t);return n.data.success?{success:!0,data:n.data.data,message:n.data.message}:{success:!1,message:n.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching mis inscripciones:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async getInscripcionById(s){var r,a;try{const t=await Re(`/estudiante/inscripciones/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||I.ERROR_FETCH}}catch(t){return console.error("Error fetching inscripcion:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||I.ERROR_FETCH}}},async crearInscripcion(s){var r,a,t,n;try{const o=await Be("/estudiante/inscripciones",s);return o.data.success?{success:!0,data:o.data.data,message:o.data.message||"Inscripcin realizada exitosamente"}:{success:!1,message:o.data.message||"Error al realizar inscripcin",errors:o.data.errors}}catch(o){return console.error("Error creando inscripcion:",o),{success:!1,message:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al realizar inscripcin",errors:(n=(t=o.response)==null?void 0:t.data)==null?void 0:n.errors}}},async getDescuentosDisponibles(){var s,r;try{const a=await Re("/estudiante/inscripciones/descuentos-disponibles");return a.data.success?{success:!0,data:a.data.data,message:a.data.message}:{success:!1,message:a.data.message||"Error al obtener descuentos"}}catch(a){return console.error("Error fetching descuentos:",a),{success:!1,message:((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Error al obtener descuentos"}}},async getReglasCuotas(s){var r,a;try{const t=await Re(`/estudiante/inscripciones/reglas-cuotas/${s}`);return t.data.success?{success:!0,data:t.data.data,message:t.data.message}:{success:!1,message:t.data.message||"Error al obtener reglas de cuotas"}}catch(t){return console.error("Error fetching reglas cuotas:",t),{success:!1,message:((a=(r=t.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al obtener reglas de cuotas"}}}},zk=()=>{var G,T;const[s,r]=c.useState([]),[a,t]=c.useState(!0),[n,o]=c.useState(!1),[i,l]=c.useState(null),[d,u]=c.useState(null),[g,h]=c.useState([]),[y,k]=c.useState(!1),[E,S]=c.useState(null),[C,b]=c.useState(!1),{register:p,handleSubmit:N,reset:_,watch:x,formState:{errors:v}}=Xe({defaultValues:{numero_cuotas:3}}),j=x("numero_cuotas");c.useEffect(()=>{D()},[]);const D=async()=>{var $,L,Y,M;try{t(!0);const ne=await Ei.getProgramasDisponibles();ne.success?r(ne.data||[]):(($=ne.message)!=null&&$.includes("documentos aprobados")?m.error("Debes tener tus documentos aprobados para poder inscribirte. Completa la verificacin de documentos primero."):m.error(ne.message||"Error al cargar programas"),r([]))}catch(ne){(M=(Y=(L=ne.response)==null?void 0:L.data)==null?void 0:Y.message)!=null&&M.includes("documentos aprobados")?m.error("Debes tener tus documentos aprobados para poder inscribirte. Completa la verificacin de documentos primero."):m.error("Error de conexin"),r([])}finally{t(!1)}},H=async($,L)=>{l($),u(L),h([]),S(null),_({programa_id:$.id,grupo_id:L.id,numero_cuotas:3}),b(!0);try{const Y=await Ei.getReglasCuotas($.id);if(Y.success){S(Y.data);const M=Y.data.min_cuotas||3;_({programa_id:$.id,grupo_id:L.id,numero_cuotas:M})}}catch(Y){console.error("Error cargando reglas de cuotas:",Y),S({min_cuotas:1,max_cuotas:12})}finally{b(!1)}k(!0);try{const Y=await Ei.verificarHorarios(L.id);Y.success?(Y.tieneConflictos&&(h(Y.conflictos||[]),m.error("Se encontraron conflictos de horario. Revisa los detalles en el modal.")),o(!0)):m.error(Y.message||"Error al verificar horarios")}catch(Y){console.error("Error verificando horarios:",Y),m.error("Error al verificar horarios. Intenta nuevamente.")}finally{k(!1)}},A=async $=>{var L;if(g.length>0){m.error("No puede inscribirse debido a conflictos de horario");return}try{t(!0);const Y={programa_id:i.id,grupo_id:d.id,numero_cuotas:parseInt($.numero_cuotas)},M=await Ei.crearInscripcion(Y);if(M.success){const ne=(L=M.data)==null?void 0:L.resumen;ne!=null&&ne.descuento_nombre&&(ne!=null&&ne.descuento_porcentaje)?m.success(`Inscripcin realizada exitosamente. Descuento aplicado: ${ne.descuento_nombre} (${ne.descuento_porcentaje}%)`,{duration:6e3}):m.success(M.message||"Inscripcin realizada exitosamente"),o(!1),l(null),u(null),h([]),S(null),_(),await D()}else m.error(M.message||"Error al realizar inscripcin"),M.errors&&Object.keys(M.errors).forEach(ne=>{m.error(`${ne}: ${M.errors[ne]}`)})}catch{m.error("Error al realizar inscripcin")}finally{t(!1)}},P=i?parseFloat(i.costo||0):0,R=P;return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(er,{})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-glow",children:e.jsx(ts,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Inscripciones"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Inscrbete en los programas acadmicos disponibles"})]})]}),s.length===0?e.jsx(ke,{className:"gradient",shadow:"glow-lg",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:a?"Cargando programas...":"No hay programas disponibles"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"Por favor espera...":"Actualmente no hay programas con grupos disponibles para inscripcin. Verifica que tus documentos estn aprobados."})]})}):e.jsx("div",{className:"space-y-6",children:s.map($=>e.jsxs(ke,{className:"gradient",shadow:"glow-lg",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-2",children:$.nombre}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Costo: ",parseFloat($.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Duracin: ",$.duracion_meses||0," meses"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsxs("span",{children:[$.total_grupos," grupo(s) disponible(s)"]})]})]}),$.institucion&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Institucin: ",$.institucion]})]})}),$.grupos_disponibles&&$.grupos_disponibles.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Rs,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"}),e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Grupos Disponibles (",$.grupos_disponibles.length,")"]})]}),$.grupos_disponibles.map(L=>e.jsx("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-xl p-5 hover:border-primary-300 dark:hover:border-primary-600 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-5",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:e.jsx(ys,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:L.modulo||"Grupo sin nombre"}),L.cupos_disponibles!==void 0&&e.jsx("div",{className:"flex items-center gap-2 mt-1",children:L.cupos_disponibles>0?e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full font-medium flex items-center gap-1",children:[e.jsx(Me,{className:"h-3 w-3"}),L.cupos_disponibles," cupo",L.cupos_disponibles!==1?"s":""," disponible",L.cupos_disponibles!==1?"s":""]}):e.jsx("span",{className:"text-xs px-2.5 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full font-medium",children:"Sin cupos disponibles"})})]})]})})}),L.docente&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(ir,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Docente Responsable"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:L.docente})]})]}),L.horarios&&L.horarios.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Horarios y Aulas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:L.horarios.map((Y,M)=>e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 dark:bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ga,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:Y.dias||"Sin das asignados"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[Y.hora_ini||"N/A"," - ",Y.hora_fin||"N/A"]})]}),Y.aula&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-blue-200 dark:border-blue-800",children:[e.jsx(Js,{className:"h-3.5 w-3.5 text-primary-600 dark:text-primary-400"}),e.jsxs("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:["Aula: ",Y.aula]})]})]})]})},M))})]}):e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Sin horarios asignados"]})}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Perodo del Grupo"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:L.fecha_ini?new Date(L.fecha_ini).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"font-medium",children:L.fecha_fin?new Date(L.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]})]})]})]}),e.jsx("div",{className:"flex lg:flex-col items-center lg:items-stretch gap-3 lg:min-w-[140px]",children:e.jsx(W,{variant:"primary",size:"md",onClick:()=>H($,L),disabled:L.cupos_disponibles===0,className:"w-full lg:w-auto",icon:e.jsx(Me,{className:"h-4 w-4"}),children:L.cupos_disponibles===0?"Sin Cupos":"Inscribirse"})})]})},L.id))]})]},$.id))}),e.jsx(Fe,{isOpen:n,onClose:()=>{o(!1),l(null),u(null),h([]),S(null),_()},title:"Confirmar Inscripcin",size:"lg",children:i&&d&&e.jsxs("form",{onSubmit:N(A),className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:i.nombre}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Grupo: ",d.modulo||"Grupo"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Costo: ",parseFloat(i.costo||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]}),g.length>0&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(ws,{className:"h-6 w-6 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-lg text-red-900 dark:text-red-100 mb-1",children:" Conflictos de Horario Detectados"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:"El horario del grupo seleccionado entra en conflicto con otros grupos en los que ya est inscrito. No puedes inscribirte en este grupo."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Horario del grupo seleccionado:"}),(G=d==null?void 0:d.horarios)==null?void 0:G.map(($,L)=>e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[$.dias," ",$.hora_ini," - ",$.hora_fin]},L))]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-2",children:"Conflictos con tus grupos actuales:"}),e.jsx("ul",{className:"space-y-2",children:g.map(($,L)=>{var Y,M,ne,oe,fe;return e.jsx("li",{className:"bg-white dark:bg-gray-800 rounded p-2 border border-red-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ls,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[(Y=$.grupo_conflicto)==null?void 0:Y.programa," - ",(M=$.grupo_conflicto)==null?void 0:M.modulo]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(ne=$.horario_conflicto)==null?void 0:ne.dias," ",(oe=$.horario_conflicto)==null?void 0:oe.hora_ini," - ",(fe=$.horario_conflicto)==null?void 0:fe.hora_fin]})]})]})},L)})})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100",children:" Solucin: Selecciona otro grupo con un horario diferente o cancela una inscripcin existente."})})]}),g.length===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-800 dark:to-slate-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Informacin del Programa"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Costo Base del Programa:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:P.toLocaleString("es-BO",{style:"currency",currency:"BOB"})})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:" El sistema aplicar automticamente cualquier descuento vigente para este programa al confirmar la inscripcin."}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Si hay descuentos activos, se mostrarn en el resumen despus de la inscripcin."})]})]})]}),E&&E.opciones_cuotas?e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nmero de Cuotas *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:E.opciones_cuotas.map($=>e.jsxs("label",{className:`relative flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${j==$.valor?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-600"}`,children:[e.jsx("input",{type:"radio",value:$.valor,...p("numero_cuotas",{required:"Debes seleccionar un nmero de cuotas"}),className:"sr-only"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:$.label}),$.sin_interes&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full",children:"Sin inters"})]})}),j==$.valor&&e.jsx(Me,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 ml-2"})]},$.valor))}),v.numero_cuotas&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:v.numero_cuotas.message}),E.descripcion&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.descripcion})]}):e.jsx(we,{label:"Nmero de Cuotas *",type:"number",min:"1",max:"12",placeholder:"3",error:(T=v.numero_cuotas)==null?void 0:T.message,...p("numero_cuotas",{required:"El nmero de cuotas es obligatorio",min:{value:1,message:"Mnimo 1 cuota"},max:{value:12,message:"Mximo 12 cuotas"}})}),j&&R>0&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Monto por cuota:"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:parseFloat(R/j||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[j," cuota",j!==1?"s":""," de ",parseFloat(R/j||0).toLocaleString("es-BO",{style:"currency",currency:"BOB"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>{o(!1),l(null),u(null),h([]),_()},children:"Cancelar"}),e.jsx(W,{type:"submit",variant:"primary",icon:e.jsx(Me,{className:"h-5 w-5"}),disabled:a||y,children:a?"Procesando...":"Confirmar Inscripcin"})]})]})]})})]})};function _i({children:s,requiredRoles:r=[]}){const{isAuthenticated:a,loading:t,user:n}=Ts(),o=Oa(),[i,l]=Ke.useState(!0);if(Ke.useEffect(()=>{console.log(" ProtectedRoute:",{path:o.pathname,isAuthenticated:a,loading:t,user:n?{id:n.id,rol:n.rol}:null,requiredRoles:r,isInitialCheck:i})},[o.pathname,a,t,n,r,i]),Ke.useEffect(()=>{const d=localStorage.getItem("token");l(!!(d&&!n&&!a))},[n,a]),t||i&&localStorage.getItem("token")&&!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(er,{})});if(!a){let d="/login";if(r.length>0){const u=Zs(r[0]);u===hs.ESTUDIANTE?d="/estudiante/login":u===hs.DOCENTE&&(d="/docente/login")}else o.pathname.startsWith("/estudiante")?d="/estudiante/login":o.pathname.startsWith("/docente")&&(d="/docente/login");return e.jsx(js,{to:d,state:{from:o},replace:!0})}if(r.length>0){const d=Zs(n==null?void 0:n.rol);if(!mm(d,r))return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-error-100",children:e.jsx("svg",{className:"h-6 w-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"mt-4 text-lg font-medium text-gray-900",children:"Acceso denegado"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes permisos para acceder a esta pgina."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>window.history.back(),className:"btn btn-primary",children:"Volver"})})]})})}return s}const Ze=({allowedRoles:s=[],children:r})=>{const{user:a,isAuthenticated:t}=Ts(),n=Oa();if(!t){let i="/login";if(n.pathname.startsWith("/estudiante"))i="/estudiante/login";else if(n.pathname.startsWith("/docente"))i="/docente/login";else if(s.length>0){const l=Zs(s[0]);l===hs.ESTUDIANTE?i="/estudiante/login":l===hs.DOCENTE&&(i="/docente/login")}return e.jsx(js,{to:i,replace:!0})}if(!s||s.length===0)return r;if(!mm(a==null?void 0:a.rol,s)){const i=Zs(a==null?void 0:a.rol);let l="/dashboard";return i===hs.ESTUDIANTE?l="/estudiante/dashboard":i===hs.DOCENTE?l="/docente/dashboard":i===hs.ADMIN&&(l="/admin/dashboard"),e.jsx(js,{to:l,replace:!0})}return r},$k=()=>{const{isAuthenticated:s,user:r}=Ts();return e.jsxs(Lj,{children:[e.jsx(ze,{path:"/",element:e.jsx(h1,{})}),e.jsx(ze,{path:"/portales",element:e.jsx(f1,{})}),e.jsx(ze,{path:"/docente/login",element:s&&(r==null?void 0:r.rol)==="DOCENTE"?e.jsx(js,{to:"/docente/dashboard",replace:!0}):e.jsx($1,{})}),e.jsx(ze,{path:"/docente/cambiar-password",element:e.jsx(Rk,{})}),e.jsx(ze,{path:"/estudiante/login",element:s&&(r==null?void 0:r.rol)==="ESTUDIANTE"?e.jsx(js,{to:"/estudiante/dashboard",replace:!0}):e.jsx(U1,{})}),e.jsx(ze,{path:"/estudiante/registro",element:s&&(r==null?void 0:r.rol)==="ESTUDIANTE"?e.jsx(js,{to:"/estudiante/dashboard",replace:!0}):e.jsx(B1,{})}),e.jsx(ze,{path:"/login",element:s&&r?(()=>{const a=Zs(r==null?void 0:r.rol);return a===hs.ADMIN?e.jsx(js,{to:"/admin/dashboard",replace:!0}):a===hs.DOCENTE?e.jsx(js,{to:"/docente/dashboard",replace:!0}):a===hs.ESTUDIANTE?e.jsx(js,{to:"/estudiante/dashboard",replace:!0}):e.jsx(Ax,{})})():e.jsx(Ax,{})}),e.jsx(ze,{path:"/notificaciones",element:s&&r?(()=>{const a=Zs(r==null?void 0:r.rol);return a===hs.ADMIN?e.jsx(js,{to:"/admin/notificaciones",replace:!0}):a===hs.DOCENTE?e.jsx(js,{to:"/docente/notificaciones",replace:!0}):a===hs.ESTUDIANTE?e.jsx(js,{to:"/estudiante/notificaciones",replace:!0}):e.jsx(js,{to:"/login",replace:!0})})():e.jsx(js,{to:"/login",replace:!0})}),e.jsx(ze,{path:"/perfil",element:e.jsx(_i,{children:(()=>{if(!s||!r)return e.jsx(js,{to:"/login",replace:!0});const a=Zs(r==null?void 0:r.rol);return a===hs.ADMIN?e.jsx(js,{to:"/admin/perfil",replace:!0}):a===hs.DOCENTE?e.jsx(js,{to:"/docente/perfil",replace:!0}):a===hs.ESTUDIANTE?e.jsx(js,{to:"/estudiante/perfil",replace:!0}):e.jsx(js,{to:"/login",replace:!0})})()})}),e.jsxs(ze,{path:"/admin",element:e.jsx(_i,{requiredRoles:["ADMIN"],children:e.jsx(Fc,{})}),children:[e.jsx(ze,{index:!0,element:e.jsx(js,{to:"/admin/dashboard",replace:!0})}),e.jsx(ze,{path:"dashboard",element:e.jsx(q1,{})}),e.jsx(ze,{path:"usuarios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(G1,{})})}),e.jsx(ze,{path:"roles",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(sk,{})})}),e.jsx(ze,{path:"bitacora",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(rk,{})})}),e.jsx(ze,{path:"docentes",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Tx,{})})}),e.jsx(ze,{path:"estudiantes",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(ak,{})})}),e.jsx(ze,{path:"programas",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Ix,{})})}),e.jsx(ze,{path:"inscripciones",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(tk,{})})}),e.jsx(ze,{path:"pagos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(ok,{})})}),e.jsx(ze,{path:"planes-pago",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Nk,{})})}),e.jsx(ze,{path:"descuentos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(wk,{})})}),e.jsx(ze,{path:"gestion-pagos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(kk,{})})}),e.jsx(ze,{path:"documentos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(zx,{})})}),e.jsx(ze,{path:"validacion-documentos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(zx,{})})}),e.jsx(ze,{path:"tipos-documento",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(jk,{})})}),e.jsx(ze,{path:"materias",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(ik,{})})}),e.jsx(ze,{path:"gestiones-academicas",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(hk,{})})}),e.jsx(ze,{path:"aulas",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(lk,{})})}),e.jsx(ze,{path:"grupos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Fx,{})})}),e.jsx(ze,{path:"horarios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Ox,{})})}),e.jsx(ze,{path:"asistencias",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(uk,{})})}),e.jsx(ze,{path:"reportes",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(mk,{})})}),e.jsx(ze,{path:"notificaciones",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Wc,{})})}),e.jsx(ze,{path:"auditoria",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(xk,{})})}),e.jsx(ze,{path:"paises",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(fk,{})})}),e.jsx(ze,{path:"provincias",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(pk,{})})}),e.jsx(ze,{path:"ciudades",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(yk,{})})}),e.jsx(ze,{path:"instituciones",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(bk,{})})}),e.jsx(ze,{path:"sistema-usuarios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Q1,{})})}),e.jsx(ze,{path:"tipo-convenios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(W1,{})})}),e.jsx(ze,{path:"convenios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(K1,{})})}),e.jsx(ze,{path:"ramas-academicas",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Z1,{})})}),e.jsx(ze,{path:"versiones",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Y1,{})})}),e.jsx(ze,{path:"tipos-programa",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(J1,{})})}),e.jsx(ze,{path:"modulos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(X1,{})})}),e.jsx(ze,{path:"programas",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Ix,{})})}),e.jsx(ze,{path:"docentes",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Tx,{})})}),e.jsx(ze,{path:"horarios",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Ox,{})})}),e.jsx(ze,{path:"grupos",element:e.jsx(Ze,{allowedRoles:["ADMIN"],children:e.jsx(Fx,{})})}),e.jsx(ze,{path:"perfil",element:e.jsx(Gc,{})})]}),e.jsxs(ze,{path:"/docente",element:e.jsx(_i,{requiredRoles:["DOCENTE"],children:e.jsx(Fc,{})}),children:[e.jsx(ze,{index:!0,element:e.jsx(js,{to:"/docente/dashboard",replace:!0})}),e.jsx(ze,{path:"dashboard",element:e.jsx(_k,{})}),e.jsx(ze,{path:"grupos",element:e.jsx(Ze,{allowedRoles:["DOCENTE"],children:e.jsx(Sk,{})})}),e.jsx(ze,{path:"grupos/:grupoId",element:e.jsx(Ze,{allowedRoles:["DOCENTE"],children:e.jsx(Ck,{})})}),e.jsx(ze,{path:"notificaciones",element:e.jsx(Ze,{allowedRoles:["DOCENTE"],children:e.jsx(Wc,{})})}),e.jsx(ze,{path:"perfil",element:e.jsx(Gc,{})})]}),e.jsxs(ze,{path:"/estudiante",element:e.jsx(_i,{requiredRoles:["ESTUDIANTE"],children:e.jsx(Fc,{})}),children:[e.jsx(ze,{index:!0,element:e.jsx(js,{to:"/estudiante/dashboard",replace:!0})}),e.jsx(ze,{path:"dashboard",element:e.jsx(Dk,{})}),e.jsx(ze,{path:"materias",element:e.jsx(Tk,{})}),e.jsx(ze,{path:"notas",element:e.jsx(Ok,{})}),e.jsx(ze,{path:"documentos",element:e.jsx(Ik,{})}),e.jsx(ze,{path:"mis-documentos",element:e.jsx(Fk,{})}),e.jsx(ze,{path:"pagos",element:e.jsx(Mk,{})}),e.jsx(ze,{path:"mis-pagos",element:e.jsx(Lk,{})}),e.jsx(ze,{path:"inscripciones",element:e.jsx(zk,{})}),e.jsx(ze,{path:"notificaciones",element:e.jsx(Ze,{allowedRoles:["ESTUDIANTE"],children:e.jsx(Wc,{})})}),e.jsx(ze,{path:"perfil",element:e.jsx(Gc,{})})]}),e.jsx(ze,{path:"*",element:e.jsx(V1,{})})]})};function Uk(){return e.jsx(Hw,{children:e.jsx(Uw,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-300",children:e.jsx($k,{})})})})}const Bk=new xv({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});Kc.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(bv,{client:Bk,children:e.jsxs(Hj,{children:[e.jsx(Uk,{}),e.jsx(iN,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
//# sourceMappingURL=index-BASTI2xN.js.map
